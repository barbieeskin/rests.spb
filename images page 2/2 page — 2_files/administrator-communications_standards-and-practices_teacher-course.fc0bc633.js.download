(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{4012:function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return f})),r.d(t,"a",(function(){return g})),r.d(t,"e",(function(){return _})),r.d(t,"f",(function(){return h})),r.d(t,"d",(function(){return C}));var n=r(7),a=r.n(n),i=r(5),o=r(1474);function c(){var e=a()(["\n  query getNewCircularCount($ids: [ID!], $filters: CircularFilter) {\n    platform {\n      familyMember(ids: $ids) {\n        circular(count: 1, filters: $filters) {\n          newCircularCount\n          unreadCount\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=a()(["\n  query getNewCircularCount($ids: [ID!], $filters: CircularFilter) {\n    platform {\n      student(ids: $ids) {\n        circular(count: 1, filters: $filters) {\n          newCircularCount\n          unreadCount\n          edges {\n            node {\n              title\n              publishedAt\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function l(){var e=a()(["\n  query getNewCircularCount($ids: [ID!], $filters: CircularFilter) {\n    platform {\n      staff(ids: $ids) {\n        circular(count: 1, filters: $filters) {\n          newCircularCount\n          unreadCount\n          edges {\n            node {\n              title\n              createdAt\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=a()(["\n  mutation deleteCircular($id: ID!) {\n    school {\n      deleteCircular(input: { id: $id }) {\n        isSuccess\n      }\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=a()(["\n  query getCircularsFeed(\n    $organizationId: ID!\n    $count: Int\n    $after: String\n    $filters: CircularFilter\n  ) {\n    node(id: $organizationId, type: ORGANIZATION) {\n      id\n      ... on Organization {\n        ...organizationCircularFeedItem\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function m(){var e=a()(["\n  query getCircular($id: ID!) {\n    node(id: $id, type: CIRCULAR) {\n      id\n      ... on Circular {\n        ...circularsItemDetail\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var p=Object(i.a)(m(),o.a.circularDetails),f=Object(i.a)(d(),o.b.organizationCircularFeed),g=Object(i.a)(s()),_=Object(i.a)(l()),h=Object(i.a)(u()),C=Object(i.a)(c())},4057:function(e,t,r){"use strict";r.r(t),r.d(t,"getCircularFilters",(function(){return E})),r.d(t,"getCircularFiltersMemoize",(function(){return j})),r.d(t,"NAME",(function(){return A})),r.d(t,"SET_ALL_STATUS",(function(){return D})),r.d(t,"TOGGLE_STATUS",(function(){return w})),r.d(t,"UPDATE_ATTACHMENTS",(function(){return P})),r.d(t,"REMOVE_ATTACHMENT_LINK",(function(){return L})),r.d(t,"IS_FILE_UPLOADING",(function(){return k})),r.d(t,"UPDATE_CIRCULAR_OBJECT",(function(){return x})),r.d(t,"EMPTY_OBJECT",(function(){return F})),r.d(t,"UPDATE_TOTAL_ATTACHMENT_LOADING",(function(){return B})),r.d(t,"SET_PUBLISH_STATUS_CIRCULARS",(function(){return N})),r.d(t,"UPDATE_CIRCULAR_ID",(function(){return M})),r.d(t,"SET_OBJECT",(function(){return U})),r.d(t,"UPDATE_FILTER_OBJECT",(function(){return R})),r.d(t,"updateCircularObject",(function(){return Y})),r.d(t,"updateAttachments",(function(){return H})),r.d(t,"removeAttachmentLink",(function(){return z})),r.d(t,"isFileUploading",(function(){return $})),r.d(t,"emptyObject",(function(){return W})),r.d(t,"setObject",(function(){return V})),r.d(t,"updateTotalAttachmentLoading",(function(){return q})),r.d(t,"setPublishStatusCirculars",(function(){return G})),r.d(t,"updateCircularId",(function(){return J})),r.d(t,"setAllStatus",(function(){return Q})),r.d(t,"toggleStatus",(function(){return K})),r.d(t,"updateFilterObject",(function(){return Z})),r.d(t,"changeSelectedCircular",(function(){return X})),r.d(t,"goBackToPreviousScreen",(function(){return ee})),r.d(t,"saveObject",(function(){return te})),r.d(t,"deleteCircular",(function(){return re})),r.d(t,"circularReadMutation",(function(){return ne})),r.d(t,"default",(function(){return oe}));var n,a=r(6),i=r.n(a),o=r(1),c=r.n(o),u=r(13),l=r.n(u),s=(r(584),r(25)),d=r.n(s),m=r(2),p=r.n(m),f=(r(213),r(28)),g=r.n(f),_=r(4012),h=r(10),C=r(4058),b=r(15),v=r(74),O=r(117),y=r(26),I=r(1703);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=function(e){var t=e.filters,r=e.status,n=e.includeSearch,a=void 0===n||n,i=e.activeTab,o=e.currentCurriculumProgramId,c=e.academicYearSelected,u=void 0===c?{}:c,l=u.endDate,s=u.startDate,d={};return d.searchText=a?p.a.get(t,"searchText",""):"",d.visibility=p.a.get(t,"visibility",void 0),d.states=r,"admin"!=i&&o&&(d.curriculumProgramIds=[o]),l&&s&&(d.createdAfter=Object(v.i)({date:s,format:"YYYY-MM-DD"}),d.createdBefore=Object(v.i)({date:l,format:"YYYY-MM-DD"})),d},j=p.a.memoize((function(e){return E(e)}),(function(e){return JSON.stringify(e)})),A="circulars",D="SET_ALL_STATUS "+A,w="TOGGLE_STATUS "+A,P="UPDATE_ATTACHMENTS "+A,L="REMOVE_ATTACHMENT_LINK "+A,k="IS_FILE_UPLOADING "+A,x="UPDATE_CIRCULAR_OBJECT "+A,F="EMPTY_OBJECT "+A,B="UPDATE_TOTAL_ATTACHMENT_LOADING "+A,N="SET_PUBLISH_STATUS_CIRCULARS "+A,M="UPDATE_CIRCULAR_ID "+A,U="SET_OBJECT "+A,R="UPDATE_FILTER_OBJECT "+A,Y=function(e){return{type:x,payload:e}},H=function(e){return{type:P,payload:e}},z=function(e){return{type:L,payload:e}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:k,payload:e}},W=function(){return{type:F}},V=function(e){return{type:U,payload:e}},q=function(e){return{type:B,payload:e}},G=function(e){return{type:N,payload:e}},J=function(e){return{type:M,payload:e}},Q=function(e){return{type:D,payload:e}},K=function(e){return{type:w,payload:e}},Z=function(e){return{type:R,data:e}},X=function(e){var t=e.id,r=e.type,n=void 0===r?"push":r;return function(e,r){e(Object(y.Ab)({route:"replace"==n?t:"../".concat(t),type:n}))}},ee=function(){return function(e,t){var r=t().teacher.activeTab||"unitPlans",n="admin"==t().login.activeTab;e(Object(y.Ab)({route:n?"":r,replacePath:"circulars"}))}},te=function(e){return function(t,r){var n={};n.id=e.id,n.title=e.title,n.description=e.description,n.courses=p.a.map(e.courses,(function(e){return e.id})),n.attachments=p.a.map(e.attachments,(function(e,t){return p.a.omit(e,["__typename","streamUrl","isRead","questionAttachment"])})),n.isPublished=e.isPublished,n.publishedAt=d()(e.publishedAt),n.sharedWith=e.sharedWith||[],n.sendEmail=e.sendEmail,t(V(n))}},re=function(e){var t=e.circularId,r=e.filters,n=e.count,a=e.goToNextItem,o=e.nextItemId;return function(){var e=l()(i.a.mark((function e(c,u){var l,s,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=u().login.userInfo.org_id,s=Object(C.c)({organizationId:l,filters:r,count:n}),e.prev=2,e.next=5,h.a.mutate({mutation:_.a,variables:{id:t}});case 5:d=S({},s||{},{circularFeed:S({},p.a.get(s,"circularFeed",{}),{edges:p.a.filter(p.a.get(s,"circularFeed.edges",[]),(function(e){return p.a.get(e,"node.id","")!=t})),totalCount:p.a.get(s,"circularFeed.totalCount",0)-1})}),setTimeout((function(){Object(C.h)({organizationId:l,filters:r,count:n,data:d})})),c(Object(b.nb)({type:"success",msg:"toastMsgs:announcement_success_delete_msg"})),p.a.isEmpty(o)?c(Object(y.Ab)({route:"../",type:"replace"})):a(o),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),setTimeout((function(){Object(C.h)({organizationId:l,filters:r,count:n,data:s})})),c(Object(b.nb)("toastMsgs:something_went_wrong"));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,r){return e.apply(this,arguments)}}()},ne=function(e){var t=e.circularIds,r=e.curriculumProgramIds;return function(e,n){var a=n(),i=p.a.get(a,"login.userInfo"),o=i.user_type,c=i.id,u=i.org_id,l=p.a.get(a,"platform.currentCurriculumProgram.id",null),s=Object(y.X)({organizationId:u}),d=p.a.get(a,"platform.academicYearSelected",s),m=function(e){var t=e.userId,r=e.userType,n=[],a={ids:t,filters:S({},e.circularFilters)};switch(r){case"student":n=[{query:_.f,variables:a}];break;case"staff":n=[{query:_.e,variables:a}];break;case"parent":n=[{query:_.d,variables:a}]}return n}({userId:c,userType:o,circularFilters:E({academicYearSelected:d,status:"staff"===o?void 0:"PUBLISHED",currentCurriculumProgramId:l})});h.a.mutate({mutation:I.c,variables:{isMarkAllRead:!1,circularIds:t,curriculumProgramIds:r},refetchQueries:m,update:function(e,r){if(r.data.platform.markCircularReadForUser){var n=Object(C.a)(t);n.isRead=!0,Object(C.g)({circularId:t,data:n})}}}).then((function(e){})).catch((function(e){}))}},ae=(n={},c()(n,R,(function(e,t){var r=t.data;return Object.keys(r).map((function(t,n){e=g()(e,{filters:c()({},t,{$set:r[t]})})})),e})),c()(n,D,(function(e,t){return g()(e,{status:{$set:t.payload}})})),c()(n,w,(function(e,t){return g()(e,{status:{$set:t.payload}})})),c()(n,P,(function(e,t){return g()(e,{displayObject:{attachments:{$set:t.payload}}})})),c()(n,L,(function(e,t){return g()(e,{displayObject:{attachments:{$splice:[[t.payload.index,1]]}}})})),c()(n,F,(function(e,t){var r=g()(e,{displayObject:{$set:S({},ie.displayObject,{id:Object(O.a)()})}});return g()(r,{displayObject:{publishedAt:{$set:d()()}}})})),c()(n,U,(function(e,t){return g()(e,{displayObject:{$set:t.payload}})})),c()(n,x,(function(e,t){var r=t.payload;return Object.keys(r).map((function(t,n){e=g()(e,{displayObject:c()({},t,{$set:r[t]})})})),e})),c()(n,B,(function(e,t){return g()(e,{totalAttachmentsUploading:{$set:e.totalAttachmentsUploading+t.payload}})})),c()(n,M,(function(e,t){return g()(e,{circularId:{$set:t.payload}})})),n),ie={searchTerm:"",grades:[],status:[],displayObject:{title:"",description:"",grades:[],sharedWith:[],attachments:[],isPublished:!1,publishedAt:d()(),courses:[],sendEmail:!1},totalAttachmentsUploading:0,circularId:"",filters:{visibility:void 0,searchText:""}};function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0,r=ae[t.type];return r?r(e,t):e}},4058:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"h",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return s})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return m})),r.d(t,"a",(function(){return p}));var n=r(4012),a=r(10),i=r(1474),o=function(e){var t=e.organizationId,r=e.filters,i=e.count,o={};try{o=a.a.readQuery({query:n.c,variables:{organizationId:t,count:i,filters:r}})}catch(c){return{}}return null!=o?_.get(o,"node",{}):{}},c=function(e){var t=e.organizationId,r=e.filters,n=e.count,o=e.data;try{a.a.writeFragment({id:"Organization:".concat(t),fragment:i.b.organizationCircularFeed,fragmentName:"organizationCircularFeedItem",variables:{organizationId:t,filters:r,count:n},data:o})}catch(c){}},u=function(e){var t=e.id,r={};try{r=a.a.readQuery({query:n.b,variables:{id:t}})}catch(i){return!1}return null!=r?_.get(r,"node",{}):{}},l=function(e){var t=e.ids,r=e.filters,i={};try{i=a.a.readQuery({query:n.e,variables:{ids:t,filters:r}})}catch(o){return[]}return null!=i?_.get(i,"platform.staff",[]):[]},s=function(e){var t=e.ids,r=e.filters,i={};try{i=a.a.readQuery({query:n.d,variables:{ids:t,filters:r}})}catch(o){return[]}return null!=i?_.get(i,"platform.familyMember",[]):[]},d=function(e){var t=e.ids,r=e.filters,i={};try{i=a.a.readQuery({query:n.f,variables:{ids:t,filters:r}})}catch(o){return[]}return null!=i?_.get(i,"platform.student",[]):[]},m=function(e){var t=e.circularId,r=e.data;a.a.writeFragment({id:"Circular:".concat(t),fragment:i.a.circularsFeed,fragmentName:"circularsItem",data:r})},p=function(e){var t={};try{t=a.a.readFragment({id:"Circular:".concat(e),fragment:i.a.circularsFeed,fragmentName:"circularsItem"})}catch(r){return{}}return t||{}}},4059:function(e,t,r){e.exports={container:"GroupSelectDropdown__container___YjQ4-"}},4228:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(253),a=r.n(n),i=r(2),o=r.n(i),c=r(25),u=r.n(c),l=function(e,t){return s(o.a.cloneDeep(e),t,"string")};function s(e,t,r){for(var n in e){o.a.indexOf(t,n)>=0?"moment"==r?e[n]?e[n]=u()(e[n]):e[n]=u()():e[n]?e[n]=e[n].toISOString():e[n]=u()().toISOString():"object"===a()(e[n])&&s(e[n],t,r)}return e}},4520:function(e,t,r){"use strict";var n=r(18),a=r.n(n),i=r(20),o=r.n(i),c=r(21),u=r.n(c),l=r(22),s=r.n(l),d=r(4),m=r.n(d),p=r(23),f=r.n(p),g=r(1),h=r.n(g),C=r(0),b=r.n(C),v=r(3),O=r.n(v),y=r(3653),I=r(3895),T=r(49),S=r(4059),E=r.n(S),j=r(3673);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){h()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w={containerStyle:{width:"100%",flex:1,minHeight:0,marginTop:"24px",borderRadius:"4px",marginBottom:"8px",maxHeight:"368px",overflowY:"auto",padding:"24px"},buttonParentStyle:{width:"100%",flexDirection:"column",height:"100%"},parentContainerStyle:{height:"100%"}},P={tagListContainer:{marginTop:"0px"},searchBarWithTagContainer:{alignItems:"center",padding:"8px 0px 8px 16px"},searchBarContainer:{width:"100%",paddingLeft:"0 12px 0 0"},tag:{container:{margin:"4px 8px 4px 0",maxHeight:"32px"}}},L={checkboxItemStyle:{width:"18px",height:"18px",borderRadius:"4px"}},k=function(e){function t(e){var r;return o()(this,t),r=u()(this,s()(t).call(this,e)),h()(m()(r),"updateSearchText",(function(e){return r.setState({searchText:e})})),h()(m()(r),"removeOption",(function(e,t){t&&t.stopPropagation();var n=_.filter(r.props.value,(function(t){return t!=e.value}));r.updateValue(n)})),h()(m()(r),"filterOptions",(function(){var e=r.props.options,t=r.state.searchText,n=[];return _.forEach(e,(function(e){if(_.includes(_.lowerCase(e.label),_.lowerCase(t)))n.push(D({},e));else{var r=_.filter(e.options,(function(e){return _.includes(_.lowerCase(e.label),_.lowerCase(t))}));r.length&&n.push({label:e.label,options:r})}})),n})),h()(m()(r),"getSelectedTags",(function(){var e=r.props,t=e.options,n=e.value,a=[];return _.forEach(t,(function(e){_.forEach(e.options,(function(e){_.includes(n,e.value)&&!_.find(a,(function(t){return t.value==e.value}))&&a.push(e)}))})),a})),h()(m()(r),"renderEdit",(function(){var e=r.state,t=e.error,n=e.searchText,i=r.props,o=i.placeholder,c=i.value,u=i.options,l=i.checkboxGroupName,s=i.onFocusInputField,d=i.searchBarStyles,m=r.getSelectedTags();return b.a.createElement("div",{className:E.a.container},b.a.createElement(y.a,a()({},w,{buttonComponent:b.a.createElement(I.a,{removeOption:r.removeOption,ref:function(e){return r.inputSearchBar=e},placeholder:o,error:t,showErrorText:!1,value:m,searchText:n,onSearchChange:r.updateSearchText,showArrow:!0,styles:D({},P,{},d),onFocusInputField:s,tagTheme:"black",inlineView:!0}),dropdownComponent:b.a.createElement(j.a,{options:n.length?r.filterOptions():u,value:c,updateInputField:r.updateValue,searchText:n,checkboxGroupName:l,checkboxItemStyle:L.checkboxItemStyle}),shouldCloseOnSelfClick:!1})))})),r.state=D({},r.state,{searchText:"",error:""}),r.inputSearchBar=Object(C.createRef)(null),r}return f()(t,e),t}(T.a);k.defaultProps=D({},T.a.defaultProps,{options:[],searchBarStyles:{}}),k.propTypes=D({},T.a.propTypes,{options:O.a.array});var x=k;t.a=x},4648:function(e,t,r){"use strict";r.r(t),r.d(t,"CIRULAR_STATUS",(function(){return Re})),r.d(t,"CIRULAR_SHARED_WITH",(function(){return Ye}));var n=r(19),a=r.n(n),i=r(1),o=r.n(i),c=r(27),u=r(20),l=r.n(u),s=r(31),d=r.n(s),m=r(21),p=r.n(m),f=r(22),g=r.n(f),h=r(4),C=r.n(h),b=r(23),v=r.n(b),O=(r(3),r(0)),y=r.n(O),I=r(5165),T=r.n(I),S=r(1659),E=r(1412),j=r(413),A=r(6531),D=r(439),w=r(5166),P=r.n(w),L=r(3632),k=r(8),x=r(637),F=r(84),B=r(69),N=r(3866),M=r(88),U=function(e){function t(){return l()(this,t),p()(this,g()(t).apply(this,arguments))}return v()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.onBackClick,r=e.onCreateClick,n=e.t,a=e.userType,i=e.isCircularCreationAllowed,o="staff"===a,c=(0,e.getIsCurrentAcademicYear)();return y.a.createElement("div",{className:P.a.container},y.a.createElement("div",{className:P.a.leftContainer},y.a.createElement("div",{className:P.a.logoContainer,onClick:t},y.a.createElement("div",{className:P.a.chevronIconContainer},y.a.createElement(k.ChevronLeftOutlined,{variant:"subtle",size:"xx-small"})),y.a.createElement(L.a,null)),y.a.createElement("div",{className:P.a.titleText,onClick:t},n("announcement:announcements"))),y.a.createElement("div",{className:P.a.buttonsContainer},i&&o&&y.a.createElement(N.a,{isCurrentAcademicYear:c,placement:"topLeft"},y.a.createElement(x.a,{size:"sm",type:"filled",color:"pink",onClick:r,isDisabled:!c},n("common:create_new_with_label",{label:n("announcement:announcement")})))))}}]),t}(y.a.PureComponent),R={getIsCurrentAcademicYear:M.getIsCurrentAcademicYear},Y=Object(F.c)(Object(j.a)({resource:["announcement","common"]}),Object(c.connect)((function(e){var t=e.login.activeTab,r=Object(B.e)({name:"EnableAnnouncementCreation",courseId:e.teacher.selected_class.selected_course,organizationId:e.login.userInfo.org_id,userId:e.login.userInfo.id,userEntityType:e.login.userInfo.userEntityType})||"admin"===t;return{userType:e.login.userInfo.user_type,isCircularCreationAllowed:r}}),R))(U),H=r(902),z=r(18),$=r.n(z),W=r(5167),V=r.n(W),q=r(5168),G=r.n(q),J=r(5169),Q=r.n(J),K=r(12),Z=r.n(K),X=r(3625),ee=r(851),te=r(3650),re=r(2255),ne=r(3653),ae=r(36),ie=r(41),oe=r(3657),ce=r(3908);function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var le={borderWidth:0,width:24,height:24},se={marginTop:0,width:"max-content",minWidth:120,right:0},de={height:40},me=function(e){function t(){var e,r;l()(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=p()(this,(e=g()(t)).call.apply(e,[this].concat(a))),o()(C()(r),"onActionClick",(function(e){var t=r.props;(0,t.onActionClick)({action:e,item:t.item,nextItemId:t.nextItemId})})),o()(C()(r),"onItemClick",(function(){var e=r.props;(0,e.updatedSelectedId)(e.item.id)})),r}return v()(t,e),d()(t,[{key:"render",value:function(){var e,t=this.props,r=t.item,n=t.labelBgColor,a=t.isSelected,i=t.activeTab,c=t.userId,u=t.t,l=t.userType,s=r.title,d=r.description,m=r.courses,p=r.state,f=r.publishedAt,g=r.createdBy,h=g.id,C=g.firstName,b=g.lastName,v=g.profileImage,O=r.isRead,I=r.isV2,T=ae.a.can("AdminPortal"),S=["student"===l?null:{label:"edit",value:"EDIT",svg:null,isDisable:!1},{label:"delete",value:"DELETE",svg:null,isDisable:!1}],E=Z()((e={},o()(e,Q.a.container,!0),o()(e,Q.a.containerSelected,a),o()(e,Q.a.containerNotRead,I&&!O&&!a&&"PUBLISHED"==p),e));return y.a.createElement("div",{className:E,onClick:this.onItemClick},y.a.createElement("div",{className:Q.a.titleContainer},I&&"PUBLISHED"==p&&!O?y.a.createElement("div",{className:Q.a.readDot}):null,y.a.createElement("div",{className:Q.a.titleText},s),"DRAFT"==p?y.a.createElement("div",{className:Q.a.labelContainer,style:{backgroundColor:n}},u("draft")):y.a.createElement("div",{className:Q.a.dateContainer},Object(X.e)(new Date(f),u))),y.a.createElement("div",{className:Q.a.descriptionText,dangerouslySetInnerHTML:{__html:Object(ee.a)(d,{wordwrap:130,uppercaseHeadings:!1,tags:{a:{options:{ignoreHref:!0}},ul:{options:{itemPrefix:" "}}}})}}),y.a.createElement("div",{className:Q.a.bottomContainer},y.a.createElement("div",{className:Q.a.bottomLeftContainer},y.a.createElement(te.a,{items:[{id:h,value:C,imageUrl:v}],customStyle:le}),y.a.createElement("div",{className:Q.a.textItemContainer},y.a.createElement(re.a,{tooltip:"".concat(C," ").concat(b),placement:"top",href:"#"},y.a.createElement("div",{className:Q.a.textContainer,style:{borderRight:"1px solid ".concat(ie.e.strokeTwo)}},"".concat(C,"  ").concat(b))),_.size(m)>0&&y.a.createElement("div",{className:Q.a.textContainer},y.a.createElement(ce.a,{data:m,tooltipPlacement:"bottom",length:1,label:u("common:classes"),keyToMap:"title",trigger:["hover"]})))),("admin"==i||h==c||T)&&y.a.createElement(oe.a,null,y.a.createElement(ne.a,{authTabs:_.map(_.filter(S,(function(e){return!!e})),(function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{label:u(e.label)})})),containerStyle:se,itemStyle:de,onItemClick:this.onActionClick}))),a&&y.a.createElement("div",{className:Q.a.selectedItem}))}}]),t}(y.a.PureComponent),pe=Object(F.c)(Object(j.a)({resource:"common"}),Object(c.connect)((function(e){return{userType:e.login.userInfo.user_type}}),null))(me),fe=function(e){function t(){return l()(this,t),p()(this,g()(t).apply(this,arguments))}return v()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.items,r=e.label,n=e.totalCount,a=e.onActionClick,i=e.labelBgColor,o=e.updatedSelectedId,c=e.selectedId,u=e.activeTab,l=e.userId,s=e.t;return y.a.createElement("div",{className:G.a.container},n>0&&y.a.createElement("div",{className:G.a.headerContainer},"".concat(r,"  ").concat(s("announcement_plural")," (").concat(n,")")),_.map(t,(function(e,n){var s=function(e){var t,r,n,a,i=e.items,o=e.idx;return o===e.totalAnnouncements-1?0===o?null:null===(n=i[o-1])||void 0===n||null===(a=n.node)||void 0===a?void 0:a.id:null===(t=i[o+1])||void 0===t||null===(r=t.node)||void 0===r?void 0:r.id}({items:t,idx:n,totalAnnouncements:_.size(t)});return y.a.createElement(pe,{key:e.node.id,item:e.node,onActionClick:a,label:r,labelBgColor:i,updatedSelectedId:o,isSelected:c==e.node.id,activeTab:u,userId:l,nextItemId:s})})))}}]),t}(y.a.PureComponent),ge=Object(F.c)(Object(j.a)({resource:"common"}))(fe),_e=r(1405),he=r(848),Ce=r(2217),be=r(3721),ve={customStyle:{paddingLeft:16,paddingRight:8,padding:0,borderWidth:0,flexShrink:0,minHeight:16,width:"unset",flex:1,marginRight:16}},Oe={buttonDropDownContainerStyle:{top:40,right:0,minWidth:120,maxWidth:300,maxHeight:300,overflowY:"auto"}},ye=function(e){function t(){var e,r;l()(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=p()(this,(e=g()(t)).call.apply(e,[this].concat(a))),o()(C()(r),"componentDidMount",(function(){var e=r.props,t=e.selectedId,n=e.updatedSelectedId;(e.filters||{}).visibility||r.onDropdownItemClick("ALL"),t||n(r.getInitialSelectedId())})),o()(C()(r),"getInitialSelectedId",(function(){var e=r.props,t=e.draftCirculars,n=e.publishedCirculars;return _.get(t,"length",0)>0?_.get(t[0],"node.id",void 0):_.get(n,"length",0)>0?_.get(n[0],"node.id",void 0):void 0})),o()(C()(r),"getButtonComponnent",(function(e){var t=e.visibility,n=e.options,a=r.props.t;return y.a.createElement("div",{className:V.a.filterBox},y.a.createElement("div",{className:V.a.filterText,dangerouslySetInnerHTML:{__html:"".concat(a("common:for"),": <b>").concat(_.get(_.find(n,(function(e){return e.value==t})),"label",""),"</b>")}}),y.a.createElement("div",{className:V.a.bottomArrow},y.a.createElement(be.a,{width:10,height:5})))})),o()(C()(r),"onSearchChange",(function(e){(0,r.props.updateFilterObject)({searchText:e})})),o()(C()(r),"onDropdownItemClick",(function(e){(0,r.props.updateFilterObject)({visibility:e})})),r}return v()(t,e),d()(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.publishedCirculars,n=t.handleScroll,a=t.networkStatus,i=t.totalCount,o=t.draftTotalCount,c=t.draftCirculars,u=t.filters,l=t.onActionClick,s=t.selectedId,d=t.updatedSelectedId,m=t.isLoading,p=t.activeTab,f=t.userId,g=t.t,_=t.userType,h=u||{},C=h.searchText,b=h.visibility,v=function(e){return[{label:e("common:all"),value:"ALL"},{label:e("common:me"),value:"ANYONE_FOR_ME"}]}(g),O="staff"===_,I=this.getButtonComponnent({visibility:b,options:v});return y.a.createElement("div",{className:V.a.container,onScroll:n},y.a.createElement("div",{className:V.a.searchContainer},y.a.createElement(_e.a,$()({placeholder:g("common:search_for_announcements"),ref:function(t){return e.searchbar=t},searchTerm:C,changeSearchTerm:this.onSearchChange,shouldAnimate:!0},ve)),O&&y.a.createElement(ne.a,{authTabs:v,containerStyle:Oe.buttonDropDownContainerStyle,buttonComponent:I,onItemClick:this.onDropdownItemClick})),O&&y.a.createElement(ge,{items:c,label:g("announcement:draft_and_scheduled"),totalCount:o,onActionClick:l,labelBgColor:ie.e.yellow50,selectedId:s,updatedSelectedId:d,activeTab:p,userId:f}),y.a.createElement(ge,{items:r,label:O?g("common:published"):"",totalCount:i,onActionClick:l,selectedId:s,updatedSelectedId:d,activeTab:p,userId:f}),0==i&&(0==o||!O)&&(m?y.a.createElement(he.a,null):y.a.createElement(Ce.a,{emptyText:g("common:no_announcement_plural"),isSearch:!0,emptyHeaderText:""})),y.a.createElement("div",{className:V.a.loadingContainer},3==a?y.a.createElement(he.a,null):null))}}]),t}(y.a.PureComponent),Ie=Object(F.c)(Object(j.a)({resource:["announcement","common"]}),Object(c.connect)((function(e){return{userType:e.login.userInfo.user_type}}),null))(ye),Te=Object(H.a)(Ie),Se=r(26),Ee=r(70),je=r(48),Ae=r(170),De=function(e){function t(e){var r;return l()(this,t),r=p()(this,g()(t).call(this,e)),o()(C()(r),"updatedSelectedId",(function(e){var t=r.props,n=t.changeSelectedCircular,a=t.currentCircularId;e&&n({id:e,type:a?"push":"replace"})})),o()(C()(r),"UNSAFE_componentWillMount",(function(){var e=r.props,t=e.updateChildId,n=e.activeTab,a=e.updateFilterObject,i=e.isAdmin,o=e.userType;"admin"==n&&t("CIRCULARS"),a({visibility:i||"staff"!==o?"ALL":"ANYONE_FOR_ME"})})),o()(C()(r),"componentDidMount",(function(){var e=r.props,t=e.userId,n=e.currentCurriculumProgramId,a=e.resetUserCircularNewCount,i=e.setActiveHomepageCard,o=e.t;e.isFromAdmin||i({from:"home-page",label:o("announcement:announcements")}),a({ids:t,curriculumProgramIds:n})})),o()(C()(r),"onClickAddCircular",(function(){r.setState({showDialogueBox:!0,mode:"new"})})),o()(C()(r),"goToCircularFeed",(function(){var e=r.props,t=e.getDraftCircularsFeed,n=e.getCircularsFeed;r.setState({showDialogueBox:!1,mode:""}),t.refetch(),n.refetch()})),o()(C()(r),"onClickCircular",(function(e){r.props.updateCircularId(e),r.setState({showDialogueBox:!0,mode:"edit"})})),o()(C()(r),"handleScroll",(function(e){var t=e.target;_.get(r.props.getCircularsFeed,"node.circularFeed.pageInfo.hasNextPage",!1)&&3!=r.props.getCircularsFeed.networkStatus&&Object(D.a)(t)&&r.props.loadMoreCircular()})),o()(C()(r),"toggleDialogueBoxDisplay",(function(){r.setState({showDialogueBox:!1}),r.circularId=null})),o()(C()(r),"toggleDeleteDialogueBoxDisplay",(function(){r.setState({showDeleteDialogueBox:!1}),r.circularItem=null})),o()(C()(r),"onClickDelete",(function(e,t){r.circularItem=e,r.setState({showDeleteDialogueBox:!0,nextItemId:t})})),o()(C()(r),"deleteCircular",(function(){var e=r.props,t=e.filters,n=e.draftFilters,a=e.count,i=r.state.nextItemId,o=r.circularItem||{},c=o.id,u=o.state;r.props.deleteCircular({circularId:c,filters:"DRAFT"==u||"SCHEDULED"==u?n:t,count:"DRAFT"==u||"SCHEDULED"==u?void 0:a,goToNextItem:r.updatedSelectedId,nextItemId:i})})),o()(C()(r),"onActionClick",(function(e){var t=e.action,n=e.item,a=e.nextItemId,i=void 0===a?null:a;switch(t){case"EDIT":r.onClickCircular(n.id);break;case"DELETE":r.onClickDelete(n,i)}})),o()(C()(r),"onBackClick",(function(){var e=r.props,t=e.updateFilterObject,n=e.goToPlatformHomeChildRoute,a=e.activeTab,i=e.goBackToPreviousScreen;"admin"===a?i():n({route:"courses",navigateType:"replace"}),t({searchText:""})})),r.state={showDialogueBox:!1,mode:"new"},r}return v()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.circulars,r=e.networkStatus,n=e.totalCount,a=e.draftCirculars,i=e.draftTotalCount,o=e.filters,c=e.updateFilterObject,u=e.isLoading,l=e.currentCircularId,s=e.activeTab,d=e.userId,m=e.t,p=e.isData,f=e.isAdmin;return y.a.createElement(S.a,{isFullScreen:!0,isOpen:!0},y.a.createElement("div",{className:T.a.container},y.a.createElement(Y,{onCreateClick:this.onClickAddCircular,onBackClick:this.onBackClick,t:m}),y.a.createElement("div",{className:T.a.innerContainer},y.a.createElement("div",{className:T.a.leftPane},y.a.createElement(Te,{publishedCirculars:t,handleScroll:this.handleScroll,networkStatus:r,totalCount:n,draftCirculars:a,draftTotalCount:i,filters:o,updateFilterObject:c,onActionClick:this.onActionClick,selectedId:l,updatedSelectedId:this.updatedSelectedId,isLoading:u,isData:p,activeTab:s,userId:d,t:m,isAdmin:f})),y.a.createElement("div",{className:T.a.rightPane},this.props.children?this.props.children:null)),this.state.showDeleteDialogueBox?y.a.createElement(E.a,{modalTitle:m("common:delete_with_label",{label:m("common:announcement")}),onClickButton2:this.deleteCircular,modalBody:"".concat(m("common:delete_confirm_with_label",{label:m("common:announcement")}),' "').concat(_.trim(_.get(this.circularItem,"title","")),'"?'),toggleDialogueBoxDisplay:this.toggleDeleteDialogueBoxDisplay,button1:m("common:action_disagree",{action:m("common:keep")}),button2:m("common:delete_agree")}):null,this.state.showDialogueBox?y.a.createElement(A.a,{goToCircularFeed:this.goToCircularFeed,mode:this.state.mode,onClose:this.toggleDialogueBoxDisplay}):null))}}]),t}(y.a.Component),we={resetUserCircularNewCount:Se.Pb,goToPlatformHomeChildRoute:Ee.o,setActiveHomepageCard:Ae.setActiveHomepageCard},Pe=Object(F.c)(Object(c.connect)((function(e){var t=_.get(e,"login.activeTab","")===je.a.ADMIN;return{userId:e.login.userInfo.id,isAdmin:ae.a.can("AdminPortal"),userType:e.login.userInfo.user_type,isFromAdmin:t}}),we),Object(j.a)({resource:["announcement","common"]}))(De),Le=r(4012),ke=r(4058),xe=r(4057),Fe=(r(25),r(40)),Be=r(137),Ne=r(1410);function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Re=[{label:"Draft",value:"DRAFT"},{label:"Scheduled",value:"SCHEDULED"},{label:"Published",value:"PUBLISHED"}],Ye=[{value:"FAMILY_MEMBER",label:"common:family",perm:"FamilyApp:Announcement"},{value:"STUDENT",label:"common:student_plural",perm:"StudentApp:Announcement"},{value:"STAFF",label:"common:teacher_plural",perm:"Common:Announcement"}],He={staff:"Common:Announcement",student:"StudentApp:Announcement",parent:"FamilyApp:Announcement"},ze={updateCircularId:xe.updateCircularId,toggleStatus:xe.toggleStatus,updateChildId:Be.updateChildId,goToBack:Ee.h,deleteCircular:xe.deleteCircular,changeSelectedCircular:xe.changeSelectedCircular,goBackToPreviousScreen:xe.goBackToPreviousScreen,updateFilterObject:xe.updateFilterObject};t.default=Object(F.c)(Object(j.a)({resource:["common","configuration"]}),Object(c.connect)((function(e,t){var r=_.get(e,"platform.currentCurriculumProgram.id",null),n=e.login.activeTab,a=t.t,i=_.get(e,"platform.academicYearSelected",{}),o=e.login.userInfo.user_type;return{userId:e.login.userInfo.id,organizationId:e.login.userInfo.org_id,grades:e.circulars.grades,circularId:e.circulars.circularId,status:e.circulars.status,gradeList:_.get(Object(Fe.M)(e.login.userInfo.org_id),"grades",[]),statusList:Re,showErrorComp:!0,isData:!0,isLoading:!1,count:15,currentCircularId:t.params.circular_id,filters:e.circulars.filters,activeTab:n,userType:o,currentCurriculumProgramId:r,shouldCheckPermission:"admin"!==n,perm:_.get(He,o),errorText:a("common:sorry_you_dont_have_access_to_with_module_name",{moduleName:a("configuration:announcement")}),academicYearSelected:i}}),ze),Object(F.d)(Le.c,{name:"getDraftCircularsFeed",skip:function(e){return"staff"!==e.userType},options:function(e){var t=e.filters,r=e.organizationId,n=e.activeTab,a=e.currentCurriculumProgramId,i=e.academicYearSelected;return{fetchPolicy:"cache-and-network",variables:{organizationId:r,filters:Object(xe.getCircularFiltersMemoize)({filters:t,activeTab:n,currentCurriculumProgramId:a,status:["DRAFT","SCHEDULED"],academicYearSelected:i})}}},props:function(e){var t=e.getDraftCircularsFeed,r=e.ownProps,n=r.activeTab,a=r.currentCurriculumProgramId,i=r.academicYearSelected,o=Object(ke.c)({organizationId:r.organizationId,filters:Object(xe.getCircularFiltersMemoize)({filters:r.filters,status:["DRAFT","SCHEDULED"],includeSearch:!1,activeTab:n,currentCurriculumProgramId:a,academicYearSelected:i})}),c=Object(xe.getCircularFiltersMemoize)({filters:r.filters,status:["DRAFT","SCHEDULED"],activeTab:n,currentCurriculumProgramId:a,academicYearSelected:i}),u=Object(ke.c)({organizationId:r.organizationId,filters:c});return{getDraftCircularsFeed:t,draftFilters:c,draftCirculars:_.get(u,"circularFeed.edges",[]),draftTotalCount:_.get(u,"circularFeed.totalCount",[]),isData:r.isData&&!_.isEmpty(o),isLoading:1==t.networkStatus||2==t.networkStatus||4==t.networkStatus||r.isLoading,networkStatus:t.networkStatus}}}),Object(F.d)(Le.c,{name:"getCircularsFeed",options:function(e){e.grades;var t=e.filters,r=e.count,n=e.organizationId,a=e.activeTab,i=e.currentCurriculumProgramId,o=e.academicYearSelected;return{fetchPolicy:"cache-and-network",variables:{organizationId:n,count:r,filters:Object(xe.getCircularFiltersMemoize)({filters:t,status:"PUBLISHED",activeTab:a,currentCurriculumProgramId:i,academicYearSelected:o})}}},props:function(e){var t=e.getCircularsFeed,r=e.ownProps,n=r.activeTab,i=r.currentCurriculumProgramId,o=r.academicYearSelected,c=Object(ke.c)({organizationId:r.organizationId,filters:Object(xe.getCircularFiltersMemoize)({filters:r.filters,status:"PUBLISHED",includeSearch:!1,activeTab:n,currentCurriculumProgramId:i,academicYearSelected:o}),count:r.count}),u=Object(xe.getCircularFiltersMemoize)({filters:r.filters,status:"PUBLISHED",activeTab:n,currentCurriculumProgramId:i,academicYearSelected:o}),l=Object(ke.c)({organizationId:r.organizationId,filters:u,count:r.count});return{filters:u,getCircularsFeed:t,circulars:_.get(l,"circularFeed.edges",[]),totalCount:_.get(l,"circularFeed.totalCount",[]),isData:r.isData&&!_.isEmpty(c),isLoading:1==t.networkStatus||2==t.networkStatus||4==t.networkStatus||r.isLoading,networkStatus:t.networkStatus,loadMoreCircular:function(){return t.fetchMore({query:Le.c,variables:{organizationId:r.organizationId,count:r.count,after:t.node.circularFeed.pageInfo.endCursor,filters:Object(xe.getCircularFiltersMemoize)({filters:r.filters,status:"PUBLISHED",activeTab:n,currentCurriculumProgramId:i,academicYearSelected:o})},updateQuery:function(e,t){var r=t.fetchMoreResult,n=e.node.circularFeed,i=r.node.circularFeed,o=n.edges,c=i.edges,u=n.pageInfo,l=i.pageInfo,s=l.endCursor,d=l.hasNextPage;return Ue({},e,{node:Ue({},e.node,{circularFeed:Ue({},n,{edges:[].concat(a()(o),a()(c)),pageInfo:Ue({},u,{endCursor:s,hasNextPage:d})})})})}})}}}}),Ne.a)(Pe)},5163:function(e,t,r){e.exports={modalInnerContainer:"CircularCreateOrUpdate__modalInnerContainer___oaYok",modalHeader:"CircularCreateOrUpdate__modalHeader___30Vt4",headerWrapper:"CircularCreateOrUpdate__headerWrapper___2sO8g",headerTitle:"CircularCreateOrUpdate__headerTitle___1Rd3b",cancelSvg:"CircularCreateOrUpdate__cancelSvg___1Xt_4",modalFooter:"CircularCreateOrUpdate__modalFooter___2dEDk",footerWrapper:"CircularCreateOrUpdate__footerWrapper___2P5Y5",card_flipped:"CircularCreateOrUpdate__card_flipped___1ZKB7",card:"CircularCreateOrUpdate__card___rq1LX",face:"CircularCreateOrUpdate__face___m_kXe",back:"CircularCreateOrUpdate__back___29V8g",dropzoneAndButtons:"CircularCreateOrUpdate__dropzoneAndButtons___2jIjO",dropZone:"CircularCreateOrUpdate__dropZone___soy47",dropzoneComp:"CircularCreateOrUpdate__dropzoneComp___1iLjj",attachmentSvg:"CircularCreateOrUpdate__attachmentSvg___1N2QU",dropzoneDiv:"CircularCreateOrUpdate__dropzoneDiv___2h1lF",actionButtons:"CircularCreateOrUpdate__actionButtons___2DM_h",publishBtn:"CircularCreateOrUpdate__publishBtn___3jINB",buttonAndWarning:"CircularCreateOrUpdate__buttonAndWarning___UMuMk",warning:"CircularCreateOrUpdate__warning___2fhqK",transparentButton:"CircularCreateOrUpdate__transparentButton___3FZBS"}},5164:function(e,t,r){e.exports={container:"CircularBody__container___359Ey",modalInnerContainer:"CircularBody__modalInnerContainer___2cHm2",inputField:"CircularBody__inputField___oDJNL",gradeSelector:"CircularBody__gradeSelector___2zxWC",dateTimeSelection:"CircularBody__dateTimeSelection___NuEga",dateComp:"CircularBody__dateComp___qdLGw",note:"CircularBody__note___RGVax",timeComp:"CircularBody__timeComp___1xht-",errorText:"CircularBody__errorText___328C2",switchContainer:"CircularBody__switchContainer___gtsif",switchLabel:"CircularBody__switchLabel___nz9gO",checkBoxContainer:"CircularBody__checkBoxContainer___1D3bT"}},5165:function(e,t,r){e.exports={container:"Circulars__container___27c0u",innerContainer:"Circulars__innerContainer___1Y55r",leftPane:"Circulars__leftPane___1i4yF",rightPane:"Circulars__rightPane___3uwT1",statusDot:"Circulars__statusDot___G3WKw",statusContainer:"Circulars__statusContainer___2sLB1",statusText:"Circulars__statusText___3E0VI",publishedAtText:"Circulars__publishedAtText___2KifS",statusInsideContainer:"Circulars__statusInsideContainer___2El1I"}},5166:function(e,t,r){e.exports={container:"TopHeader__container___3hQuL",leftContainer:"TopHeader__leftContainer___17IBI",buttonsContainer:"TopHeader__buttonsContainer___1Yq1X",logoContainer:"TopHeader__logoContainer___BMyL8",chevronIconContainer:"TopHeader__chevronIconContainer___2RwQt",rightContainer:"TopHeader__rightContainer___2chRF",titleText:"TopHeader__titleText___3tbUF",slashIcon:"TopHeader__slashIcon___3Cm0Q"}},5167:function(e,t,r){e.exports={container:"LeftPane__container___3HBTJ",loadingContainer:"LeftPane__loadingContainer___2xUdK",searchContainer:"LeftPane__searchContainer___3MLvc",filterBox:"LeftPane__filterBox___249jC",filterText:"LeftPane__filterText___3bucC",bottomArrow:"LeftPane__bottomArrow___3BBzp"}},5168:function(e,t,r){e.exports={container:"AnnouncementList__container___2MMfW",headerContainer:"AnnouncementList__headerContainer___1Ak9I"}},5169:function(e,t,r){e.exports={container:"AnnouncementItem__container___1SyIz",containerSelected:"AnnouncementItem__containerSelected___3cE_H",selectedItem:"AnnouncementItem__selectedItem___3NY37",titleContainer:"AnnouncementItem__titleContainer___3Saz1",labelContainer:"AnnouncementItem__labelContainer___10CSL",titleText:"AnnouncementItem__titleText___2t3OI",descriptionText:"AnnouncementItem__descriptionText___pYB6T",bottomContainer:"AnnouncementItem__bottomContainer___5GxPn",bottomLeftContainer:"AnnouncementItem__bottomLeftContainer___3vTg0",textItemContainer:"AnnouncementItem__textItemContainer___2Z5jp",textContainer:"AnnouncementItem__textContainer___VTrlX",dateContainer:"AnnouncementItem__dateContainer___2veHe",readDot:"AnnouncementItem__readDot___2ISnL",containerNotRead:"AnnouncementItem__containerNotRead___1Mnp-"}},6531:function(e,t,r){"use strict";var n=r(1),a=r.n(n),i=r(27),o=r(20),c=r.n(o),u=r(31),l=r.n(u),s=r(21),d=r.n(s),m=r(22),p=r.n(m),f=r(4),g=r.n(f),h=r(23),C=r.n(h),b=r(3),v=r.n(b),O=r(0),y=r.n(O),I=r(5163),T=r.n(I),S=r(25),E=r.n(S),j=function(e){return y.a.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 26 26"},y.a.createElement("g",{id:"Attachment",strokeWidth:"1"},y.a.createElement("g",null,y.a.createElement("path",{d:"M10.2260052,19 C9.56649916,19 8.92974308,18.8003201 8.38577448,18.4225564 C7.67768092,17.929304 7.20383104,17.1910342 7.05164984,16.3437595 C6.89946863,15.4954041 7.08618108,14.6384118 7.57733719,13.9314476 L12.3760421,7.03342198 C13.1250857,5.95840352 14.7225415,5.66809735 15.8029225,6.41925339 C16.8487722,7.1467657 16.9825909,8.51322783 16.1288974,9.74148375 L12.2044422,15.3853103 C11.6021361,16.2066826 10.9135425,16.3955726 10.1493865,15.9595202 C9.81260534,15.7663159 9.59347415,15.4770578 9.51579917,15.1219548 C9.4197617,14.6837493 9.55683041,14.1775376 9.90108657,13.6983171 L13.1736732,8.9924402 C13.3430794,8.74633402 13.6788043,8.68694028 13.9249105,8.85748399 C14.1698792,9.02802769 14.2303291,9.3637526 14.0597854,9.60872128 L10.7829738,14.3221706 C10.5908176,14.5887681 10.5487301,14.7949155 10.5703426,14.892058 C10.5757051,14.9168799 10.5865114,14.9665317 10.6847426,15.0226592 C10.89518,15.1446235 11.0009675,15.2029041 11.3247487,14.758223 L15.2416476,9.12520266 C15.6270163,8.57148406 15.8439537,7.76199053 15.1866414,7.30650315 C14.5789728,6.88124077 13.6820543,7.04642197 13.2621544,7.64970306 L8.4645057,14.5477531 C8.13641829,15.0183367 8.01226833,15.588224 8.11374955,16.1527164 C8.21523077,16.7161281 8.53039944,17.208308 9.00205556,17.5364279 C9.94536781,18.1904983 11.3377487,17.9357797 11.9906735,17.0010718 L16.1397036,11.0334396 C16.3101661,10.788471 16.6447535,10.7268835 16.8919972,10.8985647 C17.1359096,11.0679709 17.1963596,11.404752 17.0268721,11.6497207 L12.876867,17.6173772 C12.2724484,18.4829983 11.2826612,19 10.2260052,19 Z",id:"attachment-copy",fill:e.fill&&e.fill}))))};j.defaultProps={width:24,height:24},j.propTypes={height:v.a.number,width:v.a.number,fill:v.a.string};var A=j,D=r(3632),w=r(1659),P=r(637),L=r(1412),k=r(1411),x=r(413),F=r(5164),B=r.n(F),N=r(2),M=r.n(N),U=r(3647),R=r(41),Y=r(84),H=r(11),z=r(3850),$=r(3807),W=r(3828),V=r(3892),q=r(4520),G=r(3878),J=r(3891),Q=r(4648),K=r(1620),Z=r(69);function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te={listItemStyle:{padding:"14px 16px",borderRadius:"4px",cursor:"pointer"},checkListContainerStyle:{display:"grid",gridAutoFlow:"column",gridColumnGap:"24px",gridTemplateColumns:"repeat(2, 1fr)"}},re=function(e){var t=e.dateString,r=e.timeString;return t&&r?"".concat(t,":").concat(r):t?"".concat(t):null},ne=function(e){function t(){var e,r;c()(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=d()(this,(e=p()(t)).call.apply(e,[this].concat(i))),a()(g()(r),"title",null),a()(g()(r),"description",null),a()(g()(r),"checkList",null),a()(g()(r),"sharedWith",null),a()(g()(r),"componentDidMount",(function(){var e=r.props,t=e.serverObject,n=(t=void 0===t?{}:t).state,a=e.toggleScheduleLater;"SCHEDULED"==n&&a(),"edit"==r.props.mode&&r.props.saveObject(r.props.serverObject)})),a()(g()(r),"handleDateChange",(function(e){var t=r.props.displayObject.publishedAt,n=e.publishedDate,a=t.format("HH:mm"),i=re({dateString:n,timeString:a}),o=M.a.isEmpty(i)?E()():E()(i,"YYYY-MM-DD:HH:mm",!0).isValid()?E()(i,"YYYY-MM-DD:HH:mm"):E()(i,"YYYY-MM-DD"),c={publishedAt:o};o.get("date")==E()().get("date")?r.props.updateCircularObject({publishedAt:E()()}):r.props.updateCircularObject(c)})),a()(g()(r),"handleTimeChange",(function(e){var t=r.props.displayObject.publishedAt,n=e.publishedTime,a=t.format("YYYY-MM-DD"),i=re({dateString:a,timeString:n}),o={publishedAt:M.a.isEmpty(i)?E()():E()(i,"YYYY-MM-DD:HH:mm",!0).isValid()?E()(i,"YYYY-MM-DD:HH:mm"):E()(i,"YYYY-MM-DD")};r.props.updateCircularObject(o)})),a()(g()(r),"removeAttachmentLink",(function(e){var t=r.props.displayObject.attachments;r.props.removeAttachmentLink({index:M.a.findIndex(t,{id:e})})})),a()(g()(r),"isValid",(function(e){return e?r.title.isValid()+r.description.isValid()+r.checkList.isValid()+r.sharedWith.isValid():r.title.isValid()+r.checkList.isValid()})),a()(g()(r),"renderErrorComponent",(function(e){return y.a.createElement("div",{className:B.a.errorText},e)})),a()(g()(r),"changeLocale",(function(e){var t=r.props.t;return M.a.map(e,(function(e){return ee({},e,{label:t(e.label)})}))})),a()(g()(r),"getSharingOptions",(function(){var e=r.props.currentCurriculumProgramId;return M.a.filter(Q.CIRULAR_SHARED_WITH,(function(t){return!!M.a.isEmpty(null===t||void 0===t?void 0:t.perm)||Object(Z.e)({name:null===t||void 0===t?void 0:t.perm,currentCurriculumProgramId:e})}))})),r}return C()(t,e),l()(t,[{key:"render",value:function(){var e=this,t={labelStyle:{flexBasis:"30%"},content:{color:R.e.gray48,fontSize:"1.4rem"}},r=this.props.displayObject,n=r.publishedAt,a=this.props,i=a.toggleScheduleLater,o=a.scheduleLater,c=a.updateAttachmentListRef,u=(a.activeTab,a.classOptions),l=a.t,s=Object(O.createRef)(null),d=M.a.includes(["new","edit"],this.props.mode),m=this.getSharingOptions();return y.a.createElement("div",{className:B.a.container,ref:s},y.a.createElement("div",{className:B.a.modalInnerContainer},y.a.createElement("div",{className:B.a.inputField},y.a.createElement(z.a,{label:"".concat(l("common:title")," *"),name:"title",ref:function(t){return e.title=t},placeholder:l("announcement:enter_label_here"),error:"Enter the title",updateInputField:function(t){return e.props.updateCircularObject(t)},value:r.title})),y.a.createElement("div",{className:B.a.inputField},y.a.createElement($.a,{label:l("common:description"),name:"description",ref:function(t){return e.description=t},width:"100%",height:240,showErrorText:!0,placeholder:l("common:type_paste_content_here"),error:"Enter some content",updateInputField:function(t){return e.props.updateCircularObject(t)},textAreaStyles:t.content,value:r.description,renderErrorComponent:this.renderErrorComponent})),y.a.createElement("div",{className:B.a.inputField},y.a.createElement(U.a,{value:M.a.get(r,"attachments",[]),customRef:c,label:l("common:attachments"),name:"attachments",parentType:"CIRCULAR",parentId:"".concat(M.a.get(r,"id","")),exportAsPdf:!0,updateInputField:this.props.updateAttachments,updateLoadingState:this.props.updateAttachmentLoadingState,setToastMsg:this.props.setToastMsg,showDeleteButtonForNewUploads:d,accept:["application/pdf","video/mp4","video/avi","video/wmv","image/jpeg","image/png","image/jpg"]})),y.a.createElement("div",{className:B.a.gradeSelector},y.a.createElement(W.a,{updateInputField:function(t){return e.props.updateCircularObject(t)},value:this.props.displayObject.sharedWith,listItemStyle:te.listItemStyle,checkListContainerStyle:te.checkListContainerStyle,options:this.changeLocale(m),labelStyle:t.labelStyle,name:"sharedWith",label:l("common:share_with"),isRequired:!0,showAllOption:!0,ref:function(t){return e.sharedWith=t},error:"Please select atleast one option",showErrorText:!0,renderErrorComponent:this.renderErrorComponent})),y.a.createElement(K.a,{perm:"Common:AnnouncementEmail"},y.a.createElement("div",{className:B.a.switchContainer},y.a.createElement(V.a,{name:"sendEmail",updateInputField:this.props.updateCircularObject,value:r.sendEmail,theme:"rounded",width:36}),y.a.createElement("span",{className:B.a.switchLabel},l("common:send_an_email_to_all")))),y.a.createElement("div",{className:B.a.inputField},y.a.createElement(q.a,{label:"".concat(l("common:select_class_plural"),"*"),name:"courses",placeholder:l("announcement:search_class"),checkboxGroupName:l("common:classes"),options:u,updateInputField:function(t){return e.props.updateCircularObject(t)},value:r.courses,ref:function(t){return e.checkList=t},error:"Select any class"})),y.a.createElement("div",{className:B.a.checkBoxContainer},y.a.createElement(H.Checkbox,{size:"xx-small",name:"scheduleLater",onChange:function(){i()},isChecked:o},l("announcement:schedule_later"))),!!o&&y.a.createElement("div",{className:B.a.dateTimeSelection},y.a.createElement("div",{className:B.a.dateComp},y.a.createElement(G.a,{label:l("common:publish_label",{label:l("common:date")}),name:"publishedDate",ref:function(t){return e.publishedDate=t},value:n?n.format("YYYY-MM-DD"):E()().format("YYYY-MM-DD"),updateInputField:this.handleDateChange,openDirection:"down",minDate:E()().format("YYYY-MM-DD"),isValueMomentObj:!1})),y.a.createElement("div",{className:B.a.timeComp},y.a.createElement(J.a,{label:l("common:publish_label",{label:l("common:time")}),name:"publishedTime",value:n?n.format("HH:mm"):E()().format("HH:mm"),minuteStep:5,updateInputField:this.handleTimeChange,ref:function(t){return e.publishedTime=t},SelectedTimeformat:"HH:mm",isValueMomentObj:!1}))),y.a.createElement("div",{className:B.a.note},l("announcement:note"))))}}]),t}(y.a.PureComponent),ae=Object(Y.c)(Object(x.a)({resource:["announcement","common"]}))(ne),ie=r(902),oe=Object(ie.a)(ae),ce={DRAFT:{title:"common:save_as_draft",message:"announcement:save_announcement_msg",confirmButtonText:"common:save_as_draft",cancelButtonText:"common:cancel"},PUBLISH:{title:"common:publish",message:"announcement:publish_agree_msg",confirmButtonText:"common:publish",cancelButtonText:"common:cancel"}},ue=function(e){function t(e){var r;c()(this,t),r=d()(this,p()(t).call(this,e)),a()(g()(r),"onSaveAsDraftClick",(function(){"new"!=r.props.mode&&r.props.displayObject.isPublished?r.setState({currentDialogAction:"DRAFT"}):r.onClickSave()})),a()(g()(r),"UNSAFE_componentWillMount",(function(){"new"==r.props.mode&&r.props.emptyObject()})),a()(g()(r),"onDialogConfirmClick",(function(){switch(r.state.currentDialogAction){case"PUBLISH":r.onClickPublish({publishNow:!0});break;case"DRAFT":r.onClickSave()}})),a()(g()(r),"OnToggleDialogueClick",(function(){r.setState({currentDialogAction:""})})),a()(g()(r),"onClickSave",(function(){var e,t=null===(e=r.circularBody)||void 0===e?void 0:e.isValid(!1);0==t?(r.props.setPublishStatusCirculars(!1),r.saveCirculars(!1)):r.props.setToastMsg({msg:"toastMsgs:rectify_errors_with_count",locale_params:[{key:"count",value:t,isPlainText:!0}],type:"alert",position:"toast-top-center"})})),a()(g()(r),"onClickPublish",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.publishNow,n=void 0!==t&&t,a=r.circularBody.isValid(!0);if(0==a){var i=r.state.scheduleLater;i&&!n||r.props.updateCircularObject({publishedAt:E()()}),setTimeout((function(){r.saveCirculars(!0)}))}else r.props.setToastMsg({msg:"toastMsgs:rectify_errors_with_count",locale_params:[{key:"count",value:a,isPlainText:!0}],type:"alert",position:"toast-top-center"})})),a()(g()(r),"updateAttachmentListRef",(function(e){r.attachmentListRef=e})),a()(g()(r),"saveCirculars",(function(e){r.setState({isLoading:!0});var t=r.props,n=t.mode,a=t.createCircular,i=t.setToastMsg,o=t.updateCircular;t.t;"new"==n?a(e).then((function(e){e.data;r.setState({isLoading:!1}),r.goToCircularFeed(),i({msg:"toastMsgs:announcement_success_create_msg",type:"success"})})).catch((function(e){i("toastMsgs:something_went_wrong"),r.setState({isLoading:!1})})):"edit"==n&&o(e).then((function(e){e.data;r.setState({isLoading:!1}),r.goToCircularFeed(),i({msg:"toastMsgs:announcement_success_update_msg",type:"success"})})).catch((function(e){i("toastMsgs:something_went_wrong"),r.setState({isLoading:!1})}))})),a()(g()(r),"goToCircularFeed",(function(){r.props.emptyObject(),r.props.goToCircularFeed&&r.props.goToCircularFeed(),r.onClose()})),a()(g()(r),"dropzoneRenderComponent",(function(){return y.a.createElement("div",{className:T.a.attachmentSvg},y.a.createElement(A,{width:32,height:32}))})),a()(g()(r),"updateAttachmentLoadingState",(function(e){r.setState({isAttachmentsLoading:e})})),a()(g()(r),"updateAttachments",(function(e){r.props.updateAttachments(e.attachments)})),a()(g()(r),"toggleScheduleLater",(function(){r.setState({scheduleLater:!r.state.scheduleLater})})),a()(g()(r),"onPublishNowClick",(function(){r.setState({currentDialogAction:"PUBLISH"})})),a()(g()(r),"onClose",(function(){(0,r.props.onClose)(),r.attachmentListRef&&r.attachmentListRef.stopAllUploads()}));var n=r.props.displayObject;(n=void 0===n?{}:n).state;return r.state={showWarning:!1,isLoading:!1,showDialogueBox:!1,isAttachmentsLoading:!1,scheduleLater:!1,currentDialogAction:""},r}return C()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=this.props.displayObject,r=this.props,n=r.classOptions,a=r.t,i=r.currentCurriculumProgramId,o=this.state,c=o.isAttachmentsLoading,u=o.scheduleLater,l=o.currentDialogAction,s=o.isLoading,d=(o.isCircularBodyLoading,this.props.isLoading||c);return y.a.createElement(y.a.Fragment,null,y.a.createElement(w.a,{isFullScreen:!0,isOpen:!0,modalContent:T.a.modalContent,onRequestClose:this.onClose},y.a.createElement("div",{className:T.a.modalInnerContainer},y.a.createElement("div",{className:T.a.modalHeader},y.a.createElement("div",{className:T.a.headerWrapper},y.a.createElement(D.a,null),y.a.createElement("div",{className:T.a.headerTitle},"new"==this.props.mode?a("common:create_with_label",{label:a("common:announcement")}):a("common:edit_with_label",{label:a("common:announcement")})))),y.a.createElement(oe,{updateCircularObject:this.props.updateCircularObject,displayObject:this.props.displayObject,gradeList:this.props.gradeList,courseList:this.props.courseList,updateAttachments:this.updateAttachments,removeAttachmentLink:this.props.removeAttachmentLink,mode:this.props.mode,isData:this.props.isData,isLoading:this.props.isLoading,customRef:function(t){return e.circularBody=t},serverObject:this.props.serverObject,saveObject:this.props.saveObject,updateAttachmentLoadingState:this.updateAttachmentLoadingState,setToastMsg:this.props.setToastMsg,scheduleLater:u,toggleScheduleLater:this.toggleScheduleLater,updateAttachmentListRef:this.updateAttachmentListRef,activeTab:this.props.activeTab,classOptions:n,t:a,currentCurriculumProgramId:i})),y.a.createElement("div",{className:T.a.modalFooter},y.a.createElement("div",{className:T.a.footerWrapper},u?y.a.createElement("div",{className:T.a.transparentButton,onClick:this.onPublishNowClick},a("common:publish_now")):y.a.createElement("div",{className:T.a.transparentButton,onClick:this.onClose},a("common:discard")),y.a.createElement("div",{className:T.a.actionButtons},y.a.createElement(P.a,{color:"grey",size:"sm",containerStyle:{marginRight:16},onClick:this.onSaveAsDraftClick,isDisabled:d},a("common:save_as_draft")),t.isPublished?y.a.createElement(P.a,{color:"pink",size:"sm",onClick:this.onClickPublish,isDisabled:d},a("common:update")):y.a.createElement(P.a,{color:"pink",size:"sm",onClick:u?this.onClickPublish:this.onPublishNowClick,isDisabled:d},a(u?"common:schedule":"common:publish_now")))))),!!l&&y.a.createElement(L.a,{modalTitle:a(ce[l].title),showModal:!0,onClickButton2:this.onDialogConfirmClick,modalBody:a(ce[l].message),toggleDialogueBoxDisplay:this.OnToggleDialogueClick,button1:a(ce[l].cancelButtonText)||a("common:cancel"),button2:a(ce[l].confirmButtonText),isPromptBox:ce[l].isPromptBox,promptDetail:ce[l].promptDetail}),!!s&&y.a.createElement(k.a,null))}}]),t}(y.a.Component),le=Object(x.a)({resources:["announcement","common","journal"]})(ue),se=r(1703),de=r(4057),me=r(15),pe=r(40),fe=r(4012),ge=r(4228),_e=r(264),he=r(265),Ce=r(3774),be=r(46),ve=r(36),Oe=r(176),ye=r(88);function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Se={updateCircularObject:de.updateCircularObject,updateAttachments:de.updateAttachments,removeAttachmentLink:de.removeAttachmentLink,emptyObject:de.emptyObject,updateTotalAttachmentLoading:de.updateTotalAttachmentLoading,setToastMsg:me.nb,setPublishStatusCirculars:de.setPublishStatusCirculars,saveObject:de.saveObject},Ee=function(e){return _.map(e,(function(e){return _.omit(e,["id","streamUrl","isRead","questionAttachment"])}))},je=_.memoize((function(e){return function(e){var t=e.courses,r=e.grades,n=[];return _.forEach(r,(function(e){var r=[],a=e.name,i=e.id,o=_.filter(t,(function(t){return _.findIndex(t.grades,{id:e.id})>=0}));_.forEach(o,(function(e){var t=e.title,n=e.id;r.push({label:t,value:n})})),r.length>0&&n.push({label:a,options:r,value:i})})),n}(e)}),(function(e){return JSON.stringify(e)})),Ae=function(e){var t=e.circularId,r=e.mode;return Object(Ce.a)({},"edit"===r?{entityId:t,entityType:"CIRCULAR"}:{})},De=Object(Y.c)(Object(i.connect)((function(e,t){var r,n=_.get(e,"platform.currentCurriculumProgram.id",null),a=e.login.activeTab,i="admin"!=a?Object(Oe.e)({curriculumProgramId:n,type:"GRADE"}):{},o=Object(ye.getCurriculumProgramFreeStatus)({state:e});return{userId:parseInt(e.login.userInfo.id),organizationId:e.login.userInfo.org_id,grades:e.circulars.grades,gradeList:(r=_.get(Object(pe.M)(e.login.userInfo.org_id),"grades",[]),_.map(r,(function(e,t){return{label:e.name,value:e.id}}))),gradeFilters:i,circularId:e.circulars.circularId,isAttachmentsLoading:0!=e.circulars.totalAttachmentsUploading,searchTerm:e.circulars.searchTerm,status:e.circulars.status,displayObject:e.circulars.displayObject,activeTab:a,isAdmin:ve.a.can("AdminPortal"),isData:!0,isLoading:!1,isCurriculumProgramFree:o,currentCurriculumProgramId:n}}),Se),Object(Y.d)(be.G,{name:"getOrganizationCourses",options:function(e){var t=e.organizationId,r=e.circularId,n=e.mode;return{fetchPolicy:"cache-and-network",variables:{organizationId:t,filters:Ae({circularId:r,mode:n})}}},props:function(e){var t=e.getOrganizationCourses,r=e.ownProps,n=r.organizationId,a=r.isData,i=r.isLoading,o=r.circularId,c=r.mode,u=Ae({circularId:o,mode:c}),l=Object(pe.H)({organizationId:n,filters:u}),s=_.map(_.get(l,"courses.edges",[]),(function(e){return e.node}));return{isData:!_.isEmpty(l)&&a,courses:s,isLoading:1==t.networkStatus||2==t.networkStatus||i}}}),Object(Y.d)(he.c,{name:"getStaffCourses",skip:function(e){return e.isAdmin},options:function(e){return{fetchPolicy:"cache-and-network",variables:{id:e.userId,isCurriculumProgramFree:e.isCurriculumProgramFree}}},props:function(e){var t=e.getStaffCourses,r=e.ownProps,n=r.userId,a=r.isData,i=r.isLoading,o=r.isCurriculumProgramFree,c=Object(_e.b)(n,o),u=_.get(c,"courses",[]),l=_.filter(u,{isDemo:!1});return{isData:!_.isEmpty(c)&&a,courses:l,isLoading:1==t.networkStatus||2==t.networkStatus||i}}}),Object(Y.d)(be.N,{name:"getOrganizationGrades",options:function(e){return{fetchPolicy:"cache-and-network",variables:{organizationId:e.organizationId,filters:e.gradeFilters}}},props:function(e){var t=e.getOrganizationGrades,r=e.ownProps,n=r.organizationId,a=r.isData,i=r.isLoading,o=r.courses,c=r.gradeFilters,u=Object(pe.J)({organizationId:n,filters:c}),l=_.get(u,"grades",[]);return{isData:!_.isEmpty(u)&&a,classOptions:je({courses:o,grades:l}),isLoading:1==t.networkStatus||2==t.networkStatus||i}}}),Object(Y.d)(fe.b,{name:"getCircular",skip:function(e){var t=e.mode,r=e.circularId;return"edit"!=t||!r},options:function(e){return{fetchPolicy:"cache-and-network",variables:{id:e.circularId}}},props:function(e){var t=e.getCircular,r=e.ownProps;return{getCircular:t,ownProps:r,isData:r.isData&&t.node,serverObject:_.get(t,"node",{}),isLoading:1==t.networkStatus||2==t.networkStatus||r.isLoading}}}),Object(Y.d)(se.b,{name:"updateCircular",skip:function(e){return"edit"!=e.mode},props:function(e){var t=e.updateCircular,r=e.ownProps,n=r.displayObject,a=r.userId;return{updateCircular:function(e){return t({variables:Te({},Object(ge.a)(Te({},n,{attachments:Ee(n.attachments)}),["publishedDateTime"]),{updatedBy:a,isPublished:e})})}}},options:function(e){var t=e.displayObject,r=e.userId;e.grades,e.searchTerm,e.status;return{variables:Te({},Object(ge.a)(Te({},t,{attachments:Ee(t.attachments)}),["publishedAt"]),{updatedBy:r})}}}),Object(Y.d)(se.a,{name:"createCircular",skip:function(e){return"new"!=e.mode},props:function(e){var t=e.createCircular,r=e.ownProps,n=r.displayObject,a=r.userId;return{createCircular:function(e){return t({variables:Te({},Object(ge.a)(Te({},n,{attachments:Ee(n.attachments)}),["publishedDateTime"]),{createdBy:a,isPublished:e})})}}},options:function(e){var t=e.displayObject,r=e.userId;e.grades,e.searchTerm,e.status;return{variables:Te({},Object(ge.a)(Te({},t,{attachments:Ee(t.attachments)}),["publishedAt"]),{createdBy:r})}}}))(le);t.a=De}}]);
//# sourceMappingURL=administrator-communications~standards-and-practices~teacher-course.fc0bc633.js.map