(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{3955:function(e,t,a){"use strict";a.d(t,"d",(function(){return A})),a.d(t,"i",(function(){return w})),a.d(t,"f",(function(){return O})),a.d(t,"e",(function(){return R})),a.d(t,"g",(function(){return D})),a.d(t,"a",(function(){return N})),a.d(t,"c",(function(){return k})),a.d(t,"h",(function(){return P})),a.d(t,"b",(function(){return x}));var n=a(6),s=a.n(n),o=a(13),i=a.n(o),r=a(1),l=a.n(r),c=a(0),u=a.n(c),d=a(25),m=a.n(d),_=a(2),p=a.n(_),g=a(26),v=a(15),b=a(55),S=a(72),E=a(45),h=a(8),C=a(74);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y=function(e){var t=e.date,a=e.sourceIsWidget;return 0===m()(t,"YYYY-MM-DD HH:mm").minutes()?m()(t,"YYYY-MM-DD HH:mm").format("D MMM".concat(a?"":" YYYY",", h a")):m()(t,"YYYY-MM-DD HH:mm").format("D MMM".concat(a?"":" YYYY",", h:mm a"))},I=function(e){var t=e.isDeadline,a=e.t,n=e.sourceIsWidget,s=void 0!==n&&n,o=t;return Object(C.f)({dateString:t})&&(o=m.a.utc(t).local().format()),{day:m()().isSame(m()(o,"YYYY-MM-DD"),"day")?a("classRoom:today"):m()().add(1,"day").isSame(m()(o,"YYYY-MM-DD HH:mm"),"day")?a("classRoom:tomorrow"):m()(o,"YYYY-MM-DD HH:mm").format(s?"dddd":"ddd"),dateTime:y({date:o,sourceIsWidget:s})}},A=function(e){var t=e.itemType,a=e.item,n=(e.orderDate,e.t),s=e.sourceIsWidget,o=p.a.get(a,"assignment.deadline",null)||p.a.get(a,"deadline.deadlineDate",null),i={dueTime:o?I({isDeadline:o,t:n,sourceIsWidget:s}):{text:n("classRoom:no_due_date")}};switch(t){case"STUDENT_ASSIGNMENT":var r=p.a.get(a,"assignment.content","");return T({title:Object(b.e)({content:r}),subTitle:p.a.get(a,"assignment.course.title",""),status:p.a.get(a,"status",""),unreadMessageCount:p.a.get(a,"conversation.unreadMessageCount",0)+p.a.get(a,"assignment.classDiscussion.unreadMessageCount",0)},i);case"COMMUNITY_PROJECT":case"PERSONAL_PROJECT":return T({title:p.a.get(a,"deadline.title",""),subTitle:p.a.get(a,"project.title.value",""),status:p.a.get(a,"project.status",""),unreadMessageCount:p.a.get(a,"project.conversation.unreadMessageCount",0)},i);case"SERVICE_AS_ACTION":return T({title:p.a.get(a,"project.title.value",""),subTitle:"",status:p.a.get(a,"project.status",""),unreadMessageCount:p.a.get(a,"project.conversation.unreadMessageCount",0)},i);default:return T({title:"",subTitle:"",status:"",unreadMessageCount:0},i)}},w=function(e){var t=e.itemType,a=e.isClickedFromWidget,n=e.item;return function(){var e=i()(s.a.mark((function e(o,i){var r,l,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=p.a.get(n,"assignment.id"),l=p.a.get(n,"id"),c=p.a.get(n,"project.projectGroup.id"),e.t0=t,e.next="STUDENT_ASSIGNMENT"===e.t0?6:"COMMUNITY_PROJECT"===e.t0||"PERSONAL_PROJECT"===e.t0||"SERVICE_AS_ACTION"===e.t0?8:10;break;case 6:return u="".concat(a?"../todos/":"","classroom-details/").concat(r,"/").concat(l||""),e.abrupt("break",10);case 8:return u="".concat(a?"../todos/":"","projects/").concat(c),e.abrupt("break",10);case 10:o(u?Object(g.Ab)({route:u}):Object(v.nb)("toastMsgs:something_went_wrong"));case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},O=function(e){var t=e.itemType,a=e.status,n=e.t;switch(t){case"STUDENT_ASSIGNMENT":var s=Object(b.fb)({data:{status:a},t:n}),o=s.label,i=s.statusColor;return{statusLabel:o,topColor:E.colors.textSubtle,bottomColor:i,statusHeading:n("common:status")};case"COMMUNITY_PROJECT":case"PERSONAL_PROJECT":return{statusLabel:n(S.d[a].label),topColor:E.colors.textSubtle,bottomColor:E.colors.textDefault,statusHeading:n("project:project_status")};case"SERVICE_AS_ACTION":return{statusLabel:n(S.d[a].label),topColor:E.colors.textSubtle,bottomColor:E.colors.textDefault,statusHeading:n("project:activity_status")};default:return{statusLabel:"",topColor:E.colors.textSubtle,bottomColor:E.colors.textDefault,statusHeading:n("common:status")}}},R=function(e){var t=e.itemType,a=e.item,n=e.iconSize,s=void 0===n?"xx-small":n;switch(t){case"STUDENT_ASSIGNMENT":var o=p.a.get(a,"assignment.content.assessmentType.value",""),i=p.a.get(a,"assignment.contentType","ASSESSMENT"),r=p.a.get(a,"assignment.curriculumProgram.curriculum.type","IB_PYP"),l=Object(b.o)({curriculumType:r,assessmentValue:o,contentType:i}),c=l.color,d=l.svg,m=l.typeLabel,_=l.typeLabel2;return{icon:d,bgColor:c,label:m||_};case"PERSONAL_PROJECT":return{icon:u.a.createElement(h.PpOutlined,{variant:"on",size:s}),bgColor:E.colors.decorativeSurfaceOneD};case"COMMUNITY_PROJECT":return{icon:u.a.createElement(h.CpOutlined,{variant:"on",size:s}),bgColor:E.colors.decorativeSurfaceThreeD};case"SERVICE_AS_ACTION":return{icon:u.a.createElement(h.SaaOutlined,{variant:"on",size:s}),bgColor:E.colors.decorativeSurfaceFourD};default:return{icon:u.a.createElement(h.PpOutlined,{variant:"on",size:s}),bgColor:E.colors.decorativeSurfaceOneD}}},D=function(e){var t=e.orgId,a=e.activeSidebarTab,n=e.edges,s=Object(b.H)({orgId:t}),o=s.lastWeekStartDate,i=s.lastWeekEndDate,r=s.thisWeekStartDate,l=s.thisWeekEndDate,c=s.nextWeekEndDate,u=s.nextWeekStartDate;switch(a){case"UPCOMING":var d=[],_=[],g=[],v=[];return p.a.forEach(n,(function(e){m()(e.orderDate).isBetween(r,l,void 0,"[]")?_.push(e):m()(e.orderDate).isBetween(u,c,void 0,"[]")?g.push(e):v.push(e)})),_.length>0&&d.push({key:"classRoom:this_week",tasks:_}),g.length>0&&d.push({key:"classRoom:next_week",tasks:g}),v.length>0&&d.push({key:"classRoom:later",tasks:v}),{tasksArr:d};case"OVERDUE":var S=[],E=[],h=[],C=[];return p.a.forEach(n,(function(e){m()(e.orderDate).isBetween(r,l,void 0,"[]")?E.push(e):m()(e.orderDate).isBetween(o,i,void 0,"[]")?h.push(e):C.push(e)})),E.length>0&&S.push({key:"classRoom:this_week",tasks:E}),h.length>0&&S.push({key:"classRoom:last_week",tasks:h}),C.length>0&&S.push({key:"classRoom:earlier",tasks:C}),{tasksArr:S};case"NODUE":return{tasksArr:[{key:"classRoom:no_due_date",tasks:n}]};case"THIS_WEEK":return{tasksArr:[{key:"classRoom:done_this_week",tasks:n}]};case"LAST_WEEK":return{tasksArr:[{key:"classRoom:done_last_week",tasks:n}]};case"EARLIER":return{tasksArr:[{key:"classRoom:done_earlier",tasks:n}]};default:return{tasksArr:[]}}},N=p.a.memoize((function(e){return function(e){var t=e.orgId,a=Object(b.H)({orgId:t});return{lastWeekStartDate:a.lastWeekStartDate,lastWeekEndDate:a.lastWeekEndDate,earlierEndDate:a.earlierEndDate,thisWeekStartDate:a.thisWeekStartDate,thisWeekEndDate:a.thisWeekEndDate}}(e)}),(function(e){return JSON.stringify(e)})),k=function(e){var t=e.currentCurriculumProgramType,a=e.isParent,n=void 0!==a&&a,s=e.showHomeScreenWidgets;if(n||void 0!==s&&s)return["STUDENT_ASSIGNMENT"];switch(t){case"IB_MYP":return["COMMUNITY_PROJECT","STUDENT_ASSIGNMENT","PERSONAL_PROJECT","SERVICE_AS_ACTION"];case"IB_PYP":case"UBD":return["STUDENT_ASSIGNMENT"]}},P=function(e){var t=e.currentCurriculumProgramType,a=e.isParent,n=e.showHomeScreenWidgets;if(a||void 0!==n&&n)return!1;switch(t){case"IB_MYP":return!0;case"IB_PYP":case"UBD":return!1}},x=p.a.memoize((function(e){return function(e){var t=e.courses;return p.a.map(t,(function(e){return e.id}))}(e)}),(function(e){return JSON.stringify(e)}))},4096:function(e,t,a){"use strict";var n=a(0);t.a=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t&&(t.current=e)}),[e]),null===t||void 0===t?void 0:t.current}},4274:function(e,t,a){"use strict";var n=a(1),s=a.n(n),o=a(0),i=a.n(o),r=a(84),l=a(27),c=a(3),u=a.n(c),d=a(4849),m=a.n(d),p=a(3857),g=a(3868),v=a(3649),b=a(3831),S=a(413),E=a(255),h=a(3647),C=a(26),f=a(474),T=a(295),y=a(45),I=a(41),A=a(163),w=a(3725),O=a(69),R=a(99),D=a(2057);a(28);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P={attachmentContainerStyle:{gridTemplateColumns:"repeat(auto-fill, minmax(344px, 1fr))",gridGap:"32px"},attachmentCardStyle:{height:232},rubricConStyle:{width:"100%"},templateContainerStyle:{display:"flex",flexDirection:"column",rowGap:"16px"}},x=i.a.memo((function(e){var t=e.t,a=e.fields,n=e.field_list,s=(e.isLocalisedTemplate,e.assessmentFields),o=e.unitPlanFields,r=e.assessmentId,l=e.portalType,c=e.attachmentItemHeight,u=e.studentTemplate,d=e.canTurnIn,p=e.submissionId,g=e.organizationResources,v=e.refetchGetStudentAssignmentDetails,b=e.onUseTemplateClick,S=e.userType,E=e.myWorkAttachments,h=e.shouldShowResourcesToFamily,A=e.resourcesCardType,w=e.fieldItemStyle,O=e.labelComponentStyle,R=e.resourcesLabelContainerStyle,D=e.attachmentContainerStyle,N=e.template;return _.map(a,(function(e){var a=n[e]?n[e]:{};if("title"==e)return null;var x=a.viewType,M=a.config,L=(M=void 0===M?{}:M).viewLabel,B=M.label,j=M.styles,F=M.options;x="studentTemplate"===e?"StudentTemplate":x;var U=_.find(s,{uid:e}),H=_.get(_.find(o,{uid:e}),"value",""),V=_.get(U,"resolvedMinimalTree","")||{},W=[];"benchmarks"==e&&(W=_.get(_.find(o,{uid:"subjects"}),"value",""));var G=_.get(U,"value",""),z="dp_pa"==_.get(N,"label"),Y="studentTemplate"===e?u:"plannerResources"===e?g:"ictDetails"===e?null===G||void 0===G?void 0:G.sort():"subjectLevel"===e&&z?[]:Object(C.ab)({fieldUID:e,valueKeys:G,unitPlanFieldValue:H,fieldObj:a,subjectIds:W,resolvedValue:V,t:t}),q=k({},_.get(j,"style",{}),{},_.get(j,"viewStyle",{}));if(!function(e){var t=e.value;return"voiceInstruction"!=e.fieldKey||!_.isEmpty(t)}({value:Y,fieldKey:e}))return null;var J={};return"parent"===S&&_.map(g,(function(e){var t=_.get(e,"id",""),a="LINK"===_.get(e,"item.attachment.type","")&&null!==_.get(e,"item.attachment.mimeType","")&&!h,n=_.get(e,"item.attachment.url","");n&&(e.item.attachment.url=Object(C.Ob)(n)),J[t]=a})),_.isEmpty(Y)?null:i.a.createElement("div",{key:e,className:m.a.item,style:k({},q,{},w)},i.a.createElement(f.a,{defaultOptions:F,customTextStyle:k({},y.fontStyles.medium,{color:I.e.gray48,fontSize:"1.4rem",lineHeight:1.71}),attachments:_.get(U,"attachments",[]),type:x,mode:"view",showViewEmpty:!1,parentType:"ASSESSMENT",parentId:r,cardType:A,label:"studentTemplate"===e?B:"",labelComponent:i.a.createElement(T.a,{label:L||B,labelStyle:k({},O,{},y.fontStyles.bold,{fontSize:"1.8rem"})}),value:Y,fieldId:_.get(U,"id",""),fieldKey:e,portalType:l,attachmentItemHeight:c,isAssessmentToolPreview:!0,attachmentContainerStyle:k({gridTemplateColumns:"repeat(auto-fill, minmax(344px, 1fr))",gap:"32px",paddingBottom:"0px",marginTop:"-28px"},D),templateContainerStyle:P.templateContainerStyle,canTurnIn:d,submissionId:p,refetchGetStudentAssignmentDetails:v,onUseTemplateClick:b,myWorkAttachments:E,isDisabledModeObj:J,toolTipText:"parent"===S?t("classRoom:resource_sharing_permission"):null,resourcesLabelContainerStyle:R}))}))})),M=i.a.memo((function(e){var t=e.t,a=e.item,n=e.itemStyle,s=e.containerStyle,o=e.contentType,r=e.isTeacherEvaluationEnabled,l=e.isStudentEvaluationEnabled,c=e.canTurnInSubmission,u=e.submissionId,d=e.assessmentId,S=e.attachmentItemHeight,E=e.portalType,T=e.template,y=e.userType,I=e.refetchGetStudentAssignmentDetails,O=e.onUseTemplateClick,N=e.myWorkAttachments,M=e.assignmentCourseId,L=e.shouldShowResourcesToFamily,B=e.isEvaluationApplicable,j=e.resourcesCardType,F=e.showStudentTemplate,U=e.fieldItemStyle,H=e.showTitle,V=e.labelComponentStyle,W=e.resourcesLabelContainerStyle,G=void 0===W?{}:W,z=e.attachmentContainerStyle,Y=void 0===z?{}:z,q=e.assessmentTools,J=function(e,t){switch(e){case"ASSIGNMENT_DISCUSSION":case"ASSIGNMENT_RESOURCE":var a=_.get(t,"assignmentTitle",""),n=_.get(t,"label","");return"<div class=".concat(m.a.instructionCardTitleDescCon,">").concat(_.isEmpty(a)?"":"<div class=".concat(m.a.instructionCardTitle,">").concat(a,"</div>")).concat(n,"</div>");case"ASSESSMENT":return"<div class=".concat(m.a.cardLabel,">\n      ").concat(_.get(t,"title.value",""),"\n    </div>")}}(o,a),K=(T||{}).field_list,Z="staff"==y||B,Q=Object(R.getScoreDetailsMemoize)({assessmentTools:q}),X=Q.maxScore,$=Q.isScoreEnabled,ee=(r||l)&&Z&&!_.isEmpty(null===q||void 0===q?void 0:q.edges),te=r&&Z&&$&&X,ae="staff"==y&&(ee||te),ne="ASSESSMENT"==o?_.get(_.find(_.get(a,"fields",[]),(function(e){return"studentTemplate"===_.get(e,"uid")})),"resolvedMinimalTree.attachmentGroups"):_.get(a,"studentTemplates",[]);if(ne=_.map(ne,(function(e){return k({},e,{isPost:!0})})),"ASSESSMENT"===o){var se=T||{},oe=se.classroomFields,ie=se.isLocalisedTemplate,re=_.get(a,"allFields",[]),le=_.get(a,"unitPlan.fields",[]);return i.a.createElement("div",{className:m.a.container,style:s},!_.isEmpty(J)&&H&&i.a.createElement("div",{className:m.a.cardLabelWrapper,dangerouslySetInnerHTML:{__html:J}}),i.a.createElement("div",{className:m.a.formContainer},i.a.createElement(x,{t:t,fields:oe,field_list:K,isLocalisedTemplate:ie,assessmentFields:re,unitPlanFields:le,assessmentId:d,portalType:E,attachmentItemHeight:S,studentTemplate:F?ne:null,canTurnIn:c,submissionId:u,organizationResources:_.get(a,"organizationResources",[]),refetchGetStudentAssignmentDetails:I,onUseTemplateClick:O,myWorkAttachments:N,userType:y,shouldShowResourcesToFamily:L,resourcesCardType:j,fieldItemStyle:U,labelComponentStyle:V,resourcesLabelContainerStyle:G,attachmentContainerStyle:Y,template:T})),ae&&i.a.createElement("div",{className:m.a.assessmentContainer},i.a.createElement("div",{className:m.a.itemField},i.a.createElement("div",{className:m.a.fieldLabel},"staff"===y&&t("classRoom:assessment_tools")),te&&"staff"===y&&i.a.createElement(D.a,{value:{isUsingScore:$,maxScore:X}}),ee&&i.a.createElement("div",{className:m.a.assessmentToolsContainer},i.a.createElement(f.a,{type:"MeasureAssessing",fieldKey:"measureAssessing",mode:"view",assessmentTools:q,isAssessmentCreationRevamp:!0,field_list:K,assessmentFields:re,unitPlanFields:le})))))}var ce=_.filter(_.map(_.get(_.find(_.get(a,"fields",[]),(function(e){return"goals"===_.get(e,"uid")})),"value",[]),(function(e){return e.value})),(function(e){return!!e})),ue=_.get(a,"description.value",""),de="ASSESSMENT"==o?Object(A.w)({resources:_.get(a,"organizationResources",[])}):_.get(a,"attachments",[]),me={};"parent"===y&&_.map(de,(function(e){var t=_.get(e,"id",""),a="LINK"===_.get(e,"type","")&&null!==_.get(e,"mimeType","")&&!L,n=_.get(e,"url","");e.url=Object(C.Ob)(n),me[t]=a}));var _e="ASSESSMENT"==o?_.get(_.find(_.get(a,"fields",[]),(function(e){return"voiceInstruction"===_.get(e,"uid")})),"resolvedMinimalTree.attachment"):_.get(a,"voiceInstruction",{});return i.a.createElement("div",{className:m.a.container,style:s},!_.isEmpty(J)&&H&&i.a.createElement("div",{className:m.a.cardLabelWrapper,dangerouslySetInnerHTML:{__html:Object(w.b)(J)}}),!_.isEmpty(ce)&&i.a.createElement("div",{className:m.a.itemField},i.a.createElement(p.a,{labelContainerStyle:{marginBottom:0},value:ce,mode:"view",showViewEmpty:!1,label:t("unitPlanTemplate:le_goals_classroom_label"),labelStyle:n.labelStyle})),!_.isEmpty(ue)&&i.a.createElement("div",{className:m.a.itemField},i.a.createElement(g.a,{labelContainerStyle:{marginBottom:0},label:t("unitPlanTemplate:le_description_classroom_label"),mode:"view",showViewEmpty:!1,labelStyle:n.labelStyle,value:_.get(a,"description.value","")})),!_.isEmpty(_e)&&i.a.createElement("div",{className:m.a.itemField},i.a.createElement(v.a,{mode:"view",label:t("common:voice_instruction_plural"),value:_e,name:"voiceInstruction",labelStyle:n.labelStyle})),!_.isEmpty(de)&&i.a.createElement("div",{className:m.a.itemField},i.a.createElement(h.a,{cardType:j,mode:"view",label:t("common:resource_label_plural"),showViewEmpty:!1,value:de,labelStyle:n.labelStyle,attachmentContainerStyle:P.attachmentContainerStyle,cardStyle:P.attachmentCardStyle,toolTipText:"parent"===y?t("classRoom:resource_sharing_permission"):null,isDisabledModeObj:me})),!_.isEmpty(ne)&&F&&i.a.createElement("div",{className:m.a.itemField},i.a.createElement(b.a,{label:t("classRoom:studentTemplate_label"),value:ne,canTurnIn:c,submissionId:u,refetchGetStudentAssignmentDetails:I,onUseTemplateClick:O,myWorkAttachments:N,assignmentCourseId:M})))}));M.displayName="InstructionsCard",M.defaultProps={contentType:"ASSESSMENT",resourcesCardType:"verticalHorizontal",showStudentTemplate:!0,showTitle:!0},M.propTypes={contentType:u.a.string,resourcesCardType:u.a.string,showStudentTemplate:u.a.bool,showTitle:u.a.bool};var L=Object(r.c)(Object(l.connect)((function(e,t){var a,n=_.get(e,"login.userInfo.user_type"),s=t.template,o=void 0===s?{}:s;return"parent"===n&&(a=Object(O.e)({name:"UnlockFamilyResources",courseId:t.assignmentCourseId,organizationId:_.get(e,"login.userInfo.org_id"),userEntityType:_.get(e,"login.userInfo.userEntityType")})),{isData:!0,isLoading:!1,shouldShowResourcesToFamily:a,userType:n,assessmentId:"ASSESSMENT"==t.contentType?_.get(t,"item.id"):"",template:o}})),Object(r.d)(E.b,{name:"getAssessment",options:function(e){return{fetchPolicy:"cache-and-network",variables:{id:e.assessmentId,portalType:e.portalType}}},skip:function(e){return!e.assessmentId},props:function(e){var t=e.getAssessment,a=e.ownProps,n=(a.assessmentId,a.isData),s=a.isLoading,o=(a.getPlannerFieldsOfNode,a.unitPlanId),i=_.get(t,"node",{}),r=_.get(i,"templateId",null),l=_.get(i,"id",o),c=_.get(i,"grades",""),u=_.get(i,"allFields",[]),d=_.get(i,"enabledSections",[]),m=_.get(i,"assessmentType.value",""),p=_.get(i,"templateId",null),g=_.get(_.find(u,{uid:"subjects"}),"resolvedMinimalTree.subjects",[]),v=_.get(i,"assessmentTools",[]),b=_.get(_.find(u,{uid:"unitType"}),"value","");return{unitPlanFields:u,assessmentDetails:i,subjects:g,unitPlanTemplateId:p,unitPlanId:l,grades:c,templateId:r,enabledSections:d,assessmentType:m,assessmentTools:v,assessmentFields:_.get(i,"allFields",[]),isData:!_.isEmpty(i)&&n,isLoading:1==t.networkStatus||2==t.networkStatus||s,unitType:b}}}),Object(S.a)({resource:["common","unitPlanTemplate","classRoom"]}))(M);t.a=L},4278:function(e,t,a){"use strict";var n=a(0),s=a.n(n),o=a(4283),i=a.n(o),r=a(413),l={RUBRIC:"assessmentEvaluation:distribution_rubric_achievement",CHECKLIST:"assessmentEvaluation:distribution_checklist_assessment",MYP_OBJECTIVE_RUBRIC:"assessmentEvaluation:distribution_myp_objective_rubric",SCORE:"assessmentEvaluation:distribution_point_based_assessment"},c=[{id:"total",label:"assessmentEvaluation:total_students"},{id:"done",label:"common:done"},{id:"pending",label:"common:pending"}],u=s.a.memo((function(e){var t=e.toolType,a=e.filteredStudentCount,n=e.t;return s.a.createElement("div",{className:i.a.container},s.a.createElement("div",{className:i.a.leftHeader},n(l[t])),s.a.createElement("div",{className:i.a.studentCountList},_.map(c,(function(e){var t=e.id,o=e.label;return s.a.createElement("div",{className:i.a.statusContainer,key:t},s.a.createElement("div",{className:i.a.count},a[t]),s.a.createElement("div",{className:i.a.countLabel},n(o)))}))))})),d=Object(r.a)({resource:["assessmentEvaluation","common"]})(u);t.a=d},4283:function(e,t,a){e.exports={container:"SubHeader__container___2mAtJ",leftHeader:"SubHeader__leftHeader___2HsMe",studentCountList:"SubHeader__studentCountList___25X_R",statusContainer:"SubHeader__statusContainer___c7icc",count:"SubHeader__count___1Bteb",countLabel:"SubHeader__countLabel___113oY"}},4284:function(e,t,a){e.exports={container:"ToolResponse__container___Mslsu"}},4285:function(e,t,a){e.exports={container:"Header__container___1F1H3",leftHeader:"Header__leftHeader___3Pu29",middleHeader:"Header__middleHeader___3alhL",rightHeader:"Header__rightHeader___3ao2C",title:"Header__title___38oqv",subTitle:"Header__subTitle___7iUhd"}},4293:function(e,t,a){e.exports={modalContent:"PrintPdfPreview__modalContent___1emRh",modalCon:"PrintPdfPreview__modalCon___1uqbj",iframeContainer:"PrintPdfPreview__iframeContainer___3ivDa",innerContainer:"PrintPdfPreview__innerContainer___1zcMN",footerContainer:"PrintPdfPreview__footerContainer___cH6Vf",leftContainer:"PrintPdfPreview__leftContainer___2k4o8",rightContainer:"PrintPdfPreview__rightContainer___2p9j8",buttonItem:"PrintPdfPreview__buttonItem___XRjAZ",buttonIcon:"PrintPdfPreview__buttonIcon___1lVNc",buttonLabel:"PrintPdfPreview__buttonLabel___c_Vdf"}},4384:function(e,t,a){e.exports={container:"StudentFilterBox__container___3x8GZ",item:"StudentFilterBox__item___N89K3",itemName:"StudentFilterBox__itemName___1-KST",activeItem:"StudentFilterBox__activeItem___3KVxW",emptyText:"StudentFilterBox__emptyText___2osB4"}},4453:function(e,t,a){e.exports={baseStyle:"MeetingBanner__baseStyle___1f7OY",container:"MeetingBanner__container___1LnyZ",containerV2:"MeetingBanner__containerV2___1BtB5",leftContainer:"MeetingBanner__leftContainer___dmxQo",detailContainer:"MeetingBanner__detailContainer___JuDM7",rightContainer:"MeetingBanner__rightContainer___2jeNs",message:"MeetingBanner__message___3V2is",warning:"MeetingBanner__warning___1earu",profileImageContainer:"MeetingBanner__profileImageContainer___3OwhN",videoIconcontainer:"MeetingBanner__videoIconcontainer___28kGY"}},4454:function(e,t,a){e.exports={container:"FullScrennEventModal__container___2DnC2",header:"FullScrennEventModal__header___2rr8c",logo:"FullScrennEventModal__logo___2waPz",chevronIconContainer:"FullScrennEventModal__chevronIconContainer___a_Qql",details:"FullScrennEventModal__details___2AKqc",title:"FullScrennEventModal__title___1WwPB",scheduleDateText:"FullScrennEventModal__scheduleDateText___iMa2n",body:"FullScrennEventModal__body___RZ6Mj",innerBody:"FullScrennEventModal__innerBody___tJJD9",eventTitle:"FullScrennEventModal__eventTitle___39LPH",publishedTime:"FullScrennEventModal__publishedTime___1eRpL",descriptionText:"FullScrennEventModal__descriptionText___1N0oK",meetingCon:"FullScrennEventModal__meetingCon___3nJT5",eventImageContainer:"FullScrennEventModal__eventImageContainer___keKok",eventImage:"FullScrennEventModal__eventImage___mzASv",eventIcon:"FullScrennEventModal__eventIcon___2US6_",meetingLinkTextCon:"FullScrennEventModal__meetingLinkTextCon___3voC0",meetingLink:"FullScrennEventModal__meetingLink___E9Kh4",meetingLinkText:"FullScrennEventModal__meetingLinkText___1jz7w",footer:"FullScrennEventModal__footer___1duYq",innerFooter:"FullScrennEventModal__innerFooter___3sxOG"}},4478:function(e,t,a){e.exports={feedItem:"StudentFeedItem__feedItem___Dc7IC",infoContainer:"StudentFeedItem__infoContainer___1eEDT",icon:"StudentFeedItem__icon___2QCTL",nameContainer:"StudentFeedItem__nameContainer___1F8Ng",assessmentName:"StudentFeedItem__assessmentName___2_W1e",studentName:"StudentFeedItem__studentName___2up-G",statusContainer:"StudentFeedItem__statusContainer___22sLk",statusWrapper:"StudentFeedItem__statusWrapper___1TG-5",status:"StudentFeedItem__status___3CUlQ",date:"StudentFeedItem__date___31t01",late:"StudentFeedItem__late___1YhRC",badge:"StudentFeedItem__badge___Od_aX"}},4508:function(e,t,a){"use strict";var n=a(18),s=a.n(n),o=a(30),i=a.n(o),r=a(1),l=a.n(r),c=a(0),u=a.n(c),d=a(4847),m=a.n(d),p=a(3877),g=a(2255),v=a(3653),b=a(413),S=a(3),E=a.n(S),h=function(e){return u.a.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 20 20"},u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.73169 3.75H5.625C4.58947 3.75 3.75 4.58947 3.75 5.625V15C3.75 16.0355 4.58947 16.875 5.625 16.875H8.75C9.09518 16.875 9.375 17.1548 9.375 17.5C9.375 17.8452 9.09518 18.125 8.75 18.125H5.625C3.89911 18.125 2.5 16.7259 2.5 15V5.625C2.5 3.89911 3.89911 2.5 5.625 2.5H5.73169C5.98909 1.77175 6.68361 1.25 7.5 1.25H12.5C13.3164 1.25 14.0109 1.77175 14.2683 2.5H14.375C16.1009 2.5 17.5 3.89911 17.5 5.625V9.6875C17.5 10.0327 17.2202 10.3125 16.875 10.3125C16.5298 10.3125 16.25 10.0327 16.25 9.6875V5.625C16.25 4.58947 15.4105 3.75 14.375 3.75H14.2683C14.0109 4.47825 13.3164 5 12.5 5H7.5C6.68361 5 5.98909 4.47825 5.73169 3.75ZM6.875 3.125C6.875 2.77982 7.15482 2.5 7.5 2.5H12.5C12.8452 2.5 13.125 2.77982 13.125 3.125C13.125 3.47018 12.8452 3.75 12.5 3.75H7.5C7.15482 3.75 6.875 3.47018 6.875 3.125Z",fill:e.fill}),u.a.createElement("path",{d:"M6.875 8.75C6.875 8.40482 7.15482 8.125 7.5 8.125H12.5C12.8452 8.125 13.125 8.40482 13.125 8.75C13.125 9.09518 12.8452 9.375 12.5 9.375H7.5C7.15482 9.375 6.875 9.09518 6.875 8.75Z",fill:e.fill}),u.a.createElement("path",{d:"M7.5 11.25C7.15482 11.25 6.875 11.5298 6.875 11.875C6.875 12.2202 7.15482 12.5 7.5 12.5H12.5C12.8452 12.5 13.125 12.2202 13.125 11.875C13.125 11.5298 12.8452 11.25 12.5 11.25H7.5Z",fill:e.fill}),u.a.createElement("path",{d:"M17.9419 12.6831C18.186 12.9271 18.186 13.3229 17.9419 13.5669L13.5669 17.9419C13.3229 18.186 12.9271 18.186 12.6831 17.9419L10.8081 16.0669C10.564 15.8229 10.564 15.4271 10.8081 15.1831C11.0521 14.939 11.4479 14.939 11.6919 15.1831L13.125 16.6161L17.0581 12.6831C17.3021 12.439 17.6979 12.439 17.9419 12.6831Z",fill:e.fill}))};h.defaultProps={height:20,width:20},h.propTypes={height:E.a.number,width:E.a.number,fill:E.a.string};var C=h,f=function(e){return u.a.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M13.5669 8.30806C13.811 8.55214 13.811 8.94786 13.5669 9.19194L9.19194 13.5669C8.94786 13.811 8.55214 13.811 8.30806 13.5669L6.43306 11.6919C6.18898 11.4479 6.18898 11.0521 6.43306 10.8081C6.67714 10.564 7.07286 10.564 7.31694 10.8081L8.75 12.2411L12.6831 8.30806C12.9271 8.06398 13.3229 8.06398 13.5669 8.30806Z",fill:e.fill}),u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2683 2.5H14.375C16.1009 2.5 17.5 3.89911 17.5 5.625V15C17.5 16.7259 16.1009 18.125 14.375 18.125H5.625C3.89911 18.125 2.5 16.7259 2.5 15V5.625C2.5 3.89911 3.89911 2.5 5.625 2.5H5.73169C5.98909 1.77175 6.68361 1.25 7.5 1.25H12.5C13.3164 1.25 14.0109 1.77175 14.2683 2.5ZM5.73169 3.75H5.625C4.58947 3.75 3.75 4.58947 3.75 5.625V15C3.75 16.0355 4.58947 16.875 5.625 16.875H14.375C15.4105 16.875 16.25 16.0355 16.25 15V5.625C16.25 4.58947 15.4105 3.75 14.375 3.75H14.2683C14.0109 4.47825 13.3164 5 12.5 5H7.5C6.68361 5 5.98909 4.47825 5.73169 3.75ZM6.875 3.125C6.875 2.77982 7.15482 2.5 7.5 2.5H12.5C12.8452 2.5 13.125 2.77982 13.125 3.125C13.125 3.47018 12.8452 3.75 12.5 3.75H7.5C7.15482 3.75 6.875 3.47018 6.875 3.125Z",fill:e.fill}))};f.propTypes={height:E.a.number,width:E.a.number,fill:E.a.string},f.defaultProps={height:20,width:20};var T=f,y=function(e){return u.a.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 20 20"},u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 15C12.4162 15 14.375 13.0412 14.375 10.625C14.375 8.20875 12.4162 6.25 10 6.25C7.58375 6.25 5.625 8.20875 5.625 10.625C5.625 13.0412 7.58375 15 10 15ZM13.125 10.625C13.125 11.2744 12.9269 11.8775 12.5879 12.3772C12.5583 12.3163 12.5182 12.2592 12.4676 12.2086L8.41649 8.15747C8.36587 8.10685 8.30872 8.06673 8.24776 8.0371C8.74749 7.69807 9.35062 7.5 10 7.5C11.7259 7.5 13.125 8.89911 13.125 10.625ZM10 13.75C10.6494 13.75 11.2526 13.5519 11.7524 13.2128C11.6914 13.1832 11.6343 13.1431 11.5837 13.0925L7.53261 9.04136C7.48197 8.99072 7.44184 8.93356 7.41222 8.87258C7.07312 9.37236 6.875 9.97554 6.875 10.625C6.875 12.3509 8.27411 13.75 10 13.75Z",fill:e.fill}),u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2683 2.5H14.375C16.1009 2.5 17.5 3.89911 17.5 5.625V15C17.5 16.7259 16.1009 18.125 14.375 18.125H5.625C3.89911 18.125 2.5 16.7259 2.5 15V5.625C2.5 3.89911 3.89911 2.5 5.625 2.5H5.73169C5.98909 1.77175 6.68361 1.25 7.5 1.25H12.5C13.3164 1.25 14.0109 1.77175 14.2683 2.5ZM5.73169 3.75H5.625C4.58947 3.75 3.75 4.58947 3.75 5.625V15C3.75 16.0355 4.58947 16.875 5.625 16.875H14.375C15.4105 16.875 16.25 16.0355 16.25 15V5.625C16.25 4.58947 15.4105 3.75 14.375 3.75H14.2683C14.0109 4.47825 13.3164 5 12.5 5H7.5C6.68361 5 5.98909 4.47825 5.73169 3.75ZM6.875 3.125C6.875 2.77982 7.15482 2.5 7.5 2.5H12.5C12.8452 2.5 13.125 2.77982 13.125 3.125C13.125 3.47018 12.8452 3.75 12.5 3.75H7.5C7.15482 3.75 6.875 3.47018 6.875 3.125Z",fill:e.fill}))};y.propTypes={height:E.a.number,width:E.a.number,fill:E.a.string},y.defaultProps={height:20,width:20};var I=y,A=function(e){return u.a.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 21 20"},u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.14894 11.7033C5.17812 11.6012 5.23285 11.5082 5.30795 11.4331L13.1205 3.62055C14.2275 2.51353 16.0223 2.51353 17.1293 3.62055C18.2364 4.72757 18.2364 6.52241 17.1293 7.62943L9.31683 15.4419C9.24173 15.517 9.14872 15.5718 9.04659 15.6009L4.67159 16.8509C4.45335 16.9133 4.21845 16.8524 4.05795 16.6919C3.89745 16.5314 3.83658 16.2965 3.89894 16.0783L5.14894 11.7033ZM6.30635 12.2024L5.40991 15.34L8.54747 14.4435L14.5536 8.43744L12.3124 6.19633L6.30635 12.2024ZM13.1963 5.31244L15.4374 7.55356L16.2455 6.74555C16.8643 6.12668 16.8643 5.1233 16.2455 4.50443C15.6266 3.88557 14.6232 3.88557 14.0043 4.50443L13.1963 5.31244Z",fill:e.fill}),u.a.createElement("path",{d:"M10.125 16.875C10.125 16.5298 10.4048 16.25 10.75 16.25H17C17.3451 16.25 17.625 16.5298 17.625 16.875C17.625 17.2202 17.3451 17.5 17 17.5H10.75C10.4048 17.5 10.125 17.2202 10.125 16.875Z",fill:e.fill}))};A.defaultProps={height:20,width:20},A.propTypes={fill:E.a.string,width:E.a.number};var w=A,O=function(e){return u.a.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 20 20"},u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.9381 3.12501C6.12778 3.91908 5.625 5.02581 5.625 6.24997C5.625 7.6922 6.32286 8.97145 7.39933 9.76843C4.95518 10.5412 3.07794 12.3973 2.28536 14.8462C1.99636 15.7392 2.25595 16.5842 2.80057 17.1826C3.33477 17.7696 4.14156 18.125 5 18.125H10C10.3452 18.125 10.625 17.8451 10.625 17.5C10.625 17.1548 10.3452 16.875 10 16.875H5C4.47773 16.875 4.01194 16.6565 3.72503 16.3413C3.44854 16.0374 3.33847 15.6518 3.47462 15.2311C4.35948 12.4971 6.84982 10.625 10 10.625C12.4162 10.625 14.375 8.66621 14.375 6.24997C14.375 5.02581 13.8722 3.91908 13.0619 3.12501H15.625C15.9702 3.12501 16.25 2.84519 16.25 2.50001C16.25 2.15483 15.9702 1.87501 15.625 1.87501H10.0185L10 1.87497L9.98153 1.87501H3.125C2.77982 1.87501 2.5 2.15483 2.5 2.50001C2.5 2.84519 2.77982 3.12501 3.125 3.12501V5.00001C3.125 5.34519 3.40482 5.62501 3.75 5.62501C4.09518 5.62501 4.375 5.34519 4.375 5.00001V3.12501H6.9381ZM9.98439 3.12501C8.26568 3.13341 6.875 4.52928 6.875 6.24997C6.875 7.97586 8.27411 9.37497 10 9.37497C11.7259 9.37497 13.125 7.97586 13.125 6.24997C13.125 4.52928 11.7343 3.13341 10.0156 3.12501H9.98439Z",fill:e.fill}),u.a.createElement("path",{d:"M18.8035 11.257C19.0475 11.0129 19.0475 10.6172 18.8035 10.3731C18.5594 10.129 18.1636 10.129 17.9196 10.3731L13.9865 14.3062L12.5535 12.8731C12.3094 12.629 11.9136 12.629 11.6696 12.8731C11.4255 13.1172 11.4255 13.5129 11.6696 13.757L13.5446 15.632C13.7886 15.8761 14.1844 15.8761 14.4285 15.632L18.8035 11.257Z",fill:e.fill}))};O.defaultProps={height:20,width:20},O.propTypes={height:E.a.number,width:E.a.number,fill:E.a.string};var R=O,D=function(e){return u.a.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M6.875 6.875C6.52982 6.875 6.25 7.15482 6.25 7.5L6.25 10C6.25 10.3452 6.52982 10.625 6.875 10.625H9.375C9.72018 10.625 10 10.3452 10 10C10 9.65482 9.72018 9.375 9.375 9.375H8.42831L8.90164 8.90167C9.87795 7.92536 11.4609 7.92536 12.4372 8.90167C13.4135 9.87799 13.4135 11.4609 12.4372 12.4372C11.4609 13.4135 9.87795 13.4135 8.90164 12.4372C8.65756 12.1931 8.26183 12.1931 8.01775 12.4372C7.77367 12.6813 7.77367 13.077 8.01775 13.3211C9.48222 14.7856 11.8566 14.7856 13.3211 13.3211C14.7855 11.8566 14.7855 9.48226 13.3211 8.01779C11.8566 6.55333 9.48222 6.55333 8.01775 8.01779L7.5 8.53554L7.5 7.5C7.5 7.15482 7.22018 6.875 6.875 6.875Z",fill:e.fill}),u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.6605 5.14778C17.6605 3.42189 16.2614 2.02278 14.5355 2.02278H5.78552C4.05963 2.02278 2.66052 3.42189 2.66052 5.14778V15.1478C2.66052 16.8737 4.05963 18.2728 5.78552 18.2728H14.5355C16.2614 18.2728 17.6605 16.8737 17.6605 15.1478V5.14778ZM14.5355 3.27278C15.5711 3.27278 16.4105 4.11225 16.4105 5.14778V15.1478C16.4105 16.1833 15.5711 17.0228 14.5355 17.0228H5.78552C4.74999 17.0228 3.91052 16.1833 3.91052 15.1478V5.14778C3.91052 4.11225 4.74999 3.27278 5.78552 3.27278H14.5355Z",fill:e.fill}))};D.defaultProps={height:20,width:20};var N=D,k=a(84),P=a(98),x=a(15),M=a(26),L=a(27),B=a(41),j=a(45),F=a(36),U=a(8),H=a(11),V=a(2201),W=a(55),G=a(69),z=a(12),Y=a.n(z);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var K={textStyle:{maxHeight:"unset",lineHeight:"unset",overflow:"unset",textOverflow:"unset",WebkitLineClamp:"usnet",WebkitBoxOrient:"unset"},itemStyle:{minHeight:"48px",height:"unset"},containerStyle:{width:"280px",zIndex:20}},Z={overlayStyle:{maxWidth:250},headerStyles:{fontSize:"2rem",padding:"24px 16px 16px 32px"},headerStylesBulk:{fontSize:"2rem",padding:"24px 24px 16px 32px"},modalBodyStyleBulk:J({fontSize:"1.6rem",padding:"0px 32px 0px 16px",lineHeight:"2.4rem",color:B.e.textDefault},j.fontStyles.medium),modalBodyStyle:J({fontSize:"1.6rem",padding:"16px 32px",lineHeight:"2.4rem",color:B.e.textDefault},j.fontStyles.medium),footerContainerStyle:{padding:"32px"}},Q={RETURN:{title:function(e){var t=e.t,a=e.isBulk,n=e.firstName;return a?t("common:return_submissions"):t("common:return_submission_label",{name:n})},warningText:function(e){var t=e.t,a=e.isBulk,n=e.count,s=e.firstName;return a?t("sure_return_submissions_with_count",{count:n}):t("common:sure_return_submission_name",{name:s})},confirmButtonText:function(e){return(0,e.t)("common:return")},cancelButtonText:function(e){return(0,e.t)("common:cancel")},isPromptBox:!0,promptBoxType:"TextAreaInput",promptDetail:function(e){var t=e.t;return{placeholder:t(e.isBulk?"common:enter_remark_for_selected_students":"common:enter_remark_here"),label:t("common:remark"),checkValidation:!1,promptText:""}},modalBody:function(){},modalBodyStyle:function(e){return e.isBulk?Z.modalBodyStyleBulk:Z.modalBodyStyle}},EVALUATE:{title:function(e){var t=e.t,a=e.isBulk,n=e.firstName,s=e.isTeacherEvaluationEnabled,o=void 0!==s&&s,i=e.selectedSubmissionsCount,r=e.totalStudents,l=t(o?"classRoom:evaluated":"classRoom:completed");return a?i===r||0===i?t("classRoom:mark_all_as_label",{label:l}):t("classRoom:mark_count_student_as_label",{label:l,count:i}):t("classRoom:mark_name_as_action",{name:n,action:l})},warningText:function(){},promptDetail:function(){},modalBody:function(e){var t=e.t,a=e.isBulk,n=e.notSubmittedCount,s=e.notEvaluatedCount,o=e.isSubmitted,i=e.firstName,r=e.isTeacherEvaluationEnabled,l=e.isStudentSubmissionEnabled,c=e.totalStudents,d=e.selectedSubmissionsCount;return a&&l&&n>0?u.a.createElement("ul",null,u.a.createElement("li",null,t("assessmentEvaluation:not_submitted_all_evaluate_alert",{count:n})),u.a.createElement("li",null,t("assessmentEvaluation:".concat(d>0?"move_to_complete_alert_bulk_selected":"move_to_complete_alert_bulk")))):a&&s>0?t("assessmentEvaluation:".concat(d===c||0===d?r?"not_evaluated_mark_all_evaluated":"not_completed_mark_all_completed":r?"not_evaluated_mark_all_selected_evaluated":"not_completed_mark_all_selected_completed")):a||o?null:t("classRoom:action_not_submitted_with_name",{name:i,action:t(r?"classRoom:evaluated":"classRoom:completed")})},confirmButtonText:function(e){var t=e.t,a=e.isBulk,n=e.isEvaluate,s=t(void 0!==n&&n?"classRoom:evaluated":"classRoom:completed");return t(a?"classRoom:mark_all_as_label":"common:mark_as_label",{label:s})},cancelButtonText:function(e){return(0,e.t)("common:cancel")},modalBodyStyle:function(e){var t=e.isBulk,a=e.isStudentSubmissionEnabled,n=e.notSubmittedCount;return t&&a&&n>0?Z.modalBodyStyleBulk:Z.modalBodyStyle}},EVALUATE_SHARE:{title:function(e){var t=e.t,a=e.isBulk,n=e.firstName,s=t("common:entity1_and_entity2",{entity1:t("classRoom:evaluated"),entity2:t("common:share")});return a?t("classRoom:mark_all_as_label",{label:s}):t("classRoom:mark_name_as_action",{name:n,action:s})},warningText:function(){},promptDetail:function(){},modalBody:function(e){var t=e.t,a=e.isBulk,n=e.notSubmittedCount,s=e.notEvaluatedCount,o=e.isSubmitted,i=e.firstName,r=e.isStudentSubmissionEnabled,l=e.totalStudents,c=e.isAllSubmissionsRevamp,d=e.notSharedWithStudentsCount;return a&&r&&n>0?u.a.createElement("ul",null,u.a.createElement("li",null,t("assessmentEvaluation:not_submitted_all_evaluate_alert",{count:n})),u.a.createElement("li",null,t("assessmentEvaluation:share_post_alert",{count:c?d:l})),u.a.createElement("li",null,t("assessmentEvaluation:move_to_complete_alert_bulk"))):a&&s>0?u.a.createElement("ul",null,u.a.createElement("li",null,t("assessmentEvaluation:share_post_alert",{count:c?d:l})),u.a.createElement("li",null,t("assessmentEvaluation:move_to_complete_alert_bulk"))):a||o?null:t("classRoom:eval_and_share_not_submitted_with_name",{name:i})},confirmButtonText:function(e){var t=e.t,a=e.isBulk,n=t("common:entity1_and_entity2",{entity1:t("classRoom:evaluated"),entity2:t("common:share")});return t(a?"classRoom:mark_all_as_label":"common:mark_as_label",{label:n})},cancelButtonText:function(e){return(0,e.t)("common:cancel")},modalBodyStyle:function(e){return e.isBulk?Z.modalBodyStyleBulk:Z.modalBodyStyle}},SHARE:{title:function(e){var t=e.t,a=e.firstName;return e.isBulk?t("classRoom:share_eval_with_all"):t("classRoom:share_eval_with_name",{name:a})},warningText:function(){},promptDetail:function(){},modalBody:function(e){var t=e.t,a=e.isBulk,n=e.notSubmittedCount,s=e.isSubmitted,o=e.firstName,i=e.isStudentSubmissionEnabled,r=e.totalStudents,l=e.isAllSubmissionsRevamp,c=e.notSharedWithStudentsCount;return a?i&&n>0?t("assessmentEvaluation:not_submitted_feedcard_share_alert",{count:n}):t("assessmentEvaluation:share_post_alert",{count:l?c:r}):a||s?null:t("classRoom:share_eval_with_name_body",{name:o})},confirmButtonText:function(e){var t=e.t;return t("common:share_with_label",{label:t("common:evaluation")})},cancelButtonText:function(e){return(0,e.t)("common:cancel")},modalBodyStyle:function(){return Z.modalBodyStyle}}},X=u.a.memo((function(e){var t=e.children,a=e.isSubmitted,n=e.isEvaluated,o=e.isSharedWithStudent,r=e.isBulk,d=e.notSubmittedCount,b=e.submissionsCount,S=e.notEvaluatedCount,E=e.notSharedWithStudentsCount,h=e.student,f=e.post,y=e.onMarkEvaluatedShare,A=e.onDownloadSubmission,O=e.onRequestResubmission,D=e.showMarkEvaluatedButton,k=e.showMarkEvaluatedShareButton,P=e.showDownloadButton,x=e.showReturnButton,M=e.assignmentType,L=e.submissionStatus,j=e.onUpdateShowDropDown,G=e.dropdownStyles,z=e.isTeacherEvaluationEnabled,q=e.isStudentSubmissionEnabled,J=e.showEditButton,X=e.totalStudents,$=e.isEvaluationApplicable,ee=e.onMarkEvaluationApplicable,te=e.showEvaluationApplicableButton,ae=e.isCurrentAcademicYearSelected,ne=e.t,se=e.isArchived,oe=e.isArchivedClass,ie=e.showAddResponseToJournal,re=e.onAddResponse,le=e.isAlreadyAddedToJournal,ce=e.isPrivate,ue=e.showAddResponseByTeacher,de=e.submissionId,me=e.isAllSubmissionsRevamp,_e=e.selectedSubmissions,pe=void 0===_e?[]:_e,ge=e.openLinkInNewTab,ve=e.canDownloadBulkSubmissions,be=e.postIconState,Se=e.showAddToJournal,Ee=e.onBulkAddToJournal,he=e.assignedStudents,Ce=e.notSharedWithStudents,fe=e.notEvaluatedStudents,Te=e.submissionsCanBeReturned,ye=e.submissionsCanBeShared,Ie=e.submissionsCanBeUnshared,Ae=e.evaluationNotApplicableStudents,we=e.canEvaluate,Oe=e.isAttachmentGroupsEmpty,Re=e.allowAddLEToJournal,De=e.attachmentsCount,Ne=Object(c.useState)(""),ke=i()(Ne,2),Pe=ke[0],xe=ke[1],Me=h.firstName,Le=F.a.can("FeatureFlag:ClassroomEvaluationNotApplicable"),Be=F.a.can("FeatureFlag:EnableLePostInJournal"),je=r?be:{},Fe=je.tooltip,Ue=je.isDisabled,He=je.isPostAddIcon,Ve=je.hasOnClickAction,We=_.size(pe),Ge=_.size(Te),ze=_.size(ye),Ye=_.size(Ie),qe=_.size(Ae),Je=We>0?pe:_.map(he,(function(e){return null===e||void 0===e?void 0:e.id})),Ke=_.difference(Je,Ae),Ze="";r&&we?Ze=ne(S>0&&E>0?"assessmentEvaluation:mark_all_as_evaluated_share_with_students":"assessmentEvaluation:share_evaluations_with_students"):we&&(Ze=n||o?ne("assessmentEvaluation:label_evaluation_with_student",{label:ne("common:share")}):ne("assessmentEvaluation:mark_as_evaluated_share_with_student"));var Qe="";Qe=ne(me&&n&&!Re?"journal:empty_responses_can_not_be_added":le?"classRoom:response_added_to_journal":le||!q&&!we?"classRoom:only_completed_evaluated_responses_can_be_added":"classRoom:add_response_to_journal");var Xe=me?Re&&n:n,$e=r&&qe&&qe===S,et={label:ne("classRoom:add_response"),svg:u.a.createElement(U.AddOutlined,{variant:"subtle",size:"xxx-small",disabled:n||!q||oe}),icon:u.a.createElement(U.AddOutlined,{variant:"subtle",size:"xxx-small",disabled:n||!q||oe}),value:"add_student_response",isDisable:n||!q||oe},tt={label:ne(r&&0===We?we&&z?"assessmentEvaluation:mark_all_as_evaluated":"assessmentEvaluation:mark_all_as_completed":we&&z?"assessmentEvaluation:mark_as_evaluated":"assessmentEvaluation:mark_as_completed"),svg:u.a.createElement(C,{width:16,height:16,fill:"iron"}),icon:u.a.createElement(U.TickCircleOutlined,{variant:"subtle",disabled:!ae||!$||se||oe||$e||!r&&n||r&&!(S-qe)}),value:"evaluate",isDisable:!ae||!$||se||oe||$e||!r&&n||r&&!(S-qe)},at={label:ne(we?"assessmentEvaluation:mark_evaluation_as_pending":"common:mark_as_pending"),svg:null,icon:u.a.createElement(U.WarningCircleOutlined,{variant:"subtle",disabled:!ae||!$||oe||!r&&!n||r&&(We>0?S===We:S>0)}),value:"evaluation_pending",isDisable:!ae||!$||oe||!r&&!n||r&&(We>0?S===We:S>0),hasRightMargin:!q&&we},nt={label:ne("common:enable_with_label_lowercase",{label:ne("common:evaluation")}),svg:u.a.createElement(T,{width:16,height:16,fill:B.e.gray48}),icon:u.a.createElement(U.AssessmentApplicableOutlined,{variant:"subtle",disabled:r&&0===qe||!r&&$||!ae}),value:"enable_evaluation",isDisable:r&&0===qe||!r&&$||!ae},st={label:ne("assessmentEvaluation:evaluation_not_applicable"),svg:u.a.createElement(I,{width:16,height:16}),icon:u.a.createElement(U.EvaluationNotApplicableOutlined,{variant:"subtle",disabled:$e||r&&0===S||!r&&(!$||n)||!ae}),value:"evaluation_not_applicable",isDisable:$e||r&&0===S||!r&&(!$||n)||!ae,hasRightMargin:ve||$||Xe},ot={label:ne(z?"assessmentEvaluation:edit_evaluation":"common:edit"),svg:u.a.createElement(w,{width:16,height:16,fill:"iron"}),icon:u.a.createElement(U.PencilLineOutlined,{variant:"subtle",disabled:!ae||!$}),value:"edit_evaluation",isDisable:!ae||!$},it={label:r&&We>0?ne("assessmentEvaluation:label_evaluation_with_students_and_parents",{label:ne("common:share")}):Ze,svg:u.a.createElement(R,{width:16,height:16}),icon:u.a.createElement(U.UserArrowOutlined,{variant:"subtle",disabled:!$||$e||r&&0===We&&0===S&&0===E||r&&We>0&&0===ze||!r&&n&&o||!ae||ce&&!r||r&&!z}),value:r&&0===We&&S>0&&E>0||!r&&!n&&!o?"evaluate_share":"share",isDisable:!$||$e||r&&0===We&&0===S&&0===E||r&&We>0&&0===ze||!r&&n&&o||!ae||ce&&!r||r&&!z},rt={label:ne(r?"assessmentEvaluation:label_evaluation_with_students_and_parents":"assessmentEvaluation:label_evaluation_with_student",{label:ne("common:unshare")}),svg:null,icon:u.a.createElement(U.UserCloseOutlined,{variant:"subtle",disabled:!$||$e||r&&0===Ye||!r&&n&&!o||!ae||ce}),value:"unshare",isDisable:!$||$e||r&&0===Ye||!r&&n&&!o||!ae||ce,hasRightMargin:!0},lt={label:ne("assessmentEvaluation:request_resubmission"),svg:u.a.createElement(N,{width:16,height:16}),icon:u.a.createElement(U.ReSubmissionRequestOutlined,{variant:"subtle",disabled:!r&&("RETURNED"===L||n||!a)||r&&0===Ge||!ae||se||oe}),value:"request_resubmission",isDisable:!r&&("RETURNED"===L||n||!a)||r&&0===Ge||!ae||se||oe,hasRightMargin:!0},ct={label:ne(r?We>0?"assessmentEvaluation:download_submission_plural":"assessmentEvaluation:download_all_submissions":"assessmentEvaluation:download_submission"),svg:u.a.createElement(U.DownloadCloudOutlined,{size:"xxx-small",variant:"subtle",disabled:r?!ve||b<1:!a||Oe}),icon:u.a.createElement(U.DownloadCloudOutlined,{variant:"subtle",disabled:r?!ve||b<1:!a||Oe}),value:"download_submission",isDisable:r?!ve||b<1:!a||Oe},ut={label:Qe,svg:u.a.createElement(U.JournalAddOutlined,{size:"xxx-small",variant:"subtle",disabled:!$||!Xe}),icon:u.a.createElement(U.JournalAddOutlined,{variant:"subtle",disabled:!$||!Xe}),value:"add_response",isDisable:!$||!Xe},dt={label:ne("classRoom:response_added_to_journal"),svg:u.a.createElement(U.JournalTickOutlined,{size:"xxx-small",variant:"subtle"}),icon:u.a.createElement(U.JournalTickOutlined,{variant:"success"}),value:"see_post",isDisable:!1},mt={label:ne(Fe),svg:null,icon:He?u.a.createElement(U.JournalAddOutlined,{variant:"subtle",disabled:Ue}):u.a.createElement(U.JournalTickOutlined,{variant:"success",size:"x-small"}),value:"add_bulk_to_journal",isDisable:Ue},_t=[tt,at,q&&!ce?lt:null,we?it:null,we?rt:null,we?nt:null,we?st:null,q?ct:null,(q||we)&&Se?mt:null],pt=[r||!ue||et.isDisable?null:et,r&&S>0&&D||!r&&!n&&D?tt:null,!r&&n&&J?ot:null,r&&(We>0||0===S)||!r&&n&&me?at:null,r&&k||!r&&me&&k?o?rt:it:null,!r&&te&&we&&Le?$?st:nt:null,!me&&ie&&!le&&Be&&n&&Re?ut:null,P&&q?ct:null,x&&!ce?lt:null],gt=function(e){switch(Pe){case"RETURN":r?y({isReturnStudentAssignment:!0,remarkForReturnStudentAssignment:e,studentAssignmentIds:Te}):O(e);break;case"EVALUATE":y({isEvaluated:!n,isSharedWithStudent:!1,isEvaluationApplicable:$,studentAssignmentIds:We>0?Ke:Ce});break;case"SHARE":case"EVALUATE_SHARE":y({isEvaluated:!0,isSharedWithStudent:!0,isEvaluationApplicable:$,studentAssignmentIds:Ke})}},vt=_.every(pt,(function(e){return null===e})),bt=function(e){switch(e){case"evaluate":r&&(d>0||S>0)?xe("EVALUATE"):r||!q||a||0!==De?y({isEvaluated:!n,isSharedWithStudent:!1,isEvaluationApplicable:$,studentAssignmentIds:Ke}):xe("EVALUATE");break;case"evaluation_pending":y({isEvaluated:!1,isSharedWithStudent:!1,isEvaluationApplicable:$,studentAssignmentIds:Ke});break;case"edit_evaluation":y({isEvaluated:!n,isSharedWithStudent:!1,isEvaluationApplicable:$,studentAssignmentIds:Ke});break;case"share":r&&0===We&&(d>0||S>0)?xe("SHARE"):r||!q||a?y({isEvaluated:!0,isSharedWithStudent:!0,isEvaluationApplicable:$,studentAssignmentIds:ye}):xe("SHARE");break;case"unshare":r?y({isEvaluated:!0,isSharedWithStudent:!1,isEvaluationApplicable:$,studentAssignmentIds:Ie}):!r&&o&&y({isEvaluated:!0,isSharedWithStudent:!1,isEvaluationApplicable:$});break;case"evaluate_share":r&&(d>0||S>0)?xe("EVALUATE_SHARE"):r||!q||a?y({isEvaluated:!0,isSharedWithStudent:!0,isEvaluationApplicable:$,studentAssignmentIds:Ke}):xe("EVALUATE_SHARE");break;case"request_resubmission":xe("RETURN");break;case"enable_evaluation":r?y({isEvaluationApplicable:!0,studentAssignmentIds:Je}):ee({isEvaluationApplicable:!0});break;case"evaluation_not_applicable":r?y({isEvaluationApplicable:!1,studentAssignmentIds:fe}):ee({isEvaluationApplicable:!1});break;case"download_submission":A();break;case"add_response":re();break;case"add_student_response":xe("ADD_STUDENT_RESPONSE");break;case"add_bulk_to_journal":Ve&&Ee();break;case"see_post":var t=_.get(f,"id","");ge({url:"/platform/links/post/".concat(t,"/?preserve_query_params=true")})}},St={maxWidth:200,padding:0},Et=Y()(l()({},m.a.BFlexDivRow,!0),l()({},m.a.bulkActionsCon,r&&We>0)),ht=function(e){var t,a=e.label,n=e.value,s=e.isDisable,o=e.icon,i=e.show,c=void 0===i||i,d=e.hasRightMargin,_=void 0!==d&&d,p=Y()((t={},l()(t,m.a.iconCon,!0),l()(t,m.a.iconButtonCon,s),l()(t,m.a.iconDivider,_),t)),v=Y()(l()({},m.a.iconButtonDisabled,s));return c?u.a.createElement(g.a,{tooltip:a,placement:r?"topRight":"bottomRight",mouseEnterDelay:.5,tooltipContainerStyle:St,key:n},u.a.createElement("div",{className:p},u.a.createElement(H.IconButton,{className:v,variant:"plain",icon:o,disabled:s,onClick:function(){bt(n)}}))):null};return u.a.createElement(u.a.Fragment,null,!!Pe&&function(){switch(Pe){case"ADD_STUDENT_RESPONSE":return u.a.createElement(V.a,{onClose:function(){xe("")},parentType:"STUDENT_ASSIGNMENT_SUBMISSION",parentId:de,mediaCreationOptions:W.b});default:var e=null===Q||void 0===Q?void 0:Q[Pe];return u.a.createElement(p.a,{modalTitle:null===e||void 0===e?void 0:e.title({t:ne,isBulk:r,firstName:Me,isTeacherEvaluationEnabled:z,selectedSubmissionsCount:We,totalStudents:X}),warningText:null===e||void 0===e?void 0:e.warningText({t:ne,isBulk:r,firstName:Me,count:Ge}),modalBody:null===e||void 0===e?void 0:e.modalBody({t:ne,isBulk:r,notSubmittedCount:d,notEvaluatedCount:me?S-qe:S,assignmentType:M,isSubmitted:a,firstName:Me,typeLabel:M,isTeacherEvaluationEnabled:z,isStudentSubmissionEnabled:q,totalStudents:X,isAllSubmissionsRevamp:me,notSharedWithStudentsCount:me?E-qe:E,selectedSubmissionsCount:We}),showModal:!0,onClickButton2:gt,toggleDialogueBoxDisplay:function(){return xe("")},button1:null===e||void 0===e?void 0:e.cancelButtonText({t:ne}),button2:null===e||void 0===e?void 0:e.confirmButtonText({t:ne,isBulk:r,isEvaluate:z}),isPromptBox:null===e||void 0===e?void 0:e.isPromptBox,promptBoxType:null===e||void 0===e?void 0:e.promptBoxType,promptDetail:null===e||void 0===e?void 0:e.promptDetail({t:ne,isBulk:r}),headerStyles:r?Z.headerStylesBulk:Z.headerStyles,modalBodyStyle:null===e||void 0===e?void 0:e.modalBodyStyle({isBulk:r,isStudentSubmissionEnabled:q,notSubmittedCount:d}),footerContainerStyle:Z.footerContainerStyle,size:"sm",closeButtonSize:"medium",button1Props:{variant:"outlined-subtle",size:"large"},button2Props:{size:"large"}})}}(),!vt&&(me?u.a.createElement("div",{className:Et},(q||we)&&!r&&ht(le?dt:ut),(q||we)&&r&&0===We&&ht(mt),r&&We>0?u.a.createElement("div",{className:m.a.bulkActionsCon},_.map(_t,(function(e){return e&&ht(e)}))):u.a.createElement(H.Dropdown,{overlay:u.a.createElement(H.DropdownMenu,{onClick:function(e){e.domEvent.stopPropagation();var t=e.key;bt(t)},options:_.filter(pt,(function(e){return!!e})).map((function(e){return{key:null===e||void 0===e?void 0:e.value,label:null===e||void 0===e?void 0:e.label,icon:null===e||void 0===e?void 0:e.icon,disabled:null===e||void 0===e?void 0:e.isDisable}}))}),placement:"bottomRight",overlayStyle:G},u.a.createElement(H.IconButton,{icon:u.a.createElement(U.DotsHorizontalOutlined,{variant:"subtle"}),variant:"plain",size:"small"}))):u.a.createElement(v.a,s()({buttonComponent:t,authTabs:_.filter(pt,(function(e){return!!e})),onItemClick:bt},K,{onUpdateShowDropDown:j},G))))}));X.propTypes={isSubmitted:E.a.bool,isEvaluated:E.a.bool,isSharedWithStudent:E.a.bool,isBulk:E.a.bool,showMarkEvaluatedButton:E.a.bool,showMarkEvaluatedShareButton:E.a.bool,isTeacherEvaluationEnabled:E.a.bool,isStudentEvaluationEnabled:E.a.bool,showDownloadButton:E.a.bool,showReturnButton:E.a.bool,notSubmittedCount:E.a.number,submissionsCount:E.a.number,notEvaluatedCount:E.a.number,notSharedWithStudentsCount:E.a.number,student:E.a.object,onMarkEvaluatedShare:E.a.func,onDownloadSubmission:E.a.func,onRequestResubmission:E.a.func,submissionStatus:E.a.string,showEditButton:E.a.bool,isEvaluationApplicable:E.a.bool,showEvaluationApplicableButton:E.a.bool,showAddResponseByTeacher:E.a.bool,canDownloadBulkSubmissions:E.a.bool,isAttachmentGroupsEmpty:E.a.bool,attachmentsCount:E.a.number,postIconState:E.a.object,dropdownStyles:E.a.object},X.defaultProps={isSubmitted:!0,isEvaluated:!1,isSharedWithStudent:!1,isBulk:!1,notSubmittedCount:0,submissionsCount:0,notEvaluatedCount:0,notSharedWithStudentsCount:0,student:{},showMarkEvaluatedButton:!0,showMarkEvaluatedShareButton:!0,isTeacherEvaluationEnabled:!1,isStudentEvaluationEnabled:!1,showDownloadButton:!0,showReturnButton:!0,showEditButton:!1,isEvaluationApplicable:!0,showEvaluationApplicableButton:!0,isCurrentAcademicYearSelected:!0,showAddResponseToJournal:!1,showAddResponseByTeacher:!1,canDownloadBulkSubmissions:!1,isAttachmentGroupsEmpty:!0,attachmentsCount:0,postIconState:{},dropdownStyles:{}};var $={unHandStudentAssignmentSubmission:P.unHandStudentAssignmentSubmission,editStudentAssignment:P.editStudentAssignment,setToastMsg:x.nb,downloadAttachmentZip:M.K,openLinkInNewTab:M.Ib};X.displayName="EvaluationDropdown";var ee=Object(k.c)(Object(L.connect)((function(e,t){var a=_.get(e,"platform.academicYearSelected.isCurrentAcademicYear",!0),n=_.get(e,"login.userInfo.org_id",""),s=Object(G.e)({name:"EnableAddResponseOfAssignmentByTeacher",organizationId:n}),o=F.a.can("FeatureFlag:AllSubmissionsRevamp");return{isCurrentAcademicYearSelected:a,showAddResponseByTeacher:t.showAddResponseByTeacher&&s&&!_.isArray(s),isAllSubmissionsRevamp:o}}),$),Object(b.a)({resource:["common","classRoom","assessmentEvaluation"]}))(X);t.a=ee},4548:function(e,t,a){"use strict";var n=a(20),s=a.n(n),o=a(31),i=a.n(o),r=a(21),l=a.n(r),c=a(22),u=a.n(c),d=a(23),m=a.n(d),_=a(0),p=a.n(_),g=a(4284),v=a.n(g),b=a(27),S=a(516),E=a(515),h=a(519),C=a(3),f=a.n(C),T=function(e){function t(e){return s()(this,t),l()(this,u()(t).call(this,e))}return m()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.toolType,a=e.assessmentTool,n=e.insights,s=e.insightColor,o=e.mypObjectiveRubricOptions,i=e.ibPYPElementRatings,r=e.rubricInnerConStyle,l=e.shouldTakeFullWidth,c=null;switch(t){case"RUBRIC":c=p.a.createElement(S.a,{mode:"view",rubric:a,showInsight:!0,insightColor:s,insights:n,innerConStyle:r,shouldTakeFullWidth:l});break;case"CHECKLIST":c=p.a.createElement(E.a,{checklist:a,mode:"view",showInsight:!0,insights:n,insightColor:s});break;case"MYP_OBJECTIVE_RUBRIC":case"MYP_INTERDISCIPLINARY_CRITERIA_RUBRIC":c=p.a.createElement(h.a,{assessmentTool:a,mode:"view",showInsight:!0,insights:n,insightColor:s,options:o,ibPYPElementRatings:i})}return c?p.a.createElement("div",{className:v.a.container},c):null}}]),t}(p.a.PureComponent);T.propTypes={shouldTakeFullWidth:f.a.bool},T.defaultProps={shouldTakeFullWidth:!1};var y=Object(b.connect)((function(e,t){return{}}),{})(T),I=a(902);t.a=Object(I.a)(y)},4549:function(e,t,a){"use strict";var n=a(0),s=a.n(n),o=a(4285),i=a.n(o),r=a(413),l=a(11),c=a(8),u=s.a.memo((function(e){var t=e.options,a=e.currentTab,n=e.updateCurrentTab,o=e.onClickClose,r=e.subTitle,u=e.showTabs,d=e.t;return s.a.createElement("div",{className:i.a.container},s.a.createElement("div",{className:i.a.leftHeader},s.a.createElement("div",{className:i.a.title},d("assessmentEvaluation:evaluation_insights")),s.a.createElement("div",{className:i.a.subTitle},"".concat(r))),u&&s.a.createElement("div",{className:i.a.middleHeader},s.a.createElement(l.SegmentControl,{options:t,value:a,onChange:n})),s.a.createElement("div",{className:i.a.rightHeader},s.a.createElement(l.IconButton,{icon:s.a.createElement(c.CloseOutlined,null),size:"large",onClick:o,variant:"outlined-subtle"})))}));u.displayName="Header";var d=Object(r.a)({resource:["assessmentEvaluation","common"]})(u);t.a=d},4550:function(e,t,a){"use strict";var n=a(4),s=a.n(n),o=a(1),i=a.n(o),r=a(20),l=a.n(r),c=a(31),u=a.n(c),d=a(21),m=a.n(d),p=a(22),g=a.n(p),v=a(23),b=a.n(v),S=a(0),E=a.n(S),h=a(4384),C=a.n(h),f=a(3839),T=a(902),y=a(413),I=a(3860),A=a(12),w=a.n(A),O=a(27),R=a(41),D=a(45),N=a(84),k=a(383),P=a(1181),x=a(3909),M=a(294),L=a(11),B=a(107);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var U=function(e){function t(){return l()(this,t),m()(this,g()(t).apply(this,arguments))}return b()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.students,a=e.currentStudent,n=e.changeCurrentStudent,s=e.t,o=e.defaultStudentNameSortPreference;return 0==_.get(t,"length",0)?E.a.createElement("div",{className:C.a.emptyText},s("common:no_label_found",{label:s("common:student_plural")})):_.map(t,(function(e){var t=e.node,s=t||{},r=s.id,l=s.profileImage,c=s.isArchived,u=w()(i()({},C.a.item,!0),i()({},C.a.activeItem,r==a)),d=w()("truncate",C.a.itemName),m=Object(M.b)({student:t,showStudentUID:!0,orderBy:o});return E.a.createElement("div",{className:u,key:r,onClick:function(){return n(r)}},E.a.createElement(f.a,{index:r,profileImage:l,size:32,name:m,isArchived:c}),E.a.createElement(x.a,{name:m,isArchived:c,nameClasses:d,viewMode:"NAME_ONLY",condition:_.size(m)>24,type:"wrapperAsElement",wrapper:E.a.createElement(L.Tooltip,{placement:"right",tooltip:m}),statusWrapperStyle:{overflow:"hidden"}}))}))}}]),t}(E.a.PureComponent),H=Object(N.c)(Object(O.connect)((function(e,t){return{courseId:e.teacher.selected_class.selected_course,defaultStudentNameSortPreference:Object(B.d)(e),isData:!0,isLoading:!1}}),{}),Object(N.d)(k.a,{name:"getCourseOfStudents",skip:function(e){var t=e.courseId;return _.isEmpty(t)},options:function(e){return{fetchPolicy:"cache-and-network",variables:{id:e.courseId,filters:{searchText:e.searchText,archivalState:"ALL"}}}},props:function(e){var t=e.getCourseOfStudents,a=e.ownProps,n=a.isData,s=a.isLoading,o=a.courseId,i=a.searchText,r=Object(P.a)({id:o,filters:{searchText:i,archivalState:"ALL"}});return{getCourseOfStudents:t,students:_.get(r,"students.edges",[]),isData:!_.isEmpty(r)&&n,isLoading:1==t.networkStatus||2==t.networkStatus||s}}}),T.a)(U),V=function(e){function t(e){var a;return l()(this,t),a=m()(this,g()(t).call(this,e)),i()(s()(a),"changeSearchTerm",(function(e){a.setState({searchText:e})})),a.state={searchText:""},a}return b()(t,e),u()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.changeCurrentStudent,n=t.currentStudent,s=t.t,o=this.state.searchText;return E.a.createElement("div",{className:C.a.container},E.a.createElement(I.a,{customStyle:{borderWidth:0,padding:"16px 32px"},autoFocus:!0,showCancelIcon:!1,inputStyle:F({fontSize:"2rem",color:R.e.gray72},D.fontStyles.medium),showSearchIcon:!1,placeholder:s("common:search_for_with_label",{label:s("common:student")}),ref:function(t){return e.searchBar=t},shouldAnimate:!1,changeSearchTerm:this.changeSearchTerm,searchTerm:o}),E.a.createElement(H,{t:s,searchText:o,changeCurrentStudent:a,currentStudent:n}))}}]),t}(E.a.PureComponent),W=Object(y.a)({resource:["common"]})(V);t.a=W},4551:function(e,t,a){"use strict";var n=a(0),s=a.n(n),o=a(27),i=a(4478),r=a.n(i),l=a(41),c=a(24),u=a(3655),d=a(637),m=a(413),p=a(84),g=a(55),v=a(3800),b=a(11),S={joinMeetingBtnStyle:{marginLeft:"24px",border:"1px solid ".concat(l.e.yellow50),color:l.e.black,borderRadius:"4px"}},E=s.a.memo((function(e){var t=e.assignment,a=e.t,n=e.onClickCard,o=e.userId,i=e.userType,l=t.assignment,m=t.id,p=t.conversation,E=l||{},h=E.content,C=E.contentType,f=E.id,T=E.createdBy,y=E.course,I=E.curriculumProgram,A=_.get(h,"meeting",{}),w=_.get(h,"assessmentType.value",""),O=_.get(I,"type","IB_PYP"),R=T.firstName,D=void 0===R?"":R,N=T.lastName,k=void 0===N?"":N,P="".concat(D," ").concat(k),x=y.id,M=Object(g.fb)({data:t,t:a,userType:i}),L=M.statusColor,B=M.dateColor,j=M.date,F=M.label,U=Object(g.o)({curriculumType:O,assessmentValue:w,contentType:C})||{},H=U.typeLabel,V=U.typeLabel2,W=Object(g.e)({content:h}),G=_.get(p,"unreadMessageCount",0)+_.get(l,"classDiscussion.unreadMessageCount",0),z=c.T[w],Y=_.get(z,"avatarIconColor","neutral");return s.a.createElement(b.Badge,{value:"parent"!==i?G:0,type:"numeric",size:"large",showZero:!1,variant:"notifications"},s.a.createElement("div",{key:f,className:r.a.feedItem,onClick:function(){return n({courseId:x,studentAssignmentId:m,assignmentId:f,meeting:A,contentType:C})}},s.a.createElement("div",{className:r.a.infoContainer},s.a.createElement(b.Avatar,{shape:"square",shade:"light",size:"medium",name:_.upperCase(a(H||V)),color:Y}),s.a.createElement("div",{className:r.a.nameContainer},s.a.createElement("div",{className:r.a.assessmentName},s.a.createElement(u.a,{value:W,minHeight:22})),s.a.createElement("div",{className:r.a.studentName},P))),s.a.createElement("div",{className:r.a.statusContainer},s.a.createElement("div",{className:r.a.statusWrapper},s.a.createElement("div",{className:r.a.status,style:{color:L}},F),s.a.createElement("div",{className:r.a.date,style:{color:B}},j,undefined)),"ASSIGNMENT_MEETING"==C&&s.a.createElement(d.a,{onClick:function(e){e.stopPropagation();var t=Object(v.a)({meeting:A,userId:o});t&&window.open(t,"_blank")},containerStyle:S.joinMeetingBtnStyle,color:"white",type:"hollow",size:"sm"},a("common:join_meeting")))))})),h=Object(p.c)(Object(m.a)({resource:["classRoom","common"]}),Object(o.connect)((function(e){return{userType:_.get(e,"login.userInfo.user_type","")}}),null))(E);t.a=h},4671:function(e,t,a){"use strict";var n=a(18),s=a.n(n),o=a(0),i=a.n(o),r=a(739),l=a(45),c=a(3),u=a.n(c),d={vertical:!1,stroke:l.colors.gray92,fill:"transparent"},m={opacity:.1},_=function(e){var t=e.data,a=e.legendComp,n=e.containerStyle,o=e.barProps,l=e.yAxisProps,c=e.xAxisProps,u=e.legendStyle,_=e.barChartStyle,p=e.showLegend,g=e.showXAxis,v=e.showTooltip,b=e.tooltipContent;return i.a.createElement("div",{style:n},i.a.createElement(r.b,s()({},_,{data:t}),p&&i.a.createElement(r.d,s()({},u,{content:a})),i.a.createElement(r.c,d),i.a.createElement(r.i,s()({hide:!g},c)),i.a.createElement(r.j,l),v&&i.a.createElement(r.h,{content:b,cursor:m}),i.a.createElement(r.a,o)))};_.defaultProps={data:[],showLegend:!0,showXAxis:!1,showTooltip:!1,containerStyle:{},yAxisProps:{},xAxisProps:{},barChartStyle:{},barProps:{},legendStyle:{}},_.propTypes={data:u.a.array,showLegend:u.a.bool,showXAxis:u.a.bool,showTooltip:u.a.bool,containerStyle:u.a.object,yAxisProps:u.a.object,xAxisProps:u.a.object,barChartStyle:u.a.object,barProps:u.a.object,legendStyle:u.a.object};var p=_;t.a=p},4837:function(e,t,a){e.exports={container:"StudentClassRoomDetails__container___3u9Qy"}},4838:function(e,t,a){e.exports={container:"TeacherClassRoomDetails__container___1FsyH",body:"TeacherClassRoomDetails__body___261eM",leftSideBar:"TeacherClassRoomDetails__leftSideBar___3KoDx",rightSideBar:"TeacherClassRoomDetails__rightSideBar___1yuaO",rightSideBarRevamp:"TeacherClassRoomDetails__rightSideBarRevamp___feaLK",childrenContainer:"TeacherClassRoomDetails__childrenContainer___1Z-Hz"}},4839:function(e,t,a){e.exports={container:"HeaderV2__container___1uKfq",mediaManagerContainer:"HeaderV2__mediaManagerContainer___JRS2a",innerContainer:"HeaderV2__innerContainer___2igji",mediaManagerInnerLeftContainer:"HeaderV2__mediaManagerInnerLeftContainer___2n4pY",innerLeftContainer:"HeaderV2__innerLeftContainer___1cvuv",innerLeftDetailContainer:"HeaderV2__innerLeftDetailContainer___3heTC",detailLeftContainer:"HeaderV2__detailLeftContainer___1X5ls",leftItem:"HeaderV2__leftItem___315dj",detailInfo:"HeaderV2__detailInfo___3NYZQ",textContainer:"HeaderV2__textContainer___1utoh",text:"HeaderV2__text___2y6PI",archivedText:"HeaderV2__archivedText___bVFKF",subtextContainer:"HeaderV2__subtextContainer___3eGNl",innerRightDetailContainer:"HeaderV2__innerRightDetailContainer___NcuS9",innerRightContainer:"HeaderV2__innerRightContainer___2c0kU",iconContainer:"HeaderV2__iconContainer___178OE",innerMiddleContainer:"HeaderV2__innerMiddleContainer___1_JL_",leftRightIcons:"HeaderV2__leftRightIcons___25o_f",categoryContainer:"HeaderV2__categoryContainer___264Dg",dotContainer:"HeaderV2__dotContainer___1T0yR",scoreDetailContainer:"HeaderV2__scoreDetailContainer___37w04",clockIcon:"HeaderV2__clockIcon___1GXL4",studentAssignmentStatus:"HeaderV2__studentAssignmentStatus___YvVVg",studentSubmissionStatus:"HeaderV2__studentSubmissionStatus___3RakJ",disableOverlay:"HeaderV2__disableOverlay___2n16f",iconButtonCon:"HeaderV2__iconButtonCon___gGTX9",iconButtonDisabled:"HeaderV2__iconButtonDisabled___1cG7l",studentNameWithTagContainer:"HeaderV2__studentNameWithTagContainer___1WH-m",tagsContainer:"HeaderV2__tagsContainer___3Ol3E",leftItemParent:"HeaderV2__leftItemParent___1ChzX",tooltipContainer:"HeaderV2__tooltipContainer___2rPm_",keyWrapper:"HeaderV2__keyWrapper___3qFpo",hidden:"HeaderV2__hidden___1RSCv"}},4840:function(e,t,a){e.exports={container:"Header__container___33S4L",leftContainer:"Header__leftContainer___3Kjve",rightContainer:"Header__rightContainer___2urXY",logo:"Header__logo___2YdXf",details:"Header__details___1-Bs-",title:"Header__title___1UKxj",dueDateText:"Header__dueDateText___XZraq",chevronIconContainer:"Header__chevronIconContainer___3CgUE",categoryContainer:"Header__categoryContainer___3jj9X",scoreDetailContainer:"Header__scoreDetailContainer___-atFZ"}},4841:function(e,t,a){e.exports={container:"LeftPaneV2__container___39i7A",containerWithDropdown:"LeftPaneV2__containerWithDropdown___uzQ3x",expandedLeftPane:"LeftPaneV2__expandedLeftPane___2R7d-",topContainer:"LeftPaneV2__topContainer___EywIN",bottomContainer:"LeftPaneV2__bottomContainer___3r_q-",iconContainer:"LeftPaneV2__iconContainer___2_JVG",dividerContainer:"LeftPaneV2__dividerContainer___3U_9o",divider:"LeftPaneV2__divider___1K7fN",studentListItem:"LeftPaneV2__studentListItem___9N_TR",activeItem:"LeftPaneV2__activeItem___3HKDr",activeItemDisabled:"LeftPaneV2__activeItemDisabled___2prLu",leftContainer:"LeftPaneV2__leftContainer___GdVi6",rightContainer:"LeftPaneV2__rightContainer___2W4Sn",rightInnerLeftContainer:"LeftPaneV2__rightInnerLeftContainer___3IovQ",rightInnerRightContainer:"LeftPaneV2__rightInnerRightContainer___3cLz3",studentNameWithTagContainer:"LeftPaneV2__studentNameWithTagContainer___hi_AU",studentName:"LeftPaneV2__studentName___2Bpan",tagsContainer:"LeftPaneV2__tagsContainer____oYUS",statusContainer:"LeftPaneV2__statusContainer___FGPxh",splitter:"LeftPaneV2__splitter___16HKv",iconItemContainer:"LeftPaneV2__iconItemContainer___2h_d3",iconItemInnerLeft:"LeftPaneV2__iconItemInnerLeft___15zlz",iconItemText:"LeftPaneV2__iconItemText___3R7Gr",tickIconContainer:"LeftPaneV2__tickIconContainer___15Aq0",tickIcon:"LeftPaneV2__tickIcon___ug_-B",tickIconOverlay:"LeftPaneV2__tickIconOverlay___2czsz",dot:"LeftPaneV2__dot___v_L89",iconItemInnerRight:"LeftPaneV2__iconItemInnerRight___2R3P1",iconItemInnerLeftContainer:"LeftPaneV2__iconItemInnerLeftContainer___289ks",assignmentOverdue:"LeftPaneV2__assignmentOverdue___32Apu",overlay:"LeftPaneV2__overlay___1IyOu"}},4842:function(e,t,a){e.exports={container:"LeftPane__container___2V8fH",innerContainer:"LeftPane__innerContainer___3ack2",itemText:"LeftPane__itemText___3sIhO",item:"LeftPane__item___25FRP",allSubmissionCard:"LeftPane__allSubmissionCard___C8wI3 LeftPane__item___25FRP LeftPane__itemText___3sIhO",studentTypeDropDownCon:"LeftPane__studentTypeDropDownCon___G5QAK",dropDownBtn:"LeftPane__dropDownBtn___299F5",dropDownText:"LeftPane__dropDownText___3LrkJ",bottomArrow:"LeftPane__bottomArrow___3PYWu",students:"LeftPane__students___3i4Cx",studentItem:"LeftPane__studentItem___2sCyK LeftPane__item___25FRP",studentItemContainer:"LeftPane__studentItemContainer___GnLeW",activeItem:"LeftPane__activeItem___ft3nX",leftCon:"LeftPane__leftCon___rVe_y",evalTickCon:"LeftPane__evalTickCon___3U6i_",profileCon:"LeftPane__profileCon___3ZWPe",studentInfoCon:"LeftPane__studentInfoCon___1e2oA",statusContainer:"LeftPane__statusContainer___3Mjcb",studentItemText:"LeftPane__studentItemText___1bfzs LeftPane__itemText___3sIhO",archived:"LeftPane__archived___3eUYd LeftPane__itemText___3sIhO",splitter:"LeftPane__splitter___17P_a LeftPane__itemText___3sIhO",studentStatusLabel:"LeftPane__studentStatusLabel___BAU6M LeftPane__itemText___3sIhO",dot:"LeftPane__dot___2rS2D",tickIconContainer:"LeftPane__tickIconContainer___2BtBB",tickIcon:"LeftPane__tickIcon___gjCFB",tickIconOverlay:"LeftPane__tickIconOverlay___QWt5R"}},4843:function(e,t,a){e.exports={container:"AssignmentEvaluationInsight__container___1i9VM",scrollContainer:"AssignmentEvaluationInsight__scrollContainer___TpMSw",scoreDetailHeading:"AssignmentEvaluationInsight__scoreDetailHeading___pFSVR",classScore:"AssignmentEvaluationInsight__classScore___VxsYo",maxScore:"AssignmentEvaluationInsight__maxScore___32HPl",scoreDetailContainer:"AssignmentEvaluationInsight__scoreDetailContainer___3JOOe",scoreOverviewContainer:"AssignmentEvaluationInsight__scoreOverviewContainer___33TFp",scoreOverview:"AssignmentEvaluationInsight__scoreOverview___39-Ep",barChartContainer:"AssignmentEvaluationInsight__barChartContainer___2vaNx",barChartTitle:"AssignmentEvaluationInsight__barChartTitle___G3lrT",tooltipContainer:"AssignmentEvaluationInsight__tooltipContainer___xB-PA",tooltipInnerContainer:"AssignmentEvaluationInsight__tooltipInnerContainer___sRRhO",studentScoreOverview:"AssignmentEvaluationInsight__studentScoreOverview___2iRKE",scoreDetailTooltipContainer:"AssignmentEvaluationInsight__scoreDetailTooltipContainer___2AZyi",yAxisText:"AssignmentEvaluationInsight__yAxisText___3-lQL",barContainer:"AssignmentEvaluationInsight__barContainer___DCD0p",studentCount:"AssignmentEvaluationInsight__studentCount___3MKWJ",marksRangeContainer:"AssignmentEvaluationInsight__marksRangeContainer___2u9OJ",studentsContainer:"AssignmentEvaluationInsight__studentsContainer___2jpoI",studentDetailContainer:"AssignmentEvaluationInsight__studentDetailContainer___3rM1C",studentNameText:"AssignmentEvaluationInsight__studentNameText___3jg_L",studentMarkText:"AssignmentEvaluationInsight__studentMarkText___2AVVc",emptyStateContainer:"AssignmentEvaluationInsight__emptyStateContainer___2RXSF",assessmentToolCardContainer:"AssignmentEvaluationInsight__assessmentToolCardContainer___Fo0xf"}},4844:function(e,t,a){e.exports={container:"WorkSheetInsight__container___zQlZD",insightTableClass:"WorkSheetInsight__insightTableClass___8v2vt",innerContainer:"WorkSheetInsight__innerContainer___2-kuC",innerContainerRightSpace:"WorkSheetInsight__innerContainerRightSpace___1WPv0",evaluationInsight:"WorkSheetInsight__evaluationInsight___1puFq",topHeaderContainer:"WorkSheetInsight__topHeaderContainer___2j383",titleContainer:"WorkSheetInsight__titleContainer___1AElE",subTitleClass:"WorkSheetInsight__subTitleClass___1NSaL",tableContainer:"WorkSheetInsight__tableContainer___XgR4n",questionScoreContainer:"WorkSheetInsight__questionScoreContainer___3rqG_",scoreText:"WorkSheetInsight__scoreText___2ry9q",tableHeaderClass:"WorkSheetInsight__tableHeaderClass___2-6Cd",cellClass:"WorkSheetInsight__cellClass___1I2Gd",emptyCellClass:"WorkSheetInsight__emptyCellClass___xng3m",avatarContainer:"WorkSheetInsight__avatarContainer___2YP8f",studentNameText:"WorkSheetInsight__studentNameText___3wBqL",cellSelected:"WorkSheetInsight__cellSelected___2dY5j",studentNameContainer:"WorkSheetInsight__studentNameContainer___ujj9q",sidePanContainer:"WorkSheetInsight__sidePanContainer___2TbWN",sidePanHeader:"WorkSheetInsight__sidePanHeader___2vAv3",nameContainer:"WorkSheetInsight__nameContainer___3ib01",studentNameDetails:"WorkSheetInsight__studentNameDetails___O79Ov",studentTurnedInDetails:"WorkSheetInsight__studentTurnedInDetails___t5qwP",actionContainer:"WorkSheetInsight__actionContainer___3eRAS",moveIcons:"WorkSheetInsight__moveIcons___26ghJ",closeIcons:"WorkSheetInsight__closeIcons___3ax2G",dotContainer:"WorkSheetInsight__dotContainer___1oe8-"}},4845:function(e,t,a){e.exports={skeleton:"SidePane__skeleton___3Rt0x",overlay:"SidePane__overlay___1RLw0"}},4846:function(e,t,a){e.exports={BFlexDivCol:"AllSubmissionsV2__BFlexDivCol___12WLz",BFlexDivRow:"AllSubmissionsV2__BFlexDivRow___1iAW8",container:"AllSubmissionsV2__container___1rpZz AllSubmissionsV2__BFlexDivCol___12WLz",instructionsCardWrapper:"AllSubmissionsV2__instructionsCardWrapper___3amls AllSubmissionsV2__BFlexDivCol___12WLz",headerCon:"AllSubmissionsV2__headerCon___2Fecn AllSubmissionsV2__BFlexDivRow___1iAW8",stickyHeader:"AllSubmissionsV2__stickyHeader___12Kdi",headerLabel:"AllSubmissionsV2__headerLabel___1WRMR AllSubmissionsV2__BFlexDivCol___12WLz",headerLabelCon:"AllSubmissionsV2__headerLabelCon___3C0ci",selectStudentsCheckbox:"AllSubmissionsV2__selectStudentsCheckbox___19UIB",countWrapper:"AllSubmissionsV2__countWrapper___2hkL5 AllSubmissionsV2__BFlexDivRow___1iAW8",countCon:"AllSubmissionsV2__countCon___1Fr4Y AllSubmissionsV2__BFlexDivRow___1iAW8",countNum:"AllSubmissionsV2__countNum___nPSJu AllSubmissionsV2__BFlexDivCol___12WLz",countLabel:"AllSubmissionsV2__countLabel___3j64H AllSubmissionsV2__BFlexDivCol___12WLz",innerRightContainer:"AllSubmissionsV2__innerRightContainer___3W39C AllSubmissionsV2__BFlexDivRow___1iAW8",addResponsesIcon:"AllSubmissionsV2__addResponsesIcon___2-kos AllSubmissionsV2__BFlexDivRow___1iAW8",responsesAddedIcon:"AllSubmissionsV2__responsesAddedIcon___1idZt AllSubmissionsV2__BFlexDivRow___1iAW8",downloadAllIcon:"AllSubmissionsV2__downloadAllIcon___M0h4J AllSubmissionsV2__BFlexDivCol___12WLz",submissionCardsCon:"AllSubmissionsV2__submissionCardsCon___RJinB AllSubmissionsV2__BFlexDivCol___12WLz",submissionCard:"AllSubmissionsV2__submissionCard___pTbZX",allSubmissionHeader:"AllSubmissionsV2__allSubmissionHeader___R8Jxt",gridItem:"AllSubmissionsV2__gridItem___1viKV",lastGridItem:"AllSubmissionsV2__lastGridItem___anHXL AllSubmissionsV2__BFlexDivRow___1iAW8",studentContainer:"AllSubmissionsV2__studentContainer___1YMy0 AllSubmissionsV2__BFlexDivCol___12WLz",studentDetails:"AllSubmissionsV2__studentDetails___3ljBp AllSubmissionsV2__BFlexDivRow___1iAW8",studentAvatar:"AllSubmissionsV2__studentAvatar___bXVDy",responseLabel:"AllSubmissionsV2__responseLabel___19BIW AllSubmissionsV2__BFlexDivCol___12WLz",attachmentContainer:"AllSubmissionsV2__attachmentContainer___18Wzb",similarityContainer:"AllSubmissionsV2__similarityContainer___1C0cy AllSubmissionsV2__BFlexDivCol___12WLz",attachmentSimilarity:"AllSubmissionsV2__attachmentSimilarity___4E52z",submissionHeader:"AllSubmissionsV2__submissionHeader___3BasC AllSubmissionsV2__submissionCard___pTbZX",submissionHeaderCell:"AllSubmissionsV2__submissionHeaderCell___1fua6",noAttachment:"AllSubmissionsV2__noAttachment___2E7fG AllSubmissionsV2__BFlexDivRow___1iAW8",titleContainer:"AllSubmissionsV2__titleContainer___2PmTv",iconContainer:"AllSubmissionsV2__iconContainer___1A02S",twoColumns:"AllSubmissionsV2__twoColumns___2Il9y",threeColumns:"AllSubmissionsV2__threeColumns___1w7Gs",fourColumns:"AllSubmissionsV2__fourColumns___2Y4ed",fiveColumns:"AllSubmissionsV2__fiveColumns___3LQjV",sevenColumns:"AllSubmissionsV2__sevenColumns___Bdn9i",sixColumns:"AllSubmissionsV2__sixColumns___2dqE7",evaluationScoreContainer:"AllSubmissionsV2__evaluationScoreContainer___2aRua",scoreContainer:"AllSubmissionsV2__scoreContainer___QfBdR",studentScore:"AllSubmissionsV2__studentScore___282sp",totalScore:"AllSubmissionsV2__totalScore___2BFzT",emptyScoreMsg:"AllSubmissionsV2__emptyScoreMsg___2a9G-",studentsSelectedLabelCon:"AllSubmissionsV2__studentsSelectedLabelCon___HDMR3",statusCon:"AllSubmissionsV2__statusCon___3vJoS",submissionStatusTag:"AllSubmissionsV2__submissionStatusTag___2E-Gr AllSubmissionsV2__BFlexDivRow___1iAW8",teacherEvaluationTick:"AllSubmissionsV2__teacherEvaluationTick___18K9a",studentNameDisabled:"AllSubmissionsV2__studentNameDisabled___3jttZ",dpCriteriaScoreContainer:"AllSubmissionsV2__dpCriteriaScoreContainer___3HaPS",flex:"AllSubmissionsV2__flex___2jlcw",mutliEvaluationGrid:"AllSubmissionsV2__mutliEvaluationGrid___3LE6F",mutliEvaluationLastGridItem:"AllSubmissionsV2__mutliEvaluationLastGridItem___26_K6 AllSubmissionsV2__BFlexDivRow___1iAW8",studentNameWithTagContainer:"AllSubmissionsV2__studentNameWithTagContainer___2VcIu",studentName:"AllSubmissionsV2__studentName___2Dl8g",tagsContainer:"AllSubmissionsV2__tagsContainer___2_9VQ",scoreMediaCardOption:"AllSubmissionsV2__scoreMediaCardOption___Wecvf",questionAttachmentCard:"AllSubmissionsV2__questionAttachmentCard___1bWXp",questionNotTurnIn:"AllSubmissionsV2__questionNotTurnIn___2XgSj",questionEvaluatedText:"AllSubmissionsV2__questionEvaluatedText___trKhS"}},4847:function(e,t,a){e.exports={BFlexDivRow:"EvaluationDropdown__BFlexDivRow___2qx1V",dialogContent:"EvaluationDropdown__dialogContent___145U4",evaluationDialogContent:"EvaluationDropdown__evaluationDialogContent___1UeoR",iconButtonCon:"EvaluationDropdown__iconButtonCon___3b8t8",iconButtonDisabled:"EvaluationDropdown__iconButtonDisabled___PKNv6",bulkActionsCon:"EvaluationDropdown__bulkActionsCon___3kuIR EvaluationDropdown__BFlexDivRow___2qx1V",iconCon:"EvaluationDropdown__iconCon___2YZtE",iconDivider:"EvaluationDropdown__iconDivider___2LxDI"}},4848:function(e,t,a){e.exports={iconCon:"StatusIcon__iconCon___225Lw",BFlexDivRow:"StatusIcon__BFlexDivRow___3IXdm",submissionStatusLabel:"StatusIcon__submissionStatusLabel___3Jbvz"}},4849:function(e,t,a){e.exports={BFlexDivCol:"InstructionsCard__BFlexDivCol___KNFNw",BFlexDivRow:"InstructionsCard__BFlexDivRow___1ZScO",container:"InstructionsCard__container___1lZEk InstructionsCard__BFlexDivCol___KNFNw",cardLabelWrapper:"InstructionsCard__cardLabelWrapper___M79gl InstructionsCard__BFlexDivCol___KNFNw",itemField:"InstructionsCard__itemField___3bbNq InstructionsCard__BFlexDivCol___KNFNw",cardLabel:"InstructionsCard__cardLabel___R8ria InstructionsCard__BFlexDivCol___KNFNw",instructionCardTitleDescCon:"InstructionsCard__instructionCardTitleDescCon___3kHN1 InstructionsCard__BFlexDivCol___KNFNw",instructionCardTitle:"InstructionsCard__instructionCardTitle___17YNX InstructionsCard__BFlexDivCol___KNFNw",fieldLabel:"InstructionsCard__fieldLabel___1mMpU InstructionsCard__BFlexDivCol___KNFNw",stepContainer:"InstructionsCard__stepContainer___1BpYw",stepLabel:"InstructionsCard__stepLabel___1EsLP",stepSubText:"InstructionsCard__stepSubText___1EKpd InstructionsCard__BFlexDivRow___1ZScO",formContainer:"InstructionsCard__formContainer___1qAyi InstructionsCard__BFlexDivRow___1ZScO",item:"InstructionsCard__item___1_DBC InstructionsCard__BFlexDivCol___KNFNw",assessmentContainer:"InstructionsCard__assessmentContainer___eqMGf",scoreContainer:"InstructionsCard__scoreContainer___1dV6c",headerContainer:"InstructionsCard__headerContainer___1MZQo",headerText:"InstructionsCard__headerText___2Y3yO",assessmentDetailText:"InstructionsCard__assessmentDetailText___1EexT",assessmentToolContainer:"InstructionsCard__assessmentToolContainer___R42E9",assessmentToolText:"InstructionsCard__assessmentToolText___Op443",assessmentToolsContainer:"InstructionsCard__assessmentToolsContainer____k2rh"}},4850:function(e,t,a){e.exports={BFlexDivCol:"AllSubmissions__BFlexDivCol___1lMw_",BFlexDivRow:"AllSubmissions__BFlexDivRow___3J2bC",container:"AllSubmissions__container___24BRd AllSubmissions__BFlexDivCol___1lMw_",instructionsCardWrapper:"AllSubmissions__instructionsCardWrapper___3lNZ0 AllSubmissions__BFlexDivCol___1lMw_",headerCon:"AllSubmissions__headerCon___35w3h AllSubmissions__BFlexDivRow___3J2bC",headerLabel:"AllSubmissions__headerLabel___1myEI AllSubmissions__BFlexDivCol___1lMw_",countWrapper:"AllSubmissions__countWrapper___1O7B9 AllSubmissions__BFlexDivRow___3J2bC",countCon:"AllSubmissions__countCon___2qHfU AllSubmissions__BFlexDivRow___3J2bC",countNum:"AllSubmissions__countNum___2UHPi AllSubmissions__BFlexDivCol___1lMw_",countLabel:"AllSubmissions__countLabel___1fB8p AllSubmissions__BFlexDivCol___1lMw_",bulkPostIcon:"AllSubmissions__bulkPostIcon___EnJ_Z AllSubmissions__BFlexDivRow___3J2bC",innerRightContainer:"AllSubmissions__innerRightContainer___2n_N2 AllSubmissions__BFlexDivRow___3J2bC",addResponsesIcon:"AllSubmissions__addResponsesIcon___1qbrf AllSubmissions__BFlexDivRow___3J2bC",responsesAddedIcon:"AllSubmissions__responsesAddedIcon___1rmp1 AllSubmissions__BFlexDivRow___3J2bC",downloadAllIcon:"AllSubmissions__downloadAllIcon___3li7J AllSubmissions__BFlexDivCol___1lMw_",submissionCardsCon:"AllSubmissions__submissionCardsCon___Vhx9N AllSubmissions__BFlexDivCol___1lMw_",submissionCard:"AllSubmissions__submissionCard___1oqND",actionContainer:"AllSubmissions__actionContainer___1OJ0V",studentContainer:"AllSubmissions__studentContainer___1Z-gh AllSubmissions__BFlexDivCol___1lMw_",studentDetails:"AllSubmissions__studentDetails___1QS7E AllSubmissions__BFlexDivRow___3J2bC",responseLabel:"AllSubmissions__responseLabel___29_Qa AllSubmissions__BFlexDivCol___1lMw_",attachmentContainer:"AllSubmissions__attachmentContainer___1PP32",evaluationContainer:"AllSubmissions__evaluationContainer___18NBl",similarityContainer:"AllSubmissions__similarityContainer___1oBEe AllSubmissions__BFlexDivCol___1lMw_",attachmentSimilarity:"AllSubmissions__attachmentSimilarity___2oUVO",submissionHeader:"AllSubmissions__submissionHeader___2oRB0 AllSubmissions__submissionCard___1oqND",submissionHeaderCell:"AllSubmissions__submissionHeaderCell___3Xash",statusContainer:"AllSubmissions__statusContainer___1H6kk",noAttachment:"AllSubmissions__noAttachment___3MP6U AllSubmissions__BFlexDivRow___3J2bC",titleContainer:"AllSubmissions__titleContainer___AGP-s",iconContainer:"AllSubmissions__iconContainer___mzRS9",fourColumns:"AllSubmissions__fourColumns___2djeI",fiveColumns:"AllSubmissions__fiveColumns___2ntyb",sixColumns:"AllSubmissions__sixColumns___2gcme",evaluationTypeContainer:"AllSubmissions__evaluationTypeContainer___1VrDY",evaluationScoreContainer:"AllSubmissions__evaluationScoreContainer___3uwom",scoreContainer:"AllSubmissions__scoreContainer___UjMmV",studentScore:"AllSubmissions__studentScore___2SQ8b",emptyScoreMsg:"AllSubmissions__emptyScoreMsg___1u3Wr"}},4851:function(e,t,a){e.exports={container:"ClassRoomMediaManager__container___2Lk_-",adjustedHeight:"ClassRoomMediaManager__adjustedHeight___3TcrW",fullHeight:"ClassRoomMediaManager__fullHeight___1XA4G",header:"ClassRoomMediaManager__header___qRKeJ",headerLeftCon:"ClassRoomMediaManager__headerLeftCon___1PZvN",studentDropdownBtn:"ClassRoomMediaManager__studentDropdownBtn___k1vIX",studentDropdownBtnInfoCon:"ClassRoomMediaManager__studentDropdownBtnInfoCon___ZydH0",studentDropdownText:"ClassRoomMediaManager__studentDropdownText___2Ft31",statusWrapper:"ClassRoomMediaManager__statusWrapper___22GfY",studentDropdownItemInfo:"ClassRoomMediaManager__studentDropdownItemInfo___57zTZ",archived:"ClassRoomMediaManager__archived___28SGd",splitter:"ClassRoomMediaManager__splitter___1jJP9",studentDropdownStatusText:"ClassRoomMediaManager__studentDropdownStatusText___2TmSh",bottomArrow:"ClassRoomMediaManager__bottomArrow___3Xcta",navigationArrowCon:"ClassRoomMediaManager__navigationArrowCon___2wCpr",backArrow:"ClassRoomMediaManager__backArrow___3KQCv",leftIconContainer:"ClassRoomMediaManager__leftIconContainer___2cFqq",rightIconContainer:"ClassRoomMediaManager__rightIconContainer___3QdkT",cancelIcon:"ClassRoomMediaManager__cancelIcon___KXOHs",body:"ClassRoomMediaManager__body___YqTjo",arrowUp:"ClassRoomMediaManager__arrowUp___3DZKW",rightHeaderContainer:"ClassRoomMediaManager__rightHeaderContainer___1Eeic",dialogContent:"ClassRoomMediaManager__dialogContent___18YQ2",studentDropdownItem:"ClassRoomMediaManager__studentDropdownItem___fAqo_",studentDropdownActiveItem:"ClassRoomMediaManager__studentDropdownActiveItem___3yDqN",studentDropdownItemName:"ClassRoomMediaManager__studentDropdownItemName___2WU4w",studentDropdownItemStatus:"ClassRoomMediaManager__studentDropdownItemStatus___quwIV",studentDropdownItemIconCon:"ClassRoomMediaManager__studentDropdownItemIconCon___2iuHs",studentDropdownItemTickCon:"ClassRoomMediaManager__studentDropdownItemTickCon___3sIBn",disableOverlay:"ClassRoomMediaManager__disableOverlay___1JiEL"}},4852:function(e,t,a){e.exports={BFlexDivCol:"ClassRoomMediaDetails__BFlexDivCol___37RFD",BFlexDivRow:"ClassRoomMediaDetails__BFlexDivRow___3zy_E",container:"ClassRoomMediaDetails__container___1cKS2 ClassRoomMediaDetails__BFlexDivRow___3zy_E",hideContainer:"ClassRoomMediaDetails__hideContainer___3_uLt",leftCon:"ClassRoomMediaDetails__leftCon___2R6Nw ClassRoomMediaDetails__BFlexDivCol___37RFD",whiteBg:"ClassRoomMediaDetails__whiteBg___17zMH",rightPane:"ClassRoomMediaDetails__rightPane___3SWzJ ClassRoomMediaDetails__BFlexDivCol___37RFD",rightPaneInnerCon:"ClassRoomMediaDetails__rightPaneInnerCon___3bbf9 ClassRoomMediaDetails__BFlexDivCol___37RFD",submissionCon:"ClassRoomMediaDetails__submissionCon___2fb0z ClassRoomMediaDetails__BFlexDivCol___37RFD",submissionHeaderCon:"ClassRoomMediaDetails__submissionHeaderCon___33pt7 ClassRoomMediaDetails__BFlexDivRow___3zy_E",studentNameLabel:"ClassRoomMediaDetails__studentNameLabel___1v3YN ClassRoomMediaDetails__BFlexDivCol___37RFD",responseLabel:"ClassRoomMediaDetails__responseLabel___3Ippz ClassRoomMediaDetails__BFlexDivCol___37RFD",noSubmissionText:"ClassRoomMediaDetails__noSubmissionText___cPi9v ClassRoomMediaDetails__BFlexDivCol___37RFD",evalCon:"ClassRoomMediaDetails__evalCon___1hmao ClassRoomMediaDetails__BFlexDivCol___37RFD",evalHeaderCon:"ClassRoomMediaDetails__evalHeaderCon___CE_tz ClassRoomMediaDetails__BFlexDivRow___3zy_E",evalHeaderText:"ClassRoomMediaDetails__evalHeaderText___tHdcb ClassRoomMediaDetails__BFlexDivCol___37RFD",evalCard:"ClassRoomMediaDetails__evalCard___1aCwr ClassRoomMediaDetails__BFlexDivRow___3zy_E",activeCon:"ClassRoomMediaDetails__activeCon___cwDWF",addButton:"ClassRoomMediaDetails__addButton___1o1PI ClassRoomMediaDetails__BFlexDivRow___3zy_E",evalCardTypeText:"ClassRoomMediaDetails__evalCardTypeText___3kHbQ",evalText:"ClassRoomMediaDetails__evalText___3jOfR ClassRoomMediaDetails__BFlexDivCol___37RFD",studentEvalText:"ClassRoomMediaDetails__studentEvalText___1W0Is ClassRoomMediaDetails__evalText___3jOfR ClassRoomMediaDetails__BFlexDivCol___37RFD",privateChatCon:"ClassRoomMediaDetails__privateChatCon___sGpL2 ClassRoomMediaDetails__BFlexDivCol___37RFD",createPostIcon:"ClassRoomMediaDetails__createPostIcon___2Qu81",warningMsg:"ClassRoomMediaDetails__warningMsg___1KZV-",editOverlay:"ClassRoomMediaDetails__editOverlay___enYDm",horizontalCardInnerClass:"ClassRoomMediaDetails__horizontalCardInnerClass___3cD1_",loadingContainer:"ClassRoomMediaDetails__loadingContainer___5kSXC",similarityIndexContainer:"ClassRoomMediaDetails__similarityIndexContainer___19O61",headingText:"ClassRoomMediaDetails__headingText___1maio",submissionHeaderRevamp:"ClassRoomMediaDetails__submissionHeaderRevamp___1BbRQ",submittedAtCon:"ClassRoomMediaDetails__submittedAtCon___1NtbQ",dotContainer:"ClassRoomMediaDetails__dotContainer___1iaWQ",rightPaneRevamp:"ClassRoomMediaDetails__rightPaneRevamp___yAqJX",warningMsgRevamp:"ClassRoomMediaDetails__warningMsgRevamp___2xppP",iconContainer:"ClassRoomMediaDetails__iconContainer___12cs8",submissionRightContainer:"ClassRoomMediaDetails__submissionRightContainer___UY7B7",evalCardCon:"ClassRoomMediaDetails__evalCardCon___3H7cb",evalHeaderConRevamp:"ClassRoomMediaDetails__evalHeaderConRevamp___3Cyzv",noSubmissionTextRevamp:"ClassRoomMediaDetails__noSubmissionTextRevamp___3OPK3",noResponseLabelText:"ClassRoomMediaDetails__noResponseLabelText___KbuMF",evalConRevamp:"ClassRoomMediaDetails__evalConRevamp___3ilA4",evalCardRevamp:"ClassRoomMediaDetails__evalCardRevamp___20Hmw",customMessageContainerClass:"ClassRoomMediaDetails__customMessageContainerClass___14OU8",attachmentListContainer:"ClassRoomMediaDetails__attachmentListContainer___2yFfG",actionIconCon:"ClassRoomMediaDetails__actionIconCon___AkbWY",teacherEvaluationTick:"ClassRoomMediaDetails__teacherEvaluationTick___1erg1",disabledDiscussion:"ClassRoomMediaDetails__disabledDiscussion___4Ax1X"}},4853:function(e,t,a){e.exports={BFlexDivCol:"ClassRoomMedia__BFlexDivCol___2M5dd",container:"ClassRoomMedia__container___1cfMh ClassRoomMedia__BFlexDivCol___2M5dd",innerContainer:"ClassRoomMedia__innerContainer___LbZrI",hideContainer:"ClassRoomMedia__hideContainer___2OCFE",evalMediaCon:"ClassRoomMedia__evalMediaCon___28FIO ClassRoomMedia__BFlexDivCol___2M5dd",evalMediaConRevamp:"ClassRoomMedia__evalMediaConRevamp___2LBhK",toolResponseTable:"ClassRoomMedia__toolResponseTable___2VxqJ",blurMedia:"ClassRoomMedia__blurMedia___edN5c",editEvaluationBtn:"ClassRoomMedia__editEvaluationBtn___3LyG6",evalInsightsBtn:"ClassRoomMedia__evalInsightsBtn___2DVbk",editEvaluationText:"ClassRoomMedia__editEvaluationText___1hXLT",modalBody:"ClassRoomMedia__modalBody___1AIQX",evalNotApplicableSection:"ClassRoomMedia__evalNotApplicableSection___1re-a",evalNotApplicableContent:"ClassRoomMedia__evalNotApplicableContent___3U3el",evalNotApplicableText:"ClassRoomMedia__evalNotApplicableText___1xx-Q",assessmentToolContainer:"ClassRoomMedia__assessmentToolContainer___1_p6u",learningGoalsContainer:"ClassRoomMedia__learningGoalsContainer___3MXdF",scoreContainer:"ClassRoomMedia__scoreContainer___2FKV1",maxMarkText:"ClassRoomMedia__maxMarkText___gJFTp",evalMediaHeader:"ClassRoomMedia__evalMediaHeader___3szCe",evalMediaHeaderRevamp:"ClassRoomMedia__evalMediaHeaderRevamp___3O4n2",evaluationText:"ClassRoomMedia__evaluationText___2Gi25",evaluationTextRevamp:"ClassRoomMedia__evaluationTextRevamp___1hTTz",headerText:"ClassRoomMedia__headerText___3ZjBy",headerTextRevamp:"ClassRoomMedia__headerTextRevamp___33yeP",scoreText:"ClassRoomMedia__scoreText___47NG7 ClassRoomMedia__headerText___3ZjBy",interactiveContainer:"ClassRoomMedia__interactiveContainer___3_PuK",loadingContainer:"ClassRoomMedia__loadingContainer___fusJ8",evalMediaInnerCon:"ClassRoomMedia__evalMediaInnerCon___-OrR5",toolResponseTableRevamp:"ClassRoomMedia__toolResponseTableRevamp___3aFQR",evaluatedScoreText:"ClassRoomMedia__evaluatedScoreText___1ba5K",categoryLabel:"ClassRoomMedia__categoryLabel___aRKZP",scoreDetails:"ClassRoomMedia__scoreDetails___34pw3 ClassRoomMedia__BFlexDivCol___2M5dd",evalConRevamp:"ClassRoomMedia__evalConRevamp___2m2Rm"}},4854:function(e,t,a){e.exports={container:"StudentView2__container___GE3VB",innerContainer:"StudentView2__innerContainer___2c-XY",assessmentCoverImage:"StudentView2__assessmentCoverImage___KiISo",header:"StudentView2__header___cBAvj",headerGradient:"StudentView2__headerGradient___2MaIF",containerBodyWrapper:"StudentView2__containerBodyWrapper___1gnnY",containerBodyWrapperShrink:"StudentView2__containerBodyWrapperShrink___3uzsX",constainerBodyInnerWrapper:"StudentView2__constainerBodyInnerWrapper___1ZAAE",creatorInfoContainer:"StudentView2__creatorInfoContainer___2qRxH",creatorInfoLeftCon:"StudentView2__creatorInfoLeftCon___1XCIW",creatorNameContainer:"StudentView2__creatorNameContainer___3CaUi",assignmentTitleCon:"StudentView2__assignmentTitleCon___1Iw6N",creatorInfoRightCon:"StudentView2__creatorInfoRightCon___116Fw",footer:"StudentView2__footer___1lgAf",responseContainer:"StudentView2__responseContainer___3YaBq",evaluationHeaderContainer:"StudentView2__evaluationHeaderContainer___HXPG3",multipleToolsContainer:"StudentView2__multipleToolsContainer___3zG5Z",evaluationLeftContainer:"StudentView2__evaluationLeftContainer___lgzDP",assessmentCriteriaLabel:"StudentView2__assessmentCriteriaLabel___2kQS2",subHeadingContainer:"StudentView2__subHeadingContainer___1m55W",subHeadingStyle:"StudentView2__subHeadingStyle___nNkxL",headerButton:"StudentView2__headerButton___rSJgl",categoryContainer:"StudentView2__categoryContainer___3V_fI",messagesCount:"StudentView2__messagesCount___j76Xz",scoreDetailContainer:"StudentView2__scoreDetailContainer___1ZBDM",studentScoreContainer:"StudentView2__studentScoreContainer___3FIBa",studentScore:"StudentView2__studentScore___yys53",teacherRemarkContainer:"StudentView2__teacherRemarkContainer___3MLWg",teacherRemarkTextContainer:"StudentView2__teacherRemarkTextContainer___1X5_-",teacherRemarkText:"StudentView2__teacherRemarkText___37Bcd",remark:"StudentView2__remark___17PcK",scoreHeader:"StudentView2__scoreHeader___162kr",scoreSection:"StudentView2__scoreSection___30Atw",scoreContainer:"StudentView2__scoreContainer___240AQ",evaluationDetailsContainer:"StudentView2__evaluationDetailsContainer___3lUb4",dashText:"StudentView2__dashText___3tMc1",studentScoreContainerNoIcon:"StudentView2__studentScoreContainerNoIcon___3GfXf",maxScore:"StudentView2__maxScore___O5D6B"}},4855:function(e,t,a){e.exports={container:"DiscussionModal__container___2WFaE",fullScreenContainer:"DiscussionModal__fullScreenContainer___3-NmX",header:"DiscussionModal__header___fMckH",fullScreenHeader:"DiscussionModal__fullScreenHeader___1_1aP",headerLeftContainer:"DiscussionModal__headerLeftContainer___16jf8",fullScreenHeaderLeftContainer:"DiscussionModal__fullScreenHeaderLeftContainer___1fVSb",tabListContainer:"DiscussionModal__tabListContainer___jzH_-",fullScreenTabListContainer:"DiscussionModal__fullScreenTabListContainer___2u4SS",headerRightContainer:"DiscussionModal__headerRightContainer___3KvKb",fullScreenHeaderRightContainer:"DiscussionModal__fullScreenHeaderRightContainer___1xAEr",iconContainer:"DiscussionModal__iconContainer___bysLh",chatContainer:"DiscussionModal__chatContainer___3JGpY",fullScreenChatContainer:"DiscussionModal__fullScreenChatContainer___3d21y",chatInnerContainer:"DiscussionModal__chatInnerContainer___1fxqb",fullScreenChatInnerContainer:"DiscussionModal__fullScreenChatInnerContainer___2n08V",seperator:"DiscussionModal__seperator___2gM3n"}},4856:function(e,t,a){e.exports={modalContent:"RateOnLearningGoalsPreviewModal__modalContent___1zoXb",modalHeader:"RateOnLearningGoalsPreviewModal__modalHeader___20FUN",modalBody:"RateOnLearningGoalsPreviewModal__modalBody___19BM1",innerWrapper:"RateOnLearningGoalsPreviewModal__innerWrapper___SOK7t",actionButtons:"RateOnLearningGoalsPreviewModal__actionButtons___3fIN4"}},4857:function(e,t,a){e.exports={statusContainer:"StudentClassRoomStatus__statusContainer___2qIKY",statusInnerContainer:"StudentClassRoomStatus__statusInnerContainer___1R60g",statusItem:"StudentClassRoomStatus__statusItem___Tp7CV",statusIcon:"StudentClassRoomStatus__statusIcon___1LqMC",statusInfoContainer:"StudentClassRoomStatus__statusInfoContainer___29qBg",statusItemHeading:"StudentClassRoomStatus__statusItemHeading___3kAPc",statusItemSubHeading:"StudentClassRoomStatus__statusItemSubHeading___3rFwb"}},4858:function(e,t,a){e.exports={BFlexDivCol:"CreateUpdateStudentSubmissionV2__BFlexDivCol___2_YqZ",container:"CreateUpdateStudentSubmissionV2__container___3SlG9 CreateUpdateStudentSubmissionV2__BFlexDivCol___2_YqZ",body:"CreateUpdateStudentSubmissionV2__body___3L5CW CreateUpdateStudentSubmissionV2__BFlexDivCol___2_YqZ",innerBody:"CreateUpdateStudentSubmissionV2__innerBody___1ZGvF",noDataContainer:"CreateUpdateStudentSubmissionV2__noDataContainer___3p_Hl",studentTemplatesContainer:"CreateUpdateStudentSubmissionV2__studentTemplatesContainer___53taI",noDataTitle:"CreateUpdateStudentSubmissionV2__noDataTitle___2tHb4",submissionHeader:"CreateUpdateStudentSubmissionV2__submissionHeader___2AteT",attachmentListWrapper:"CreateUpdateStudentSubmissionV2__attachmentListWrapper___1B7SG",attachmentListEmptyWrapper:"CreateUpdateStudentSubmissionV2__attachmentListEmptyWrapper___45SWj",attachmentListHeader:"CreateUpdateStudentSubmissionV2__attachmentListHeader___3-aqa",uploadsHeaderText:"CreateUpdateStudentSubmissionV2__uploadsHeaderText___1jat4",addWorkButton:"CreateUpdateStudentSubmissionV2__addWorkButton___2ozu6",header:"CreateUpdateStudentSubmissionV2__header___1WO_J",responseHeader:"CreateUpdateStudentSubmissionV2__responseHeader___32kWs",addToJournalLabel:"CreateUpdateStudentSubmissionV2__addToJournalLabel___Bjey3",addToJournalContainer:"CreateUpdateStudentSubmissionV2__addToJournalContainer___1D1Pz",postIconContainer:"CreateUpdateStudentSubmissionV2__postIconContainer___1NKdf"}},4859:function(e,t,a){e.exports={container:"StudentClassRoomFooter__container___2ww1m",containerShrink:"StudentClassRoomFooter__containerShrink___ACT2o",innerContainer:"StudentClassRoomFooter__innerContainer___2M0i7",leftContainer:"StudentClassRoomFooter__leftContainer___268J9",iconContainer:"StudentClassRoomFooter__iconContainer___2VjG-",iconOverdueContainer:"StudentClassRoomFooter__iconOverdueContainer___3NMqR",deadlineContainer:"StudentClassRoomFooter__deadlineContainer___dXIEB",deadlineLabel:"StudentClassRoomFooter__deadlineLabel___3mGJg",deadlineTime:"StudentClassRoomFooter__deadlineTime___DnB6p"}},4860:function(e,t,a){e.exports={modalContent:"ClassroomEvaluation__modalContent___YoQKS",modalHeader:"ClassroomEvaluation__modalHeader___3C1gP",modalBody:"ClassroomEvaluation__modalBody___YIAWI",innerWrapper:"ClassroomEvaluation__innerWrapper___1dJXg",closeButton:"ClassroomEvaluation__closeButton___2YPCk",footerContainer:"ClassroomEvaluation__footerContainer___O9AK_"}},4861:function(e,t,a){e.exports={container:"TeacherView__container___3NDj7",containerRevamp:"TeacherView__containerRevamp___1RHia",middleBody:"TeacherView__middleBody___3Jng_",middleBodyRevamp:"TeacherView__middleBodyRevamp___Om6Z7",instructionsCardWrapper:"TeacherView__instructionsCardWrapper___2wGKu",rightPane:"TeacherView__rightPane___2RDSJ",disabledDiscussion:"TeacherView__disabledDiscussion___zH_f4"}},4862:function(e,t,a){e.exports={BFlexDivCol:"StudentSubmission__BFlexDivCol___17kKc",BFlexDivRow:"StudentSubmission__BFlexDivRow___1C0cv",container:"StudentSubmission__container___3sktx StudentSubmission__BFlexDivCol___17kKc",submissionCon:"StudentSubmission__submissionCon___2msaH StudentSubmission__BFlexDivCol___17kKc",submissionHeaderCon:"StudentSubmission__submissionHeaderCon___3RdB2 StudentSubmission__BFlexDivRow___1C0cv",studentNameLabel:"StudentSubmission__studentNameLabel___1L_-5 StudentSubmission__BFlexDivCol___17kKc",submissionLeftCon:"StudentSubmission__submissionLeftCon___2bJ13 StudentSubmission__BFlexDivCol___17kKc",addToJournalIcon:"StudentSubmission__addToJournalIcon___2VGoI StudentSubmission__BFlexDivRow___1C0cv",submissionRightCon:"StudentSubmission__submissionRightCon___sEI9_ StudentSubmission__BFlexDivRow___1C0cv",innerIconContainer:"StudentSubmission__innerIconContainer___1zMhN StudentSubmission__BFlexDivRow___1C0cv",returnText:"StudentSubmission__returnText___293G4 StudentSubmission__BFlexDivCol___17kKc",returnedText:"StudentSubmission__returnedText___ryo07 StudentSubmission__BFlexDivCol___17kKc",responseLabel:"StudentSubmission__responseLabel___uOGIn StudentSubmission__BFlexDivCol___17kKc",noSubmissionText:"StudentSubmission__noSubmissionText___3t9GY StudentSubmission__BFlexDivCol___17kKc",evalCon:"StudentSubmission__evalCon___3eNwV StudentSubmission__BFlexDivCol___17kKc",evalHeaderCon:"StudentSubmission__evalHeaderCon___2U7LO StudentSubmission__BFlexDivRow___1C0cv",evalHeaderRightCon:"StudentSubmission__evalHeaderRightCon___ohDlD StudentSubmission__BFlexDivRow___1C0cv",evalHeaderText:"StudentSubmission__evalHeaderText___8U5aE StudentSubmission__BFlexDivCol___17kKc",evalCompleteCon:"StudentSubmission__evalCompleteCon___siXLt StudentSubmission__BFlexDivRow___1C0cv",markCompleteText:"StudentSubmission__markCompleteText___3KlkZ StudentSubmission__BFlexDivCol___17kKc",evalCard:"StudentSubmission__evalCard___2Y02n StudentSubmission__BFlexDivRow___1C0cv",addButton:"StudentSubmission__addButton___13HTM StudentSubmission__BFlexDivRow___1C0cv",evalCardTypeText:"StudentSubmission__evalCardTypeText___1b7oA",evalText:"StudentSubmission__evalText___1b1xW StudentSubmission__BFlexDivCol___17kKc",studentEvalText:"StudentSubmission__studentEvalText___QyImx StudentSubmission__evalText___1b1xW StudentSubmission__BFlexDivCol___17kKc",dialogContent:"StudentSubmission__dialogContent___2uduk",createPostIcon:"StudentSubmission__createPostIcon___A0Htp",warningMsg:"StudentSubmission__warningMsg___ybpJv",horizontalCardInnerClass:"StudentSubmission__horizontalCardInnerClass___1BTfZ",similarityIndexContainer:"StudentSubmission__similarityIndexContainer___FU3QY"}},6128:function(e,t,a){e.exports={container:"StudentClassRoom__container___1QTfl",innerContainer:"StudentClassRoom__innerContainer___1f2TH",scrollContainer:"StudentClassRoom__scrollContainer___2wbsn",loadingContainer:"StudentClassRoom__loadingContainer___hlJMw",feedCardCon:"StudentClassRoom__feedCardCon___1DB-v",noDataCon:"StudentClassRoom__noDataCon___2mm1J",startingSoonFeedCon:"StudentClassRoom__startingSoonFeedCon___388Op",ssfLabel:"StudentClassRoom__ssfLabel___3Vw46"}},6129:function(e,t,a){e.exports={container:"TopHeader__container___NBJV5",leftContainer:"TopHeader__leftContainer___1AIjG",rightContainer:"TopHeader__rightContainer___NSXf_",titleText:"TopHeader__titleText___1Ikmb",subTitleText:"TopHeader__subTitleText___2lqKE",addButton:"TopHeader__addButton___1y46s",addButtonActive:"TopHeader__addButtonActive___2_SGv",addButtonInActive:"TopHeader__addButtonInActive___3vxHv",plusText:"TopHeader__plusText___3UFrx",analyticIcon:"TopHeader__analyticIcon___2MUPd",insightIcon:"TopHeader__insightIcon___2VNbx",middleContainer:"TopHeader__middleContainer___3AZiF"}},6130:function(e,t,a){e.exports={folderSoidebarCon:"Sidebar__folderSoidebarCon___1AnZj",folderInnerContainer:"Sidebar__folderInnerContainer___1Z70w",headerCon:"Sidebar__headerCon___2zmte",headerLabel:"Sidebar__headerLabel___1_Kdt",tab:"Sidebar__tab___3e5Vp",countContainer:"Sidebar__countContainer___72mXY",folderName:"Sidebar__folderName___uEka_",activeTab:"Sidebar__activeTab___3oqIb",folderIcon:"Sidebar__folderIcon___1KVDG"}},6131:function(e,t,a){e.exports={container:"FilterHeader__container___tUsRC",filterContainer:"FilterHeader__filterContainer___2kfnN",leftContainer:"FilterHeader__leftContainer___16Bk4",rightcontainer:"FilterHeader__rightcontainer___2Lr_K",filterBox:"FilterHeader__filterBox___1iU0z",filterText:"FilterHeader__filterText___23rtP",bottomArrow:"FilterHeader__bottomArrow___2GjcM",searchText:"FilterHeader__searchText___1ZbRF"}},6132:function(e,t,a){e.exports={container:"FeedContainer__container___2eii3",feedGroupWrapper:"FeedContainer__feedGroupWrapper___2dZno",feedGroupCon:"FeedContainer__feedGroupCon___1m3XM",feedGroupDateText:"FeedContainer__feedGroupDateText___3C99d",feedContainer:"FeedContainer__feedContainer___3uZpR",countText:"FeedContainer__countText___ldUX2"}},6134:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(1),s=a.n(n),o=a(25),i=a.n(o),r=a(28),l=a.n(r),c=_.memoize((function(e){return function(e){var t=e.items,a=e.groupBy,n=e.groupByKey;return _.reduce(t,(function(e,t){switch(a){case"day":var o=i()(t[n]).local().format("YYYY-MM-DD");_.isEmpty(e[o])&&(e=l()(e,s()({},o,{$set:[]}))),e=l()(e,s()({},o,{$push:[t]}))}return e}),{})}(e)}),(function(e){return JSON.stringify(e)}))},6135:function(e,t,a){e.exports={container:"TeacherClassRoom__container___2rxYP",innerContainer:"TeacherClassRoom__innerContainer___37Gl5",scrollContainer:"TeacherClassRoom__scrollContainer___Ri3P5",loadingContainer:"TeacherClassRoom__loadingContainer___3iTUh",feedCardCon:"TeacherClassRoom__feedCardCon___2VSYO",startingSoonFeedCon:"TeacherClassRoom__startingSoonFeedCon___1WQtf",ssfLabel:"TeacherClassRoom__ssfLabel___1Vn3t"}},6137:function(e,t,a){e.exports={container:"InsightDetails__container___sPynD",innerContainerWrapper:"InsightDetails__innerContainerWrapper___3ob3b",innerContainer:"InsightDetails__innerContainer___2revc",pageHeader:"InsightDetails__pageHeader___1Hk8q",searchContainer:"InsightDetails__searchContainer___2f3wa",actionButtons:"InsightDetails__actionButtons___2CwWh",body:"InsightDetails__body___1MsPK",countText:"InsightDetails__countText___C1y9r",entityContainer:"InsightDetails__entityContainer___2PPvX",entityIcon:"InsightDetails__entityIcon___GUrU6",infoWrapper:"InsightDetails__infoWrapper___2FAXQ",entityName:"InsightDetails__entityName___3S5Jf",dueDate:"InsightDetails__dueDate___Egj1a",submissionStatusWrapper:"InsightDetails__submissionStatusWrapper___3tkzQ",statusText:"InsightDetails__statusText___2nOq1",dateText:"InsightDetails__dateText___4LKZS",loadingContainer:"InsightDetails__loadingContainer___37IgN",rightIcon:"InsightDetails__rightIcon___WGVyf"}},6138:function(e,t,a){e.exports={container:"Header__container___1Ov0W",dropdownBox:"Header__dropdownBox___3C-r3",dropdownText:"Header__dropdownText___ot-5a",bottomArrow:"Header__bottomArrow___1anxz",parentRouteName:"Header__parentRouteName___1DNuJ",wrapper:"Header__wrapper___pxKBz",title:"Header__title___2SPQ4",headerContainer:"Header__headerContainer___3NYk5",headerTitleContainer:"Header__headerTitleContainer___6hgzr",headerSubtitle:"Header__headerSubtitle___1x3aM"}},6532:function(e,t,a){"use strict";var n=a(1),s=a.n(n),o=a(30),i=a.n(o),r=a(0),l=a.n(r),c=a(4453),u=a.n(c),d=a(413),m=a(27),p=a(139),g=a(3),v=a.n(g),b=a(15),S=a(3786),E=a(41),h=a(25),C=a.n(h),f=a(3800),T=a(4454),y=a.n(T),I=a(84),A=a(578),w=a(1183),O=a(637),R=a(902),D=a(1659),N=a(3725),k=a(2231),P=a(3632),x=function(e){return l.a.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 32 32",fill:e.fill&&e.fill},l.a.createElement("path",{d:"M29 11V21C29 21.8 28.1 22.3 27.4 21.8L23 18.8V13.1L27.4 10.1C28.1 9.7 29 10.2 29 11Z"}),l.a.createElement("path",{d:"M19 26H7C4.8 26 3 24.2 3 22V10C3 7.8 4.8 6 7 6H19C21.2 6 23 7.8 23 10V22C23 24.2 21.2 26 19 26Z"}))};x.defaultProps={height:20,width:20},x.propTypes={fill:v.a.string,width:v.a.number,height:v.a.number};var M=x,L=a(134),B=l.a.memo((function(e){var t=e.eventData,a=e.userId,n=e.onCloseEventModal,s=e.t,o=function(e){var t=e.eventData,a=e.userId,n=_.pick(t,["id","startTime","endTime","itemType","item"]),s=n.id,o=n.startTime,i=n.endTime,r=n.itemType,l=n.item;switch(r){case"CALENDAR_EVENT_ITEM":return{id:s,startTime:o,endTime:i,title:_.get(l,"label",""),description:_.get(l,"description",""),meetingLink:Object(f.a)({meeting:_.get(l,"meeting",{}),userId:a})};case"ASSIGNMENT":return{id:s,startTime:o,endTime:i,title:_.get(l,"content.assignmentTitle",""),meetingLink:Object(f.a)({meeting:_.get(l,"content.meeting",{}),userId:a})}}}({eventData:t,userId:a}),i=(o.id,o.startTime),r=o.endTime,c=o.title,u=o.description,d=o.meetingLink,m=function(e){var t=e.startTime,a=e.endTime,n=C()(t).format("dddd, MMM DD");return"".concat(n,", ").concat(Object(L.cb)({startDate:t,endDate:a}))}({startTime:i,endTime:r});return l.a.createElement("div",{className:y.a.container},l.a.createElement("div",{className:y.a.header},l.a.createElement("div",{className:y.a.logo,onClick:n},l.a.createElement("div",{className:y.a.chevronIconContainer},l.a.createElement(k.a,null)),l.a.createElement(P.a,{width:40,height:40})),l.a.createElement("div",{className:y.a.details},l.a.createElement("div",{className:y.a.title},c),l.a.createElement("div",{className:y.a.scheduleDateText},"".concat(s("common:scheduled_for_with_label",{label:""}),": ").concat(i?C()(i).format("Do, MMM YYYY hh:mm a"):"-")))),l.a.createElement("div",{className:y.a.body},l.a.createElement("div",{className:y.a.innerBody},l.a.createElement("div",{className:y.a.eventTitle},c),l.a.createElement("div",{className:y.a.publishedTime},m),u&&l.a.createElement("div",{className:y.a.descriptionText,dangerouslySetInnerHTML:{__html:u}}),l.a.createElement("div",{className:y.a.meetingCon},l.a.createElement("div",{className:y.a.eventImageContainer},l.a.createElement("div",{className:y.a.eventImage},l.a.createElement("div",{className:y.a.eventIcon},l.a.createElement(M,null)))),l.a.createElement("div",{className:y.a.meetingLinkTextCon},l.a.createElement("div",{className:y.a.meetingLinkText},"Meeting Link"),l.a.createElement("div",{className:y.a.meetingLink,dangerouslySetInnerHTML:{__html:Object(N.b)(d)}}))))),l.a.createElement("div",{className:y.a.footer},l.a.createElement("div",{className:y.a.innerFooter},l.a.createElement(O.a,{color:"pink",onClick:function(){d&&window.open(d,"_blank")}},s("calendar:join_now")))))})),j=Object(R.a)(B),F=Object(I.c)(Object(d.a)({resource:["common","calendar"]}),Object(m.connect)((function(e,t){return{userId:_.get(e,"login.userInfo.id"),entityType:"PLATFORM_CALENDAR_EVENT",isData:!0,isLoading:!1}})),Object(I.d)(A.a,{name:"getCalendarEventDetails",options:function(e){return{fetchPolicy:"cache-and-network",variables:{id:e.eventId,type:e.entityType}}},props:function(e){var t=e.getCalendarEventDetails,a=e.ownProps,n=a.eventId,s=a.isData,o=a.isLoading,i=a.entityType,r=Object(w.a)({id:n,type:i});return{isData:!_.isEmpty(r)&&s,eventData:r,isLoading:1==t.networkStatus||2==t.networkStatus||o}}}))((function(e){return l.a.createElement(D.a,{isOpen:!0,isFullScreen:!0},l.a.createElement(j,e))})),U=a(11),H=a(12),V=a.n(H),W=a(97),G=l.a.memo((function(e){var t=Object(r.useState)(!1),a=i()(t,2),n=a[0],o=a[1],c=Object(r.useState)(null),d=i()(c,2),m=d[0],_=d[1],p=e.meeting,g=e.meetingTitle,v=e.meetingScheduledAt,b=e.t,h=e.userId,T=e.eventId,y=e.meetingButtonTitle,I=e.showHomeScreenWidgets,A=e.hideProfilePicture,w=e.showNameTitle,O=e.hideVideoIcon,R=e.meetingTimeFormat,D=V()(s()({},u.a.baseStyle,!0),s()({},u.a.container,!I),s()({},u.a.containerV2,I)),N=(p||{}).createdBy||{},k=N.firstName,P=N.profileImage;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:D,onClick:function(e){e.stopPropagation(),_(T),o(!0)}},l.a.createElement("div",{className:u.a.leftContainer},l.a.createElement("div",{className:u.a.profileImageContainer},l.a.createElement(U.Avatar,{shape:"square",shade:"light",size:"medium",src:A?"":P,name:w?k:g}),O&&l.a.createElement("div",{className:u.a.videoIconcontainer},l.a.createElement(S.a,{fill:E.e.white,width:9,height:6}))),l.a.createElement("div",{className:u.a.detailContainer},l.a.createElement("div",{className:u.a.message},g),l.a.createElement("div",{className:u.a.warning},b("common:scheduled_at_with_label",{label:C()(v).format(R)})))),l.a.createElement("div",{className:u.a.rightContainer},l.a.createElement(U.Button,{variant:"destructive",size:"medium",onClick:function(e){e.stopPropagation();var t=Object(f.a)({meeting:p,userId:h});t&&window.open(t,"_blank")}},y||b("common:join_now")))),m&&n&&l.a.createElement(F,{eventId:m,onCloseEventModal:function(){o(!1),_(null)}}))})),z={setToastMsg:b.nb};G.propTypes={meeting:v.a.object,meetingButtonTitle:v.a.string,hideProfilePicture:v.a.bool,showNameTitle:v.a.bool,hideVideoIcon:v.a.bool,meetingTimeFormat:v.a.string},G.defaultProps={meeting:{},hideProfilePicture:!1,showNameTitle:!0,hideVideoIcon:!1,meetingTimeFormat:W.a.DO_MM_YYY_hh_mm_a};var Y=Object(p.compose)(Object(d.a)({resource:"common"}),Object(m.connect)((function(e,t){return{userId:e.login.userInfo.id}}),z))(G);t.a=Y},6538:function(e,t,a){"use strict";var n=a(6),s=a.n(n),o=a(13),i=a.n(o),r=a(20),l=a.n(r),c=a(31),u=a.n(c),d=a(21),m=a.n(d),p=a(22),g=a.n(p),v=a(4),b=a.n(v),S=a(23),E=a.n(S),h=a(1),C=a.n(h),f=a(0),T=a.n(f),y=a(4293),I=a.n(y),A=a(637),w=a(1659),O=a(848),R=a(413),D=a(3),N=a.n(D),k=a(26),P=a(27),x=a(2236),M=a(1657),L=a(84),B=[{label:function(e){return e("common:print")},action:"PRINT",icon:T.a.createElement(x.a,{height:16,width:16})},{label:function(e){return e("common:download_with_label",{label:e("common:pdf")})},action:"DOWNLOAD",icon:T.a.createElement(M.a,null)}],j=T.a.memo((function(e){var t=e.onSubmitClick,a=e.submitButtonText,n=void 0===a?"Publish":a,s=e.onClose,o=e.fileUrl,i=e.onActionClick,r=e.t;return T.a.createElement("div",{className:I.a.footerContainer},T.a.createElement("div",{className:I.a.leftContainer},!!o&&_.map(B,(function(e){return T.a.createElement("div",{className:I.a.buttonItem,key:e.action,onClick:function(){return i(e.action)}},T.a.createElement("div",{className:I.a.buttonIcon},e.icon),T.a.createElement("div",{className:I.a.buttonLabel},e.label(r)))}))),T.a.createElement("div",{className:I.a.rightContainer},T.a.createElement(A.a,{size:"sm",color:"grey",onClick:s,type:"filled"},r("common:cancel")),T.a.createElement(A.a,{size:"sm",color:"pink",type:"filled",onClick:t,isDisabled:!o},n)))})),F=function(e){function t(e){var a;return l()(this,t),a=m()(this,g()(t).call(this,e)),C()(b()(a),"componentDidMount",(function(){setTimeout((function(){a.getPrintFileUrl()}),10)})),C()(b()(a),"getPrintFileUrl",i()(s.a.mark((function e(){var t,n,o,i,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),t=a.props,n=t.getPrintFile,o=t.id,i=t.type,e.next=4,n({id:o,type:i,shouldOpenInWindow:!1});case 4:r=e.sent,a.setState({isLoading:!1,fileUrl:r});case 6:case"end":return e.stop()}}),e)})))),C()(b()(a),"iframe",(function(e){var t=e.fileUrl;return{__html:t?'<iframe src="'.concat(t,'" width="100%" height="100%"></iframe>'):"<div/>"}})),C()(b()(a),"onSubmitClick",(function(){(0,a.props.onSubmitClick)({fileUrl:a.state.fileUrl})})),C()(b()(a),"onActionClick",(function(e){var t=a.props,n=t.getPrintFile,s=t.type,o=t.id,i=t.downloadFileName,r=t.downloadFromUrl,l=a.state.fileUrl;switch(e){case"PRINT":n({type:s,id:o});break;case"DOWNLOAD":r({attachment:{name:i,url:l,mimeType:"application/pdf"},shouldAskForSave:!0,parentType:"ASSESSMENT_EVALUTATION",parentId:o})}})),a.state={fileUrl:"",isLoading:!1},a}return E()(t,e),u()(t,[{key:"render",value:function(){var e=this.state,t=e.fileUrl,a=e.isLoading,n=this.props,s=n.onClose,o=n.submitButtonText,i=n.t;return T.a.createElement(w.a,{isOpen:!0,onRequestClose:s,isFullScreen:!0,modalContent:I.a.modalContent,customStyle:{width:"80vw"}},T.a.createElement("div",{className:I.a.modalCon},T.a.createElement("div",{className:I.a.innerContainer},!!t&&T.a.createElement("div",{className:I.a.iframeContainer,dangerouslySetInnerHTML:this.iframe({fileUrl:t})}),!!a&&T.a.createElement(O.a,{containerStyle:{height:"100%"}})),T.a.createElement(j,{t:i,onClose:s,onSubmitClick:this.onSubmitClick,submitButtonText:o,fileUrl:t,onActionClick:this.onActionClick})))}}]),t}(T.a.PureComponent),U={getPrintFile:k.lb,downloadFromUrl:k.L};F.propTypes={id:N.a.string,type:N.a.string,downloadFileName:N.a.string};var H=Object(L.c)(Object(R.a)({resource:"common"}),Object(P.connect)((function(e,t){return{}}),U))(F);t.a=H},6587:function(e,t,a){"use strict";var n=a(0),s=a.n(n),o=function(e){return s.a.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 16 16"},s.a.createElement("g",{id:"Classroom",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.a.createElement("path",{d:"M16,14 C16,15.1045695 15.1045695,16 14,16 L2,16 C0.8954305,16 0,15.1045695 0,14 L0,2 C0,0.8954305 0.8954305,0 2,0 L14,0 C15.1045695,0 16,0.8954305 16,2 L16,14 Z M7.5,11 L1,11 L1,14 C1,14.5128358 1.38604019,14.9355072 1.88337887,14.9932723 L2,15 L7.5,15 L7.5,11 Z M15,11 L8.5,11 L8.5,15 L14,15 C14.5128358,15 14.9355072,14.6139598 14.9932723,14.1166211 L15,14 L15,11 Z M7.5,6 L1,6 L1,10 L7.5,10 L7.5,6 Z M15,6 L8.5,6 L8.5,10 L15,10 L15,6 Z M7.5,1 L2,1 C1.48716416,1 1.06449284,1.38604019 1.00672773,1.88337887 L1,2 L1,5 L7.5,5 L7.5,1 Z M14,1 L8.5,1 L8.5,5 L15,5 L15,2 C15,1.48716416 14.6139598,1.06449284 14.1166211,1.00672773 L14,1 Z",id:"Combined-Shape",fill:e.fill,fillRule:"nonzero"})))};o.defaultProps={height:16,width:16,fill:"#2DADBA"},t.a=o},6648:function(e,t,a){"use strict";a.r(t);var n=a(20),s=a.n(n),o=a(31),i=a.n(o),r=a(21),l=a.n(r),c=a(22),u=a.n(c),d=a(4),m=a.n(d),p=a(23),g=a.n(p),v=a(1),b=a.n(v),S=a(0),E=a.n(S),h=a(84),C=a(27),f=a(413),T=a(3876),y=a(902),I=a(105),A=a(112),w=a(6),O=a.n(w),R=a(13),D=a.n(R),N=a(4838),k=a.n(N),P=a(1659),x=a(1193),M=a(4840),L=a.n(M),B=a(3893),j=a(26),F=a(2231),U=a(3632),H=a(41),V=(a(25),a(55)),W=a(8),G=a(74),z={tabListContainerStyle:{height:"100%",display:"flex",width:"320px",justifyContent:"center"},tabContainerStyle:{display:"flex",alignItems:"center",justifyContent:"center",padding:0,height:"100%",width:"160px",color:H.e.gray48},activeTabContainerStyle:{display:"flex",alignItems:"center",justifyContent:"center",padding:0,height:"100%",width:"160px",color:H.e.blue29,borderColor:H.e.blue29},iconStyle:{marginRight:"4px"},ellipseStyle:{margin:"0 4px"}},Y=[{label:"common:instruction_plural",value:"instructions"},{label:"common:message_plural",value:"responses"},{label:"classRoom:all_submissions",value:"allsubmissions"}],q=E.a.memo((function(e){var t=e.deadline,a=(e.isStudentSubmissionEnabled,e.headerLabel),n=e.goToRelativeRoute,s=e.currentTabView,o=e.onClickTabView,i=e.currentPath,r=void 0===i?"":i,l=e.t,c=e.target,u=e.activeStudentId,d=e.showHeaderBackButton,m=e.state,p=e.isPrivate,g=e.scoreCategoryLabel,v=e.scoreCategoryColorCode,b=e.isScoreEnabled,h=e.isNotUserCourse,C=r.search("allsubmissions")>-1,f=Object(S.useMemo)((function(){return _.map(_.filter(Y,(function(e){return"instructions"==e.value||"responses"==e.value&&!C&&!h||"allsubmissions"==e.value&&C&&!h})),(function(e){var t=e.label,a=e.value;return{label:l(t),value:a}}))}),[C,l]),T=t?"".concat(Object(G.s)({inputDateTimeString:t}).dateTimeString):null;return E.a.createElement("div",{className:L.a.container},E.a.createElement("div",{className:L.a.leftContainer},d&&E.a.createElement("div",{className:L.a.logo,onClick:function(){n("insights"===c?{route:"../../../insights/".concat(u,"/details"),type:"push"}:{route:"../../..",type:"replace"})}},E.a.createElement("div",{className:L.a.chevronIconContainer},E.a.createElement(F.a,null)),E.a.createElement(U.a,{width:40,height:40})),E.a.createElement("div",{className:L.a.details},E.a.createElement("div",{className:L.a.title},a),E.a.createElement("div",{className:L.a.dueDateText},b?E.a.createElement("div",{className:L.a.scoreDetailContainer},g?E.a.createElement(E.a.Fragment,null,E.a.createElement("span",{className:L.a.categoryContainer,style:{backgroundColor:v||H.e.surfaceDark}},g),E.a.createElement("span",{style:z.ellipseStyle},"\u2022")):null):null,p?E.a.createElement(E.a.Fragment,null,E.a.createElement(W.EyeHiddenOutlined,{size:"xxx-small",variant:"subtle"}),"\xa0",b&&g?null:"".concat(l("common:private")," "),E.a.createElement("span",{style:z.ellipseStyle},"\u2022")):null,b&&t&&g?E.a.createElement(E.a.Fragment,null,E.a.createElement(W.ClockOutlined,{variant:"subtle",size:"xxx-small",style:z.iconStyle}),T):Object(V.g)({deadline:t,t:l})))),"SCHEDULED"!=m&&E.a.createElement(B.a,{tabs:f,activeTab:s,toggleTab:o,containerStyle:z.tabListContainerStyle,tabContainerStyle:z.tabContainerStyle,activeTabContainerStyle:z.activeTabContainerStyle}))}));q.displayName="Header",q.defaultProps={showHeaderBackButton:!0};var J={goToRelativeRoute:j.Ab},K=Object(h.c)(Object(f.a)({resource:["common"]}),Object(C.connect)(null,J),Object(x.a)({cb:V.z}))(q),Z=a(18),Q=a.n(Z),X=a(30),$=a.n(X),ee=a(3650),te=a(2255),ae=a(3877),ne=a(11),se=a(45),oe=a(15),ie=a(98),re=a(3775),le=a(118),ce=a(24),ue=a(4839),de=a.n(ue),me=a(12),_e=a.n(me),pe=a(66),ge=a(190),ve=a(2),be=a.n(ve);function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(a),!0).forEach((function(t){b()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var he={avatarStyles:{size:"medium",randomizeColor:!1},mediaMangerTextStyle:Ee({},Object(re.a)({lineHeight:"2.4rem",maxCharacter:"30"}),{maxHeight:"2.4rem"}),mediaManagerDetailLeftStyle:{width:"100%"},allSubmissionLeftItemStyle:{marginRight:"16px"},mediaManagerLeftItemStyle:{marginRight:"8px"},warningTextStyles:{color:se.colors.textSubtle,fontSize:"1.6rem"},backButtonStyle:{cursor:"pointer"},instructionsTextStyle:{fontSize:"12px",lineHeight:"16px"},middleItemTextStyle:{fontWeight:500,fontSize:"14px",lineHeight:"20px",color:se.colors.textDefault},innerContainerStyle:{justifyContent:"flex-start"},mediaManagerInnerRightDetailContainerStyle:{marginRight:"12px"},overlayStyle:{maxWidth:250},scoreCategoryLabel:{fontSize:"1.2rem"},headerStyles:{fontSize:"2rem",padding:"24px 16px 16px 32px"},modalBodyStyle:Ee({fontSize:"1.6rem",padding:"16px 32px",lineHeight:"2.4rem",color:se.colors.textDefault},se.fontStyles.medium),footerContainerStyle:{padding:"32px"}},Ce=Object(S.memo)((function(e){var t=e.currentStudentData,a=(void 0===t?{}:t).student,n=void 0===a?{}:a,s=n.id,o=n.profileImage,i=n.firstName,r=n.lastName,l=n.isArchived,c="".concat(i," ").concat(r);return s?E.a.createElement(ee.a,{items:[{id:s,value:c,imageUrl:o}],showAvatar:!0,avatarStyles:he.avatarStyles,isArchived:l}):null})),fe=Object(S.memo)((function(e){var t=e.currentStudentData,a=void 0===t?{}:t,n=e.t,s=e.isStudentSubmissionEnabled,o=a.status,i=a.submission,r=void 0===i?{}:i;if(be.a.isEmpty(o))return null;var l=be.a.get(r,"status"),c=Object(V.s)({status:o,t:n}),u="OVERDUE"===o?c:Object(V.hb)({submissionStatus:l,t:n}),d=c!==u,m=n("common:label_not_applicable",{label:n("common:submission")});return E.a.createElement(E.a.Fragment,null,s?!!u&&E.a.createElement("div",{className:de.a.studentAssignmentStatus},u):m,s&&!!c&&d&&E.a.createElement(E.a.Fragment,null,E.a.createElement("span",{className:de.a.dotContainer}),E.a.createElement("div",{className:de.a.studentAssignmentStatus},c)))})),Te=Object(S.memo)((function(e){var t=e.onClickLeft,a=e.onClickRight,n=e.t,s=e.selectedStatusStudentsCount<=1,o=_e()(b()({},de.a.iconButtonCon,s)),i=_e()(b()({},de.a.iconButtonDisabled,s)),r=Object(S.useCallback)((function(e){var n;if(!(null===e||void 0===e?void 0:e.repeat))switch(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.tagName){case"INPUT":case"TEXTAREA":return;default:switch(be.a.toLower(null===e||void 0===e?void 0:e.key)){case"a":t({isShortcut:!0});break;case"d":a({isShortcut:!0})}}}),[t,a]);Object(S.useEffect)((function(){return document.addEventListener("keydown",r),function(){document.removeEventListener("keydown",r)}}),[r]);var l=function(e){var t=e.label,a=e.key;return E.a.createElement("div",{className:de.a.tooltipContainer},E.a.createElement("div",null,t),E.a.createElement("div",{className:de.a.keyWrapper},a))};return E.a.createElement("div",{className:de.a.leftRightIcons},E.a.createElement(ne.Tooltip,{tooltip:l({label:n("common:previous_with_label",{label:n("common:student")}),key:"A"}),placement:"bottom"},E.a.createElement("div",{className:o},E.a.createElement(ne.IconButton,{icon:E.a.createElement(W.ChevronLeftOutlined,null),variant:"plain",size:"medium",onClick:t,disabled:s,className:i}))),E.a.createElement(ne.Tooltip,{tooltip:l({label:n("common:next_with_label",{label:n("common:student")}),key:"D"}),placement:"bottom"},E.a.createElement("div",{className:o},E.a.createElement(ne.IconButton,{icon:E.a.createElement(W.ChevronRightOutlined,null),variant:"plain",size:"medium",onClick:a,disabled:s,className:i}))))})),ye=Object(S.memo)((function(e){var t=e.t,a=e.isPrivate,n=e.showEvaluationDropdown,s=e.currentStudentData,o=e.isCurrentAcademicYearSelected,i=e.isArchivedClass,r=e.setCurrentDialogueAction,l=e.isStudentSubmissionEnabled,c=e.onMarkEvaluatedShare,u=e.onMarkEvaluationApplicable,d=e.isWorkbookEnabled,m=e.isPdftronEnabled,_=e.isScoreVisible,p=e.isTeacherEvaluationEnabled,g=e.isStudentEvaluationEnabled,v=e.onClickMarkEvaluatedBtn,b=e.onClickEditEvaluationBtn,S=e.onClickEvaluationApplicableBtn,h=e.onClickShareWithStudentBtn,C=e.isEvaluting,f=s.isSubmitted,T=s.isEvaluated,y=s.isEvaluationApplicable,I=s.isSharedWithStudent,A=s.student,w=(void 0===A?{}:A).isArchived,O=be.a.isFunction(V.E)&&Object(V.E)({t:t,isEvaluationApplicable:y,isSharedWithStudent:I,isEvaluated:T,isPrivate:a,isTeacherEvaluationEnabled:p,isStudentEvaluationEnabled:g,onClickMarkEvaluatedBtn:v,onClickEditEvaluationBtn:b,onClickEvaluationApplicableBtn:S,onClickShareWithStudentBtn:h}),R=!o||w||i||(d||m)||C,D=Object(V.W)(Ee({isUsingScore:_,currentStudentData:s},e)),N=E.a.createElement(ne.SplitButtonDropdown,{overlay:E.a.createElement(ne.DropdownMenu,{options:D,showSelection:!0,onClick:function(e){switch(e.key){case"evaluate":l&&!f?r("EVALUATE"):c({isEvaluated:!T,isSharedWithStudent:!1,isEvaluationApplicable:y});break;case"edit_evaluation":c({isEvaluated:!T,isSharedWithStudent:!1,isEvaluationApplicable:y});break;case"share":l&&!f?r("SHARE"):c({isEvaluated:!0,isSharedWithStudent:!0,isEvaluationApplicable:y});break;case"evaluate_share":l&&!f?r("EVALUATE_SHARE"):c({isEvaluated:!0,isSharedWithStudent:!0,isEvaluationApplicable:y});break;case"request_resubmission":r("RETURN");break;case"evaluation_not_applicable":case"enable_evaluation":u({isEvaluationApplicable:!y,isEvaluated:T,isSharedWithStudent:I,evalStatus:"EVAL_APPLICABLE"})}},disabled:R}),disabled:R});return n?E.a.createElement(le.a,{condition:!be.a.isEmpty(D),wrapper:N,type:"wrapperAsElement"},E.a.createElement(ne.Button,{size:"medium",onClick:null===O||void 0===O?void 0:O.onClick,disabled:R,variant:"progressive"},null===O||void 0===O?void 0:O.buttonText)):null})),Ie=Object(S.memo)((function(e){var t=e.t,a=e.assessmentType,n=e.curriculumType,s=e.contentType,o=Object(V.o)({curriculumType:n,assessmentValue:a,contentType:s})||{},i=o.typeLabel,r=o.typeLabel2,l=ce.T[a],c=be.a.get(l,"avatarIconColor","neutral");return E.a.createElement("div",{className:de.a.iconContainer},E.a.createElement(te.a,{tooltip:t(r||i),href:"#",overlayStyle:he.overlayStyle,mouseEnterDelay:.5,placement:"bottom"},E.a.createElement(ne.Avatar,{shape:"square",shade:"light",size:"medium",name:be.a.upperCase(t(r||i)),color:c})))})),Ae=Object(S.memo)((function(e){var t=e.t,a=e.isScheduled,n=e.hasAssessmentTool,s=e.toggleShowEvaluationInsights,o=e.showEvalInsights;return!a&&n&&o?E.a.createElement(ne.Button,{icon:E.a.createElement(W.InsightsSquareOutlined,null),variant:"outlined-subtle",size:"large",onClick:s},t("assessmentEvaluation:evaluation_insights")):null})),we=Object(S.memo)((function(e){var t=e.isQuestionTypeAttachment,a=e.t,n=e.toggleWorkSheetInsight;return t?E.a.createElement(ne.Button,{icon:E.a.createElement(W.InsightsSquareOutlined,null),variant:"outlined-subtle",size:"large",onClick:n},a("assessmentEvaluation:worksheet_insight")):null})),Oe=Object(S.memo)((function(e){var t=e.t,a=e.deadline,n=e.isScoreEnabled,s=e.isPrivate,o=e.scoreCategoryColorCode,i=e.scoreCategoryLabel,r=a?"".concat(Object(G.s)({inputDateTimeString:a}).dateTimeString):null,l=o||se.colors.surfaceDark;return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:de.a.scoreDetailContainer},i&&E.a.createElement(E.a.Fragment,null,E.a.createElement(ne.Tooltip,{tooltip:i,placement:"bottom"},E.a.createElement("span",{className:de.a.categoryContainer,style:{backgroundColor:l}},i)),E.a.createElement("span",{className:de.a.dotContainer}))),s&&E.a.createElement(E.a.Fragment,null,E.a.createElement(W.EyeHiddenOutlined,{size:"xxx-small",variant:"subtle"}),"\xa0",n&&i?null:"".concat(t("common:private")," "),E.a.createElement("span",{className:de.a.dotContainer})),n&&a&&i?E.a.createElement(E.a.Fragment,null,E.a.createElement(W.ClockOutlined,{variant:"subtle",size:"xxx-small",className:de.a.clockIcon}),r):Object(V.g)({deadline:a,t:t}))})),Re=function(e){var t=e.instructionButtonVariant,a=void 0===t?"outlined-subtle":t,n=e.instructionButtonSize,s=void 0===n?"large":n,o=e.showIcon,i=void 0===o||o,r=e.instructionsText,l=void 0===r?"common:instruction_plural":r,c=e.instructionsTextStyle,u=void 0===c?{}:c,d=e.onInstructionsClick,m=e.isWorkbookEnabled,_=e.isPdftronEnabled,p=e.rightPane,g=e.t,v=m||_;return E.a.createElement(ne.Button,{icon:i?E.a.createElement(W.InformationOutlined,null):null,variant:a,size:s,onClick:d,disabled:v,isActivated:!be.a.isEmpty(p)},E.a.createElement("div",{style:u},g(l)))},De=Object(S.memo)((function(e){var t,a=e.t,n=e.text,s=e.subText,o=e.leftItem,i=e.middleItem,r=void 0===i?null:i,l=e.rightItem,c=e.textStyle,u=e.leftItemStyle,d=e.leftExtraItems,m=e.isScheduled,_=e.rightExtraItems,p=e.detailLeftContainerStyle,g=e.isArchived,v=void 0!==g&&g,S=e.isMediaManager,h=void 0!==S&&S,C=e.showRightItem,f=void 0===C||C,T=e.innerContainerStyle,y=void 0===T?{}:T,I=e.leftExtraItemsStyle,A=void 0===I?{}:I,w=be.a.size(n)>30,O=_e()((t={},b()(t,de.a.innerLeftContainer,!0),b()(t,de.a.mediaManagerInnerLeftContainer,h),t)),R=_e()(b()({},de.a.innerMiddleContainer,r));return E.a.createElement("div",{className:de.a.innerContainer,style:y},E.a.createElement("div",{className:O},E.a.createElement("div",{className:de.a.innerLeftDetailContainer},E.a.createElement("div",{className:de.a.detailLeftContainer,style:p},o&&E.a.createElement("div",{className:de.a.leftItem,style:u},o),E.a.createElement("div",{className:de.a.innerRightDetailContainer,style:A},d),E.a.createElement("div",{className:de.a.detailInfo},E.a.createElement(le.a,{condition:w,wrapper:E.a.createElement(ne.Tooltip,{placement:"bottom",tooltip:n}),type:"wrapperAsElement"},E.a.createElement("div",{className:de.a.textContainer},E.a.createElement("div",{className:de.a.text,style:c},n),v&&E.a.createElement("div",{className:de.a.archivedText},"(".concat(a("common:archived"),")")))),E.a.createElement("div",{className:de.a.subtextContainer},s))))),E.a.createElement("div",{className:R},r,f&&E.a.createElement("div",{className:de.a.innerRightContainer},l,!m&&!h&&E.a.createElement(Re,e),_)))})),Ne=Object(S.memo)((function(e){var t,a=e.t,n=e.state,s=e.rightPane,o=e.currentStep,i=e.headerLabel,r=e.onInstructionsClick,l=e.currentStudentData,c=void 0===l?{}:l,u=e.isWorkbookEnabled,d=e.isPdftronEnabled,m=e.closeRightPane,_=e.scoreCategoryColorCode,p=e.scoreCategoryLabel,g=e.isQuestionTypeAttachment,v=void 0!==g&&g,h=e.toggleWorkSheetInsight,C=e.unHandStudentAssignmentSubmission,f=e.setToastMsg,T=e.changeIsLoading,y=e.studentAssignmentId,I=e.isStudentSubmissionEnabled,w=e.onClickEvalUpdate,R=e.studentOptions,N=e.studentsSubmissionsArr,k=e.goToStudentAssignment,P=e.isPracticalActivity,x=e.isLinksRoute,M=e.goToRelativeRoute,L=e.isTeacherEvaluationEnabled,B=e.studentCourseTags,F=e.isMediaManagerRoute,U=Object(S.useState)(""),H=$()(U,2),G=H[0],z=H[1],Y=c.student,q=void 0===Y?{}:Y,J=c.isSubmitted,K=c.isEvaluated,Z=c.isEvaluationApplicable,X=q.id,ee=q.firstName,te=void 0===ee?"":ee,oe=q.lastName,ie=void 0===oe?"":oe,re=q.isArchived,le="".concat(te," ").concat(ie),ce=be.a.isEqual(o,"allsubmissions"),ue=be.a.isEqual(o,"classdiscussion"),me=be.a.isInteger(parseInt(o)),ve="SCHEDULED"===n,Se=Object(V.V)(),Ne=null===Se||void 0===Se?void 0:Se[G],ke=be.a.get(c,"submission"),Pe=be.a.get(ke,"id"),xe=be.a.get(c,"conversation.id"),Me=be.a.get(c,"isSharedWithStudent",!1),Le=function(){var e=D()(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:Pe,status:"RETURNED",statusMessage:{label:t,itemType:"ATTACHMENTS",parentId:xe}},T(!0),e.next=4,C(a);case 4:n=e.sent,T(!1),n.successful?Object(A.A)({id:Pe,data:Ee({},ke,{status:"RETURNED"})}):(Object(A.A)({id:Pe,data:Ee({},ke,{status:"SUBMITTED"})}),f(n.errors[0]));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(e){w(Ee({},e,{studentAssignmentId:y,changeIsLoading:T}))},je=_e()((t={},b()(t,de.a.container,!0),b()(t,de.a.mediaManagerContainer,me),t)),Fe=function(){var e=Object(V.lb)({studentCourseTags:B,studentId:X});return E.a.createElement("div",{className:de.a.studentNameWithTagContainer},E.a.createElement("div",{className:de.a.text},le),!be.a.isEmpty(e)&&E.a.createElement("div",{className:de.a.tagsContainer},be.a.map(e,(function(e){return E.a.createElement(ne.Tag,{key:null===e||void 0===e?void 0:e.label,size:"xx-small",color:be.a.get(j.d,"".concat(null===e||void 0===e?void 0:e.label,".color"),"teal")},null===e||void 0===e?void 0:e.label)}))))}(),Ue=_||se.colors.surfaceDark,He=function(){me?M(F?{route:"../../allsubmissions",type:"push"}:{route:"../allsubmissions",type:"push"}):M({route:P?"../../../../practicalactivities":"../../..",type:"push"})},Ve=function(){var t=_e()(b()({},de.a.hidden,x&&!me));return E.a.createElement("div",{className:de.a.leftItemParent},E.a.createElement("div",{className:t,onClick:He},E.a.createElement(ne.IconButton,{variant:"plain",icon:E.a.createElement(W.ChevronLeftOutlined,{variant:"subtle",size:"xx-small"})})),E.a.createElement(Ie,e))},We=E.a.createElement(E.a.Fragment,null,E.a.createElement(we,{isQuestionTypeAttachment:v,t:a,toggleWorkSheetInsight:h}),E.a.createElement(Ae,Q()({},e,{isScheduled:ve})));return E.a.createElement("div",{className:je,onClick:function(){s&&(null===m||void 0===m||m())}},me&&E.a.createElement(De,{t:a,leftItem:Ve(),text:i,textStyle:he.middleItemTextStyle,subText:E.a.createElement(E.a.Fragment,null,p&&E.a.createElement(E.a.Fragment,null,E.a.createElement(ne.Tooltip,{tooltip:p,placement:"bottom"},E.a.createElement("span",{className:de.a.categoryContainer,style:{backgroundColor:Ue}},p)),E.a.createElement("span",{className:de.a.dotContainer})),E.a.createElement(Re,Q()({},e,{instructionButtonSize:"small",instructionButtonVariant:"inline",showIcon:!1,instructionsText:"common:view_instructions",instructionsTextStyle:he.instructionsTextStyle}))),middleItem:E.a.createElement(De,{t:a,leftItem:E.a.createElement(Te,Q()({},e,{onClickLeft:function(e){var t=e.isShortcut,a=void 0!==t&&t,n=be.a.findIndex(R,(function(e){return e.value==y})),s="",o={};0==n?(s=be.a.get(be.a.last(R),"value",""),o=be.a.get(be.a.last(N),"value","")):(s=be.a.get(R[n-1],"value",""),o=be.a.get(N[n-1],"value",{})),k({studentAssignmentId:s,studentSubmissionObj:o}),pe.f({eventName:ge.j,eventData:{entity_type:a?ge.i:ge.k}})},onClickRight:function(e){var t=e.isShortcut,a=void 0!==t&&t,n=be.a.get(R,"length",0),s=be.a.findIndex(R,(function(e){return e.value==y})),o="",i={};s==n-1?(o=be.a.get(be.a.first(R),"value",""),i=be.a.get(be.a.first(N),"value",{})):(o=be.a.get(R[s+1],"value",""),i=be.a.get(N[s+1],"value",{})),k({studentAssignmentId:o,studentSubmissionObj:i}),pe.f({eventName:ge.j,eventData:{entity_type:a?ge.i:ge.k}})}})),text:Fe,subText:E.a.createElement(fe,e),textStyle:he.mediaMangerTextStyle,leftExtraItems:E.a.createElement(Ce,e),onInstructionsClick:r,leftItemStyle:he.mediaManagerLeftItemStyle,rightPane:s,showRightItem:!1,innerContainerStyle:he.innerContainerStyle,detailLeftContainerStyle:he.mediaManagerDetailLeftStyle,leftExtraItemsStyle:he.mediaManagerInnerRightDetailContainerStyle}),rightExtraItems:E.a.createElement(ye,Q()({},e,{currentStudentData:c,setCurrentDialogueAction:z,onClickMarkEvaluatedBtn:function(){K?w({isEvaluated:!K,isSharedWithStudent:!1,isEvaluationApplicable:Z,studentAssignmentId:y,changeIsLoading:T}):I&&!J?z("EVALUATE"):w({isEvaluated:!K,isSharedWithStudent:!1,isEvaluationApplicable:Z,studentAssignmentId:y,changeIsLoading:T})},onClickEditEvaluationBtn:function(){w&&w({isEvaluationApplicable:Z,isSharedWithStudent:!1,isEvaluated:!1,studentAssignmentId:y,changeIsLoading:T})},onClickEvaluationApplicableBtn:function(){w({isEvaluated:K,isSharedWithStudent:Me,isEvaluationApplicable:!Z,studentAssignmentId:y,changeIsLoading:T})},onClickShareWithStudentBtn:function(){w&&w({isEvaluated:K,isSharedWithStudent:!0,isEvaluationApplicable:Z,studentAssignmentId:y,changeIsLoading:T})},onMarkEvaluationApplicable:function(e){w(Ee({},e,{studentAssignmentId:y,changeIsLoading:T}))},onMarkEvaluatedShare:Be})),onInstructionsClick:r,showDivider:!0,instructionButtonSize:"medium",isWorkbookEnabled:u,isPdftronEnabled:d,rightPane:s,isArchived:re,isMediaManager:!0}),ce&&E.a.createElement(De,{t:a,leftItem:Ve(),text:i,subText:E.a.createElement(Oe,e),rightItem:We,onInstructionsClick:r,leftItemStyle:he.allSubmissionLeftItemStyle,rightPane:s,isScheduled:ve}),ue&&E.a.createElement(De,{t:a,leftItem:Ve(),text:a("classRoom:class_discussion"),subText:i,rightItem:E.a.createElement(Ae,e),onInstructionsClick:r,rightPane:s}),!!G&&E.a.createElement(ae.a,{customModalContentClass:null===Ne||void 0===Ne?void 0:Ne.dialogContentClass,modalTitle:null===Ne||void 0===Ne?void 0:Ne.title({t:a,firstName:te,isEvaluate:L}),warningText:Ne.warningText({t:a,firstName:te}),modalBody:Ne.modalBody({t:a,firstName:te,isSubmitted:J,isEvaluate:L}),showModal:!0,onClickButton2:function(e){switch(G){case"RETURN":Le(e);break;case"EVALUATE":Be({isEvaluated:!K,isSharedWithStudent:!1,isEvaluationApplicable:Z});break;case"SHARE":case"EVALUATE_SHARE":Be({isEvaluated:!0,isSharedWithStudent:!0,isEvaluationApplicable:Z})}},toggleDialogueBoxDisplay:function(){return z("")},button1:Ne.cancelButtonText({t:a}),button2:Ne.confirmButtonText({t:a,isEvaluate:L}),isPromptBox:Ne.isPromptBox,promptBoxType:Ne.promptBoxType,promptDetail:Ne.promptDetail({t:a}),warningTextStyles:he.warningTextStyles,headerStyles:he.headerStyles,modalBodyStyle:he.modalBodyStyle,footerContainerStyle:he.footerContainerStyle,size:"sm",closeButtonSize:"medium",button1Props:{variant:"outlined-subtle",size:"large"},button2Props:{size:"large"}}),(u||d)&&E.a.createElement("div",{className:de.a.disableOverlay}))}));Ne.defaultProps={showEvaluationDropdown:!0,isLinksRoute:!1};var ke={unHandStudentAssignmentSubmission:ie.unHandStudentAssignmentSubmission,setToastMsg:oe.nb,onClickEvalUpdate:ie.onClickEvalUpdate,goToRelativeRoute:j.Ab},Pe=Object(h.c)(Object(C.connect)((function(e){var t=be.a.get(e,"teacher.selected_class.isArchivedClass"),a=be.a.get(e,"platform.academicYearSelected.isCurrentAcademicYear",!0),n=be.a.get(e,"login.userInfo",{});return{isArchivedClass:t,isCurrentAcademicYearSelected:a,userType:be.a.get(n,"user_type"),isEvaluting:be.a.get(e,"classRoom.isEvaluating",!1)}}),ke),Object(f.a)({resource:["common","assessmentEvaluation"]}),Object(x.a)({cb:V.z}))(Ne),xe=a(19),Me=a.n(xe),Le=a(4842),Be=a.n(Le),je=a(3653),Fe=a(3721),Ue=a(28),He=a.n(Ue),Ve=a(36),We={profileCascadeStyle:{width:28,height:28},buttonContainerStyle:{width:"100%"},dropDownConStyle:{top:"50px",left:0,borderRadius:"2px",zIndex:11,height:"350px",overflowY:"auto"}},Ge=E.a.memo((function(e){var t=e.assignedStudents,a=e.currentStep,n=e.onClickStep,s=e.isStudentSubmissionEnabled,o=e.isTeacherEvaluationEnabled,i=e.counts,r=i.totalAssignedStudents,l=i.totalSubmissions,c=e.classDiscussion,u=e.t,d=Object(S.useState)("ALL_STUDENTS"),m=$()(d,2),p=m[0],g=m[1],v=_.get(t,"length",0),h=_e()(b()({},Be.a.allSubmissionCard,!0),b()({},Be.a.activeItem,"allsubmissions"==a)),C=_e()(b()({},Be.a.allSubmissionCard,!0),b()({},Be.a.activeItem,"classdiscussion"==a)),f=_.get(c,"unreadMessageCount",0),T=[];if(s&&(T=[].concat(Me()(T),["SUBMISSION_PENDING","OVERDUE","TURNED_IN","REQUEST_RESUBMISSION"])),o){var y=_.findIndex(T,(function(e){return"TURNED_IN"==e}));y>-1&&(T=He()(T,{$splice:[[y,1]]})),T=[].concat(Me()(T),["EVALUATION_PENDING","EVALUATED","EVALUATED_SHARED","EVALUATION_NOT_APPLICABLE"])}else T=[].concat(Me()(T),["COMPLETED"]);var I=[{label:"".concat(u("common:allStudents")," (").concat(v,")"),value:"ALL_STUDENTS"}].concat(Me()(_.map(T,(function(e){var a=Object(V.s)({status:e,t:u}),n=_.get(_.filter(t,(function(t){return t.status==e})),"length",0);return{label:"".concat(a," (").concat(n,")"),value:e}})))),A=_.filter(t,(function(e){return!_.get(e,"student.isArchived",!1)})),w=_.filter(t,(function(e){return _.get(e,"student.isArchived",!1)}));return E.a.createElement("div",{className:Be.a.container},s&&E.a.createElement("div",{className:h,onClick:function(){return n("allsubmissions")}},E.a.createElement("div",null,u("classRoom:all_submissions")),E.a.createElement("div",null,"".concat(l,"/").concat(r))),E.a.createElement("div",{className:C,onClick:function(){return n("classdiscussion")}},E.a.createElement("div",null,u("classRoom:class_discussion")),f>0&&E.a.createElement(ne.Badge,{value:f})),(s||o)&&E.a.createElement("div",{className:Be.a.studentTypeDropDownCon},E.a.createElement(je.a,{authTabs:I,onItemClick:g,buttonComponent:function(){var e=_.get(_.find(I,(function(e){return e.value==p})),"label","");return E.a.createElement("div",{className:Be.a.dropDownBtn},E.a.createElement("div",{className:Be.a.dropDownText},e),E.a.createElement("div",{className:Be.a.bottomArrow},E.a.createElement(Fe.a,{width:12,height:6,fill:H.e.white})))}(),parentContainerStyle:We.buttonContainerStyle,buttonParentStyle:We.buttonContainerStyle,containerStyle:We.dropDownConStyle})),E.a.createElement("div",{className:Be.a.students},E.a.createElement(ze,{assignedStudents:A,currentStep:a,activeStudentType:p,onClickStep:n,t:u,isStudentSubmissionEnabled:s}),!Object(ve.isEmpty)(w)&&E.a.createElement(ze,{archived:!0,assignedStudents:w,currentStep:a,activeStudentType:p,onClickStep:n,t:u,isStudentSubmissionEnabled:s})))})),ze=function(e){var t=e.assignedStudents,a=e.currentStep,n=e.activeStudentType,s=e.onClickStep,o=e.t,i=e.archived,r=e.isStudentSubmissionEnabled,l=i?{borderTop:"1px solid ".concat(H.e.gray31),paddingTop:"8px",marginTop:"8px"}:{},c=Ve.a.can("FeatureFlag:EnableTurnedInIndicator");return E.a.createElement("div",{className:Be.a.innerContainer,style:l},_.map(t,(function(e){var t=e.id,i=e.student,l=e.conversation,u=e.isEvaluated,d=e.status,m=e.isSubmitted,p=e.submission;if("ALL_STUDENTS"==n||n==d){var g="SUBMITTED"==_.get(p,"status","")||m,v=i.firstName,S=i.lastName,h=i.profileImage,C=i.isArchived,f=_.get(l,"unreadMessageCount",0),T=_.get(l,"unreadMessageCounts",[]),y=_.get(_.first(T),"count",0),I=c&&y>0&&g&&!u,A=Object(V.s)({status:d,t:o}),w=g&&r&&!c,O=c&&_.isEqual(d,"OVERDUE"),R=_e()(b()({},Be.a.studentItem,!0),b()({},Be.a.studentItemContainer,I),b()({},Be.a.activeItem,a==t));return E.a.createElement("div",{className:R,key:i.id,onClick:function(){return s(t)}},I&&E.a.createElement("span",{className:Be.a.dot}),E.a.createElement("div",{className:Be.a.leftCon},E.a.createElement("div",{className:Be.a.profileCon},E.a.createElement(ee.a,{items:[{id:t,value:v,imageUrl:h}],customStyle:We.profileCascadeStyle,showCount:!0,count:f,isArchived:C}),E.a.createElement("div",{className:Be.a.studentInfoCon},E.a.createElement("div",{className:Be.a.studentItemText},"".concat(v," ").concat(S)),E.a.createElement("div",{className:Be.a.statusContainer},C&&E.a.createElement("div",{className:Be.a.archived},o("common:archived")),C&&A&&E.a.createElement("span",{className:Be.a.splitter},"|"),!!A&&E.a.createElement("div",{className:Be.a.studentStatusLabel},A))))),w&&E.a.createElement(W.DownArrowCircleOutlined,{size:"xxx-small",variant:"on"}),O&&E.a.createElement(W.WarningCircleOutlined,{size:"xx-small",variant:"subtle"}),u&&E.a.createElement(E.a.Fragment,null,c?E.a.createElement("div",{className:Be.a.tickIconContainer},E.a.createElement("div",{className:Be.a.tickIcon},E.a.createElement(W.TickCircleFilled,{size:"x-small",variant:"success"})),E.a.createElement("span",{className:Be.a.tickIconOverlay})):E.a.createElement("div",{className:Be.a.evalTickCon},E.a.createElement(W.TickLargeOutlined,{size:"xxx-small",variant:"on"}))))}})))},Ye=Object(f.a)({resource:["common","classRoom"]})(Ge),qe=a(107),Je=a(294),Ke=a(4841),Ze=a.n(Ke),Qe={avatarStyles:{size:"small",shade:"dark",randomizeColor:!1}},Xe=function(e){var t=e.customDividerStyles,a=void 0===t?{}:t;return E.a.createElement("div",{className:Ze.a.dividerContainer,style:a},E.a.createElement("div",{className:Ze.a.divider}))},$e=Object(S.memo)((function(e){var t,a,n,s=e.Icon,o=e.title,i=e.showDivider,r=void 0!==i&&i,l=e.showDropdown,c=void 0!==l&&l,u=e.action,d=e.dropdownProps,m=void 0===d?[]:d,p=e.onClickIconItem,g=e.currentStep,v=e.count,S=e.rightText,h=e.hideItem,C=void 0!==h&&h,f=e.customStyles,T=void 0===f?{}:f,y=e.customDividerStyles,I=void 0===y?{}:y,A=e.showLeftPaneOverlay,w=void 0!==A&&A,O=m.options,R=void 0===O?[]:O,D=m.onItemClick,N=m.activeOption,k=m.setIsDropdownVisible,P=_e()((t={},b()(t,Ze.a.iconItemContainer,!0),b()(t,Ze.a.activeItem,u===g),t)),x=_e()((a={},b()(a,Ze.a.iconItemInnerLeft,!0),b()(a,Ze.a.iconItemInnerLeftContainer,c),a));return E.a.createElement(E.a.Fragment,null,!C&&E.a.createElement("div",{className:P,style:T,onClick:function(){return p(u)}},E.a.createElement("div",{className:x},E.a.createElement("div",{className:Ze.a.iconContainer},E.a.createElement(ne.Badge,{value:v},E.a.createElement(s,{size:"xx-small",style:{color:w?se.colors.iconOnDisabled:se.colors.iconOnDefault}}))),c?E.a.createElement(ne.Dropdown,{onVisibleChange:function(e){return k(e)},overlay:E.a.createElement(ne.DropdownMenu,{options:R,onClick:D}),disabled:w},E.a.createElement(ne.ButtonDisclosure,{size:"small",variant:"plain",isFullWidth:!0,disabled:w},null===(n=_.find(R,(function(e){return e.key===N})))||void 0===n?void 0:n.label)):E.a.createElement("div",{className:Ze.a.iconItemText},o)),E.a.createElement("div",{className:Ze.a.iconItemInnerRight},S)),r&&E.a.createElement(Xe,{customDividerStyles:I}))}));$e.displayName="IconItem";var et=Object(S.memo)((function(e){var t,a=e.t,n=e.id,s=e.studentName,o=e.profileImage,i=e.isArchived,r=e.conversationUnreadCount,l=e.studentAssignmentStatus,c=e.isOverdue,u=e.tags,d=e.isEvaluated,m=e.showTurnInDot,p=e.onClickStudentItem,g=e.isActive,v=e.showLeftPaneOverlay,S=_e()((t={},b()(t,Ze.a.studentListItem,!0),b()(t,Ze.a.activeItem,g),b()(t,Ze.a.activeItemDisabled,v),t)),h=_e()(b()({},Ze.a.assignmentOverdue,c));return E.a.createElement("div",{className:S,onClick:function(){return p(n)}},m&&E.a.createElement("span",{className:Ze.a.dot}),E.a.createElement("div",{className:Ze.a.leftContainer},E.a.createElement(ne.Badge,{value:r},E.a.createElement(ee.a,{items:[{id:n,value:s,imageUrl:o}],isArchived:i,showAvatar:!0,avatarStyles:Qe.avatarStyles,isDisabled:v}))),E.a.createElement("div",{className:Ze.a.rightContainer},E.a.createElement("div",{className:Ze.a.rightInnerLeftContainer},E.a.createElement("div",{className:Ze.a.studentNameWithTagContainer},E.a.createElement("div",{className:Ze.a.studentName},s),!_.isEmpty(u)&&E.a.createElement("div",{className:Ze.a.tagsContainer},_.map(u,(function(e){return E.a.createElement(ne.Tag,{key:null===e||void 0===e?void 0:e.label,size:"xx-small",color:_.get(j.d,"".concat(null===e||void 0===e?void 0:e.label,".color"),"teal")},null===e||void 0===e?void 0:e.label)})))),E.a.createElement("div",{className:Ze.a.statusContainer},i&&a("common:archived"),i&&l&&E.a.createElement("span",{className:Ze.a.splitter},"|"),!!l&&E.a.createElement("div",{className:h},l))),E.a.createElement("div",{className:Ze.a.rightInnerRightContainer},c&&E.a.createElement(W.WarningCircleOutlined,{size:"xx-small",variant:"subtle"}),d&&E.a.createElement("div",{className:Ze.a.tickIconContainer},E.a.createElement("div",{className:Ze.a.tickIcon},E.a.createElement(W.TickCircleFilled,{size:"x-small",variant:"success"})),E.a.createElement("span",{className:Ze.a.tickIconOverlay})))))}));et.displayName="StudentListItem";var tt=Object(S.memo)((function(e){var t=e.t,a=e.currentStep,n=e.assignedStudents,s=e.activeStudentType,o=e.onClickStudentItem,i=e.showLeftPaneOverlay,r=e.studentCourseTags,l=e.defaultNameSortPreference;return _.map(n,(function(e){var n=e.id,c=e.student,u=e.conversation,d=e.isEvaluated,m=e.status,p=e.isSubmitted,g=e.submission;if(_.includes(["ALL_STUDENTS",m],s)){var v="SUBMITTED"==_.get(g,"status","")||p,b=c.id,S=c.profileImage,h=c.isArchived,C=Object(Je.b)({student:c,orderBy:l}),f=_.get(u,"unreadMessageCount",0),T=_.get(u,"unreadMessageCounts",[]),y=_.get(_.first(T),"count",0)>0&&v&&!d,I=_.isEqual(m,"OVERDUE"),A=Object(V.s)({status:m,t:t}),w=a===n,O=Object(V.lb)({studentCourseTags:r,studentId:b});return E.a.createElement(et,{key:n,t:t,id:n,studentName:C,profileImage:S,currentStep:a,isActive:w,isArchived:h,conversationUnreadCount:f,studentAssignmentStatus:A,isSubmittedVal:v,isEvaluated:d,isOverdue:I,tags:O,showTurnInDot:y,onClickStudentItem:o,showLeftPaneOverlay:i})}}))}));tt.displayName="StudentList";var at=Object(S.memo)((function(e){var t,a=e.t,n=e.counts.totalAssignedStudents,s=e.currentStep,o=e.classDiscussion,i=e.sortedAssignedStudents,r=e.studentTypeOptions,l=e.goToRelativeRoute,c=e.updateCurrentStep,u=e.currentPath,d=e.isStudentSubmissionEnabled,m=e.isClassDiscussionEnabled,p=e.target,g=e.rightPane,v=e.closeRightPane,h=e.showLeftPaneOverlay,C=e.activeStudentType,f=e.setActiveStudentType,T=e.isClassroomTodosRoute,y=e.template,I=e.studentCourseTags,A=e.defaultNameSortPreference,w="dp_pa"===_.get(y,"label"),O=Object(S.useState)(!1),R=$()(O,2),D=R[0],N=R[1],k=Object(S.useState)(!1),P=$()(k,2),x=P[0],M=P[1],L=_.get(o,"unreadMessageCount",0),B=Object(V.U)({t:a,classDiscussionUnreadCount:L,allSubmissionsCount:n,isStudentSubmissionEnabled:d,isClassDiscussionEnabled:m,isInsights:"insights"===p,isPracticalActivity:w,isClassroomTodosRoute:T}),j=Object(V.h)({assignedStudents:i}),F=j.activeStudents,U=j.archivedStudents,H={options:r,onItemClick:function(e){var t=e.key;N(!1),f(t)},activeOption:C,setIsDropdownVisible:N},W=function(e){c({currentStep:e,fn:function(){(null===u||void 0===u?void 0:u.search("mediamanager"))>-1?l({route:"../".concat(e),type:"replace"}):l({route:"../mediamanager/".concat(e),type:"replace"})}}),M(!1)},G=function(e){if(!_.isEqual(s,e))switch(e){case"goback":z();break;case"allsubmissions":case"classdiscussion":c({currentStep:e,fn:function(){(null===u||void 0===u?void 0:u.search("mediamanager"))>-1?l({route:"".concat(e),type:"push",replacePath:"mediamanager"}):l({route:"../".concat(e),type:"push"})}}),M(!1);break;default:return}},z=function(){var t=e.activeStudentId,a="";a=(null===u||void 0===u?void 0:u.search("mediamanager"))>-1?"mediamanager":(null===u||void 0===u?void 0:u.search("allsubmissions"))>-1?"allsubmissions":"classdiscussion";var n="insights"===p?"../../insights/".concat(t,"/details"):w?"../../../practicalactivities":"../../";l({route:n,type:"push",replacePath:a})},Y=_e()((t={},b()(t,Ze.a.container,!0),b()(t,Ze.a.expandedLeftPane,x),b()(t,Ze.a.containerWithDropdown,D),b()(t,Ze.a.overlay,h),t));return E.a.createElement("div",{className:Y,onMouseEnter:function(){M(!0)},onMouseLeave:function(){M(!1)},onClick:function(){g&&(null===v||void 0===v||v())}},E.a.createElement("div",{className:Ze.a.topContainer},_.map(B,(function(e){return E.a.createElement($e,Q()({key:_.get(e,"key"),currentStep:s,onClickIconItem:G,dropdownProps:H,showLeftPaneOverlay:h},e))}))),E.a.createElement("div",{className:Ze.a.bottomContainer},E.a.createElement(tt,{t:a,assignedStudents:F,currentStep:s,activeStudentType:C,onClickStudentItem:W,showLeftPaneOverlay:h,studentCourseTags:I,defaultNameSortPreference:A}),!_.isEmpty(U)&&E.a.createElement(E.a.Fragment,null,E.a.createElement(Xe,null),E.a.createElement(tt,{t:a,isArchived:!0,assignedStudents:U,currentStep:s,activeStudentType:C,onClickStudentItem:W,showLeftPaneOverlay:h,studentCourseTags:I,defaultNameSortPreference:A}))))}));at.displayName="LeftPaneV2";var nt={goToRelativeRoute:j.Ab},st=Object(h.c)(Object(f.a)({resource:["common","classRoom"]}),Object(C.connect)((function(e){return{defaultNameSortPreference:Object(qe.d)(e)}}),nt))(at),ot=a(99),it=a(264),rt=a(350),lt=a(265),ct=a(88),ut=a(715),dt=a(3695),mt=a(3630),_t=a(4671),pt=a(4843),gt=a.n(pt),vt=a(4549),bt=a(4278),St=a(4548);function Et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ht=[H.e.violet80,H.e.violet74,H.e.violet63,H.e.violet54,H.e.violet46,H.e.violet37,H.e.violet28],Ct=_.memoize((function(e){return ft(e)}),(function(e){return JSON.stringify(e)})),ft=function(e){var t=e.assignedStudents,a=[];return _.forEach(t,(function(e){var t=e.ibPYPElementRatings,n=e.student,s=n.firstName,o=n.lastName;if(t){var i=_.get(_.find(t,(function(e){return"SCORE"===e.ibPYPElementType})),"value");i&&a.push({studentMark:_.toNumber(i),studentName:"".concat(s," ").concat(o)})}})),{studentsMark:a}},Tt=function(e){var t=e.data;if(_.isEmpty(t))return[];for(var a=_.sortBy(t,(function(e){return null===e||void 0===e?void 0:e.students})),n=_.size(a),s=0,o=Me()(t),i=function(e){var t=a[e],n=a[e+1];o=_.map(o,(function(e){return e.name===(null===t||void 0===t?void 0:t.name)?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(a),!0).forEach((function(t){b()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Et(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{fill:ht[s]||ht[_.size(ht)-1]}):e})),(null===t||void 0===t?void 0:t.students)!==(null===n||void 0===n?void 0:n.students)&&s++},r=0;r<n;r++)i(r);return{dataWithFill:o}},yt=function(e){var t=e.assignedStudents,a=e.maxScore,n=(e.barCount,Ct({assignedStudents:t}).studentsMark);if(_.isEmpty(n)||!a)return{};for(var s=[],o=a,i=1,r=a%10===0&&a>10?parseInt(a/10)-1:parseInt(a/10),l=function(){var e=function(e){var t=e.index,a=e.maxScore,n=e.remainingMarks,s=e.individualMarksRange,o=Math.min((s+1)*t,a),i=(s+1)*(t-1);return{min:i+1,max:o,updatedRemainingMarks:n-o+i}}({index:i,maxScore:a,remainingMarks:o,individualMarksRange:r}),t=e.min,l=e.max,c=e.updatedRemainingMarks;o=c;var u=0,d=[];if(_.forEach(n,(function(e){var a=e.studentMark,n=e.studentName;(a>=t&&a<=l||1===i&&a===t||t==l&&a==t)&&(u++,d.push({studentMark:a,studentName:n}))})),a<10&&1===i){var m=0,p=[];_.forEach(n,(function(e){var t=e.studentMark,a=e.studentName;0==t&&(m++,p.push({studentMark:t,studentName:a}))})),s.push({name:"BAR_".concat(0),students:m,marksMidRange:"0",studentList:p})}s.push({name:"BAR_".concat(i),students:u,marksMidRange:t==l?"".concat(t):1==i?"0-".concat(l):"".concat(t,"-").concat(l),studentList:d}),i++};o>0;)l();return{data:Tt({data:s}).dataWithFill}},It=_.memoize((function(e){return yt(e)}),(function(e){return JSON.stringify(e)})),At=_.memoize((function(e){return wt(e)}),(function(e){return JSON.stringify(e)})),wt=function(e){var t=e.assignedStudents,a=e.responseType,n=e.isScoreEnabled,s=e.toolId;if(n){var o=Ct({assignedStudents:t}).studentsMark,i=_.size(t),r=_.size(o);return{total:i,done:r,pending:i-r}}var l=_.size(_.filter(t,(function(e){return e.isEvaluationApplicable}))),c=0;return{total:l,done:c="teacherResponse"==a?_.size(_.filter(t,(function(e){var t=e.isEvaluationApplicable,a=e.isEvaluated;return t&&a}))):_.size(_.filter(t,(function(e){var t=e.isEvaluationApplicable,a=e.toolResponses,n=Object(V.S)({toolResponses:a,assessmentToolId:s});return t&&n}))),pending:l-c}},Ot=_.memoize((function(e){return Rt(e)}),(function(e){return JSON.stringify(e)})),Rt=function(e){var t=e.assignedStudents,a=e.id,n=Ct({assignedStudents:t}).studentsMark,s=_.map(n,(function(e){return e.studentMark}));if(!_.size(n))return"NA";switch(a){case"AVERAGE":return parseFloat((_.sum(s)/_.size(s)).toFixed(2));case"HIGHEST":return _.max(s);case"LOWEST":return _.min(s)}};function Dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Nt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(a),!0).forEach((function(t){b()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Dt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var kt={rubricInnerConStyle:{width:"unset"}},Pt={maxWidth:"544px",lineHeight:"24px"},xt=[{label:"Teacher responses",locale:"common:teacher_evaluation",value:"teacherResponse",responseCount:"teacherResponseCount",color:H.e.blue29,studentsList:"studentsByTeacher"},{label:"Student responses",locale:"common:student_evaluation",value:"studentResponse",responseCount:"studentResponseCount",color:H.e.yellow50,studentsList:"studentsByStudent"}],Mt=function(e){var t=e.insights,a=e.currentInsightResponse,n=e.currentInsightStudents;return _.map(t,(function(e){return Nt({},_.omit(e,["studentResponseCount","teacherResponseCount","studentsByTeacher","studentsByStudent"]),{responseCount:e[a],studentsList:e[n]})}))},Lt={type:"number",tick:{fill:H.e.textSubtle,fontSize:"10px"},dataKey:"students",tickLine:!1,axisLine:!1,allowDecimals:!1},Bt={barCategoryGap:10,width:1300,height:300,margin:{top:0,right:50,bottom:0,left:0}},jt={dataKey:"students"},Ft=function(e){function t(e){var a;return s()(this,t),a=l()(this,u()(t).call(this,e)),b()(m()(a),"getCurrentTab",(function(){return a.props.isTeacherEvaluationEnabled?_.first(xt).value:_.last(xt).value})),b()(m()(a),"memoInsightTabsValue",a.changeLocale(xt)),b()(m()(a),"updateCurrentTabfn",(function(e){a.setState(Nt({},a.state,{currentTab:e}))})),a.state={currentTab:a.getCurrentTab()},a}return g()(t,e),i()(t,[{key:"changeLocale",value:function(e){var t=this;return _.map(e,(function(e){return Nt({},e,{label:t.props.t(e.locale)})}))}},{key:"render",value:function(){var e=this.state.currentTab,t=this.props,a=t.onRequestClose,n=t.assessmentTitle,s=t.assessmentTools,o=t.toolInsights,i=t.assignedStudents,r=t.isData,l=t.isLoading,c=t.isStudentEvaluationEnabled,u=t.isTeacherEvaluationEnabled,d=t.ibPYPElementRatings,m=t.maxScore,p=t.isScoreEnabled,g=t.t,v=t.hasAssessmentTool,b=t.shouldTakeFullWidth,S=t.unitPlanFields,h=t.field_list,C=t.assessmentFields,f=t.enableMultiAssessmentTools,T=_.find(xt,{value:e}),y=It({assignedStudents:i,maxScore:m}).data,I={type:"category",dataKey:"marksMidRange",tick:{fill:H.e.textSubtle,fontSize:"10px"},axisLine:!1,tickLine:!1},A=function(e){var t=e.payload;if(!_.isEmpty(t)){var a=_.get(t[0],"payload",{}),n=a.students,s=a.marksMidRange,o=a.studentList,i=_.includes(s,"-");return E.a.createElement("div",{className:gt.a.tooltipContainer},E.a.createElement("div",{className:gt.a.tooltipInnerContainer},E.a.createElement("div",{className:gt.a.studentScoreOverview},E.a.createElement("div",{className:gt.a.studentCount},n),E.a.createElement("div",{className:gt.a.marksRangeContainer},i?g("assessmentEvaluation:score_between_range",{range:s}):g("assessmentEvaluation:score_chart_text",{score:s}))),_.isEmpty(o)?null:E.a.createElement("div",{className:gt.a.studentsContainer},_.map(o,(function(e){var t=e.studentMark,a=e.studentName;return E.a.createElement("div",{className:gt.a.studentDetailContainer},E.a.createElement("div",{className:gt.a.studentNameText},a),E.a.createElement("div",{className:gt.a.studentMarkText},t))})))))}},w=function(){if("studentResponse"!==e){var t=At({assignedStudents:i,responseType:e,isScoreEnabled:p}),a=_.get(t,"done",0);return E.a.createElement("div",{className:gt.a.scoreOveriewContainer},E.a.createElement(bt.a,{toolType:"SCORE",filteredStudentCount:t}),a>0?E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:gt.a.scoreOverview},_.map(ie.SCORE_DETAIL_CATEGORIES_OPTION,(function(e){return O({scoreCategory:e})}))),E.a.createElement("div",{className:gt.a.barChartContainer},E.a.createElement("div",{className:gt.a.yAxisText},g("assessmentEvaluation:no_of_students")),E.a.createElement("div",{className:gt.a.barContainer},E.a.createElement(_t.a,{data:y,yAxisProps:Lt,barChartStyle:Bt,barProps:jt,showXAxis:!0,xAxisProps:I,showLegend:!1,showTooltip:!0,tooltipContent:A}),E.a.createElement("div",{className:gt.a.barChartTitle},g("assessmentEvaluation:distribution_point_based_assessment"))))):E.a.createElement("div",{className:gt.a.emptyStateContainer},E.a.createElement(ne.EmptyState,{illustration:se.NoChartIllustration,title:g("classRoom:no_insights_yet"),subtitle:g("classRoom:once_students_are_evaluated"),subtitleStyle:Pt})))}},O=function(e){var t=e.scoreCategory,a=t.label,n=t.id;return E.a.createElement("div",{className:gt.a.scoreDetailContainer,key:n},E.a.createElement("div",{className:gt.a.scoreDetailHeading},g(a)),E.a.createElement("div",{className:gt.a.scoreContainer},E.a.createElement("span",{className:gt.a.classScore},Ot({assignedStudents:i,id:n})),E.a.createElement("span",{className:gt.a.maxScore},"(".concat(g("common:out_of_with_label",{label:m}),")"))))},R=u&&"teacherResponse"===e&&p;return E.a.createElement(P.a,{isOpen:!0,isFullScreen:!0,onRequestClose:a},E.a.createElement("div",{className:gt.a.container},E.a.createElement("div",{className:gt.a.scrollContainer},E.a.createElement(vt.a,{options:this.memoInsightTabsValue,subTitle:n,onClickClose:a,currentTab:e,showTabs:c&&u,updateCurrentTab:this.updateCurrentTabfn}),R&&!f&&w(),v&&function(){var t=_.filter(null===s||void 0===s?void 0:s.edges,(function(e){var t=e.node.assessmentToolType,a=_.find(j.a,(function(e){return e.type===t}));return _.get(a,"hasInsight",!1)}));return _.map(t,(function(t){var a=t.node||{},n=a.id,s=a.assessmentToolType,c=a.assessmentToolItem,u=a.isTeacherEvaluationEnable,m=a.isStudentEvaluationEnable;if("SCORE"!==s||f){var p=_.find(o,(function(e){return e.toolId===(null===c||void 0===c?void 0:c.id)}));return E.a.createElement("div",{key:n,className:gt.a.assessmentToolCardContainer},"SCORE"===s?w():function(t){var a=t.toolId,n=t.insights,s=t.toolType,o=t.assessmentTool,c=t.isTeacherEvaluationEnable,u=t.isStudentEvaluationEnable;if(f){if(!c&&!u)return;if("teacherResponse"===e&&!c)return;if("studentResponse"===e&&!u)return}var m=se.NoChartIllustration;switch(s){case"RUBRIC":m=se.NoRubricIllustration;break;case"CHECKLIST":m=se.NoChecklistIllustration;break;default:m=se.NoChartIllustration}var p=_.find(j.a,(function(e){return e.type===s})),v=_.get(p,"locale"),y=At({assignedStudents:i,responseType:e,toolId:a}),I=_.get(y,"done",0);return E.a.createElement(E.a.Fragment,null,E.a.createElement(bt.a,{toolType:s,filteredStudentCount:y}),I>0?E.a.createElement(St.a,{toolType:s,isData:r,isLoading:l,assessmentTool:o,insightColor:T.color,insights:Mt({insights:n,currentInsightResponse:_.get(T,"responseCount",""),currentInsightStudents:_.get(T,"studentsList","")}),mypObjectiveRubricOptions:Object(j.gb)({unitPlanFields:S,field_list:h,assessmentFields:C,measureAssessingValue:s}),ibPYPElementRatings:d,rubricInnerConStyle:kt.rubricInnerConStyle,shouldTakeFullWidth:b}):E.a.createElement("div",{className:gt.a.emptyStateContainer},E.a.createElement(ne.EmptyState,{illustration:m,title:g("classRoom:no_insights_yet_with_label",{label:g(v)}),subtitle:g("teacherResponse"===e?"classRoom:insights_not_eval_subtext_with_label":"classRoom:once_students_are_complete_self_eval",{label:g(v)}),subtitleStyle:Pt})))}({toolId:_.get(c,"id"),toolType:s,insights:_.get(p,"insights",[]),assessmentTool:c,isTeacherEvaluationEnable:u,isStudentEvaluationEnable:m}))}}))}())))}}]),t}(E.a.PureComponent),Ut=Object(h.c)(Object(f.a)({resource:["assessmentEvaluation","classRoom"]}),Object(C.connect)((function(e,t){var a=_.get(e,"login.userInfo.org_id",""),n=_.get(e,"platform.currentCurriculumProgram",{}).type;return{isData:!0,isLoading:!1,organizationId:a,enableMultiAssessmentTools:Object(V.M)({curriculumProgramType:n})}}),{}),Object(h.d)(I.f,{name:"getAssignmentEvaluationInsight",options:function(e){return{fetchPolicy:"cache-and-network",variables:{id:e.assignmentId}}},props:function(e){var t=e.getAssignmentEvaluationInsight,a=e.ownProps,n=a.assignmentId,s=a.isData,o=a.isLoading,i=Object(A.f)({assignmentId:n}),r=_.get(i,"toolInsights",[]);return{isData:!_.isEmpty(i)&&s,toolInsights:r,isLoading:1==t.networkStatus||2==t.networkStatus||o}}}))(Ft),Ht=a(82),Vt=a.n(Ht),Wt=a(4845),Gt=a.n(Wt),zt=function(e){var t=e.childComp,a=Vt()(e,["childComp"]),n=e.onClose,s=void 0===n?function(){}:n,o=e.skeletonStyle,i=e.showOverlay,r=void 0===i||i;return E.a.createElement(E.a.Fragment,null,r&&E.a.createElement("div",{className:Gt.a.overlay,onClick:s}),E.a.createElement("div",{className:Gt.a.skeleton,style:o},E.a.createElement(t,a)))},Yt=a(3631),qt=a(4844),Jt=a.n(qt);function Kt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Zt=function(e){var t=e.questions,a=e.students,n=_.reduce(t,(function(e,t){var a=_.get(t,"submissions",[]);return _.forEach(a,(function(a){var n=_.get(a,"student.id",""),s=_.get(a,"score.value",""),o=e[n],i=_.find(o,(function(e){return e.questionId===t.id})),r={questionId:t.id,submissionId:a.id,score:s};o?i||o.push(r):e[n]=[r]})),e}),{});return _.map(a,(function(e){var a=e.student,s=(a=void 0===a?{}:a).firstName,o=void 0===s?"":s,i=a.lastName,r=void 0===i?"":i,l=a.profileImage,c=void 0===l?"":l,u=a.id,d=n[u],m=_.sum(_.map(d,(function(e){return e.score?_.toNumber(e.score):0}))),p=_.filter(d,(function(e){return!_.get(e,"score","")})),g=_.size(p)==_.size(t)||_.isNil(d);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(a),!0).forEach((function(t){b()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Kt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({id:u,student_name:{name:"".concat(o," ").concat(r),profileImage:c,id:u},total:g?"-":m},_.reduce(d,(function(e,t){return e["question_".concat(t.questionId)]=t,e}),{}))}))},Qt=_.memoize((function(e){return Zt(e)}),(function(e){return JSON.stringify(e)})),Xt=a(1558),$t=a(145);function ea(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ta(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(a),!0).forEach((function(t){b()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ea(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var aa={skeletonStyle:{height:"100%",width:"480px",overflowY:"unset"},editorStyle:{styles:{parentContainerStyle:{height:"calc(100% - 96px)"},containerStyle:{backGroundColor:"unset",overflowY:"auto"},questionContainerStyle:{margin:"0px",border:"unset",flex:1},footerStyle:{position:"absolute"}}}},na=function(e){var t=e.row,a=e.column,n=e.getCustomComponent,s=e.emptyText,o=void 0===s?"-":s,i=e.rowId,r=e.columnId,l=t[a.key],c=_.isNil(l)?o:l;switch(a.type){case"TEXT":return E.a.createElement("td",{className:Jt.a.cellClass,style:a.cellStyle},c);case"CUSTOM":return E.a.createElement("td",{style:a.cellStyle},n({id:t.id,data:c,columnData:a,rowId:i,columnId:r}))}},sa=function(e){var t=e.feedData,a=e.columnData,n=e.getCustomComponent,s=e.emptyText;return _.map(t,(function(e,t){return E.a.createElement("tr",{key:"".concat(e.id,"_").concat(t)},_.map(a,(function(t,a){return E.a.createElement(na,{row:e,column:t,getCustomComponent:n,emptyText:s,rowId:e.id,columnId:t.id,key:"".concat(e.id,"_").concat(t.key)})})))}))},oa=Object(S.memo)((function(e){var t=e.currentStudentData,a=Object(Yt.a)(["common"]).t,n=t.status,s=t.submission.status,o=Object(V.s)({status:n,t:a}),i="OVERDUE"===n?o:Object(V.hb)({submissionStatus:s,t:a}),r=o!==i;return E.a.createElement(E.a.Fragment,null,!!i&&i,!!o&&r&&E.a.createElement(E.a.Fragment,null,E.a.createElement("span",{className:Jt.a.dotContainer}),o))}));oa.displayName="MediaManagerSubText";var ia=Object(h.c)(Object(C.connect)((function(e){return{isData:!0,isLoading:!1}}),null),Object(h.d)(I.x,{name:"getWorkSheetInsight",skip:function(e){return!e.attachmentGroupId},options:function(e){return{fetchPolicy:"cache-and-network",variables:{id:e.attachmentGroupId}}},props:function(e){var t=e.getWorkSheetInsight,a=e.ownProps,n=a.attachmentGroupId,s=a.isData,o=a.isLoading,i=Object(A.w)({id:n}),r=_.get(t,"networkStatus"),l=_.map(_.get(i,"attachments",[]),(function(e){return _.get(e,"questionAttachment",{})}));return{isData:!_.isEmpty(i)&&s,questions:l,isLoading:_.includes([1,2],r)||o}}}),y.a)((function(e){var t=e.showSubHeaderColumn,a=void 0===t||t,n=e.assignedStudents,s=e.selectedCell,o=e.questions;(0,e.setQuestions)(o);var i=function(e){var t=e.questions;return[{key:"student_name",label:"Student name",style:{minWidth:"240px"},cellStyle:ta({},se.fontStyles.demiBold),showSubHeaderValue:!1,type:"CUSTOM"},{label:"Total",key:"total",showSubHeaderValue:!0,style:{minWidth:"89px"},cellStyle:ta({},se.fontStyles.demiBold),type:"TEXT"}].concat(Me()(_.map(t,(function(e,t){return{id:e.id,label:t+1,key:"question_".concat(e.id),showSubHeaderValue:!0,type:"CUSTOM",cellStyle:ta({cursor:"pointer"},se.fontStyles.medium)}}))))}({questions:o}),r=Qt({students:n,questions:o}),l=function(e){var t=e.questions;return ta({total:_.sum(_.map(t,(function(e){return(null===e||void 0===e?void 0:e.questionScore)?_.toNumber(e.questionScore):0})))},_.reduce(t,(function(e,t){return e["question_".concat(t.id)]=t.questionScore,e}),{}))}({questions:o});return E.a.createElement("div",{className:Jt.a.tableContainer},E.a.createElement("table",{className:Jt.a.insightTableClass},E.a.createElement("thead",null,E.a.createElement("tr",null,_.map(i,(function(e){return E.a.createElement("th",{style:e.style,className:Jt.a.tableHeaderClass,key:"header_".concat(e.key)},e.label)})))),E.a.createElement("tbody",null,E.a.createElement("tr",null,a&&function(){var e,t=_e()((e={},b()(e,Jt.a.scoreText,!0),b()(e,"text-body-3",!0),e));return _.map(i,(function(e){var a=e.showSubHeaderValue,n=void 0!==a&&a;return E.a.createElement("td",{key:"subHeader_".concat(e.key)},n?E.a.createElement("div",{className:Jt.a.questionScoreContainer},E.a.createElement(W.AssessmentEvaluatedOutlined,{variant:"subtle"}),E.a.createElement("div",{className:t},"".concat(l[e.key]," pts"))):null)}))}()),E.a.createElement(sa,{feedData:r,columnData:i,getCustomComponent:function(e){var t=e.id,a=e.data,n=e.columnData,o=e.rowId,i=e.columnId,r=_.get(a,"questionId",""),l=(null===s||void 0===s?void 0:s.rowId)===o&&(null===s||void 0===s?void 0:s.columnId)===i;switch(n.key){case"student_name":return E.a.createElement("div",{className:Jt.a.studentNameContainer},E.a.createElement("div",{className:Jt.a.avatarContainer},E.a.createElement(ne.Avatar,{shade:"light",color:H.a[t%H.a.length],iconType:"individual",src:a.profileImage})),E.a.createElement("div",{className:Jt.a.studentNameText},a.name));case"question_".concat(r):var c,u=_.get(a,"submissionId",""),d=_.get(a,"score",""),m=_e()((c={},b()(c,Jt.a.cellClass,!0),b()(c,Jt.a.cellSelected,l),b()(c,Jt.a.emptyCellClass,!d),c));return E.a.createElement("div",{className:m,"data-row-id":o,"data-column-id":i,"data-submission-id":u,id:"WorkSheetCell:".concat(o,"_").concat(i)},d||"-");default:var p,g=_e()((p={},b()(p,Jt.a.cellClass,!0),b()(p,Jt.a.cellSelected,l),b()(p,Jt.a.emptyCellClass,!0),p));return E.a.createElement("div",{className:g,"data-row-id":o,"data-column-id":i,id:"WorkSheetCell:".concat(o,"_").concat(i)},"-")}},emptyText:"-"}))))})),ra=function(e){var t,a=e.assessmentTitle,n=e.onClose,s=Object(Yt.a)(["assessmentEvaluation","common"]).t,o=_e()((t={},b()(t,Jt.a.subTitleClass,!0),b()(t,"text-body-2",!0),t));return E.a.createElement("div",{className:Jt.a.topHeaderContainer},E.a.createElement("div",{className:Jt.a.titleContainer},E.a.createElement("div",{className:"heading-4"},s("assessmentEvaluation:worksheet_insight")),E.a.createElement("div",{className:o},a)),E.a.createElement(ne.Button,{variant:"outlined",onClick:n},s("common:close")))},la=function(e){var t,a=e.selectedCell,n=e.questions,s=e.questionItemClicked,o=e.onClose,i=e.assignedStudents,r=e.setSelectedCell,l=e.goToRelativeRoute,c=e.onInsightClose,u=Object(Yt.a)(["common"]).t,d=null===a||void 0===a?void 0:a.cellId,m=null===d||void 0===d?void 0:d.columnId,p=null===d||void 0===d?void 0:d.rowId,g=document.getElementById("WorkSheetCell:".concat(p,"_").concat(m)),v=_.get(g,"dataset.submissionId",""),S=_.find(n,(function(e){return e.id===m})),h=_.findIndex(i,(function(e){return _.get(e,"student.id","")===p})),C=_.get(i,"".concat([h]),{}),f=_.get(C,"student",{}),T=h+1===_.size(i),y=0===h,I=_e()((t={},b()(t,Jt.a.studentTurnedInDetails,!0),b()(t,"text-body-3",!0),t));s({question:{id:_.get(S,"id",""),type:_.get(S,"questionType","")},currentSubmission:v});var A="".concat(f.firstName," ").concat(f.lastName);return E.a.createElement("div",{className:Jt.a.sidePanContainer},E.a.createElement("div",{className:Jt.a.sidePanHeader},E.a.createElement("div",{className:Jt.a.nameContainer},E.a.createElement("div",{className:Jt.a.avatarContainer},E.a.createElement(ne.Avatar,{shape:"square",shade:"light",iconType:"individual",color:H.a[p%H.a.length],src:f.profileImage})),E.a.createElement("div",{className:Jt.a.studentNameDetails},E.a.createElement("div",{className:"heading-5"},A),E.a.createElement("div",{className:I},E.a.createElement(oa,{currentStudentData:C})))),E.a.createElement("div",{className:Jt.a.actionContainer},E.a.createElement("div",{className:Jt.a.moveIcons},E.a.createElement(ne.IconButton,{icon:E.a.createElement(W.ChevronLeftOutlined,null),variant:"plain",disabled:y,onClick:function(){var e=_.get(i[h-1],"student.id","");r((function(t){return ta({},t,{cellId:ta({},t.cellId,{rowId:e})})}))}}),E.a.createElement(ne.IconButton,{icon:E.a.createElement(W.ChevronRightOutlined,null),variant:"plain",disabled:T,onClick:function(){var e=_.get(i[h+1],"student.id","");r((function(t){return ta({},t,{cellId:ta({},t.cellId,{rowId:e})})}))}})),E.a.createElement("div",{className:Jt.a.closeIcons},E.a.createElement(ne.IconButton,{icon:E.a.createElement(W.CornersOutOutlined,null),variant:"plain",onClick:function(){c();var e="../mediamanager/".concat(null===C||void 0===C?void 0:C.id);l({route:e})}}),E.a.createElement(ne.IconButton,{icon:E.a.createElement(W.CloseOutlined,null),variant:"plain",onClick:o})))),E.a.createElement(Xt.a,Q()({questions:n,questionId:m,questionMode:"EVALUATION_MODE",prevButtonClick:function(e){var t=_.get(e,"questionData",{});r((function(e){return ta({},e,{cellId:ta({},e.cellId,{columnId:null===t||void 0===t?void 0:t.id})})}))},nextButtonClick:function(e){var t=_.get(e,"questionData",{});r((function(e){return ta({},e,{cellId:ta({},e.cellId,{columnId:null===t||void 0===t?void 0:t.id})})}))},nextButtonLabel:u("common:next"),prevButtonLabel:u("common:previous"),showQuestionTitleInFooter:!0,isInsightView:!0},aa.editorStyle)))},ca={questionItemClicked:$t.questionItemClicked,resetState:$t.resetState,goToRelativeRoute:j.Ab},ua=Object(C.connect)(null,ca)((function(e){var t=Object(Yt.a)(["common"]).t,a=e.onClose,n=e.assessmentTitle,s=e.assignedStudents,o=e.attachmentGroupId,i=e.questionItemClicked,r=e.resetState,l=e.goToRelativeRoute,c=Object(S.useState)({cellId:null}),u=$()(c,2),d=u[0],m=u[1],p=Object(S.useState)(null),g=$()(p,2),v=g[0],h=g[1],C=At({assignedStudents:s,responseType:"teacherResponse"}),f=function(){r(),a()},T=_e()(b()({},Jt.a.innerContainer,!0));return E.a.createElement(P.a,{isFullScreen:!0,isOpen:!0,onRequestClose:f},E.a.createElement("div",{className:Jt.a.container},E.a.createElement(ra,{assessmentTitle:n,onClose:f}),E.a.createElement("div",{className:Jt.a.evaluationInsight},E.a.createElement(bt.a,{toolType:"SCORE",filteredStudentCount:C,t:t})),E.a.createElement("div",{className:T,onClick:function(e){var t=_.get(e,"target.dataset.rowId",void 0),a=_.get(e,"target.dataset.columnId",void 0),n=(null===d||void 0===d?void 0:d.rowId)===t&&(null===d||void 0===d?void 0:d.columnId)===a,s={rowId:t,columnId:a};t&&s&&m(n?{cellId:null}:{cellId:s})}},E.a.createElement(ia,{assignedStudents:s,selectedCell:d.cellId,attachmentGroupId:o,setQuestions:h}))),d.cellId&&E.a.createElement(zt,{childComp:la,skeletonStyle:aa.skeletonStyle,questions:v,selectedCell:d,questionItemClicked:i,assignedStudents:s,setSelectedCell:m,goToRelativeRoute:l,onInsightClose:f,onClose:function(){m({cellId:null})},showOverlay:!1}))})),da=a(52),ma=a(83),_a=a(63);function pa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ga(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(a),!0).forEach((function(t){b()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var va={zIndex:100001},ba=function(e){function t(e){var a;return s()(this,t),a=l()(this,u()(t).call(this,e)),b()(m()(a),"componentDidMount",(function(){var e=a.props,t=e.goToRelativeRoute,n=e.studentAssignmentId,s=e.lastRoute,o=e.assignmentData,i=e.children,r=e.enableMultiAssessmentTools;if(i)if("allsubmissions"==s)a.setState({currentTabView:"allsubmissions",currentStep:"allsubmissions"});else{var l=o.state.state;a.setState({currentStep:n,currentTabView:"SCHEDULED"==l?"instructions":"responses"})}else{var c=a.getFirstStep(),u=c.currentStep,d=c.currentTabView;t({route:"./".concat(u),type:"replace"}),a.setState({currentTabView:d,currentStep:u})}var m=o||{},p=m.content,g=void 0===p?{}:p,v=m.isTeacherEvaluationEnabled,b=g||{},S=b.id,E=b.isLearningGoalsEvaluationEnabled,h=void 0!==E&&E;r&&v&&!_.isEmpty(S)&&(_.isNull(h)&&a.updateLearningGoalsEvalSetting({content:g}))})),b()(m()(a),"componentDidUpdate",(function(e,t){var n=a.props.studentAssignmentId,s=a.state,o=s.currentStep,i=s.isPdftronEnabled,r=s.isWorkbookEnabled,l=e.studentAssignmentId,c=t.isPdftronEnabled,u=t.isWorkbookEnabled;n&&l!==n&&o!==n&&a.setState({currentTabView:"allsubmissions"==n?"allsubmissions":"responses",currentStep:n}),l!==n&&_.isEmpty(n)&&a.setState({currentTabView:"allsubmissions",currentStep:"allsubmissions"}),c==i&&u==r||a.setState({showLeftPaneOverlay:i||r})})),b()(m()(a),"changeIsLoading",(function(e){a.setState({isLoading:e})})),b()(m()(a),"changeWorkbookEnable",(function(e){a.setState({isWorkbookEnabled:e})})),b()(m()(a),"changePdftronEnable",(function(e){a.setState({isPdftronEnabled:e})})),b()(m()(a),"updateLearningGoalsEvalSetting",function(){var e=D()(O.a.mark((function e(t){var n,s,o,i,r,l,c,u,d,m,_,p,g,v;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t||{}).content,s=void 0===n?{}:n,o=a.props,i=o.curriculumType,r=o.getEnableLearningGoalsEvaluation,l=o.updateAssessment,c=o.getCriteriaSetOfPypType,d=(u=s||{}).id,m=u.assessmentTools,_=void 0===m?[]:m,p=u.allFields,g=void 0===p?[]:p,e.next=5,r({assessmentTools:_,allFields:g,curriculumProgramType:i,getCriteriaSetOfPypType:c});case 5:return v=e.sent,e.next=8,l({assessmentId:d,isLearningGoalsEvaluationEnabled:v,hasFields:!1});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b()(m()(a),"updateLearningGoalsEvalSetting",function(){var e=D()(O.a.mark((function e(t){var n,s,o,i,r,l,c,u,d,m,_,p,g,v;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t||{}).content,s=void 0===n?{}:n,o=a.props,i=o.curriculumType,r=o.getEnableLearningGoalsEvaluation,l=o.updateAssessment,c=o.getCriteriaSetOfPypType,d=(u=s||{}).id,m=u.assessmentTools,_=void 0===m?[]:m,p=u.allFields,g=void 0===p?[]:p,e.next=5,r({assessmentTools:_,allFields:g,curriculumProgramType:i,getCriteriaSetOfPypType:c});case 5:return v=e.sent,e.next=8,l({assessmentId:d,isLearningGoalsEvaluationEnabled:v,hasFields:!1});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b()(m()(a),"getFirstStep",(function(){var e=a.props,t=e.assignmentData,n=e.isNotUserCourse,s=e.isAllSubmissionsRevamp,o=t.assignedStudents,i=t.contentType,r=t.isStudentSubmissionEnabled,l=t.state.state,c="";if(n)if("ASSIGNMENT_DISCUSSION"==i)c="classdiscussion";else{var u=_.get(_.first(o),"id","");c=s?"mediamanager/".concat(u):u}else c="allsubmissions";return{currentStep:c,currentTabView:"SCHEDULED"==l||n?"instructions":r?"allsubmissions":"responses"}})),b()(m()(a),"onClickStep",(function(e){(0,a.props.goToRelativeRoute)({route:"../".concat(e),type:"replace"}),a.setState({currentTabView:"allsubmissions"==e?"allsubmissions":"responses",currentStep:e})})),b()(m()(a),"onClickTabView",(function(e){a.setState({currentTabView:e})})),b()(m()(a),"updateCurrentStep",(function(e){var t=e.currentStep,n=e.fn;a.state.currentStep!==t&&a.setState({currentTabView:"allsubmissions"==t?"allsubmissions":"responses",currentStep:t},n)})),b()(m()(a),"getRightPaneComponent",(function(){var e=a.props.assignmentData,t=a.state.currentRightPane,n=e.content,s=(n=void 0===n?{}:n).id,o=void 0===s?"":s;switch(t){case"LE_PREVIEW":return E.a.createElement(dt.a,{assessmentId:o,portalType:"PLANNER",showAttachmentItemV3:!0,showCloseButton:!0,showFullScreenButton:!0,onCloseClick:a.closeRightPane,attachmentItemHeight:100,isFullScreenLE:a.state.isFullScreenLE,toggleFullscreenLE:a.toggleFullscreenLE,showEmptyState:!0})}})),b()(m()(a),"onInstructionsClick",(function(){a.handleRightPane({rightPane:"LE_PREVIEW"})})),b()(m()(a),"toggleWorkSheetInsight",(function(){a.setState({showWorkSheetInsight:!a.state.showWorkSheetInsight})})),b()(m()(a),"toggleShowEvaluationInsights",(function(){return a.setState({showEvaluationInsights:!a.state.showEvaluationInsights})})),b()(m()(a),"toggleFullscreenLE",(function(){a.setState({isFullScreenLE:!a.state.isFullScreenLE})})),a.state={currentStep:"",currentTabView:"",showEvaluationInsights:!1,showLeftPaneOverlay:!1,activeStudentType:"ALL_STUDENTS",isFullScreenLE:!1,showWorkSheetInsight:!1,isLoading:!1,isWorkbookEnabled:!1,isPdftronEnabled:!1},a}return g()(t,e),i()(t,[{key:"render",value:function(){var e,t=this,a=this.props,n=a.assignmentData,s=a.currentPath,o=a.t,i=a.target,r=a.activeStudentId,l=a.template,c=a.children,u=a.organizationId,d=a.isNotUserCourse,m=a.isAllSubmissionsRevamp,p=a.curriculumType,g=a.assignmentId,v=a.isClassroomTodosRoute,S=a.enableMultiAssessmentTools,h=a.assignmentCourseId,C=a.isLoading,f=a.studentAssignmentId,T=a.studentsSubmissions,y=a.studentsSubmissionsArr,I=a.assignedStudentsCount,A=a.submissionsCount,w=a.curriculumProgramId,O=a.curriculumProgramType,R=a.showStudentCheckbox,D=a.showActionsColumn,N=a.showEvaluationDropdown,x=a.showHeaderBackButton,M=a.showDeleteMessageOption,L=a.showSendMessageOption,B=a.showCreatePostButton,F=a.showGiveFeedbackButton,U=a.isPypEvaluationEditable,H=a.isToolResponseEnabled,W=a.showAddResponseButton,G=a.isLinksRoute,z=a.studentCourseTags,Y=a.isMediaManagerRoute,q=a.defaultNameSortPreference,J=this.state,Z=J.currentStep,Q=J.currentTabView,X=J.currentRightPane,$=J.showEvaluationInsights,ee=J.showLeftPaneOverlay,te=J.activeStudentType,ae=J.showWorkSheetInsight,ne=n.assignedStudents,se=n.classDiscussion,oe=n.isStudentSubmissionEnabled,ie=n.isTeacherEvaluationEnabled,re=n.isStudentEvaluationEnabled,le=n.isSimilarityCheckEnabled,ce=n.isClassDiscussionEnabled,ue=n.counts,de=n.content,me=n.contentType,pe=n.deadline,ge=n.state.state,ve=n.course,be=de||{},Se=be.assignmentTitle,Ee=be.id,he=be.assessmentType.value,Ce=be.assessmentTools,fe=be.isLearningGoalsEvaluationEnabled,Te=void 0!==fe&&fe,ye=be.category,Ie=void 0===ye?{}:ye,Ae=_.get(de,"allFields",[]),we=_.get(n,"isPrivate",!1),Oe="ASSIGNMENT_RESOURCE"==me?Se:"ASSESSMENT"==me&&_.get(de,"title.value","");_.isEmpty(Oe)&&(Oe=o("teacherHomePage:classRoom"));var Re=_.get(Ie,"label"),De=_.get(Ie,"colorCode"),Ne=Object(ot.getScoreDetailsMemoize)({assessmentTools:Ce}),ke=Ne.isScoreEnabled,xe=Ne.maxScore,Me={assessmentTools:Ce,allFields:_.get(de,"allFields")},Le=Object(V.d)({assessmentDetails:Me,curriculumProgramType:p}),Be=ke&&xe,je=_.some(null===Ce||void 0===Ce?void 0:Ce.edges,(function(e){var t=e.node.assessmentToolType;return _.get(_.find(j.a,{type:t}),"hasInsight",!1)})),Fe=Object(da.i)({assessmentFields:Ae}),Ue=_.some(null===Ce||void 0===Ce?void 0:Ce.edges,(function(e){var t=e.node,a=_.get(t,"assessmentToolItem",{}),n=_.get(t,"assessmentToolType",""),s=_.get(t,"isTeacherEvaluationEnable",!1),o=_.get(t,"isStudentEvaluationEnable",!1);return((S?s:ie)||(S?o:re))&&Object(V.cb)({assessmentTool:a,assessmentToolType:n,allFields:_.get(de,"allFields",[])})})),He=_.get(de,"unitPlan.allFields",_.get(de,"presetAssessment.unitPlan.allFields",{})),Ve=!_.isEmpty(null===Ce||void 0===Ce?void 0:Ce.edges)&&Ue&&(ie||re),We=Object(ot.checkIsScoreEnabledFromAdmin)({organizationId:u,curriculumType:p}),Ge=Object(V.mb)({t:o,assignedStudents:ne,isStudentSubmissionEnabled:oe,isTeacherEvaluationEnabled:ie}),ze=_.isInteger(parseInt(Z)),qe=_e()((e={},b()(e,k.a.rightSideBar,!0),b()(e,k.a.rightSideBarRevamp,m&&"instructions"!=Q),e)),Je=function(e){t.setState({activeStudentType:e})},Ke=Object(V.db)({assessmentTools:Ce}),Ze=Object(V.T)({someToolsHaveEval:Ke,leHasPypEvaluation:Le,isUsingScoreAssessment:Be}),Qe=Object(V.eb)({assignedStudents:ne,defaultNameSortPreference:q}),Xe=_.filter(Qe,(function(e){var t=e.status;return _.includes(["ALL_STUDENTS",t],te)})),$e=_.size(Xe),et=Object(V.F)({assignedStudents:ne,studentAssignmentId:f}),tt=Object(V.ib)({selectedStatusStudents:Xe,defaultNameSortPreference:q}),at="dp_pa"===_.get(l,"label"),nt=function(e){var a=e.studentAssignmentId,n=e.studentSubmissionObj,s=void 0===n?{}:n,o=t.props.goToRelativeRoute,i=Object(mt.a)({params:_.omit(location.query,"currentMedia")}),r=_.get(location.query,"currentMedia");if(!_.isEmpty(s)){var l=_.get(s,"attachmentGroups[0].attachments[0].id","");_.isEmpty(l)&&(l=_.get(s,"attachments[0].id",""));var c=r;!_.isEmpty(r)&&_.isInteger(parseInt(r))&&(c=_.isEmpty(l)?null:l),_.isEmpty(c)||(i=_.isEmpty(i)?"currentMedia=".concat(c):"".concat(i,"&currentMedia=").concat(c))}o({route:"../".concat(a,"/?").concat(i),type:"replace"})};return E.a.createElement(P.a,{isOpen:!0,isFullScreen:!0},E.a.createElement("div",{className:k.a.container},(m||ze)&&E.a.createElement(Pe,{currentStep:Z,headerLabel:Oe,deadline:pe,currentStudentData:et,activeStudentId:r,isPrivate:we,scoreCategoryColorCode:De,isScoreEnabled:ke&&We,scoreCategoryLabel:Re,assessmentType:he,isStudentSubmissionEnabled:oe,isStudentEvaluationEnabled:re,isTeacherEvaluationEnabled:ie,onInstructionsClick:this.onInstructionsClick,toggleShowEvaluationInsights:this.toggleShowEvaluationInsights,toggleWorkSheetInsight:this.toggleWorkSheetInsight,isScoreVisible:Be,hasAssessmentTool:Ve,rightPane:X,closeRightPane:this.closeRightPane,curriculumType:p,contentType:me,state:ge,showEvalInsights:je,isQuestionTypeAttachment:_.size(Fe),isOnlyLearningGoalsAvailable:Ze,selectedStatusStudentsCount:$e,isWorkbookEnabled:this.state.isWorkbookEnabled,isPdftronEnabled:this.state.isPdftronEnabled,studentOptions:tt,studentsSubmissionsArr:y,changeIsLoading:this.changeIsLoading,studentAssignmentId:f,goToStudentAssignment:nt,isPracticalActivity:at,isLinksRoute:G,isMediaManagerRoute:Y,isLearningGoalsEvaluationEnabled:Le&&Te,someToolsHaveEval:Ke,studentCourseTags:z,defaultNameSortPreference:q}),!m&&E.a.createElement(K,{headerLabel:Oe,deadline:pe,isStudentSubmissionEnabled:oe,currentTabView:Q,onClickTabView:this.onClickTabView,currentPath:s,target:i,activeStudentId:r,state:ge,isPrivate:we,scoreCategoryColorCode:De,isScoreEnabled:ke&&We,scoreCategoryLabel:Re,isNotUserCourse:d}),E.a.createElement("div",{className:k.a.body},"SCHEDULED"!=ge&&"instructions"!=Q&&(m?E.a.createElement(st,{target:i,counts:ue,currentPath:s,currentStep:Z,activeStudentId:r,classDiscussion:se,sortedAssignedStudents:Qe,studentTypeOptions:Ge,updateCurrentStep:this.updateCurrentStep,isStudentSubmissionEnabled:oe,isTeacherEvaluationEnabled:ie,isClassDiscussionEnabled:ce,rightPane:X,closeRightPane:this.closeRightPane,showLeftPaneOverlay:ee,activeStudentType:te,setActiveStudentType:Je,isClassroomTodosRoute:v,template:l,studentCourseTags:z}):E.a.createElement("div",{className:k.a.leftSideBar},E.a.createElement(Ye,{onClickStep:this.onClickStep,assignedStudents:ne,currentStep:Z,isStudentSubmissionEnabled:oe,isTeacherEvaluationEnabled:ie,counts:ue,classDiscussion:se}))),E.a.createElement("div",{className:qe},$&&(Be||Ve)&&E.a.createElement(Ut,{assignmentId:g,assessmentTitle:_.get(de,"title.value",""),assessmentFields:Ae,isTeacherEvaluationEnabled:ie,isStudentEvaluationEnabled:re,onRequestClose:this.toggleShowEvaluationInsights,assignedStudents:ne,unitPlanFields:He,field_list:_.get(l,"field_list",{}),maxScore:xe,isScoreEnabled:Be,hasAssessmentTool:Ve,assessmentTools:Ce,shouldTakeFullWidth:!0}),ae&&E.a.createElement(ua,{onClose:this.toggleWorkSheetInsight,assessmentTitle:_.get(de,"title.value",""),assignedStudents:ne,attachmentGroupId:_.get(_.first(Fe),"id","")}),E.a.createElement("div",{className:k.a.childrenContainer},c&&E.a.cloneElement(c,{state:ge,isStudentSubmissionEnabled:oe,isTeacherEvaluationEnabled:ie,assignmentTitle:Se,assignedStudents:this.props.assignedStudents,assessmentFields:Ae,classDiscussion:se,currentTabView:Q,content:de,contentType:me,isStudentEvaluationEnabled:re,isSimilarityCheckEnabled:le,assessmentId:Ee,template:l,onClickStep:this.onClickStep,course:ve,isPrivate:we,currentStep:Z,activeStudentType:te,setActiveStudentType:Je,studentTypeOptions:Ge,leHasPypEvaluation:Le,isAllSubmissionsRevamp:m,rightPane:X,closeRightPane:this.closeRightPane,assessmentTools:Ce,isLearningGoalsEvaluationEnabled:Te,assignmentCourseId:h,newtorkStatusLoading:C,isLoading:this.state.isLoading,isWorkbookEnabled:this.state.isWorkbookEnabled,changeWorkbookEnable:this.changeWorkbookEnable,isPdftronEnabled:this.state.isPdftronEnabled,changePdftronEnable:this.changePdftronEnable,currentStudentData:et,studentsSubmissions:T,assignedStudentsCount:I,submissionsCount:A,curriculumProgramId:w,curriculumProgramType:O,goToStudentAssignment:nt,changeIsLoading:this.changeIsLoading,showStudentCheckbox:R,showActionsColumn:D,showEvaluationDropdown:N,showHeaderBackButton:x,showDeleteMessageOption:M,showSendMessageOption:L,showCreatePostButton:B,showGiveFeedbackButton:F,isPypEvaluationEditable:U,isToolResponseEnabled:H,showAddResponseButton:W,studentCourseTags:z}),X&&this.renderRightPane())))))}}]),t}(ut.a),Sa={goToRelativeRoute:j.Ab,unHandStudentAssignmentSubmission:ie.unHandStudentAssignmentSubmission,editStudentAssignment:ie.editStudentAssignment,setToastMsg:oe.nb,updateAssessment:ma.updateAssessment,getEnableLearningGoalsEvaluation:ie.getEnableLearningGoalsEvaluation,getCriteriaSetOfPypType:j.W},Ea=Object(h.c)(Object(f.a)({resource:["classRoom","teacherHomePage"]}),Object(C.connect)((function(e,t){var a=t.assignmentData,n=_.get(a,"course.id",""),s=_.get(e,"login.userInfo",{}),o=_.get(s,"user_type"),i=_.get(s,"designation"),r=_.get(e,"platform",{}),l=Object(ct.getCurriculumProgramFreeStatus)({state:e}),c=Object(rt.getUserCoursesVars)({userInfo:s,platform:r,isCurriculumProgramFree:l}),u=_.map(_.get(Object(it.g)(c),"courses",[]),(function(e){return e.id})),d=Ve.a.can(["FeatureFlag:AllSubmissionsRevamp",_a.x]),m=_.get(t,"location.pathname",""),p=m.search("classroomTodos")>-1,g=m.search("mediamanager")>-1,v=m.search("links")>-1,b=_.get(e,"platform.currentCurriculumProgram",{}).type,S=Object(V.M)({curriculumProgramType:b}),E=Object(qe.d)(e);return{lastRoute:_.get(_.last(t.routes),"path",""),studentAssignmentId:t.params.studentAssignmentId,organizationId:_.get(e,"login.userInfo.org_id",""),userCourses:u,userCoursesVariables:c,isNotUserCourse:"staff"===o&&"Visitor"!==i&&!_.includes(u,n),userType:o,userDesignation:i,isAllSubmissionsRevamp:d,rightPaneWidth:540,customRightPaneStyle:ga({},va),curriculumType:_.get(r,"currentCurriculumProgramType",""),assignmentId:t.params.classRoomId,isClassroomTodosRoute:p,enableMultiAssessmentTools:S,currentstate:e,isLinksRoute:v,isMediaManagerRoute:g,defaultNameSortPreference:E}}),Sa),Object(h.d)(lt.g,{name:"getUserCourses",skip:function(e){var t=e.userCourses,a=e.userCoursesVariables;return!Object(ve.isEmpty)(t)||!_.get(a,"id")},options:function(e){return{fetchPolicy:"cache-and-network",variables:e.userCoursesVariables}},props:function(e){var t=e.getUserCourses,a=e.ownProps,n=a.userCoursesVariables,s=a.userType,o=a.assignmentData,i=a.userDesignation,r=a.isLoading,l=Object(it.g)(n),c=_.map(_.get(Object(it.g)(n),"courses",[]),(function(e){return e.id})),u=_.get(o,"course.id","");return{isData:!_.isEmpty(l),userCourses:c,isLoading:_.includes([1,2],t.networkStatus)||r,isNotUserCourse:"staff"===s&&"Visitor"!==i&&!_.includes(c,u)}}}),Object(h.d)(I.c,{name:"getAssignmentAllSubmission",skip:function(e){var t=e.assignmentId,a=e.userType;return!t||"staff"!=a},options:function(e){return{fetchPolicy:"cache-and-network",variables:{id:e.assignmentId,courseIds:e.assignmentCourseId}}},props:function(e){var t=e.getAssignmentAllSubmission,a=e.ownProps,n=a.assignmentId,s=a.assignmentCourseId,o=a.isData,i=a.isLoading,r=a.defaultNameSortPreference,l=Object(A.c)({id:n,userFilter:"STAFF",courseIds:s}),c=_.get(l,"assignedStudents",[]),u=Object(V.eb)({assignedStudents:c,defaultNameSortPreference:r}),d=_.map(u,(function(e){var t=e.id,a=e.submission;return{id:t,value:{attachments:_.get(a,"attachments",[]),attachmentGroups:_.get(a,"attachmentGroups",[])}}})),m=_.get(l,"counts.totalAssignedStudents",0),p=_.get(l,"counts.totalSubmissions",0),g=_.get(l,"curriculumProgram.id"),v=_.get(l,"curriculumProgram.type","IB_PYP");return{onPusherEventTriggered:function(e){e.assignmentId==n&&t.refetch()},isData:!_.isEmpty(l)&&o,studentsSubmissions:u,assignedStudents:c,studentsSubmissionsArr:d,assignedStudentsCount:m,submissionsCount:p,curriculumProgramId:g,curriculumProgramType:v,isLoading:_.includes([1,2],t.networkStatus)||i}}}),Object(x.a)({cb:V.z}),Object(T.a)(["studentAssignmentSubmitted","attachmentSimilarityReportUpdate"]),y.a)(ba),ha=a(4837),Ca=a.n(ha),fa=function(e){function t(e){var a;return s()(this,t),a=l()(this,u()(t).call(this,e)),b()(m()(a),"componentDidMount",(function(){var e=a.props.goToRelativeRoute;if(!a.props.children){var t=a.getFirstStep();e({route:"./".concat(t),type:"replace"})}})),b()(m()(a),"getFirstStep",(function(){var e=a.props.assignmentData,t=e.assignedStudents,n=e.contentType;return"SCHEDULED"==e.state.state||"ASSIGNMENT_DISCUSSION"!=n?_.get(_.first(t),"id",""):"classdiscussion"})),b()(m()(a),"onClickStep",(function(e){var t=a.props,n=t.goToRelativeRoute,s=t.target;n({route:"../".concat(e).concat(s?"?target=".concat(s):""),type:"replace"})})),a}return g()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.assignmentData,a=e.studentAssignmentId,n=e.t,s=e.target,o=e.activeStudentId,i=e.template,r=e.isRemovedCourseForLoggedInUser,l=e.isArchivedClass,c=e.course,u=t.classDiscussion,d=t.isClassDiscussionEnabled,m=t.isStudentSubmissionEnabled,p=t.isStudentEvaluationEnabled,g=t.isTeacherEvaluationEnabled,v=t.isSimilarityCheckEnabled,b=t.content,S=t.assignedStudents,h=t.contentType,C=t.createdBy,f=t.deadline,T=t.state,y=T.state,I=T.publishedAt,A=t.publishedAt,w=b||{},O=w.assignmentTitle,R=w.assessmentTools,D=void 0===R?[]:R,N=_.get(_.first(S),"id",""),k=_.get(_.first(S),"isSharedWithStudent",!1),x=I||A,M="ASSIGNMENT_RESOURCE"==h?O:"ASSESSMENT"==h&&_.get(b,"title.value","");return _.isEmpty(M)&&(M=n("teacherHomePage:classRoom")),E.a.createElement(P.a,{isOpen:!0,isFullScreen:!0},E.a.createElement("div",{className:Ca.a.container},this.props.children&&E.a.cloneElement(this.props.children,{classDiscussion:u,isStudentSubmissionEnabled:m,isStudentEvaluationEnabled:p,isTeacherEvaluationEnabled:g,isSimilarityCheckEnabled:v,isSharedWithStudent:k,assignmentTitle:O,isClassDiscussionEnabled:d,currentStep:a,onClickStep:this.onClickStep,studentAssignmentIdWeb:N,headerLabel:M,assessmentTools:D,content:b,contentType:h,assignedStudents:S,target:s,activeStudentId:o,template:i,state:y,publishedAt:x,isRemovedCourseForLoggedInUser:r,isArchivedClass:l,course:c,createdBy:C,deadline:f})))}}]),t}(E.a.PureComponent),Ta=Object(h.c)(Object(C.connect)((function(e,t){var a=e.login.userInfo,n=e.platform,s=t.assignmentData.course,o=s.id,i=Object(ct.getCurriculumProgramFreeStatus)({state:e}),r=!Object(V.qb)({userInfo:a,platformInfo:n,courseId:o,isCurriculumProgramFree:i});return{studentAssignmentId:t.params.studentAssignmentId,isRemovedCourseForLoggedInUser:r,isArchivedClass:_.get(e,"teacher.selected_class.isArchivedClass"),course:s}})),Object(f.a)({resource:"teacherHomePage"}))(fa),ya=a(70),Ia=a(116),Aa=a(40),wa=a(46),Oa=a(9),Ra=be.a.memoize((function(e){return function(e){return be.a.filter(e,(function(e){return!be.a.isEmpty(e)}))}(e)}),(function(e){return JSON.stringify(e)})),Da=function(e){var t=e.template,a=(e.resourceFields,e.unitType),n=e.userType,s=be.a.cloneDeep(t),o=s.step_list,i=s.field_list;if(!be.a.isEmpty(t)){if("ibMYPInterdisciplinary"!=a&&(be.a.forEach(o,(function(e){be.a.includes(e.fields,"subjects")&&(e.fields=be.a.filter(e.fields,(function(e){return"subjects"!=e})))})),i.measureAssessing)){var r=be.a.findIndex(be.a.get(i.measureAssessing,"config.options",[]),{value:"MYP_INTERDISCIPLINARY_CRITERIA_RUBRIC"});r>=0&&(i.measureAssessing=He()(i.measureAssessing,{config:{options:{$splice:[[r,1]]}}}))}var l=be.a.get(s,"classroomFields",[]);if(!be.a.isEmpty(l)){var c=Object(V.f)({fields:l,field_list:i,userType:n});s.classroomFields=c}}return s},Na=function(e){function t(){var e,a;s()(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return a=l()(this,(e=u()(t)).call.apply(e,[this].concat(o))),b()(m()(a),"componentDidMount",(function(){var e=a.props,t=e.assignmentData,n=e.goToBack,s=e.setToastMsg;be.a.get(t,"isDeleted",!1)&&(n(),s("toastMsgs:trying_to_access_deleted_post"))})),b()(m()(a),"componentDidUpdate",(function(e){var t=a.props,n=t.assignmentData,s=t.goToBack,o=t.setToastMsg,i=be.a.get(n,"isDeleted",!1);be.a.get(e,"assignmentData.isDeleted",!1)!=i&&i&&(s(),o("toastMsgs:trying_to_access_deleted_post"))})),a}return g()(t,e),i()(t,[{key:"render",value:function(){return"staff"!==this.props.userType?E.a.createElement(Ta,this.props):E.a.createElement(Ea,this.props)}}]),t}(E.a.PureComponent),ka={goToRelativeRoute:j.Ab,goToBack:ya.h,setToastMsg:oe.nb},Pa=Object(h.c)(Object(f.a)({resource:["toastMsgs"]}),Object(C.connect)((function(e,t){var a=e.platform.currentCurriculumProgramType||"IB_PYP",n=Object(Ia.getTaggableElements)({curriculumProgramType:a}),s=be.a.map(n,(function(e){return e.value}));return{isData:!0,isLoading:!1,assignmentId:t.params.classRoomId,userType:e.login.userInfo.user_type,userId:e.login.userInfo.id,currentPath:t.location.pathname,target:be.a.get(t,"location.query.target"),childID:be.a.get(e,"login.userInfo.childID",""),presetAssessmentUids:s,unreadMessageCountFilters:{includeItemTypes:["STUDENT_ASSIGNMENT_SUBMISSION"]},curriculumProgramType:a}}),ka),Object(h.d)(I.d,{name:"getAssignmenDetails",skip:function(e){return!e.assignmentId},options:function(e){var t=e.assignmentId,a=e.userType,n=e.userId,s=e.presetAssessmentUids,o=e.childID;return{fetchPolicy:"cache-and-network",variables:{id:t,presetAssessmentUids:s,showOnlySubmitted:!1,studentIds:"student"===a?[n]:"parent"===a?[o]:null,userFilter:"STUDENT",unreadMessageCountFilters:e.unreadMessageCountFilters}}},props:function(e){var t,a=e.getAssignmenDetails,n=e.ownProps,s=n.assignmentId,o=n.isData,i=n.isLoading,r=n.userType,l=n.userId,c=n.params,u=n.target,d=n.presetAssessmentUids,m=n.childID,_=n.unreadMessageCountFilters,p=Object(A.d)({id:s,showOnlySubmitted:!1,presetAssessmentUids:d,studentIds:"student"===r?[l]:"parent"===r?[m]:null,userFilter:"STUDENT",unreadMessageCountFilters:_}),g=be.a.get(p,"content.templateId",null);if("insights"==u){var v="staff"===r?be.a.find(be.a.get(p,"assignedStudents"),(function(e){return e.id===be.a.get(c,"studentAssignmentId")})):be.a.get(p,"assignedStudents.0");t=be.a.get(v,"student.id")}return{isData:!be.a.isEmpty(p)&&o,onPusherEventTriggered:function(e){var t=e||{},n=t.assignmentId,s=t.notification_type,o=c||{},i=o.assignmentId,l=o.classRoomId;("ASSIGNMENT_MARK_COMPLETED"!==s&&i==n||"student"==r&&l===n)&&a.refetch()},assignmentData:p,assignmentCourseId:be.a.get(p,"course.id"),activeStudentId:t,templateId:g,isLoading:1==a.networkStatus||2==a.networkStatus||i}}}),Object(h.d)(I.q,{name:"getStudentCourseTags",skip:function(e){var t=e.userType,a=e.curriculumProgramType,n=e.assignmentCourseId;return"staff"!==t||a!==Oa.z||!n},options:function(e){return{fetchPolicy:"cache-and-network",variables:{id:e.assignmentId,courseIds:e.assignmentCourseId}}},props:function(e){var t=e.getStudentCourseTags,a=e.ownProps,n=a.assignmentId,s=a.assignmentCourseId,o=a.isData,i=a.isLoading,r=Object(A.q)({id:n,courseIds:s}),l=be.a.map(be.a.get(r,"assignedStudents",[]),"student");return{studentCourseTags:l,isData:!be.a.isEmpty(l)&&o,isLoading:1==t.networkStatus||2==t.networkStatus||i}}}),Object(h.d)(wa.mb,{name:"getPlannerTemplate",skip:function(e){return!e.templateId},options:function(e){var t=e.templateId,a=e.unitPlanTemplateId,n=e.mode;return{fetchPolicy:"cache-and-network",variables:{portalType:e.portalType,ids:Ra("view"==n?[t]:[t,a])}}},props:function(e){var t=e.getPlannerTemplate,a=e.ownProps,n=a.templateId,s=a.isLoading,o=a.isData,i=a.unitPlanTemplateId,r=a.assessmentFields,l=a.mode,c=a.unitType,u=a.userType,d=Object(Aa.rb)(Ra("view"==l?[n]:[n,i]),!0),m=be.a.get(be.a.find(d,{id:n}),"body",{}),_=be.a.get(be.a.find(d,{id:i}),"body",{});return{template:Da({template:m,resourceFields:r,unitType:c,userType:u}),unitPlanTemplate:_,isData:!be.a.isEmpty(d)&&o,isLoading:1==t.networkStatus||2==t.networkStatus||s}}}),Object(T.a)(["studentAssignmentSubmitted","assignmentFeedUpdate"]),y.a)(Na);t.default=Pa},6650:function(e,t,a){"use strict";a.r(t);var n=a(19),s=a.n(n),o=a(20),i=a.n(o),r=a(31),l=a.n(r),c=a(21),u=a.n(c),d=a(22),m=a.n(d),p=a(23),g=a.n(p),v=a(0),b=a.n(v),S=a(84),E=a(27),h=a(3876),C=a(902),f=a(105),T=a(112),y=a(652),I=a(830),A=a(1197),w=a(55),O=a(1),R=a.n(O),D=a(4861),N=a.n(D),k=a(6),P=a.n(k),x=a(13),M=a.n(x),L=a(30),B=a.n(L),j=a(4096),F=a(4862),U=a.n(F),H=a(3647),V=a(2255),W=a(3656),G=a(1411),z=a(413),Y=a(1193),q=a(3),J=a.n(q),K=function(e){return b.a.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 18 18"},b.a.createElement("g",{id:"Classroom",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},b.a.createElement("path",{d:"M15.5,13 C15.7857925,13 16.0219824,13.2123739 16.0593628,13.4879146 L16.0645161,13.5645161 L16.064,14.935 L17.4354839,14.9354839 C17.7472575,14.9354839 18,15.1882264 18,15.5 C18,15.7857925 17.7876261,16.0219824 17.5120854,16.0593628 L17.4354839,16.0645161 L16.064,16.064 L16.0645161,17.4354839 C16.0645161,17.7472575 15.8117736,18 15.5,18 C15.2142075,18 14.9780176,17.7876261 14.9406372,17.5120854 L14.9354839,17.4354839 L14.935,16.064 L13.5645161,16.0645161 C13.2527425,16.0645161 13,15.8117736 13,15.5 C13,15.2142075 13.2123739,14.9780176 13.4879146,14.9406372 L13.5645161,14.9354839 L14.935,14.935 L14.9354839,13.5645161 C14.9354839,13.2527425 15.1882264,13 15.5,13 Z M15.6135319,0 C16.8860932,0 17.9260165,0.996041852 17.9962222,2.25104601 L18,2.38646809 L18,10.5132121 C18,10.8229551 17.7489037,11.0740514 17.4391607,11.0740514 C17.1552297,11.0740514 16.9205781,10.8630607 16.8834412,10.5893147 L16.8783214,10.5132121 L16.8783214,2.38646809 C16.8783214,1.72470854 16.3700942,1.18165182 15.7226628,1.12632109 L15.6135319,1.12167856 L2.38646809,1.12167856 C1.72470854,1.12167856 1.18165182,1.62990582 1.12632109,2.27733721 L1.12167856,2.38646809 L1.12167856,15.6135319 C1.12167856,16.2752915 1.62990582,16.8183482 2.27733721,16.8736789 L2.38646809,16.8783214 L10.5785983,16.8783214 C10.8883413,16.8783214 11.1394376,17.1294177 11.1394376,17.4391607 C11.1394376,17.7230918 10.9284469,17.9577433 10.6547008,17.9948802 L10.5785983,18 L2.38646809,18 C1.11390678,18 0.0739835018,17.0039581 0.00377780776,15.748954 L0,15.6135319 L0,2.38646809 C0,1.11390678 0.996041852,0.0739835018 2.25104601,0.00377780776 L2.38646809,0 L15.6135319,0 Z M12.7408419,7 C13.4184804,7 13.9449959,7.56402348 13.9959534,8.25183125 L14,8.36139697 L14,10.9379791 C14,11.2477221 13.7493112,11.4988184 13.4400709,11.4988184 C13.1566006,11.4988184 12.9223299,11.2878278 12.8852533,11.0140817 L12.8801418,10.9379791 L12.8801418,8.36139697 C12.8801418,8.23468433 12.8211778,8.14907371 12.7671491,8.1271995 L12.7408419,8.12167856 L5.25915811,8.12167856 C5.20854956,8.12167856 5.14235571,8.18918738 5.12447601,8.30157061 L5.11985817,8.36139697 L5.11985817,12.8763499 C5.11985817,13.0030626 5.17882222,13.0886732 5.23285089,13.1105474 L5.25915811,13.1160684 L11.396105,13.1160684 C11.7053453,13.1160684 11.9560341,13.3671647 11.9560341,13.6769076 C11.9560341,13.9608387 11.7453859,14.1954903 11.4720841,14.2326271 L11.396105,14.2377469 L5.25915811,14.2377469 C4.58151956,14.2377469 4.05500406,13.6737234 4.00404661,12.9859157 L4,12.8763499 L4,8.36139697 C4,7.66177878 4.49263357,7.06277439 5.15346572,7.00462299 L5.25915811,7 L12.7408419,7 Z M13.44,4 C13.7492795,4 14,4.25072054 14,4.56 C14,4.86927946 13.7492795,5.12 13.44,5.12 L4.56,5.12 C4.25072054,5.12 4,4.86927946 4,4.56 C4,4.25072054 4.25072054,4 4.56,4 L13.44,4 Z",id:"Combined-Shape",fill:e.fill&&e.fill,fillRule:"nonzero"})))};K.propTypes={height:J.a.any,width:J.a.any,fill:J.a.string},K.defaultProps={height:16,width:16};var Z=K,Q=a(6587),X=a(11),$=a(8),ee=a(26),te=a(98),ae=a(15),ne=a(2201),se=a(41),oe=a(3901),ie=a(6538),re=a(4508),le=a(2),ce=a.n(le),ue=a(36),de=a(69),me=a(99);function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(a),!0).forEach((function(t){R()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ge,ve={},be={attachmentListConStyle:{gridTemplateColumns:"repeat(auto-fill, minmax(224px, 1fr))",gridGap:"unset",paddingBottom:"20px"},cardStyle:{padding:"16px 24px",paddingBottom:"0px"},unveilConStyle:{marginBottom:"20px",padding:"0 24px"},tooltipContainerStyle:{maxWidth:"180px",padding:"0px"}},Se=b.a.memo((function(e){var t=e.student,a=e.submission,n=e.studentAssignmentId,s=e.goToRelativeRoute,o=e.isStudentSubmissionEnabled,i=e.isTeacherEvaluationEnabled,r=e.isStudentEvaluationEnabled,l=e.unHandStudentAssignmentSubmission,c=e.editStudentAssignment,u=e.conversationId,d=e.isEvaluated,m=e.setToastMsg,_=e.userType,p=e.t,g=e.assignedStudents,S=e.contentType,E=e.downloadAttachmentZip,h=e.content,C=e.curriculumProgramType,f=e.isCurrentAcademicYearSelected,y=e.showEvaluationDropdown,I=e.showCreatePostButton,A=e.isArchivedClass,O=e.isSimilarityCheckEnabled,R=e.assignmentId,D=e.course,N=e.template,k=e.isAlreadyAddedToJournal,x=e.isPrivate,L=e.openLinkInNewTab,F=e.assessmentFields,z=e.getCriteriaSetOfPypType,Y=e.curriculumProgramId,q=e.isAddResponseByTeacherEnabled,J=e.showAddResponseButton,K=e.updateAssignmentSubmissionState,te=e.assessmentTools,ae=Object(v.useState)(!1),le=B()(ae,2),de=le[0],_e=le[1],Se=Object(v.useState)(!1),Ee=B()(Se,2),he=Ee[0],Ce=Ee[1],fe=Object(v.useState)(!1),Te=B()(fe,2),ye=Te[0],Ie=Te[1],Ae=Object(v.useState)(!1),we=B()(Ae,2),Oe=we[0],Re=we[1],De=t.firstName,Ne=t.lastName,ke=t.id,Pe=t.isArchived,xe=ce.a.get(a,"id",""),Me=ce.a.get(a,"status",""),Le=ce.a.get(a,"response","")||"",Be=ce.a.get(a,"attachments",[])||[],je=ce.a.get(a,"attachmentGroups",[])||[],Fe=Object(w.db)({assessmentTools:te}),Ue=Object(j.a)({attachmentGroups:je,submissionId:xe})||{},He=Ue.attachmentGroups,Ve=Ue.submissionId;Object(v.useEffect)((function(){ce.a.size(He)>ce.a.size(je)&&Ve==xe&&lt(),ce.a.size(He)<ce.a.size(je)&&Ve==xe&&ct()}),[je]);var We=ce.a.find(g,{id:n}),Ge=ce.a.get(We,"isSharedWithStudent",!1),ze="SUBMITTED"==Me||ce.a.get(We,"isSubmitted",!1),Ye=ce.a.get(We,"isEvaluationApplicable",!0),qe=Object(me.getScoreDetailsMemoize)({assessmentTools:te}),Je=qe.isScoreEnabled,Ke=qe.maxScore,Ze=Object(w.w)({attachmentGroups:je,attachments:Be}),Qe=function(e,t){var a="../mediamanager/".concat(n,"/?currentMedia=").concat(e);t&&ce.a.isEqual(e,"assessmentTool")?s({route:"".concat(a,"&&assessmentTool=").concat(t)}):s({route:a})},Xe=Object(w.c)({assessmentFields:F,curriculumProgramType:C,getCriteriaSetOfPypType:z}),$e=i&&!ce.a.isEmpty(Object(ee.kb)({assessmentDetails:h,curriculumProgramType:C}))&&!Xe,et=o&&"SUBMITTED"==Me&&(!ce.a.isEmpty(Le)||!ce.a.isEmpty(Ze)),tt=!ce.a.isEmpty(Le)||!ce.a.isEmpty(Ze),at=function(e){switch(e){case"DRAFT":return"common:submission_pending";case"RETURNED":return"common:request_resubmission";default:return""}}(Me),nt=q&&J&&!d&&o&&!A,st=function(){var e=M()(P.a.mark((function e(t){var n,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:xe,status:"RETURNED",statusMessage:{label:t,itemType:"ATTACHMENTS",parentId:u}},Re(!0),e.next=4,l(n);case 4:s=e.sent,Re(!1),s.successful?Object(T.A)({id:xe,data:pe({},a,{status:"RETURNED"})}):(Object(T.A)({id:xe,data:pe({},a,{status:"SUBMITTED"})}),m(s.errors[0]));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=Object(T.p)({id:n,showOnlySubmitted:!1,userFilter:"staff"==_?"ALL":"SELF"}),it=ce.a.get(ot,"post",{}),rt=function(){var e=M()(P.a.mark((function e(t){var a,s,o,i,r,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.isEvaluated,s=t.isSharedWithStudent,o=t.isEvaluationApplicable,i=t.evalStatus,r=void 0===i?"EVAL_COMPLETE":i,Re(!0),e.next=4,c({id:n,isEvaluated:a,isSharedWithStudent:s,isEvaluationApplicable:o});case 4:l=e.sent,Re(!1),l.successful?Object(T.B)({id:n,showOnlySubmitted:!1,userFilter:"staff"==_?"ALL":"SELF",data:{isEvaluated:a,isSharedWithStudent:s,isEvaluationApplicable:o}}):(Object(T.B)({id:n,showOnlySubmitted:!1,userFilter:"staff"==_?"ALL":"SELF",data:ce.a.isEqual(r,"EVAL_COMPLETE")?{isEvaluated:!a,isSharedWithStudent:s,isEvaluationApplicable:o}:{isEvaluated:a,isSharedWithStudent:s,isEvaluationApplicable:!o}}),m(l.errors[0]));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lt=function(){0===ce.a.get(ce.a.filter(je,(function(e){return"staff"===ce.a.get(e,"attachments[0].createdBy.type")})),"length",0)&&K({changeIsLoading:Re,submission:a,status:"DRAFT",statusOnResponseUnsuccessful:"SUBMITTED"})},ct=function(){var e=ce.a.differenceWith(je,He,(function(e,t){return ce.a.isEqual(e.id,t.id)}));"staff"===ce.a.get(e,"[0].attachments[0].createdBy.type","")&&"SUBMITTED"!==Me&&K({changeIsLoading:Re,submission:a,status:"SUBMITTED",statusOnResponseUnsuccessful:"DRAFT"})},ut=function(){Ie((function(e){return!e}))},dt=Object(w.N)({isTeacherEvaluationEnabled:i,isStudentEvaluationEnabled:r,isEvaluationApplicable:Ye,t:p}),mt=Object(w.N)({isTeacherEvaluationEnabled:i,isEvaluationApplicable:Ye,t:p,teacherEvaluationOnly:!0});return b.a.createElement("div",{className:U.a.container},b.a.createElement("div",{className:U.a.submissionCon},b.a.createElement("div",{className:U.a.submissionHeaderCon},b.a.createElement("div",{className:U.a.studentNameLabel},p("common:response_with_name",{name:De})),b.a.createElement("div",{className:U.a.submissionRightCon},nt&&b.a.createElement("div",{className:U.a.addToJournalIcon,onClick:ut},b.a.createElement(V.a,{placement:"bottom",tooltip:p("classRoom:add_response")},b.a.createElement("div",{className:U.a.innerIconContainer},b.a.createElement($.AddOutlined,{size:"xx-small",variant:"default"})))),f&&"ASSESSMENT"===S&&!k&&ue.a.can("FeatureFlag:EnableLePostInJournal")&&b.a.createElement("div",{className:U.a.addToJournalIcon,onClick:d?function(){var e=Object(w.y)({student:t,content:h,title:Le,curriculumProgramType:C,courseId:ce.a.get(D,"id","")});ve=ce.a.omit(pe({},e,{isAddLEToJournal:!0,LETitle:ce.a.get(h,"title.value",""),studentAssignmentId:n,items:[{item:{id:n,assignment:{content:pe({},h,{},N),isStudentEvaluationEnabled:r,isTeacherEvaluationEnabled:i},ibPYPElementRatings:ce.a.get(ot,"ibPYPElementRatings",[]),student:t,submission:{attachmentGroups:je,response:Le},toolResponses:ce.a.get(ot,"toolResponses",{})},itemType:"STUDENT_ASSIGNMENT"}]}),["title"]),ge=p("classRoom:add_response_to_journal_by_name",{firstName:ce.a.get(t,"firstName","")}),setTimeout((function(){_e(!0)}))}:void 0},b.a.createElement(V.a,{placement:"bottomRight",tooltip:p(d?"classRoom:add_response_to_journal":"classRoom:only_completed_evaluated_responses_can_be_added"),tooltipContainerStyle:be.tooltipContainerStyle,alignConfig:{offset:d?[10,0]:[20,0]}},b.a.createElement("div",{className:U.a.innerIconContainer},b.a.createElement($.JournalAddOutlined,{size:"xx-small",variant:"subtle",disabled:!d})))),f&&"ASSESSMENT"===S&&k&&ue.a.can("FeatureFlag:EnableLePostInJournal")&&b.a.createElement("div",{className:U.a.addToJournalIcon,onClick:function(){var e=ce.a.get(it,"id","");L({url:"/platform/links/post/".concat(e,"/?preserve_query_params=true")})}},b.a.createElement(V.a,{placement:"bottomRight",tooltip:p("classRoom:response_added_to_journal"),alignConfig:{offset:[12,0]},tooltipContainerStyle:{padding:"0px"}},b.a.createElement("div",{className:U.a.innerIconContainer},b.a.createElement($.JournalTickOutlined,{size:"xx-small",variant:"success"})))),y&&b.a.createElement(re.a,{isSubmitted:ze,isEvaluated:d,isEvaluationApplicable:Ye,isSharedWithStudent:Ge,student:t,showEditButton:!0,onDownloadSubmission:function(){var e=Object(w.kb)({studentId:ke,firstName:De,lastName:Ne,attachmentGroups:je,attachments:Be,response:Le});E({attachmentsObjects:e})},onMarkEvaluatedShare:rt,onMarkEvaluationApplicable:rt,onRequestResubmission:st,submissionStatus:Me,showMarkEvaluatedShareButton:"ASSESSMENT"===S&&i&&Fe,isTeacherEvaluationEnabled:i,showDownloadButton:o,isStudentSubmissionEnabled:o,isStudentEvaluationEnabled:r,isPrivate:x,submissionId:xe}))),!et&&tt&&b.a.createElement("div",{className:U.a.warningMsg},b.a.createElement(X.Alert,{type:"warning",message:p(at)})),et||tt?b.a.createElement(v.Fragment,null,b.a.createElement(W.a,{maxHeight:80,showCollapse:!0,containerStyle:be.unveilConStyle},b.a.createElement("div",{className:U.a.responseLabel},ce.a.isEmpty(Le)?p("classRoom:no_remarks_msg"):Le)),!ce.a.isEmpty(Ze)&&b.a.createElement(H.a,{cardType:"horizontalV2",mode:"view",value:Ze,onClickAttachmentCard:function(e,t){var a=ce.a.get(t,"attachments.0.id","")||ce.a.get(t,"id","");Qe(a)},containerStyle:be.attachmentListConStyle,horizontalCardStyle:be.cardStyle,showCreatePostButton:d&&f&&I,onClickCreatePost:function(e){ve=Object(w.y)({attachments:[ce.a.omit(e,["isPost","createdBy","similarityReport","isRead","questionAttachment"])],student:t,content:h,title:Le,curriculumProgramType:C,courseId:ce.a.get(D,"id","")}),ge=p("classRoom:add_student_work_portfolio"),setTimeout((function(){_e(!0)}))},showOpenLinkInNewTabIcon:!0,attachmentBottomComponent:function(e){var t=e.attachment,a=e.recheckButtonHoverClass;return b.a.createElement("div",{className:U.a.similarityIndexContainer},O&&b.a.createElement(oe.a,{attachment:t,metadata:{entityId:xe,entityType:"STUDENT_ASSIGNMENT_SUBMISSION",additionalData:{assignmentId:R}},course:D,recheckButtonHoverClass:a}))},horizontalCardInnerClass:U.a.horizontalCardInnerClass,disableActions:Pe||A,parentType:"STUDENT_ASSIGNMENT_SUBMISSION",parentId:xe,shouldCallMutation:nt,showDeleteForSelfInViewMode:nt})):b.a.createElement("div",{className:U.a.noSubmissionText},o?"RETURNED"==Me?p("classRoom:you_returned_student_submission",{firstName:De}):p("classRoom:no_work_msg"):p("classRoom:submission_not_required"))),(i||r)&&"ASSESSMENT"==S&&(!ce.a.isEmpty(null===te||void 0===te?void 0:te.edges)||$e||Je)&&b.a.createElement("div",{className:U.a.evalCon},b.a.createElement("div",{className:U.a.evalHeaderCon},b.a.createElement("div",{className:U.a.evalHeaderText},p("assessmentEvaluation:evaluation")),f&&I&&b.a.createElement("div",{className:U.a.BFlexDivRow},b.a.createElement(V.a,{tooltip:p("journal:add_to_journal"),placement:"bottomLeft",href:"#",id:"tooltip-CreatePostSvg"},b.a.createElement("div",{className:U.a.createPostIcon,onClick:function(){return Ce(!0)}},b.a.createElement(Z,{fill:se.e.gray48}))),d&&b.a.createElement("div",{className:U.a.evalCompleteCon},b.a.createElement("div",{className:U.a.markCompleteText},p("common:complete"))))),Je?function(){var e=ce.a.get(ot,"ibPYPElementRatings"),t=Object(w.bb)({ibPYPElementRatings:e});return i?b.a.createElement("div",{className:U.a.evalCard,onClick:function(){return Qe("score")}},b.a.createElement("div",{className:U.a.addButton},b.a.createElement($.SubjectGenericDuotone,{color:"teal",size:"xx-small"})),b.a.createElement("div",{className:U.a.BFlexDivCol},b.a.createElement("div",{className:U.a.evalCardTypeText},"".concat(p("common:score"),": ").concat(t||p("classRoom:not_graded_yet"))),b.a.createElement("div",{className:U.a.evalText},p("classRoom:max_score_label",{label:Ke})))):null}():null,ce.a.map(Object(w.rb)({assessmentTools:te,hasEdges:!1}),(function(e){var t=e.node,a=t.assessmentToolType;if("SCORE"!==a){var n=ce.a.find(ee.a,(function(e){return e.type===a})),s=ce.a.get(n,"locale","");return Object(w.cb)({assessmentTool:n,assessmentToolType:a,allFields:ce.a.get(h,"allFields",[])})&&b.a.createElement("div",{className:U.a.evalCard,onClick:function(){return Qe("assessmentTool",null===t||void 0===t?void 0:t.id)}},b.a.createElement("div",{className:U.a.addButton},b.a.createElement(Q.a,null)),b.a.createElement("div",{className:U.a.BFlexDivCol},b.a.createElement("div",{className:U.a.evalCardTypeText},p("common:evaluate_using_with_label",{label:s})),b.a.createElement("div",{className:U.a.BFlexDivRow},b.a.createElement("div",{className:U.a.evalText},ce.a.join(dt," | ")))))}})),$e&&b.a.createElement("div",{className:U.a.evalCard,onClick:function(){return Qe("learningGoals")}},b.a.createElement("div",{className:U.a.addButton},b.a.createElement($.GoalsOutlined,{size:"xxx-small"})),b.a.createElement("div",{className:U.a.BFlexDivCol},b.a.createElement("div",{className:U.a.evalCardTypeText},p("common:rate_on_learning_goals")),b.a.createElement("div",{className:U.a.evalText},mt)))),de&&b.a.createElement(ne.a,{onClose:function(e){setTimeout((function(){_e(!1)})),ve={},ge="","CLOSE"!==e&&he&&Ce(!1)},postCreateDetail:pe({},ve,{curriculumProgramId:Y}),currentStep:"POST_DETAIL",createPostTitle:ge}),he&&b.a.createElement(ie.a,{type:"studentassignment",id:n,onClose:function(){return Ce(!1)},onSubmitClick:function(e){var a={mimeType:"application/pdf",type:"FILE",url:e.fileUrl,name:p("assessmentEvaluation:person_evaluation",{name:De})};ve=Object(w.y)({attachments:[a],student:t,content:h,curriculumProgramType:C,courseId:ce.a.get(D,"id","")}),ge=p("classRoom:add_evaluation_portfolio"),setTimeout((function(){_e(!0)}))},submitButtonText:p("common:next"),downloadFileName:p("assessmentEvaluation:person_evaluation",{name:De})}),ye&&b.a.createElement(ne.a,{onClose:ut,parentType:"STUDENT_ASSIGNMENT_SUBMISSION",parentId:xe,mediaCreationOptions:w.b}),Oe&&b.a.createElement(G.a,null))}));Se.defaultProps={showEvaluationDropdown:!0,showCreatePostButton:!0};var Ee={goToRelativeRoute:ee.Ab,unHandStudentAssignmentSubmission:te.unHandStudentAssignmentSubmission,editStudentAssignment:te.editStudentAssignment,setToastMsg:ae.nb,downloadAttachmentZip:ee.K,openLinkInNewTab:ee.Ib,getCriteriaSetOfPypType:ee.W,updateAssignmentSubmissionState:te.updateAssignmentSubmissionState},he=Object(S.c)(Object(z.a)({resource:["common","assessmentEvaluation","classRoom","journal"]}),Object(E.connect)((function(e,t){var a=ce.a.get(e,"login.userInfo.org_id",""),n=Object(de.e)({name:"EnableAddResponseOfAssignmentByTeacher",organizationId:a});return{userType:e.login.userInfo.user_type,isAddResponseByTeacherEnabled:!ce.a.isArray(n)&&n,organizationId:a}}),Ee),Object(Y.a)({cb:w.z}))(Se),Ce=a(4003),fe=a(4274),Te=a(45),ye=a(12),Ie=a.n(ye);function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(a),!0).forEach((function(t){R()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Oe={labelStyle:we({fontSize:"1.8rem"},Te.fontStyles.bold,{marginBottom:"8px"})},Re={chatMessagesConStyle:{backgroundColor:se.e.toddleBG1},emptyChatViewStyle:{overflow:"auto"},footerTextAreaStyle:{backgroundColor:"transparent",border:"1px solid transparent"}},De=function(e){function t(){return i()(this,t),u()(this,m()(t).apply(this,arguments))}return g()(t,e),l()(t,[{key:"render",value:function(){var e,t,a=this.props,n=a.studentAssignmentData,s=a.isClassDiscussion,o=a.assessmentId,i=a.classDiscussion,r=a.studentAssignmentId,l=a.isStudentSubmissionEnabled,c=a.isTeacherEvaluationEnabled,u=a.isStudentEvaluationEnabled,d=a.assignmentTitle,m=a.currentTabView,p=a.content,g=a.contentType,v=a.isCurrentAcademicYearSelected,S=a.t,E=a.assignedStudents,h=a.template,C=a.showDeleteMessageOption,f=a.showSendMessageOption,T=a.isArchivedClass,y=a.isSimilarityCheckEnabled,I=a.curriculumProgramType,A=a.post,O=a.isPrivate,D=a.assessmentFields,k=a.curriculumProgramId,P=a.rightPane,x=a.closeRightPane,M=a.assessmentTools,L=_.get(i,"id",""),B=n||{},j=B.student,F=B.submission,U=B.conversation,H=B.isEvaluated,V=B.status,W=_.get(U,"id",""),G=Object(w.s)({status:V,t:S}),z=_.get(n,"assignment.course",{}),Y=ue.a.can("FeatureFlag:AllSubmissionsRevamp"),q=Ie()((e={},R()(e,N.a.container,!0),R()(e,N.a.containerRevamp,Y),e)),J=Ie()((t={},R()(t,N.a.middleBody,!0),R()(t,N.a.middleBodyRevamp,Y),t)),K=function(){return b.a.createElement("div",{className:N.a.disabledDiscussion},S("common:disabled_discussion_private_post"))};return b.a.createElement("div",{className:q,onClick:function(){P&&x()}},b.a.createElement("div",{className:J},"responses"==m?s?b.a.createElement(Ce.a,{deleteOtherMessage:C,parentType:"ASSIGNMENT",showSenderInfoAlways:!0,showUserDetails:!1,parentId:o,conversationId:L,conversationLabel:d,isTeacherEvaluationEnabled:c,inputTextPlaceHolder:S("common:send_a_message_to_all_students"),excludeItemTypes:"STUDENT_ASSIGNMENT_SUBMISSION_FEEDBACK",excludedItemTypesForConversation:"STUDENT_ASSIGNMENT_SUBMISSION_FEEDBACK",allowSendMessage:v&&f&&!T&&!O,t:S,mode:!v||T?"view":"edit",showRemarkOption:ue.a.can("FeatureFlag:ShowRemarkInChatBox"),footerTextAreaStyle:P?Re.footerTextAreaStyle:{},disabledChatComponent:K()}):b.a.createElement(Ce.a,{parentType:"STUDENT_ASSIGNMENT",showUserDetails:!0,userDetails:we({},j||{},{status:G}),parentId:r,conversationId:W,conversationLabel:d,inputTextPlaceHolder:S("common:send_a_private_message"),studentData:j,isTeacherEvaluationEnabled:c,messagesConStyle:Re.chatMessagesConStyle,excludeItemTypes:"STUDENT_ASSIGNMENT_SUBMISSION_FEEDBACK",excludedItemTypesForConversation:"STUDENT_ASSIGNMENT_SUBMISSION_FEEDBACK",unreadMessageCountFilters:{includeItemTypes:["STUDENT_ASSIGNMENT_SUBMISSION"]},allowSendMessage:v&&f&&!T&&!O,t:S,showRemarkOption:ue.a.can("FeatureFlag:ShowRemarkInChatBox"),mode:!v||T?"view":"edit",emptyViewStyle:Re.emptyChatViewStyle,includeItemTypes:["STUDENT_ASSIGNMENT_SUBMISSION"],disabledChatComponent:K()}):b.a.createElement("div",{className:N.a.instructionsCardWrapper},b.a.createElement(fe.a,{template:h,item:p,itemStyle:Oe,contentType:g,isTeacherEvaluationEnabled:c,isStudentEvaluationEnabled:u}))),"responses"==m&&!Y&&b.a.createElement("div",{className:N.a.rightPane},!s&&b.a.createElement(he,{student:j,submission:F,isEvaluated:H,studentAssignmentId:r,isStudentSubmissionEnabled:l,isTeacherEvaluationEnabled:c,isStudentEvaluationEnabled:u,conversationId:W,contentType:g,assignedStudents:E,content:p,isCurrentAcademicYearSelected:v,isArchivedClass:T,assignmentId:o,isSimilarityCheckEnabled:y,course:z,curriculumProgramType:I,curriculumProgramId:k,template:h,isAlreadyAddedToJournal:null!==A,isPrivate:O,assessmentFields:D,assessmentTools:M})))}}]),t}(b.a.PureComponent);De.defaultProps={showDeleteMessageOption:!0,showSendMessageOption:!0};var Ne=Object(S.c)(Object(z.a)({resource:["common","classRoom"]}),Object(E.connect)((function(e,t){return{isCurrentAcademicYearSelected:_.get(e,"platform.academicYearSelected.isCurrentAcademicYear",!0),isArchivedClass:_.get(e,"teacher.selected_class.isArchivedClass")}}),null),Object(Y.a)({cb:w.z}))(De),ke=a(4),Pe=a.n(ke),xe=a(2239),Me=a(3824),Le=a(637),Be=a(715),je=a(24),Fe=a(4858),Ue=a.n(Fe),He=a(2207),Ve=a(3854),We=a(3831),Ge=a(2217),ze=a(88),Ye=a(53);function qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(a),!0).forEach((function(t){R()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ke=w.b,Ze={attachmentContainerStyle:{rowGap:"16px",display:"flex",flexDirection:"column"},remarkConStyle:{marginBottom:"24px"},createDropDownContainerStyle:{height:"80px",border:"1px dashed ".concat(se.e.strokeTwo),borderRadius:"8px"},horizontalCardStyle:{height:"64px",justifyContent:"center",backgroundColor:se.e.surfaceLight,borderRadius:"8px",padding:"8px 16px 8px 8px",borderLeft:"none"},wrapperStyle:{height:"64px",justifyContent:"center",backgroundColor:se.e.surfaceLight,padding:"8px 16px 8px 8px",border:"none",borderRadius:"8px"},templateContainerStyle:{display:"flex",flexDirection:"column",rowGap:"16px"}},Qe=b.a.memo((function(e){var t,a=e.editStudentAssignmentSubmissionWithDebounce,n=e.editStudentAssignmentSubmission,s=e.setToastMsg,o=e.submission,i=e.updateSubmission,r=e.isStudentSubmissionEnabled,l=e.isRemovedCourseForLoggedInUser,c=e.studentAssignmentId,u=e.assessmentTools,d=e.setUploadingStatus,m=e.t,p=e.content,g=e.onMediaClick,S=e.contentType,E=e.assignedStudents,h=e.userType,C=e.childFirstName,f=e.attachmentResponseObject,T=e.refetchGetStudentAssignmentDetails,y=e.onUseTemplateClick,I=e.getIsCurrentAcademicYear,A=e.isSimilarityCheckEnabled,O=e.isArchivedClass,D=e.assignmentId,N=e.shouldShowSubmissionsToFamily,k=e.course,x=(e.state,e.template),L=e.isStudentEvaluationEnabled,j=e.isTeacherEvaluationEnabled,F=e.isSharedWithStudent,U=e.currentCurriculumProgramType,V=e.post,W=e.openLinkInNewTab,G=e.isScheduled,z=e.resetStudentTemplate,Y=Object(v.useState)({mediaData:{},showMediaCreation:!1,createPostTitle:""}),q=B()(Y,2),J=q[0],K=q[1],Z=Object(v.useRef)(),Q=I(),te=_.get(o,"id",""),ae=_.get(o,"response","")||"",ie=_.get(o,"attachments",[])||[],re=_.get(o,"attachmentGroups",[])||[],le=_.get(o,"status",""),ce="SUBMITTED"===le,de="parent"===h,me=_.get(_.find(E,{id:c}),"isEvaluated",!1),_e=me||ce,pe=_e||l||O||de?"view":"edit",ge=_.find(p.allFields,{uid:"studentTemplate"}),ve="ASSESSMENT"==S?_.get(ge,"resolvedMinimalTree.attachmentGroups"):_.get(p,"studentTemplates",[]),be=Object(w.w)({attachmentGroups:re,attachments:ie}),Se=_.includes(_.get(x,"classroomFields",[]),"studentTemplate"),Ee={};"parent"===h&&_.map(be,(function(e){var t=_.get(e,"id",""),a="LINK"===_.get(e,"attachments.0.type","")&&null!==_.get(e,"attachments.0.mimeType","")&&!N,n=_.get(e,["attachments","0","url"],"");e.attachments[0].url=Object(ee.Ob)(n),Ee[t]=a}));var he=_.filter(be,(function(e){return _.isEmpty(_.get(e,"studentTemplate",{}))})),Ce=_.some(u,(function(e){var t=e.node,a=_.get(t,"assessmentToolItem",{}),n=_.get(t,"assessmentToolType","");return Object(w.cb)({assessmentTool:a,assessmentToolType:n,allFields:_.get(p,"allFields",[])})})),fe=!_.isEmpty(u)&&Ce,Te=_.isEqual(h,"student"),ye=Object(v.useCallback)((function(e){i({response:e}),a({id:te,response:e})}),[te]),Ae=Object(v.useCallback)(function(){var e=M()(P.a.mark((function e(t){var a,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.params,i({response:a}),e.next=4,n({mutationParams:{id:te,response:a}});case 4:(o=e.sent).successful||s(o.errors[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[te]),we=Object(v.useCallback)((function(e){var t=_.filter(e,(function(e){return _.isEmpty(_.get(e,"attachments",[]))}));i({attachments:t})}),[]);Ke.instructionsData={content:p,contentType:S};var Oe=function(e){var t=e.attachment,a=_.get(t,"isPost",!1)?_.get(t,["attachments","0"],{}):t,n=a.type,s=a.mimeType;return A&&("FILE"==n||"LINK"==n)&&_.includes(je.Db,s)?b.a.createElement(oe.a,{attachment:a,metadata:{entityId:te,entityType:"STUDENT_ASSIGNMENT_SUBMISSION",additionalData:{assignmentId:D}},course:k,isParent:de}):null},Re=b.a.createElement("div",{className:Ue.a.addWorkButton},b.a.createElement(X.Button,{size:"medium",variant:"outlined",icon:b.a.createElement($.AddOutlined,{variant:"on"}),onClick:function(){var e,t;null===Z||void 0===Z||null===(e=Z.current)||void 0===e||null===(t=e.toggleMediaCreation)||void 0===t||t.call(e,!0)},isFullWidth:!1},m("common:add_work"))),De=function(){var e=Object(w.y)({student:_.get(_.head(E),"student"),content:p,title:ae,curriculumProgramType:U,courseId:_.get(k,"id","")}),t=_.map(ve,(function(e){var t=_.get(e,"id");return _.find(be,(function(e){return _.get(e,"studentTemplate.id","")===t}))})),a=_.omit(Je({},e,{isAddLEToJournal:!0,LETitle:_.get(p,"title.value",""),studentAssignmentId:c,items:[{item:{id:c,assignment:{content:Je({},p,{},x),id:c,isStudentEvaluationEnabled:L,isTeacherEvaluationEnabled:j},ibPYPElementRatings:[],student:_.get(_.head(E),"student"),submission:{attachmentGroups:_.filter(_.concat(he,t),w.sb),response:ae},toolResponses:{}},itemType:"STUDENT_ASSIGNMENT"}]}),["title"]);K({mediaData:Je({},a,{customPlaceHolder:"journal:share_learned"}),showMediaCreation:!0,createPostTitle:m("classRoom:add_response_to_journal")})},Ne=function(e){var t=Object(w.y)({attachments:[_.omit(e,["isPost","createdBy","similarityReport","isRead","questionAttachment"])],student:_.get(_.head(E),"student"),content:p,title:ae,curriculumProgramType:U,courseId:_.get(k,"id","")});K({mediaData:Je({},t,{customPlaceHolder:"journal:share_learned",shouldKeepWorkbookId:!1}),showMediaCreation:!0,createPostTitle:m("classRoom:add_response_to_journal")})},ke=function(){var e=_.get(V,"id","");W({url:"/platform/links/post/".concat(e,"/?preserve_query_params=true")})},Pe=Se&&!_.isEmpty(ve),xe=_.isEmpty(ve)&&_.isEmpty(he)&&_.isEmpty(ae),Me=(G||_e)&&xe,Le=ue.a.can("FeatureFlag:ShowDSMediaCards"),Be=ue.a.can("FeatureFlag:EnableLePostInJournalStudent"),Fe=function(e){var t=_.get(e,"state"),a=$.JournalAddOutlined,n="default",s="journal:add_to_journal",o=se.e.textDefault,i=De;switch(t){case"IN_APPROVAL":a=$.PostTwoOutlined,n="warning",s="journal:sent_for_approval",o=se.e.textWarning,i=ke;break;case"PUBLISHED":a=$.JournalTickOutlined,n="success",s="classRoom:response_added_to_journal",o=se.e.textSuccess,i=ke}return{Icon:a,variant:n,text:s,textColor:o,clickAction:i}}(V),ze=Fe.Icon,qe=Fe.variant,Qe=Fe.text,Xe=Fe.textColor,$e=Fe.clickAction,et=Be&&Q&&Te&&_e,tt=!_.isEmpty(ae)||!_.isEmpty(_.filter(be,w.sb)),at=_.isEmpty(he),nt=Ie()((t={},R()(t,Ue.a.attachmentListWrapper,!0),R()(t,Ue.a.attachmentListEmptyWrapper,at),t));return!Me&&r?b.a.createElement("div",{className:Ue.a.container},b.a.createElement("div",{className:Ue.a.body},b.a.createElement("div",{className:Ue.a.innerBody},b.a.createElement("div",{className:Ue.a.responseHeader},!G&&b.a.createElement("div",{className:Ue.a.header},m("common:response")),et&&tt&&b.a.createElement("div",{className:Ue.a.addToJournalContainer,onClick:$e},b.a.createElement("div",{className:Ue.a.postIconContainer},b.a.createElement(ze,{size:"xx-small",variant:qe})),b.a.createElement("div",{className:Ue.a.addToJournalLabel,style:{color:Xe}},m(Qe)))),!l&&!G&&b.a.createElement(Ve.a,{minRows:5,placeholder:m("common:type_remark_here"),value:ae,mode:Q?pe:"view",updateInputField:ye,onBlurInputField:Ae,containerStyle:Ze.remarkConStyle,showViewEmpty:!1}),Pe&&b.a.createElement("div",{className:Ue.a.studentTemplatesContainer},b.a.createElement(We.a,{value:ve,canTurnIn:"SUBMITTED"!==le&&!O&&!G&&!me,submissionId:te,refetchGetStudentAssignmentDetails:T,myWorkAttachments:be,onUseTemplateClick:y,templateAttachmentWrapperStyle:Ze.wrapperStyle,templateContainerStyle:Ze.templateContainerStyle,attachmentResponseObject:f,onMediaClick:g,showMediaCard:Le,attachmentBottomComponent:Oe,onClickCreatePost:Ne,showAddToJournal:et,isSubmitted:ce,resetStudentTemplate:z,isScheduled:G,isArchivedClass:O,isEvaluated:me,isTeacherEvaluationEnabled:j,isSharedWithStudent:F})),b.a.createElement("div",{className:nt},!at&&b.a.createElement(H.a,{cardType:Le?"design-media-card":"horizontalV2",isDisabledModeObj:Ee,mode:Q?pe:"view",value:he,shouldCreateAttachmentGroup:!0,shouldCallMutation:!0,showCreateDropdown:!1,parentId:te,shouldCreateAsMedia:!0,toolTipText:m("classRoom:document_accessible_on_student_account"),parentType:"STUDENT_ASSIGNMENT_SUBMISSION",attachmentResponseObject:f,attachmentContainerStyle:Ze.attachmentContainerStyle,createDropDownContainerStyle:Ze.createDropDownContainerStyle,updateInputField:we,mediaCreationOptions:Ke,updateLoadingState:d,onClickAttachmentCard:function(e,t){return g(t,!1,!0)},attachmentBottomComponent:Oe,horizontalCardStyle:Le?{}:Ze.horizontalCardStyle,showViewEmpty:!1,showCreatePostButton:et,onClickCreatePost:Ne,getViewModeExtraButtons:function(e){var t=e.attachment;return et&&b.a.createElement(X.IconButton,{onClick:function(e){e.stopPropagation(),Ne&&Ne(t)},variant:"plain",icon:b.a.createElement($.JournalAddOutlined,null)})}}),"edit"===pe&&!de&&!G&&b.a.createElement(He.a,{createDropDownRef:function(e){Z.current=e},attachments:he,mediaCreationOptions:Ke,shouldCreateAsMedia:!0,updateLoadingState:d,setToastMsg:s,parentId:te,parentType:"STUDENT_ASSIGNMENT_SUBMISSION",shouldCallMutation:!0,updateAttachments:we,buttonComponent:Re})),de&&!Pe&&(!ce||xe)&&b.a.createElement("div",{className:Ue.a.noDataContainer},fe&&b.a.createElement("div",{className:Ue.a.noDataTitle},m("classRoom:labels_work",{label:C})),b.a.createElement(Ge.a,{emptyText:m("classRoom:no_work_msg"),isSearch:!1,emptyHeaderText:""})))),_.get(J,"showMediaCreation")&&b.a.createElement(ne.a,{onClose:function(){K({mediaData:{},showMediaCreation:!1,createPostTitle:""})},postCreateDetail:_.get(J,"mediaData"),currentStep:Object(Ye.o)(U)?"MANAGE_SUBJECT_JOURNAL_POST_DETAILS":"POST_DETAIL",createPostTitle:_.get(J,"createPostTitle")})):null})),Xe={editStudentAssignmentSubmissionWithDebounce:te.editStudentAssignmentSubmissionWithDebounce,editStudentAssignmentSubmission:te.editStudentAssignmentSubmission,setToastMsg:ae.nb,getIsCurrentAcademicYear:ze.getIsCurrentAcademicYear,openLinkInNewTab:ee.Ib};Qe.displayName="CreateUpdateStudentSubmission";var $e=Object(S.c)(Object(z.a)({resource:["common","classRoom","toastMsgs","studentGoals","assessmentEvaluation","journal"]}),Object(E.connect)((function(e,t){var a,n=_.get(e,"login.userInfo.user_type"),s=_.get(e,"login.userInfo.userEntityType"),o=e.login.userInfo.org_id,i=_.get(e,"platform.currentCurriculumProgramType","IB_PYP");return"parent"===n&&(a=Object(de.e)({name:"UnlockFamilySubmissions",courseId:t.assignmentCourseId,organizationId:o,userEntityType:s})),{userType:n,shouldShowSubmissionsToFamily:a,isFinalCriteriaSettingEnabled:Object(de.e)({name:"student"===n?"ShowFinalGradeRatingToStudent":"ShowFinalGradeRatingToParent",organizationId:o,userEntityType:s}),childFirstName:_.get(e,"login.userInfo.childFirstName",""),currentCurriculumProgramType:i}}),Xe))(Qe),et=a(4860),tt=a.n(et),at=a(1659),nt=a(4094),st=a(139),ot={customUIModalStyle:{content:{borderRadius:"16px"}}},it=function(e){function t(e){var a;return i()(this,t),a=u()(this,m()(t).call(this,e)),R()(Pe()(a),"renderToolResponse",(function(e){var t=e.allowStudentEvaluation,n=a.props,s=n.assessmentToolType,o=n.studentAssignmentId,i=n.toolResponses,r=n.assessmentTool,l=n.unitPlanFields,c=n.field_list,u=n.assessmentFields,d=n.ibPYPElementRatings,m=n.isFinalCriteriaSettingEnabled,p=n.isEvaluated,g=n.isEvaluationApplicable,v=n.isSharedWithStudent,S=n.isStudentEvaluationEnabled,E=n.isTeacherEvaluationEnabled,h=n.assessmentToolId,C=_.get(_.find(i,(function(e){return e.toolId===h})),"toolResponses",{});return b.a.createElement(nt.a,{isEvaluationEnable:t,parentId:o,parentType:"STUDENT_ASSIGNMENT",assessmentToolId:h,toolType:s,assessmentTool:r,toolResponses:C,isEvaluatedByStudent:g&&S,isEvaluatedByTeacher:E,rubricInnerConStyle:ot.rubricInnerConStyle,rubricFirstColumnCellStyle:ot.rubricFirstColumnCellStyle,mypObjectiveRubricOptions:Object(ee.gb)({unitPlanFields:l,field_list:c,assessmentFields:u,measureAssessingValue:s}),ibPYPElementRatings:d,rubricRatingContainerStyle:ot.rubricRatingContainerStyle,rubricRatingCompContainerStyle:ot.rubricRatingCompContainerStyle,rubricRatingTextContainerStyle:ot.rubricRatingTextContainerStyle,showRatingContainerInViewMode:m&&_.includes(["MYP_OBJECTIVE_RUBRIC","MYP_INTERDISCIPLINARY_CRITERIA_RUBRIC"],s)&&p&&v,showEvaluateStatus:"DP_ASSESSMENT_RUBRIC"!==s,isEvaluated:p,isSharedWithStudent:v})})),a}return g()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.onClickClose,a=e.t,n=e.assessmentTool,s=e.assessmentToolType,o=e.getIsCurrentAcademicYear,i=e.isEvaluationEnable,r=Object(w.p)({t:a,assessmentToolType:s,assessmentTool:n}).assessmentToolText,l=o(),c=i&&l;return b.a.createElement(at.a,{isOpen:!0,modalContent:tt.a.modalContent,onRequestClose:t,customStyle:ot.customUIModalStyle},b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:tt.a.modalHeader},b.a.createElement("span",null,r),b.a.createElement("span",{className:tt.a.closeButton,onClick:t},b.a.createElement(X.IconButton,{icon:b.a.createElement($.CloseOutlined,null),size:"small",variant:"plain"}))),b.a.createElement("div",{className:tt.a.modalBody},b.a.createElement("div",{className:tt.a.innerWrapper},this.renderToolResponse({allowStudentEvaluation:c}))),c&&b.a.createElement("div",{className:tt.a.footerContainer},b.a.createElement(X.Button,{size:"large",variant:"progressive",onClick:t},a("common:done")))))}}]),t}(v.PureComponent),rt={getIsCurrentAcademicYear:ze.getIsCurrentAcademicYear},lt=Object(st.compose)(Object(z.a)({resource:["common"]}),Object(E.connect)((function(e,t){var a=t.isScheduled,n=t.isEvaluatedOrSubmitted,s=t.isStudentEvaluationEnabled,o=t.isEvaluationApplicable;return{isEvaluationEnable:!n&&s&&o&&!a}}),rt))(it),ct=a(18),ut=a.n(ct),dt=a(3893),mt=a(4855),_t=a.n(mt);function pt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function gt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(a),!0).forEach((function(t){R()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var vt={containerStyle:{gridTemplateColumns:"repeat(2, 1fr)",borderBottomWidth:1,borderBottomColor:Te.colors.borderSubtle},fullScreenContainerStyle:{gridTemplateColumns:"repeat(2, 1fr)",borderBottomWidth:1,borderBottomColor:Te.colors.borderSubtle,height:"100%",alignItems:"flex-end"},activeTabContainerStyle:gt({color:Te.colors.textDefault,fontSize:"1.4rem",backgroundColor:Te.colors.surfaceWhite},Te.fontStyles.medium),fullScreenActiveTabContainerStyle:gt({color:Te.colors.textDefault,fontSize:"1.6rem",backgroundColor:Te.colors.surfaceWhite},Te.fontStyles.medium,{paddingTop:"20px",height:"100%"}),tabContainerStyle:gt({color:Te.colors.textSubtle,fontSize:"1.4rem"},Te.fontStyles.medium,{backgroundColor:Te.colors.surfaceWhite}),fullScreenTabContainerStyle:gt({color:Te.colors.textSubtle,fontSize:"1.6rem",backgroundColor:Te.colors.surfaceWhite},Te.fontStyles.medium,{paddingTop:"20px",height:"100%"}),footerContainerStyle:{minHeight:"64px",justifyContent:"center"},badgeStyle:{width:"20px",height:"20px",backgroundColor:Te.colors.iconCritical}},bt=Object(S.c)(Object(E.connect)((function(e,t){return{userType:_.get(e,"login.userInfo.user_type",""),childID:_.get(e,"login.userInfo.childID","")}}),null),Object(z.a)({resource:["common","classRoom"]}))((function(e){var t,a,n,s,o,i,r,l=e.t,c=e.isParent,u=e.isRemovedCourseForLoggedInUser,d=e.isArchivedClass,m=e.isCurrentAcademicYear,p=e.studentAssignmentId,g=e.conversationId,S=e.assignmentTitle,E=e.childID,h=e.assessmentId,C=e.classDiscussion,f=e.unreadPrivateMessageCount,T=e.isStudentEvaluationEnabled,y=e.isClassDiscussionEnabled,I=e.closeRightPane,A=e.toggleFullscreenDiscussion,w=e.isFullScreen,O=e.showFullscreenDiscussion,D=e.notificationType,N=e.userType,k=Object(v.useState)("ASSIGNMENT_MESSAGE"),P=B()(k,2),x=P[0],M=P[1];Object(v.useEffect)((function(){D&&M(JSON.parse(D))}),[D]);var L=_.get(C,"id",""),j=_.get(C,"unreadMessageCount",0),F=[{label:l("common:teacher"),value:"ASSIGNMENT_MESSAGE",unreadCount:f},{label:l("classRoom:class_discussion"),value:"ASSIGNMENT_GROUP_MESSAGE",unreadCount:j}],U=Ie()((t={},R()(t,_t.a.container,!0),R()(t,_t.a.fullScreenContainer,w),t)),H=Ie()((a={},R()(a,_t.a.header,!0),R()(a,_t.a.fullScreenHeader,w),a)),V=Ie()((n={},R()(n,_t.a.headerLeftContainer,!0),R()(n,_t.a.fullScreenHeaderLeftContainer,w),n)),W=Ie()((s={},R()(s,_t.a.headerRightContainer,!0),R()(s,_t.a.fullScreenHeaderRightContainer,w),s)),G=Ie()((o={},R()(o,_t.a.tabListContainer,!0),R()(o,_t.a.fullScreenTabListContainer,w),o)),z=Ie()((i={},R()(i,_t.a.chatContainer,!0),R()(i,_t.a.fullScreenChatContainer,w),i)),Y=Ie()((r={},R()(r,_t.a.chatInnerContainer,!0),R()(r,_t.a.fullScreenChatInnerContainer,w),r)),q=function(){O?(A(),I()):I()},J=b.a.createElement("div",{className:U},b.a.createElement("div",{className:H},b.a.createElement("div",{className:V},l("common:messaging")),b.a.createElement("div",{className:W},b.a.createElement("div",{className:_t.a.iconContainer,onClick:A},w?b.a.createElement(X.IconButton,{icon:b.a.createElement($.CollapseArrowsTwoOutlined,null),size:"large",variant:"on"}):b.a.createElement(X.IconButton,{icon:b.a.createElement($.ExpandArrowsTwoOutlined,null),size:"large",variant:"on"})),b.a.createElement("div",{className:_t.a.seperator}),b.a.createElement("div",{className:_t.a.iconContainer,onClick:q},b.a.createElement(X.IconButton,{icon:b.a.createElement($.CloseOutlined,null),size:"large",variant:"on"}))),b.a.createElement("div",{className:G},b.a.createElement(dt.a,{tabs:F,activeTab:x,toggleTab:function(e){return M(e)},containerStyle:w?vt.fullScreenContainerStyle:vt.containerStyle,activeTabContainerStyle:w?vt.fullScreenActiveTabContainerStyle:vt.activeTabContainerStyle,tabContainerStyle:w?vt.fullScreenTabContainerStyle:vt.tabContainerStyle,showTabUnreadCount:"parent"!==N,badgeStyle:vt.badgeStyle}))),"ASSIGNMENT_MESSAGE"===x?b.a.createElement("div",{className:z},b.a.createElement("div",{className:Y},b.a.createElement(Ce.a,{allowSendMessage:!c&&!u&&!d&&m,parentType:"STUDENT_ASSIGNMENT",showUserDetails:!1,showSenderInfoAlways:!0,parentId:p,conversationId:g,conversationLabel:S,showMessageCount:!1,showInstructionMessage:!1,otherUserId:E,showAllMessages:!0,messagesConStyle:c?vt.messagesConStyleOne:null,inputTextPlaceHolder:"".concat(l("common:typeHere"),"..."),excludeItemTypes:["STUDENT_ASSIGNMENT_SUBMISSION_FEEDBACK"],excludedItemTypesForConversation:"STUDENT_ASSIGNMENT_SUBMISSION_FEEDBACK",mode:u||d||!m||c?"view":"edit",t:l,isCurrentAcademicYear:m,emptyText:"classRoom:send_private_message_to_teacher",emptyImageUrl:Te.NoMessagesIllustration,footerContainerStyle:vt.footerContainerStyle}))):b.a.createElement("div",{className:z},b.a.createElement("div",{className:Y},b.a.createElement(Ce.a,ut()({deleteOtherMessage:!1,parentType:"ASSIGNMENT",showSenderInfoAlways:!0,showUserDetails:!1,parentId:h,conversationId:L,conversationLabel:S,inputTextPlaceHolder:"".concat(l("common:typeHere"),"..."),isStudentEvaluationEnabled:T},vt.chatContainerStyles,{allowSendMessage:y&&!c&&!u&&!d&&m,otherUserId:E,messagesConStyle:c?vt.messagesConStyleTwo:null,messagesScrollStyle:c?vt.messagesScrollStyle:null,noDataCompStyle:c?vt.noDataCompStyle:null,flatMessageConStyle:c?vt.flatMessageConStyle:null,isClassDiscussionEnabled:y,excludeItemTypes:"STUDENT_ASSIGNMENT_SUBMISSION_FEEDBACK",excludedItemTypesForConversation:"STUDENT_ASSIGNMENT_SUBMISSION_FEEDBACK",mode:u||d||!m||c?"view":"edit",t:l,showNoDataComp:c&&y,isCurrentAcademicYear:m,emptyHeaderText:"classRoom:no_discussion_yet",emptyText:"classRoom:send_message_to_initiate_a_dicussion_msg",showEmptyText:y,footerContainerStyle:vt.footerContainerStyle})))));return w?b.a.createElement(at.a,{isOpen:O,isFullScreen:w},J):J})),St=a(4859),Et=a.n(St),ht=a(1412),Ct=a(3955),ft=a(2043);function Tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function yt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(a),!0).forEach((function(t){R()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var It={button1Style:{type:"hollow",containerStyle:{borderRadius:"8px",borderColor:Te.colors.borderSubtle}},button2Style:{color:"blue",containerStyle:{borderRadius:"8px"}}},At={RESPONSE_PENDING:{title:function(e){return e("common:mark_as_done")},message:function(e){return(0,e.t)("classRoom:response_empty_warning_msg")},confirmButtonText:function(e){return e("classRoom:yes_mark_as_done")},cancelButtonText:function(e){return e("common:cancel")}},EVALUATION_PENDING:{title:function(e){return e("classRoom:self_evaluation_pending")},message:function(e){return(0,e.t)("classRoom:student_evaluation_pending_warning_msg",{count:e.pendingEvaluationCount})},confirmButtonText:function(e){return e("classRoom:yes_mark_as_done")},cancelButtonText:function(e){return e("common:cancel")}}},wt=b.a.memo((function(e){var t,a,n=e.t,s=e.userType,o=e.studentAssignmentData,i=e.publishedAt,r=e.deadline,l=e.contentType,c=e.isSimilarityCheckEnabled,u=e.attachmentsToDisplay,d=e.setToastMsg,m=e.getIsTurnitinEulaRequired,p=e.editStudentAssignmentSubmission,g=e.isStudentSubmissionEnabled,S=e.uploadingStatus,E=e.isArchivedClass,h=e.isEvaluated,C=e.isRemovedCourseForLoggedInUser,f=e.isStudentEvaluationEnabled,y=e.currentRightPane,I=e.filterCountVariables,A=e.assessmentTools,O=void 0===A?[]:A,D=e.enableMultiAssessmentTools,N=Object(v.useState)({}),k=B()(N,2),x=k[0],L=k[1],j=Object(v.useState)(!1),F=B()(j,2),U=F[0],H=F[1],V=Object(v.useState)(!1),W=B()(V,2),z=W[0],Y=W[1],q=Object(v.useState)(""),J=B()(q,2),K=J[0],Z=J[1],Q={assignment:yt({},_.get(o,"assignment",{}),{deadline:r,contentType:l,state:{publishedAt:i}}),submission:_.get(o,"submission",{}),status:_.get(o,"status",""),evaluatedAt:_.get(o,"evaluatedAt","")},ee=Object(w.fb)({data:Q,t:n,userType:s}),te=ee.date,ae=ee.statusColor,ne=ee.dateColor,se=ee.label,oe="OVERDUE"===(Q||{}).status,ie=_.get(o,"id",""),re=_.get(o,"submission.id",""),le=_.get(o,"submission.status",""),ce=_.get(o,"submission.response",""),ue="SUBMITTED"==le?"view":"edit",de=_.get(o,"toolResponses",[]),me=Object(w.X)({toolResponses:de,assessmentTools:O,enableMultiAssessmentTools:D,isStudentEvaluationEnabled:f}),_e=_.get(o,"isEvaluationApplicable");Object(v.useEffect)((function(){_.isEmpty(x)||ve()}),[x]);var pe=function(e){var t=yt({},o.submission,{},e);Object(T.A)({id:re,data:t})},ge=function(){var e=M()(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),e.next=3,p({mutationParams:x,refetchQueryParams:{id:ie,showOnlySubmitted:!1,userFilter:"SELF"},filterCountVariables:I});case 3:(t=e.sent).successful?pe(x):("SUBMITTED"==_.get(x,"status","")?pe({status:"DRAFT"}):pe({status:"SUBMITTED"}),d(t.errors[0])),H(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=M()(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H(!0),"SUBMITTED"!==_.get(x,"status")||!c){e.next=13;break}return e.next=4,m();case 4:if(!e.sent){e.next=9;break}Y(!0),e.next=11;break;case 9:return e.next=11,ge();case 11:e.next=15;break;case 13:return e.next=15,ge();case 15:H(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){if("SUBMITTED"==le)L({id:re,status:"DRAFT"});else{var e=_.trim(ce);L({id:re,response:e,status:"SUBMITTED",checkForSimilarity:c})}},Se=Ie()((t={},R()(t,Et.a.container,!0),R()(t,Et.a.containerShrink,y),t)),Ee=Ie()((a={},R()(a,Et.a.iconContainer,!0),R()(a,Et.a.iconOverdueContainer,oe),a));return b.a.createElement("div",{className:Se},b.a.createElement("div",{className:Et.a.innerContainer},b.a.createElement("div",{className:Et.a.leftContainer},b.a.createElement("div",{className:Ee},b.a.createElement($.ClockAlarmOutlined,{size:"x-small",variant:oe?"critical":"subtle"})),b.a.createElement("div",{className:Et.a.deadlineContainer},b.a.createElement("div",{className:Et.a.deadlineLabel,style:{color:ae}},se),b.a.createElement("div",{className:Et.a.deadlineTime,style:{color:ne}},te))),b.a.createElement("div",{className:Et.a.rightContainer},!h&&"parent"!==s&&b.a.createElement(X.Button,{variant:"edit"===ue?"progressive":"outlined",size:"medium",icon:"edit"===ue?b.a.createElement($.TickCircleOutlined,null):null,onClick:function(){var e=_.trim(ce),t="SUBMITTED"===le,a=!t&&g&&_.isEmpty(u)&&_.isEmpty(e),n=!t&&f&&_e&&me>0;a?Z("RESPONSE_PENDING"):n?Z("EVALUATION_PENDING"):be()},disabled:S||h||C||E},n("edit"===ue?"common:mark_as_done":g?"common:unsubmit":"common:mark_as_incomplete"))),z&&b.a.createElement(ft.a,{setShowEULA:Y,onClickAgree:ge,t:n}),!!K&&b.a.createElement(ht.a,{modalTitle:At[K].title(n),modalBody:At[K].message({t:n,pendingEvaluationCount:me}),toggleDialogueBoxDisplay:function(){return Z("")},button1:At[K].cancelButtonText(n),button2:At[K].confirmButtonText(n),onClickButton2:be,button1Props:It.button1Style,button2Props:It.button2Style}),U&&b.a.createElement(G.a,null)))})),Ot={setToastMsg:ae.nb,getIsTurnitinEulaRequired:ee.db,editStudentAssignmentSubmission:te.editStudentAssignmentSubmission},Rt=Object(S.c)(Object(E.connect)((function(e,t){var a=e.login.userInfo.id,n=e.login.userInfo.user_type,s=e.login.userInfo.childID,o=e.login.userInfo.org_id,i=_.get(e,"platform.academicYearSelected.id",""),r="parent"===n,l=_.get(e,"todos.filters",{}),c=l.activeDropdownCourseIdsArr,u=l.activeDropdownItemTypesArr;return{userType:_.get(e,"login.userInfo.user_type",""),filterCountVariables:yt({},Object(Ct.a)({orgId:o}),{userId:a,type:_.get(je.Ob[n],"entityType",""),academicYearId:i,courseIds:c,entityTypes:u,studentIds:r?s:void 0})}}),Ot),Object(z.a)({resource:["common","classRoom"]}))(wt),Dt=a(4857),Nt=a.n(Dt),kt=b.a.memo((function(e){var t=e.data,a=e.onClickAction,n=e.Icon,s=e.t,o=e.heading,i=t.label,r=t.textColor,l=t.surfaceColor,c=t.iconVariant,u=t.isDisabled;return b.a.createElement("div",{className:Nt.a.statusInnerContainer},b.a.createElement("div",{className:Nt.a.statusItem,onClick:u?void 0:a,style:{cursor:u?"default":"pointer"}},b.a.createElement("div",{className:Nt.a.statusIcon,style:{backgroundColor:l}},b.a.createElement(n,{size:"xx-small",variant:c})),b.a.createElement("div",{className:Nt.a.statusInfoContainer},b.a.createElement("div",{className:Nt.a.statusItemHeading},s(o)),b.a.createElement("div",{className:Nt.a.statusItemSubHeading,style:{color:r}},i))))}));kt.displayName="StudentClassRoomStatusItem";var Pt=b.a.memo((function(e){var t=e.t,a=e.studentAssignmentData,n=e.isStudentEvaluationEnabled,s=e.isStudentSubmissionEnabled,o=e.isTeacherEvaluationEnabled,i=e.scrollToResponseSection,r=e.showAssessmentEvaluationTool,l=e.isScheduled,c=e.publishedAt,u=e.assessmentTools,d=e.enableMultiAssessmentTools,m=e.toggleAssessmentTool,p=a.submission,g=a.isEvaluated,v=a.isEvaluationApplicable,S=a.toolResponses,E=Object(w.gb)({submission:p,isEvaluated:g,isEvaluationApplicable:v,isStudentEvaluationEnabled:n,isStudentSubmissionEnabled:s,isTeacherEvaluationEnabled:o,toolResponses:S,isScheduled:l,publishedAt:c,t:t}),h=E.submissionStatusData,C=E.teacherEvaluationStatus,f=E.studentEvaluationStatus,T=function(){if(!d){var e=_.get(u,"0.node",{}),t=_.get(e,"assessmentToolItem.id",""),a=_.get(e,"assessmentToolType","");m({assessmentToolId:t,assessmentToolType:a,isTeacherEvaluationEnable:o,isStudentEvaluationEnable:n})}};return b.a.createElement("div",{className:Nt.a.statusContainer},!_.isEmpty(h)&&b.a.createElement(kt,{data:h,onClickAction:i,Icon:$.AssessmentOutlined,t:t,heading:"common:submission"}),!_.isEmpty(C)&&r&&b.a.createElement(kt,{data:C,Icon:$.AssessmentApplicableOutlined,onClickAction:T,t:t,heading:"common:teacher_evaluation"}),!_.isEmpty(f)&&r&&b.a.createElement(kt,{data:f,Icon:$.StudentEvaluateOutlined,onClickAction:T,t:t,heading:"common:student_evaluation"}))})),xt=Object(z.a)({resource:["common"]})(Pt),Mt=a(4856),Lt=a.n(Mt),Bt=a(832),jt=a(3631),Ft=function(e){var t=e.isComplete,a=e.parentId,n=e.parentType,s=e.showToggleStudentPypEvaluateStatus,o=e.evaluateIBPYPElements,i=e.studentDetails,r=e.assessmentFields,l=e.ibPYPElementRatings,c=e.isEvaluated,u=e.curriculumProgramType,d=e.course,m=e.onClose,_=e.showCriteriaColumns,p=void 0===_||_,g=e.isMinimalDesign,v=Object(jt.a)(["common"]).t;return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:Lt.a.modalHeader},b.a.createElement("span",null,v("common:learning_goals")),b.a.createElement("span",{className:Lt.a.actionButtons},b.a.createElement(X.Button,{variant:"outlined",size:"medium",onClick:m},v("common:cancel")))),b.a.createElement("div",{className:Lt.a.modalBody},b.a.createElement("div",{className:Lt.a.innerWrapper},b.a.createElement(Bt.a,{isComplete:t,parentId:a,parentType:n,showToggleStudentPypEvaluateStatus:s,evaluateIBPYPElements:o,studentDetails:i,assessmentFields:r,ibPYPElementRatings:l,isEvaluated:c,curriculumProgramType:u,course:d,isMinimalDesign:g,showCriteriaDescriptorButton:!0,showCriteriaColumns:p}))))},Ut=function(e){var t=e.onClose;return b.a.createElement(at.a,{isOpen:!0,modalContent:Lt.a.modalContent,onRequestClose:t},b.a.createElement(Ft,e))},Ht=a(40),Vt=a(70),Wt=a(600),Gt=a(2237),zt=a(3848),Yt=a(1563),qt=a(4854),Jt=a.n(qt);function Kt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Zt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(a),!0).forEach((function(t){R()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Kt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Qt=ue.a.can("FeatureFlag:Workbook"),Xt={creatorImgStyle:{height:"40px",width:"40px",borderWidth:1,borderColor:se.e.borderSubtle},labelComponentStyle:{whiteSpace:"nowrap"},rightIconStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"20px",height:"20px",backgroundColor:se.e.iconCritical,borderRadius:"50%",lineHeight:"1.6rem"},rightPaneLineStyle:{borderWidth:1,borderColor:se.e.borderSubtle,boxShadow:"none",minWidth:0},resourcesLabelContainerStyle:{marginBottom:"24px"},attachmentContainerStyle:{marginTop:0,gap:"24px"}},$t={labelStyle:Zt({fontSize:"1.8rem"},Te.fontStyles.bold,{marginBottom:"8px"})},ea=function(e){return ce.a.get(e,"unitPlan.allFields",ce.a.get(e,"presetAssessment.unitPlan.allFields",{}))},ta=function(e){var t=e.attachments,a=e.toggleMediaModal,n=e.showMediaModal,s=e.activeIndex,o=e.onWorkbookDiscardDirectly,i=e.onWorkbookUpdateSuccessfully,r=e.onWorkSheetDiscard,l=e.status,c=e.isRemovedCourseForLoggedInUser,u=e.attachmentLength,d=void 0===u?1:u,m=e.isArchivedClass,_=e.isEvaluated,p=e.curriculumProgramType,g=e.grade,v=e.isScheduled,S=e.isParent,E=e.isTeacherEvaluationEnable,h=e.isSharedWithStudent,C=t?t[0]:null,f=ce.a.toUpper(ce.a.get(C,"type","")),T=ce.a.get(C,"mimeType",""),y=Object(Wt.c)(),I=!v&&"SUBMITTED"!==l&&!c&&!m&&1==d&&!_&&!S,A=!1,w=!1;"FILE"===f&&ce.a.isEqual(T,"application/pdf")?A=Object(Wt.b)({curriculumProgramType:p,grade:g}):"FILE"===f&&(ce.a.includes(je.K,T)||ce.a.includes(je.Y,T))?A=y:("WORKBOOK"===f||"IMAGE"===f&&I)&&(w=Qt);var O=E?h:_;return n?b.a.createElement("div",{className:Jt.a.modalContent},b.a.createElement(xe.a,{mode:I?"edit":"view",workbookMode:Qt?Gt.b.USE_TEMPLATE:Gt.b.WORKBOOK_MULTIPAGE_VIEW,toggleMediaModal:a,attachments:t,activeIndex:s,showWorkBook:w,showPdfTronEditButton:A,showPdfTronfeedback:I,showQuestionAssessmentFeedBack:O,onWorkbookDiscardDirectly:o,onWorkbookUpdateSuccessfully:i,onWorkSheetDiscard:r})):null},aa=function(e){function t(e){var a;return i()(this,t),a=u()(this,m()(t).call(this,e)),R()(Pe()(a),"_deleteAttachmentGroup",function(){var e=M()(P.a.mark((function e(t){var a,n,s,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.deleteAttachmentGroups,n=t.attachmentGroup,s=t.parentId,o=t.refetchGetStudentAssignmentDetails,e.next=3,a({attachmentGroupIds:ce.a.get(n,"id"),parentType:"STUDENT_ASSIGNMENT_SUBMISSION",parentId:s});case 3:o();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R()(Pe()(a),"onWorkbookDiscardDirectly",M()(P.a.mark((function e(){var t,n,s,o,i,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props,n=t.deleteAttachmentGroups,s=t.studentAssignmentData,o=t.refetchGetStudentAssignmentDetails,i=a.state.selectedAttachmentGroup,r=ce.a.get(s,"submission.id",""),!ce.a.get(i,"studentTemplate")){e.next=7;break}if(ce.a.get(ce.a.first(ce.a.get(i,"attachments")),"metadata.workbookUrl","")){e.next=7;break}return e.next=7,a._deleteAttachmentGroup({deleteAttachmentGroups:n,attachmentGroup:i,parentId:r,refetchGetStudentAssignmentDetails:o});case 7:a.setState({selectedAttachmentGroup:null,selectedTemplate:null});case 8:case"end":return e.stop()}}),e)})))),R()(Pe()(a),"onWorkSheetDiscard",M()(P.a.mark((function e(){var t,n,s,o,i,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props,n=t.deleteAttachmentGroups,s=t.studentAssignmentData,o=t.refetchGetStudentAssignmentDetails,i=a.state.selectedAttachmentGroup,r=ce.a.get(s,"submission.id",""),a._deleteAttachmentGroup({deleteAttachmentGroups:n,attachmentGroup:i,parentId:r,refetchGetStudentAssignmentDetails:o}),a.setState({selectedAttachmentGroup:null,selectedTemplate:null});case 5:case"end":return e.stop()}}),e)})))),R()(Pe()(a),"onWorkbookUpdateSuccessfully",(function(){(0,a.props.onClickStep)("response")})),R()(Pe()(a),"setSelectedAttachmentGroup",(function(e){a.setState((function(t){return{selectedAttachmentGroup:e}}))})),R()(Pe()(a),"setLoadingState",(function(e){a.setState((function(t){return{isLoading:e}}))})),R()(Pe()(a),"setUploadingStatus",(function(e){a.setState((function(t){return{uploadingStatus:e}}))})),R()(Pe()(a),"updateSubmission",(function(e){var t=a.props.studentAssignmentData,n=(t=void 0===t?{}:t).submission,s=ce.a.get(n,"id",""),o=Zt({},n,{},e);Object(T.A)({id:s,data:o})})),R()(Pe()(a),"setUseTemplateOpen",(function(e){a.setState((function(t){return{isUseTemplateModalOpen:e}}))})),R()(Pe()(a),"toggleMediaModal",(function(e){a.setState((function(t){return{showMediaModal:e}}))})),R()(Pe()(a),"toggleAssessmentTool",(function(e){var t=e.assessmentToolId,n=void 0===t?"":t,s=e.assessmentToolType,o=void 0===s?"":s,i=e.isTeacherEvaluationEnable,r=void 0!==i&&i,l=e.isStudentEvaluationEnable,c=void 0!==l&&l;a.setState({showAssessmentTool:!a.state.showAssessmentTool,assessmentToolInfo:{selectedAssessmentTool:o,assessmentToolId:n,isTeacherEvaluationEnabledLocal:r,isStudentEvaluationEnabledLocal:c}})})),R()(Pe()(a),"toggleFullscreenDiscussion",(function(){a.setState({showFullscreenDiscussion:!a.state.showFullscreenDiscussion})})),R()(Pe()(a),"getAssessmentTool",(function(e){var t=(e||{}).assessmentToolEdges,n=a.state.assessmentToolInfo,s=ce.a.get(n,"assessmentToolId"),o=ce.a.find(t,(function(e){var t=ce.a.get(e,"node.assessmentToolItem.id","");return ce.a.isEqual(s,t)}));return ce.a.get(o,"node.assessmentToolItem",{})})),R()(Pe()(a),"makeTemplateCopy",function(){var e=M()(P.a.mark((function e(t){var n,s,o,i,r,l,c,u,d,m,_;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.template,s=t.attachmentGroupId,o=a.props,i=o.studentAssignmentData,r=(i=void 0===i?{}:i).submission,l=o.createAttachmentGroupsV2,c=ce.a.get(r,"id",""),u=ce.a.isEqual(ce.a.get(n,"type",""),"QUESTION"),d=(!!ce.a.get(n,"metadata.permission",!1)||Qt)&&!u,m={parentId:c,parentType:"STUDENT_ASSIGNMENT_SUBMISSION",studentTemplateId:s,copyFromstudentTemplate:d},e.prev=8,e.next=11,l({input:m});case 11:return _=e.sent,a.setSelectedAttachmentGroup(ce.a.first(_)),e.abrupt("return",_);case 16:e.prev=16,e.t0=e.catch(8);case 18:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(t){return e.apply(this,arguments)}}()),R()(Pe()(a),"onMediaClick",function(){var e=M()(P.a.mark((function e(t,n){var s,o,i,r,l,c,u,d,m,_,p,g,v=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=v.length>2&&void 0!==v[2]&&v[2],o=ce.a.get(t,["attachments","0"]),i=!!ce.a.get(o,"metadata.permission",!1),r=a.props,l=r.refetchConversationQuery,c=r.studentAssignmentData,u=r.attachmentResponseObject,d=r.updateUserMessageState,m=ce.a.get(c,"conversation.id"),_=ce.a.get(u,null===t||void 0===t?void 0:t.id),i&&n){e.next=14;break}if(a.openMedia(t),!s){e.next=13;break}if(ce.a.isEmpty(_)){e.next=13;break}return e.next=12,d({input:{ids:_,state:"READ"},conversationId:m});case 12:l();case 13:return e.abrupt("return");case 14:if(!(a.mutationCount.current>0)){e.next=16;break}return e.abrupt("return");case 16:return a.mutationCount.current=1,a.setLoadingState(!0),e.prev=18,e.next=21,a.makeTemplateCopy({template:o,attachmentGroupId:t.id});case 21:if(p=e.sent,!(ce.a.get(p,"length",0)>0)){e.next=30;break}if(g=ce.a.get(p,["0"],{}),!s){e.next=29;break}if(ce.a.isEmpty(_)){e.next=29;break}return e.next=28,d({input:{ids:_,state:"READ"},conversationId:m});case 28:l();case 29:a.openMedia(g);case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(18);case 35:return e.prev=35,a.setLoadingState(!1),a.mutationCount.current=0,e.finish(35);case 39:case"end":return e.stop()}}),e,null,[[18,32,35,39]])})));return function(t,a){return e.apply(this,arguments)}}()),R()(Pe()(a),"openMedia",(function(e,t){a.props.studentAssignmentData.submission.status;var n=ce.a.get(e,["attachments","0"]),s="LINK"===ce.a.get(n,"type",""),o=ce.a.includes(["QUESTION","QUESTION_SUBMISSION"],ce.a.get(ce.a.get(t,["attachments","0"]),"type",""));s?a.openTemplateModal(n):a.setState((function(a){return{selectedTemplate:o?[Zt({},e,{type:"QUESTION",id:ce.a.get(e,"studentTemplate.id","")?ce.a.get(e,"studentTemplate.id",""):null===t||void 0===t?void 0:t.id,submissionGroupId:e.id})]:[n],selectedAttachmentGroup:e,showMediaModal:!0,attachmentLength:o?1:ce.a.get(e,"attachments.length")}}))})),R()(Pe()(a),"openTemplateModal",(function(e){a.setState((function(t){return{selectedTemplate:e,isUseTemplateModalOpen:!0}}))})),R()(Pe()(a),"onUseTemplateClick",function(){var e=M()(P.a.mark((function e(t,n,s){var o,i,r,l,c,u,d,m,_,p,g,v,b,S,E,h,C,f;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.props,i=o.setToastMsg,r=o.deleteAttachmentGroups,l=o.studentAssignmentData,c=o.userType,u=o.state,d=ce.a.get(l,"submission.id",""),m=ce.a.get(t,["attachments","0"]),_=!!ce.a.get(m,"metadata.permission",!1),p=ce.a.includes(["IMAGE","WORKBOOK"],ce.a.get(m,"type",null)),g=ce.a.isEqual(ce.a.get(m,"type",null),"FILE"),v=ce.a.includes(["QUESTION","QUESTION_SUBMISSION"],ce.a.get(m,"type","")),b=Qt&&p&&"student"===c,S=g&&"student"===c,E=v&&"student"===c,_||b||S||E){e.next=13;break}return a.openMedia(t),e.abrupt("return");case 13:if(a.setLoadingState(!0),h=ce.a.isEqual(u,"SCHEDULED"),e.prev=15,!(n||"parent"===c||s||h)){e.next=20;break}C=t,e.next=24;break;case 20:return e.next=22,a.makeTemplateCopy({template:m,attachmentGroupId:t.id});case 22:f=e.sent,C=ce.a.get(f,["0"],{});case 24:if(ce.a.isEmpty(ce.a.get(C,"attachments"))&&!v){e.next=28;break}a.openMedia(C,t),e.next=32;break;case 28:if(!ce.a.get(C,"id")){e.next=31;break}return e.next=31,r({attachmentGroupIds:ce.a.get(C,"id"),parentType:"STUDENT_ASSIGNMENT_SUBMISSION",parentId:d});case 31:i("toastMsgs:something_went_wrong");case 32:e.next=36;break;case 34:e.prev=34,e.t0=e.catch(15);case 36:return e.prev=36,a.setLoadingState(!1),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[15,34,36,39]])})));return function(t,a,n){return e.apply(this,arguments)}}()),R()(Pe()(a),"resetStudentTemplate",function(){var e=M()(P.a.mark((function e(t){var n,s,o,i,r,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.submittedTemplate,s=t.parentId,o=a.props,i=o.setToastMsg,r=o.deleteAttachmentGroups,l=o.refetchGetStudentAssignmentDetails,a.setLoadingState(!0),e.prev=3,ce.a.isEmpty(n)){e.next=9;break}return e.next=7,a._deleteAttachmentGroup({deleteAttachmentGroups:r,attachmentGroup:n,parentId:s,refetchGetStudentAssignmentDetails:l});case 7:e.next=10;break;case 9:i("toastMsgs:something_went_wrong");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3);case 15:return e.prev=15,a.setLoadingState(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()),R()(Pe()(a),"onDicussionClick",(function(){a.handleRightPane({rightPane:"DISCUSSION"})})),R()(Pe()(a),"getRightPaneComponent",(function(){var e=a.props,t=e.userType,n=e.isRemovedCourseForLoggedInUser,s=e.isArchivedClass,o=e.studentAssignmentId,i=e.studentAssignmentData,r=e.assignmentTitle,l=e.assessmentId,c=e.classDiscussion,u=e.isStudentEvaluationEnabled,d=e.isClassDiscussionEnabled,m=e.notificationType,_=e.getIsCurrentAcademicYear,p="parent"===t,g=(i||{}).conversation,v=ce.a.get(g,"id","");switch(a.state.currentRightPane){case"DISCUSSION":return b.a.createElement(bt,{isParent:p,isRemovedCourseForLoggedInUser:n,isArchivedClass:s,isCurrentAcademicYear:_(),studentAssignmentId:o,conversationId:v,assignmentTitle:r,assessmentId:l,classDiscussion:c,unreadPrivateMessageCount:ce.a.get(g,"unreadMessageCount",0),isStudentEvaluationEnabled:u,isClassDiscussionEnabled:d,closeRightPane:a.closeRightPane,toggleFullscreenDiscussion:a.toggleFullscreenDiscussion,isFullScreen:!1,notificationType:m})}})),R()(Pe()(a),"scrollToResponseSection",(function(){var e;Object(zt.a)({element:null===(e=a.scrollRef)||void 0===e?void 0:e.current})})),R()(Pe()(a),"getEvaluationText",(function(e){var t=e.isTeacherEvaluationEnable,n=e.isStudentEvaluationEnable,s=e.isScheduled,o=e.assessmentToolText,i=e.assessmentToolType,r=e.assessmentToolId,l=e.isEvaluated,c=e.renderStudentScore,u=e.renderIBGradeScaleScore,d=a.props,m=d.t,_=d.isSharedWithStudent,p=d.studentAssignmentData,g=d.userType;if("DP_ASSESSMENT_RUBRIC"===i)return m("common:view_with_label_lowercase",{label:o});if("SCORE"===i)return c(!1);if("ASSESSMENT_GRADE_BOUNDARY"===i)return u();var v="parent"===g,b=ce.a.get(p,"submission"),S=ce.a.get(p,"isEvaluationApplicable"),E=ce.a.get(p,"toolResponses",[]),h="SUBMITTED"===ce.a.get(b,"status");return!v&&n&&S&&!(h||_||s||l)?m(Object(w.S)({toolResponses:E,assessmentToolId:r})?"assessmentEvaluation:edit_evaluation":"classRoom:evaluate_your_work"):m("common:view_with_label_lowercase",n&&S&&h||t&&(_||l)?{label:m("common:evaluation")}:{label:o})})),R()(Pe()(a),"onClickViewGoals",(function(){a.setState({showLearningGoalsPreviewModal:!0})})),R()(Pe()(a),"renderLearningGoalsSection",(function(){var e=a.props.t,t=b.a.createElement(X.Button,{variant:"outlined",size:"small",onClick:a.onClickViewGoals},e("common:view_with_label_lowercase",{label:e("teacherHomePage:goals")}));return b.a.createElement(X.MediaCard,{cardType:"medium",name:e("common:pyp_elements"),icon:b.a.createElement($.GoalsOutlined,null),options:t,showSubtext:!1})})),R()(Pe()(a),"renderLearningGoalsPreviewModal",(function(){var e=a.props,t=e.curriculumProgramType,n=e.ibPYPElementRatings,s=e.studentAssignmentId,o=e.course,i=e.studentAssignmentData,r=e.content,l=(e.assignedStudents,e.isSharedWithStudent);return b.a.createElement(Ut,{isComplete:!0,parentId:s,parentType:"STUDENT_ASSIGNMENT",showToggleStudentPypEvaluateStatus:!1,evaluateIBPYPElements:!0,studentDetails:ce.a.get(i,"student"),assessmentFields:ce.a.get(r,"allFields",[]),ibPYPElementRatings:n,isEvaluated:!0,curriculumProgramType:t,course:o,onClose:function(){return a.setState({showLearningGoalsPreviewModal:!1})},showCriteriaColumns:l,isMinimalDesign:!0})})),a.state=Zt({},a.state,{isLoading:!1,uploadingStatus:!1,selectedTemplate:null,selectedAttachmentGroup:null,showMediaModal:!1,isUseTemplateModalOpen:!1,showAssessmentTool:!1,showFullscreenDiscussion:!1,assessmentToolInfo:{selectedAssessmentTool:"",assessmentToolId:"",isTeacherEvaluationEnabledLocal:!1,isStudentEvaluationEnabledLocal:!1},showHeaderGradient:!0}),a.mutationCount=b.a.createRef(0),a.scrollRef=b.a.createRef(),a}return g()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.props.notificationType&&this.handleRightPane({rightPane:"DISCUSSION"})}},{key:"render",value:function(){var e,t,a=this,n=this.props,s=n.studentAssignmentData,o=n.assessmentId,i=n.classDiscussion,r=n.studentAssignmentId,l=n.isStudentSubmissionEnabled,c=n.isStudentEvaluationEnabled,u=n.isTeacherEvaluationEnabled,d=n.isClassDiscussionEnabled,m=n.isSharedWithStudent,_=n.assignmentTitle,p=n.headerLabel,g=n.content,v=n.contentType,S=n.t,E=n.assignedStudents,h=n.state,C=n.publishedAt,f=n.template,T=n.refetchGetStudentAssignmentDetails,y=n.attachmentResponseObject,I=n.isRemovedCourseForLoggedInUser,A=n.userType,O=n.isSimilarityCheckEnabled,D=n.createdBy,N=n.deadline,k=n.ibPYPElementRatings,P=n.userEntityType,x=n.organizationId,M=n.isArchivedClass,L=n.goToBack,B=n.post,j=n.curriculumProgramType,F=n.goToRelativeRoute,U=n.grade,H=n.getIsCurrentAcademicYear,V=n.leHasPypEvaluation,W=this.state,z=W.uploadingStatus,Y=W.selectedTemplate,q=W.isUseTemplateModalOpen,J=W.showMediaModal,K=W.isLoading,Z=W.attachmentLength,Q=W.showAssessmentTool,ee=W.showFullscreenDiscussion,te=W.currentRightPane,ae=W.assessmentToolInfo,ne=ae.selectedAssessmentTool,oe=ae.assessmentToolId,ie=ae.isTeacherEvaluationEnabledLocal,re=ae.isStudentEvaluationEnabledLocal,le=W.showLearningGoalsPreviewModal,ue=s||{},_e=ue.submission,pe=ue.conversation,ge=ue.toolResponses,ve=ue.elementRemarks,be=ue.state,Se=ce.a.get(_e,"attachments",[])||[],Ee=ce.a.get(_e,"attachmentGroups",[])||[],he=Object(w.w)({attachmentGroups:Ee,attachments:Se}),Ce=ce.a.get(pe,"id",""),Te="parent"==A?be:h,ye=ce.a.get(_e,"status",""),Ae="SUBMITTED"===ye,we=ce.a.get(ce.a.find(E,{id:r}),"isEvaluated",!1),Oe=ce.a.get(_e,"id"),Re=ce.a.get(s,"isEvaluationApplicable",!0),De=ce.a.get(s,"assignment.course",{}),Ne=null===De||void 0===De?void 0:De.id,ke="".concat(ce.a.get(D,"firstName")," ").concat(ce.a.get(D,"lastName")),Pe=ce.a.get(g,"assessmentTools.edges",[]),xe=(ce.a.get(g,"isLearningGoalsEvaluationEnabled",!1),ce.a.filter(Pe,(function(e){var t=e.node,a=ce.a.get(t,"assessmentToolType");return!ce.a.includes(["COMMENT"],a)}))),Be=ce.a.get(g,"category.label"),je=ce.a.get(g,"category.colorCode"),Fe=Object(me.getScoreDetailsMemoize)({assessmentTools:ce.a.get(g,"assessmentTools",[])}),Ue=Fe.isScoreEnabled,He=Fe.maxScore,Ve=Object(me.checkIsScoreEnabledFromAdmin)({organizationId:x,curriculumType:j}),We=ce.a.find(ce.a.get(s,"ibPYPElementRatings",[]),(function(e){return"SCORE"===e.ibPYPElementType})),Ge=ce.a.get(We,"value",""),ze=Object(de.e)({name:"student"===A?"ShowFinalGradeRatingToStudent":"ShowFinalGradeRatingToParent",organizationId:x,userEntityType:P}),Ye="parent"===A,qe=ce.a.get(g,"image.value",""),Je=ce.a.get(pe,"unreadMessageCount",0),Ke=Je+ce.a.get(i,"unreadMessageCount",0),Ze=ce.a.isEqual(Te,"SCHEDULED"),Qe=Object(w.M)({curriculumProgramType:j}),Xe=Ue&&Ve?b.a.createElement("div",{className:Jt.a.scoreDetailContainer},Be?b.a.createElement("div",{className:Jt.a.categoryContainer,style:{backgroundColor:je||se.e.surfaceDark}},Be):null):null,et=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=Ie()((e={},R()(e,Jt.a.studentScoreContainer,!0),R()(e,Jt.a.studentScoreContainerNoIcon,!t),e));return b.a.createElement("div",{className:a},t&&b.a.createElement("div",{className:Jt.a.scoreSection},b.a.createElement($.AssessmentEvaluatedOutlined,null),b.a.createElement("span",{className:Jt.a.scoreHeader},S("common:score"))),b.a.createElement("div",{className:Jt.a.scoreContainer},Ge&&m?b.a.createElement(b.a.Fragment,null,b.a.createElement("span",{className:Jt.a.studentScore},Ge),b.a.createElement("span",{className:Jt.a.maxScore},"/".concat(He))):b.a.createElement(b.a.Fragment,null,b.a.createElement("span",{className:Jt.a.dashText},"-"),b.a.createElement("span",{className:Jt.a.maxScore}," /".concat(He)))))},tt=function(){var e=Ie()(Jt.a.studentScoreContainer,Jt.a.studentScoreContainerNoIcon),t=ce.a.find(ce.a.get(s,"ibPYPElementRatings",[]),(function(e){return"ASSESSMENT_GRADE_BOUNDARY"===ce.a.get(e,"ibPYPElementType")})),a=ce.a.get(t,"value",""),n=ce.a.get(t,"academicCriteriaSet.academicCriteriaValues",[]),o=ce.a.size(n),i="TOK"===ce.a.get(De,"subjects.0.type");return b.a.createElement("div",{className:e},b.a.createElement("div",{className:Jt.a.scoreContainer},a&&m?b.a.createElement(b.a.Fragment,null,b.a.createElement("span",{className:Jt.a.studentScore},a),!i&&o>0&&b.a.createElement("span",{className:Jt.a.maxScore},"/".concat(o))):b.a.createElement(b.a.Fragment,null,b.a.createElement("span",{className:Jt.a.dashText},"-"),!i&&o>0&&b.a.createElement("span",{className:Jt.a.maxScore}," /".concat(o)))))},at=ce.a.get(ve,[0,"message"],""),nt=ce.a.some(Pe,(function(e){var t=e.node,a=ce.a.get(t,"isTeacherEvaluationEnable",!1),n=ce.a.get(t,"isStudentEvaluationEnable",!1),s=Qe?a:u,o=Qe?n:c;return Object(w.cb)({assessmentTool:ce.a.get(t,"assessmentToolItem",{}),assessmentToolType:ce.a.get(t,"assessmentToolType",""),allFields:ce.a.get(g,"allFields",[])})&&(s||o)})),st=!ce.a.isEmpty(xe)&&nt||Ue&&He&&u||!ce.a.isEmpty(at)&&m,ot=Ie()((e={},R()(e,Jt.a.containerBodyWrapper,!0),R()(e,Jt.a.containerBodyWrapperShrink,te),e)),it=this.state.showHeaderGradient,rt=Ie()((t={},R()(t,Jt.a.header,!0),R()(t,Jt.a.headerGradient,qe&&it),t)),ct=ce.a.get(D,"firstName"),ut=ce.a.get(D,"profileImage");return b.a.createElement("div",{className:Jt.a.container},le&&this.renderLearningGoalsPreviewModal(),b.a.createElement("div",{className:Jt.a.innerContainer,onScroll:function(e){if(qe){var t=e.target;(null===t||void 0===t?void 0:t.scrollTop)>320&&it?a.setState({showHeaderGradient:!1}):(null===t||void 0===t?void 0:t.scrollTop)<=320&&!it&&a.setState({showHeaderGradient:!0})}}},qe&&b.a.createElement("div",{className:Jt.a.assessmentCoverImage,style:{backgroundImage:"url(".concat(qe,")")}}),b.a.createElement("div",{className:rt},b.a.createElement(X.IconButton,{icon:b.a.createElement($.ChevronLeftOutlined,{variant:"subtle",size:"xx-small"}),variant:"on",className:Jt.a.headerButton,onClick:function(){"dp_pa"==ce.a.get(f,"label","")?F({route:"../../../../practicalactivities"}):L()}}),b.a.createElement(X.Button,{icon:b.a.createElement($.CommentMultipleOutlined,{size:"xx-small"}),variant:"on",className:Jt.a.headerButton,onClick:this.onDicussionClick,rightIcon:Ke>0&&b.a.createElement("div",{className:Jt.a.rightIcon,style:Xt.rightIconStyle},b.a.createElement("div",{className:Jt.a.messagesCount},Ke)),disabled:Ze},S("common:messaging"))),b.a.createElement("div",{className:ot},b.a.createElement("div",{className:Jt.a.constainerBodyInnerWrapper},b.a.createElement("div",{className:Jt.a.creatorInfoContainer},b.a.createElement("div",{className:Jt.a.creatorInfoLeftCon},b.a.createElement("div",{className:Jt.a.creatorNameContainer},ke),b.a.createElement("div",{className:Jt.a.assignmentTitleCon},p),Xe),b.a.createElement("div",{className:Jt.a.creatorInfoRightCon},b.a.createElement(X.Tooltip,{tooltip:ct,placement:"bottom"},b.a.createElement("div",null,b.a.createElement(X.Avatar,{name:ct,size:"small",color:"teal",src:ut}))))),b.a.createElement(xt,{studentAssignmentData:s,isStudentEvaluationEnabled:c,isStudentSubmissionEnabled:l,isTeacherEvaluationEnabled:u,scrollToResponseSection:this.scrollToResponseSection,isScheduled:Ze,publishedAt:C,showAssessmentEvaluationTool:st,assessmentTools:xe,enableMultiAssessmentTools:Qe,toggleAssessmentTool:this.toggleAssessmentTool}),b.a.createElement(fe.a,{item:g,assignmentCourseId:Ne,itemStyle:$t,contentType:v,template:f,isStudentEvaluationEnabled:c,containerStyle:{padding:"0px",marginBottom:"24px"},canTurnInSubmission:"SUBMITTED"!==ye&&"SCHEDULED"!==Te,submissionId:Oe,refetchGetStudentAssignmentDetails:T,onUseTemplateClick:this.onUseTemplateClick,isEvaluationApplicable:Re,resourcesCardType:"design-media-card",showStudentTemplate:!1,showTitle:!1,fieldItemStyle:{borderTop:"1px solid ".concat(se.e.borderSubtle),paddingTop:"24px"},labelComponentStyle:Xt.labelComponentStyle,resourcesLabelContainerStyle:Xt.resourcesLabelContainerStyle,attachmentContainerStyle:Xt.attachmentContainerStyle}),b.a.createElement("div",{className:Jt.a.responseContainer,ref:this.scrollRef},b.a.createElement($e,{submission:_e,isStudentSubmissionEnabled:l,isRemovedCourseForLoggedInUser:I,isStudentEvaluationEnabled:c,isTeacherEvaluationEnabled:u,isSharedWithStudent:m,updateSubmission:this.updateSubmission,studentAssignmentId:r,toolResponses:ge,setUploadingStatus:this.setUploadingStatus,content:g,onMediaClick:this.onMediaClick,contentType:v,assignedStudents:E,showMessageCount:!0,showInstructionMessage:!1,showAllMessages:!0,conversationId:Ce,refetchGetStudentAssignmentDetails:T,attachmentResponseObject:y,assessmentFields:ce.a.get(g,"allFields",{}),unitPlanFields:ea(g),field_list:ce.a.get(f,"field_list",{}),onUseTemplateClick:this.onUseTemplateClick,isEvaluationApplicable:Re,assignmentId:o,isSimilarityCheckEnabled:O,isArchivedClass:M,course:De,assignmentCourseId:Ne,state:Te,template:f,post:B,isScheduled:Ze,resetStudentTemplate:this.resetStudentTemplate,assessmentTools:xe})),st?b.a.createElement("div",{className:Jt.a.evaluationDetailsContainer},b.a.createElement("div",{className:Jt.a.evaluationHeaderContainer},b.a.createElement("div",{className:Jt.a.assessmentCriteriaLabel},S(Qe?"classRoom:evaluation_methods":"common:evaluation"))),!ce.a.isEmpty(xe)&&ce.a.map(Object(w.rb)({assessmentTools:xe,hasEdges:!1}),(function(e){var t=e.node,n=ce.a.get(t,"assessmentToolItem",{}),s=ce.a.get(t,"assessmentToolType",""),o=ce.a.get(t,"id","");if("SCORE"!==s||Qe){var i=ce.a.get(t,"isTeacherEvaluationEnable",!1),r=ce.a.get(t,"isStudentEvaluationEnable",!1),l=Qe?i:u,d=Qe?r:c;return Object(w.cb)({assessmentTool:n,assessmentToolType:s,allFields:ce.a.get(g,"allFields",[])})&&(l||d)&&b.a.createElement("div",{className:Jt.a.multipleToolsContainer,key:o},function(e){var t=ce.a.get(e,"assessmentToolItem",{}),n=ce.a.get(t,"id",""),s=ce.a.get(e,"assessmentToolType",""),o=ce.a.get(e,"isTeacherEvaluationEnable",!1),i=ce.a.get(e,"isStudentEvaluationEnable",!1),r=Object(w.p)({t:S,assessmentToolType:s,assessmentTool:t,showLabelAsIBGrade:!0}).assessmentToolText,l=Qe?o:u,d=Qe?i:c,m=Object(w.q)({assessmentToolType:s,t:S}),_=m.icon,p=void 0===_?null:_,g=m.type,v=!ce.a.includes(["SCORE","ASSESSMENT_GRADE_BOUNDARY"],s),E=a.getEvaluationText({isScheduled:Ze,assessmentToolText:r,isTeacherEvaluationEnable:l,isStudentEvaluationEnable:d,assessmentToolType:s,assessmentToolId:n,isEvaluated:we,renderStudentScore:et,renderIBGradeScaleScore:tt}),h=v?b.a.createElement(X.Button,{variant:"outlined",size:"small",onClick:function(){("SCORE"!==s||Qe)&&a.toggleAssessmentTool({assessmentToolId:n,assessmentToolType:s,isTeacherEvaluationEnable:l,isStudentEvaluationEnable:d})}},E):E;return b.a.createElement(X.MediaCard,{cardType:"medium",type:g,name:r,icon:p,options:h,showSubtext:!1})}(t))}})),!Qe&&Ue&&He&&u&&et(),m&&function(){var e=ce.a.get(ve,[0,"message"],"");return e&&b.a.createElement("div",{className:Jt.a.teacherRemarkContainer},b.a.createElement("div",{className:Jt.a.remark},b.a.createElement("div",{className:Jt.a.teacherRemarkTextContainer},b.a.createElement($.CommentRemarkOutlined,{size:"xx-small"}),b.a.createElement("span",{className:Jt.a.teacherRemarkText},S("common:final_remarks"))),e))}()):null,V?b.a.createElement("div",{className:Jt.a.evaluationDetailsContainer},b.a.createElement("div",{className:Jt.a.evaluationHeaderContainer},b.a.createElement("div",{className:Jt.a.assessmentCriteriaLabel},S("common:pyp_elements"))),this.renderLearningGoalsSection()):null)),K&&b.a.createElement(G.a,null),q&&Y&&b.a.createElement(Me.a,{open:!0,onClose:function(){return a.setUseTemplateOpen(!1)},attachment:Y,rightActionButton:"SUBMITTED"!==ye&&l&&b.a.createElement(Le.a,{size:"sm",color:"pink",type:"filled",onClick:function(){return a.setUseTemplateOpen(!1)}},S("common:save_exit")),shouldShowTabIcon:!Ye}),b.a.createElement(ta,{attachments:Y,toggleMediaModal:this.toggleMediaModal,showMediaModal:J,activeIndex:0,onWorkbookDiscardDirectly:this.onWorkbookDiscardDirectly,onWorkbookUpdateSuccessfully:this.onWorkbookUpdateSuccessfully,onWorkSheetDiscard:this.onWorkSheetDiscard,status:ye,isRemovedCourseForLoggedInUser:I,attachmentLength:Z,isEvaluated:we,curriculumProgramType:j,grade:U,isScheduled:Ze,isParent:Ye,isTeacherEvaluationEnable:u,isSharedWithStudent:m})),!Ze&&b.a.createElement("div",{className:Jt.a.footer},b.a.createElement(Rt,{studentAssignmentData:s,publishedAt:C,deadline:N,contentType:v,isSimilarityCheckEnabled:O,attachmentsToDisplay:he,isStudentSubmissionEnabled:l,uploadingStatus:z,isArchivedClass:M,isEvaluated:we,isRemovedCourseForLoggedInUser:I,isStudentEvaluationEnabled:c,currentRightPane:this.state.currentRightPane,assessmentTools:ce.a.get(g,"assessmentTools"),enableMultiAssessmentTools:Qe})),Q&&b.a.createElement(lt,{assessmentToolType:ne,isEvaluatedOrSubmitted:we||Ae,studentAssignmentId:r,toolResponses:ge,assessmentTool:this.getAssessmentTool({assessmentToolEdges:Pe}),unitPlanFields:ea(g),field_list:ce.a.get(f,"field_list",{}),assessmentFields:ce.a.get(g,"allFields",{}),ibPYPElementRatings:k,isFinalCriteriaSettingEnabled:ze,isEvaluated:we,isEvaluationApplicable:Re,isStudentEvaluationEnabled:re,isTeacherEvaluationEnabled:ie,isSharedWithStudent:m,onClickClose:this.toggleAssessmentTool,showAssessmentTool:!0,isScheduled:Ze,assessmentToolId:oe,assessmentTools:xe,commentMessage:ce.a.get(ve,[0,"message"],""),enableMultiAssessmentTools:Qe}),ee&&b.a.createElement(bt,{isParent:Ye,isRemovedCourseForLoggedInUser:I,isArchivedClass:M,isCurrentAcademicYear:H(),studentAssignmentId:r,conversationId:Ce,assignmentTitle:_,assessmentId:o,classDiscussion:i,unreadPrivateMessageCount:Je,isStudentEvaluationEnabled:c,isClassDiscussionEnabled:d,closeRightPane:this.closeRightPane,toggleFullscreenDiscussion:this.toggleFullscreenDiscussion,showFullscreenDiscussion:ee,isFullScreen:!0}),this.renderRightPane())}}]),t}(Be.a),na={createAttachmentGroupsV2:ee.w,deleteAttachmentGroups:ee.F,setToastMsg:ae.nb,editStudentAssignmentSubmission:te.editStudentAssignmentSubmission,updateUserMessageState:te.updateUserMessageState,goToRelativeRoute:ee.Ab,goToBack:Vt.h,getIsCurrentAcademicYear:ze.getIsCurrentAcademicYear},sa=Object(S.c)(Object(E.connect)((function(e,t){var a,n=ce.a.get(e,"platform.currentCurriculumProgram",{}).type,s=void 0===n?"":n,o=ce.a.get(e,"login.userInfo.userEntityType"),i=ce.a.get(e,"login.userInfo.org_id"),r=ce.a.get(Object(Yt.b)(window.location.search),"notificationType",""),l=t.gradeId||ce.a.get(e,"teacher.selected_class.selected_grades[0]","");if(l){var c=Object(Ht.B)(l);a=ce.a.get(c,"globalGrade.uid",null)}var u=Object(w.d)({assessmentDetails:{allFields:ce.a.get(t,"content.allFields")},curriculumProgramType:s});return{childID:ce.a.get(e,"login.userInfo.childID",""),userType:ce.a.get(e,"login.userInfo.user_type",""),userEntityType:o,organizationId:i,notificationType:r,rightPaneLineStyle:Xt.rightPaneLineStyle,grade:a,leHasPypEvaluation:u}}),na),Object(z.a)({resource:["common","classRoom","teacherHomePage"]}))(aa),oa=function(e){function t(){return i()(this,t),u()(this,m()(t).apply(this,arguments))}return g()(t,e),l()(t,[{key:"render",value:function(){return"staff"!==this.props.userType?b.a.createElement(sa,this.props):b.a.createElement(Ne,this.props)}}]),t}(b.a.PureComponent),ia=function(e,t){return"staff"===e||t?"ALL":"student"===e?"SELF":"STUDENT"},ra=Object(S.c)(Object(E.connect)((function(e,t){var a=e.login.userInfo.user_type,n=e.login.userInfo.id,s=t.params.studentAssignmentId,o=e.platform.currentCurriculumProgramType||"IB_PYP";return{isData:!0,isLoading:!1,assessmentId:t.params.classRoomId,studentAssignmentId:"staff"!==a?t.studentAssignmentIdWeb:s,isClassDiscussion:"classdiscussion"==s,currentTab:s,userType:a,userId:n,curriculumProgramType:o}}),{}),Object(S.d)(f.p,{skip:function(e){var t=e.studentAssignmentId,a=e.isClassDiscussion,n=e.userType;return a&&"staff"===n||!t},name:"getStudentAssignmenDetails",options:function(e){var t=e.studentAssignmentId,a=e.userType,n=e.assignedStudents,s=_.get(_.find(n,{id:t}),"isSharedWithStudent",!1);return{fetchPolicy:"cache-and-network",variables:{id:t,showOnlySubmitted:!1,userFilter:ia(a,s)}}},props:function(e){var t=e.getStudentAssignmenDetails,a=e.ownProps,n=a.studentAssignmentId,s=a.isData,o=a.isLoading,i=a.userType,r=a.assignedStudents,l=_.get(_.find(r,{id:n}),"isSharedWithStudent",!1),c=Object(T.p)({id:n,showOnlySubmitted:!1,userFilter:ia(i,l)}),u=_.get(c,"assignment.curriculumProgram.type","IB_PYP"),d=_.get(c,"assignment.curriculumProgram.id"),m=_.get(c,"assignment.course.grades[0]")||_.get(c,"assignment.course.grade",{}),p=_.get(m,"id");return{onPusherEventTriggered:function(e){e.studentAssignmentId==n&&t.refetch()},isData:!_.isEmpty(c)&&s,ibPYPElementRatings:_.get(c,"ibPYPElementRatings",[]),studentAssignmentData:c,isLoading:1==t.networkStatus||2==t.networkStatus||o,refetchGetStudentAssignmentDetails:t.refetch,curriculumProgramType:u,curriculumProgramId:d,gradeId:p}}}),Object(S.d)(y.a,{name:"getConversations",skip:function(e){var t=e.isClassDiscussion,a=e.userType,n=e.studentAssignmentData;return t&&"staff"===a||!_.get(n,"conversation")},withRef:!0,options:function(e){var t=e.studentAssignmentData.conversation;return{fetchPolicy:"cache-and-network",variables:Object(A.e)({id:_.get(t,"id"),showAllMessages:!0,showInstructionMessage:!1,extraFilters:{itemTypes:"STUDENT_ASSIGNMENT_SUBMISSION_FEEDBACK",messageStates:"UNREAD"}})}},props:function(e){var t=e.getConversations,a=e.ownProps,n=a.studentAssignmentData,o=a.isData,i=a.isLoading,r=a.parentId,l=a.parentType,c=a.refetchGetStudentAssignmentDetails,u=Object(I.a)(Object(A.e)({id:_.get(n,"conversation.id"),showAllMessages:!0,showInstructionMessage:!1,extraFilters:{itemTypes:"STUDENT_ASSIGNMENT_SUBMISSION_FEEDBACK",messageStates:"UNREAD"}})),d=s()(_.get(u,"messages.edges",[])).reverse(),m=_.get(n,"submission"),p=_.get(m,"attachmentGroups"),g=_.get(n,"post"),v=Object(w.v)({conversations:d,attachmentGroups:p});return{isData:!_.isEmpty(u)&&o,getConversations:t,networkStatus:t.networkStatus,post:g,attachmentResponseObject:v,onPusherEventTriggered:function(e){switch(e.event){case"studentAssignmentSubmitted":case"assignmentFeedUpdate":r==e.parentId&&l==e.parentType&&(t.refetch(),c());break;case"attachmentSimilarityReportUpdate":"STUDENT_ASSIGNMENT_SUBMISSION"===e.entityType&&_.get(m,"id")==e.entityId&&c()}},isLoading:1==t.networkStatus||2==t.networkStatus||i,refetchConversationQuery:t.refetch}}}),Object(h.a)(["studentAssignmentSubmitted","assignmentFeedUpdate","attachmentSimilarityReportUpdate"]),C.a)(oa);t.default=ra},6667:function(e,t,a){"use strict";a.r(t);var n=a(18),s=a.n(n),o=a(20),i=a.n(o),r=a(31),l=a.n(r),c=a(21),u=a.n(c),d=a(22),m=a.n(d),p=a(4),g=a.n(p),v=a(23),b=a.n(v),S=a(1),E=a.n(S),h=a(0),C=a.n(h),f=a(27),T=a(84),y=a(197),I=a(86),A=a(105),w=a(112),O=a(98),R=a(413),D=a(3876),N=a(902),k=a(1410),P=a(578),x=a(1183),M=a(80),L=a(6),B=a.n(L),j=a(13),F=a.n(j),U=a(19),H=a.n(U),V=a(3),W=a.n(V),G=a(6135),z=a.n(G),Y=a(848),q=a(1659),J=a(3877),K=a(1411),Z=a(6129),Q=a.n(Z),X=a(1649),$=a(41),ee=a(28),te=a.n(ee),ae=a(36),ne=a(1620),se=a(12),oe=a.n(se),ie=a(3775),re=a(667),le=a(11),ce=a(8),ue=a(9),de=a(118);function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var _e={buttonDropDownContainerStyle:{top:64,width:368},textStyle:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?me(Object(a),!0).forEach((function(t){E()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(ie.a)({lineHeight:1.4,lineCount:2}),{maxHeight:60}),buttonDropdownParentContainerStyle:{marginLeft:"16px"},btnDropDownItemStyle:{borderBottomColor:$.e.strokeOne},uiSegmentContainerStyle:{width:"auto"},editContainerStyle:{justifyContent:"center"},insightButtonStyle:{borderRadius:"8px",borderWidth:"1px",minWidth:"unset"},calendarButtonStyle:{borderRadius:"8px",minWidth:"114px",borderWidth:"1px",marginLeft:"16px"},selectedOptionStyle:{backgroundColor:$.e.salmon60,borderColor:$.e.salmon60},optionStyle:{padding:"10px 0",minWidth:"120px"},svgIconStyle:{marginRight:"16px"},createAssignmentButtonStyle:{marginLeft:"16px"}},pe=C.a.memo((function(e){var t,a=e.title,n=e.t,s=e.onAddItemClick,o=e.assignmentStateTab,i=e.onChangeAssignmnetStateTab,r=e.userType,l=e.goToRelativeRoute,c=e.userId,u=e.curriculumType,d=e.isCurrentAcademicYearSelected,m=e.isArchivedClass,p=e.course,g=_.get(p,"subjects.0.type",""),v=_.includes(["CAS","EE"],g),b=_.isEqual(r,"student"),S=_.isEqual(r,"parent"),h=_.isEqual(r,"staff"),f=(b||S)&&!ae.a.can("Common:ShowScheduleTaskInClassroom"),T=_.filter(O.ASSIGNMENT_STATE_TABS,(function(e){return!(f&&_.isEqual(_.get(e,"value",""),"SCHEDULED"))})),y=b||S,I=_.map(T,(function(e){return y?te()(e,{label:{$set:_.capitalize(_.trim(n(e.studentLabel)))}}):te()(e,{label:{$set:_.capitalize(_.trim(n(e.label)))}})})),A=u===ue.C?O.UBD_ASSIGNMENT_OPTIONS_NEW:u===ue.A||u===ue.z?O.MYP_ASSIGNMENT_OPTIONS_NEW:O.ASSIGNMENT_CREATE_OPTIONS_NEW,w=function(){l(h?{route:"insights"}:{route:"insights/".concat(c,"/details")})},R=!d||m,D=_.size(a)>25,N=oe()((t={},E()(t,Q.a.container,!0),E()(t,Q.a.middleContainer,f),t)),k=oe()(Q.a.titleText,"text-label-2"),P=oe()(Q.a.subTitleText,"heading-4");return C.a.createElement(C.a.Fragment,null,h&&"IB_PYP"==u&&ae.a.can("TeacherPortal:Community")&&C.a.createElement(X.a,{type:"IMPORT_LE_FROM_COMMUNITY_CLASSROOM",continuous:!0,params:{target:"#COACHMARKS_IMPORT_LE_FROM_COMMUNITY_CLASSROOM"},isTransparentOverlay:!0,onStepChanged:function(e){(e||{}).isDone&&s("IMPORT_LE_FROM_COMMUNITY","coachmark")}}),C.a.createElement("div",{className:N},C.a.createElement("div",{className:Q.a.leftContainer},C.a.createElement("div",{className:P},n("teacherHomePage:class_stream")),C.a.createElement(de.a,{condition:D,wrapper:C.a.createElement(le.Tooltip,{placement:"bottom",tooltip:a}),type:"wrapperAsElement"},C.a.createElement("div",{className:k},a))),C.a.createElement(le.SegmentControl,{options:I,value:o,onChange:function(e){i({filterType:"assignmentStateTab",filterValue:e})}}),C.a.createElement("div",{className:Q.a.rightContainer},C.a.createElement(ne.a,{perm:b?"Common:StudentClassroomInsights":"TeacherPortal:ClassroomInsights"},Object(re.j)()?C.a.createElement(le.IconButton,{icon:C.a.createElement(ce.InsightsSquareOutlined,null),size:"large",variant:"outlined-subtle",onClick:w}):C.a.createElement(le.Button,{onClick:w,variant:"outlined-subtle",size:"large",icon:C.a.createElement(ce.InsightsSquareOutlined,{variant:"subtle"})},n("classRoom:class_stream_insights"))),h?v?C.a.createElement(le.Button,{"data-test-id":"button-disclosure-classroom-new",icon:C.a.createElement(ce.AddOutlined,null),variant:"primary",size:"large",disabled:R,style:_e.createAssignmentButtonStyle,onClick:function(){return s("CREATE_QUICK_TASK")}},n("common:new_with_label",{label:n("common:task_label")})):C.a.createElement(le.Dropdown,{disabled:R,overlay:C.a.createElement(le.DropdownMenu,{options:Object(O.getDropdownOptions)({options:A,t:n}),onClick:function(e){return s(e.key)}})},C.a.createElement(le.ButtonDisclosure,{"data-test-id":"button-disclosure-classroom-new",id:"COACHMARKS_IMPORT_LE_FROM_COMMUNITY_CLASSROOM",icon:C.a.createElement(ce.AddOutlined,null),variant:"primary",size:"large",disabled:R,style:_e.createAssignmentButtonStyle},n("common:new"))):null)))}));pe.displayName="TopHeader";var ge=Object(T.c)(Object(R.a)({resource:["common","assessmentEvaluation","classRoom"]}),Object(f.connect)((function(e){var t=e.teacher.selected_class,a=Object(I.d)(t.selected_course);return{curriculumType:_.get(a,"curriculumProgram.type","IB_PYP"),isCurrentAcademicYearSelected:_.get(e,"platform.academicYearSelected.isCurrentAcademicYear",!0),isRemovedCourseForLoggedInUser:e.teacher.selected_class.isRemovedCourseForLoggedInUser,course:a}}),{}))(pe),ve=a(6131),be=a.n(ve),Se={searchBarContainer:{width:320,alignItems:"center"}},Ee=C.a.memo((function(e){var t=e.filters,a=e.updateFilters,n=e.t,s=e.filterOptions,o=e.showSearchFilter,i=e.containerStyle;return C.a.createElement("div",{className:be.a.container,style:i},C.a.createElement("div",{className:be.a.filterContainer},C.a.createElement("div",{className:be.a.leftContainer},o&&C.a.createElement("div",{style:Se.searchBarContainer},C.a.createElement(le.SearchInput,{placeholder:n("common:search_in_label",{label:n("classRoom:class_stream_text")}),onChange:function(e){return a({key:"searchText",value:e})},value:t.searchText,size:"medium"}))),C.a.createElement("div",{className:be.a.rightcontainer},_.map(s,(function(e){var n,s=e.key,o=e.options,i=e.label,r=null===(n=_.find(o,(function(e){return _.get(e,"key")===_.get(t,"".concat(s))})))||void 0===n?void 0:n.label;return"contentTypes"===s?null:C.a.createElement(le.Dropdown,{key:s,overlay:C.a.createElement(le.DropdownMenu,{options:o,onClick:function(e){a({key:s,value:_.get(e,"key")})}})},C.a.createElement(le.FilterLabelButton,{label:i,labelValue:r,size:"medium",variant:"plain"}))})))),t.searchText&&C.a.createElement("div",{className:be.a.searchText},n("common:search_result",{searchText:t.searchText})))}));Ee.displayName="FilterHeader";var he={updateFilters:O.updateFilters};Ee.defaultProps={showSearchFilter:!0},Ee.propTypes={showSearchFilter:W.a.bool};var Ce=Object(T.c)(Object(R.a)({resource:["classRoom","common"]}),Object(f.connect)((function(e,t){var a=e.teacher.selected_class;Object(I.d)(a.selected_course);return{filters:e.classRoom.filters}}),he))(Ee),fe=a(525),Te=a(6132),ye=a.n(Te),Ie=a(4634).b,Ae=a(25),we=a.n(Ae),Oe=a(4551),Re=a(45),De={maxWidth:"544px",lineHeight:"24px"},Ne=C.a.memo((function(e){var t=e.totalCount,a=e.t,n=e.onClickDelete,s=e.onClickEdit,o=e.onClickArchive,i=e.onClickCard,r=e.totalStudents,l=e.assignmentStateTab,c=e.assignmentsGroups,u=e.userType,d=e.filters,m=e.userId,p=e.currentCurriculumProgramType,g=e.isArchivedClass,v=e.totalNewSnpCycles,b=e.showTagSnpModal,S=e.genericTags,E=_.get(d,"createdBy","ALL"),h=O.CURRICULUM_WISE_ASSIGNMENT_TYPE_MAPPING[p],f=h.key,T=h.value,y=_.get(d,f,"ALL"),I="ALL"!=E||"ALL"!=y,A=Object(O.checkAreAllTasksInSameYearMemoized)({assignmentsGroups:c});return C.a.createElement("div",{className:ye.a.container},t>0?C.a.createElement(C.a.Fragment,null,I&&C.a.createElement("div",{className:ye.a.countText,dangerouslySetInnerHTML:{__html:function(){var e=_.get(T,"".concat(y,".typeLabel"),"");return"ALL"!=E&&"ALL"!=y?a("classRoom:showing_post_count_type_added_by_you",{count:t,type:a(e)}):"ALL"!=E?a("classRoom:showing_post_count_added_by_you",{count:t}):"ALL"!=y?a("classRoom:showing_post_count_type",{count:t,type:a(e)}):void 0}()}}),C.a.createElement("div",{className:ye.a.feedGroupWrapper},_.map(c,(function(e,t){return C.a.createElement("div",{key:t,className:ye.a.feedGroupCon},C.a.createElement("div",{className:ye.a.feedGroupDateText},A?we()(t,"YYYY-MM-DD").calendar():we()(t,"YYYY-MM-DD").format("DD MMM, YY")),"staff"==u?C.a.createElement("div",{className:ye.a.feedContainer},_.map(e,(function(e){return C.a.createElement(Ie,{userType:u,onClickCard:i,onClickEdit:s,onClickArchive:o,onClickDelete:n,assignment:e,key:e.id,totalStudents:r,assignmentStateTab:l,isArchivedClass:g,totalNewSnpCycles:v,showTagSnpModal:b,genericTags:S})}))):_.map(e,(function(e){return C.a.createElement(Oe.a,{key:_.get(e,"id"),assignment:e,onClickCard:i,userId:m})})))})))):C.a.createElement(le.EmptyState,{illustration:Re.NoSearchInFilterIllustration,title:a("common:noResultHeading"),subtitle:a("common:no_posts_matching_your_search"),subtitleStyle:De}))}));Ne.displayName=Ne;var ke=Object(T.c)(Object(R.a)({resource:["common","classRoom"]}),Object(f.connect)((function(e,t){var a=e.platform.currentCurriculumProgramType;return{filters:e.classRoom.filters,userId:e.login.userInfo.id,currentCurriculumProgramType:a}})),N.a)(Ne),Pe=a(6130),xe=a.n(Pe),Me=function(e){var t=e.stateWiseCount,a=e.assignmentStateTab;return _.get(_.find(t,(function(e){return e.state==a})),"count",0)},Le=C.a.memo((function(e){var t=e.t,a=e.classroomFolders,n=e.assignmentStateTab,s=e.stateWiseCount,o=e.folderTopic,i=e.onChangeFolderTopic,r=e.onManageFolderClicked,l=e.userType,c=e.isArchivedClass,u=Me({stateWiseCount:s,assignmentStateTab:n}),d=oe()(E()({},xe.a.tab,!0),E()({},xe.a.activeTab,"ALL"==o)),m=function(e){return oe()(E()({},xe.a.tab,!0),E()({},xe.a.activeTab,o==e))},p=function(e){i({filterType:"folderTopic",filterValue:e})};return C.a.createElement("div",{className:xe.a.folderSoidebarCon},C.a.createElement("div",{className:xe.a.folderInnerContainer},C.a.createElement("div",{className:xe.a.headerCon},C.a.createElement("div",{className:xe.a.headerLabel},t("classRoom:folder_topics")),"staff"==l&&C.a.createElement(le.IconButton,{disabled:c,onClick:r,variant:"plain",icon:C.a.createElement(ce.SettingsOutlined,{size:"xxx-small"}),size:"small"})),C.a.createElement("div",{key:"All",className:d,onClick:function(){return p("ALL")}},C.a.createElement("div",{className:xe.a.folderIcon},C.a.createElement(ce.FolderFilled,{style:{color:$.e.blue68},size:"x-small"}),C.a.createElement("span",{className:xe.a.folderName},t("common:all"))),C.a.createElement("div",{className:xe.a.countContainer},u)),_.map(a,(function(e){var t=e.id,a=e.name,s=e.color,o=e.typeDetails.stateWiseCount,i=Me({stateWiseCount:o,assignmentStateTab:n});return C.a.createElement("div",{key:t,className:m(t),onClick:function(){return p(t)}},C.a.createElement("div",{className:xe.a.folderIcon},C.a.createElement(ce.FolderFilled,{style:{color:s},size:"x-small"}),C.a.createElement(de.a,{condition:_.size(a)>16,wrapper:C.a.createElement(le.Tooltip,{tooltip:a,placement:"bottom"}),type:"wrapperAsElement"},C.a.createElement("span",{className:xe.a.folderName},a))),C.a.createElement("div",{className:xe.a.countContainer},i))}))))})),Be=Object(T.c)(Object(R.a)({resource:["classRoom","common"]}))(Le),je=a(2041),Fe=a(3780),Ue=a(3800),He=a(6134),Ve=a(170),We=a(26),Ge=a(15),ze=a(93),Ye=a(3912),qe=a(66),Je=a(6532),Ke=a(55),Ze=a(83),Qe=a(1188),Xe=a(3890);function $e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function et(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(a),!0).forEach((function(t){E()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$e(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var tt={},at={headerStyles:{fontSize:"2rem",padding:"24px 16px 16px 32px"},modalBodyStyle:et({fontSize:"1.6rem",padding:"16px 32px",lineHeight:"2.4rem",color:$.e.textDefault},Re.fontStyles.medium),footerContainerStyle:{padding:"32px"}},nt={DELETE:{title:"classRoom:delete_assignment",message:function(e){return e("classRoom:delete_assignment_msg")},confirmButtonText:"common:delete_agree",cancelButtonText:"common:agree_cancel"}},st=_.memoize((function(e){return Object(O.getQueryFilters)(e)}),(function(e){return JSON.stringify(e)})),ot=function(e){function t(e){var a;return i()(this,t),a=u()(this,m()(t).call(this,e)),E()(g()(a),"componentDidMount",(function(){a.props.setActiveTab("classroom")})),E()(g()(a),"componentDidUpdate",(function(e){!_.isEqual(e.filters,a.props.filters)&&a.scrollContainer&&(a.scrollContainer.scrollTop=0)})),E()(g()(a),"componentWillUnmount",(function(){a.props.initFilters()})),E()(g()(a),"onAddItemClick",function(){var e=F()(B.a.mark((function e(t,n){var s,o,i,r,l,c,u,d,m;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a.props,o=s.t,i=s.checkCommunityActiveStatusAndGoToOnboarding,r=s.courseId,l=s.curriculumProgramType,c=s.createAssessment,u=s.course,a.assignmentModalData.mode="create",a.assignmentModalData.creationMode=t,e.t0=t,e.next="CREATE_LE"===e.t0?6:"IMPORT_LE"===e.t0?10:"IMPORT_LE_FROM_COMMUNITY"===e.t0?14:"IMPORT_LE_FROM_LE_LIBRARY"===e.t0?29:"CREATE_QUICK_TASK"===e.t0?33:"CREATE_DISCUSSION"===e.t0?43:"SCHEDULE_VIDEO_CALL"===e.t0?47:"CREATE_SA"===e.t0?51:"CREATE_FA"===e.t0?55:"CREATE_ASSESSMENT"===e.t0?59:"UNIT"===e.t0?63:67;break;case 6:return a.assignmentModalData.steps=[{label:o("common:select_with_label",{label:o("common:unit")}),value:"LE_CREATE_UNIT_SELECTION",heading:o("common:select_with_label",{label:o("common:unit")})},{label:o("classRoom:assessment_details",{label:o("common:le_label")}),value:"LE_CREATION",heading:o("classRoom:assessment_details",{label:o("common:le_label")})},{label:o("classRoom:post_settings"),value:"SETTINGS",heading:o("classRoom:post_settings"),subHeading:o("classRoom:classes_discussion_shared_with")}],a.assignmentModalData.contentType="ASSESSMENT",a.assignmentModalData.createHeader=o("classRoom:create_le"),e.abrupt("break",67);case 10:return a.assignmentModalData.steps=[{label:o("common:select_with_label",{label:o("common:unit")}),value:"UNIT_SELECTION",heading:o("common:select_with_label",{label:o("common:unit")})},{label:o("common:select_with_label",{label:o("common:lowercase",{text:o("common:le_label")})}),value:"LE_SELECTION",heading:o("common:select_with_label",{label:o("common:lowercase",{text:o("common:le_label")})})},{label:o("common:edit_with_label",{label:o("community:learning_experience")}),value:"ASSESSMENT_DETAILS"},{label:o("classRoom:post_settings"),value:"SETTINGS",heading:o("classRoom:post_settings"),subHeading:o("classRoom:classes_discussion_shared_with")}],a.assignmentModalData.contentType="ASSESSMENT",a.assignmentModalData.createHeader=o("classRoom:assign_from_unit"),e.abrupt("break",67);case 14:return a.setState({isLoading:!0}),tt={entity_id:r,entity_type:"COURSE",source:"community",target:n},qe.f({eventName:"Clicked import le",eventData:tt}),e.next=19,i({isForced:!0,openOnBoarding:!1,isNetworkOnly:!0});case 19:if(m=e.sent,a.setState({isLoading:!1}),m){e.next=24;break}return a.setState({showJoinCommunityModal:!0}),e.abrupt("return");case 24:return tt={},a.assignmentModalData.steps=[{label:o("common:select_with_label",{label:o("common:lowercase",{text:o("common:le_label")})}),value:"COMMUNITY_LE_SELECTION",heading:o("common:select_with_label",{label:o("common:lowercase",{text:o("common:le_label")})})},{label:o("common:edit_with_label",{label:o("community:learning_experience")}),value:"ASSESSMENT_DETAILS"},{label:o("classRoom:post_settings"),value:"SETTINGS",heading:o("classRoom:post_settings"),subHeading:o("classRoom:classes_discussion_shared_with")}],a.assignmentModalData.contentType="ASSESSMENT",a.assignmentModalData.createHeader=o("classRoom:assign_from_community"),e.abrupt("break",67);case 29:return a.assignmentModalData.steps=[{label:o("common:select_with_label",{label:o("common:lowercase",{text:o("common:post")})}),value:"LE_LIBRARY_LE_SELECTION",heading:o("common:select_with_label",{label:o("common:lowercase",{text:o("common:post")})})},{label:o("common:edit_with_label",{label:o("common:post")}),value:"ASSESSMENT_DETAILS"},{label:o("classRoom:post_settings"),value:"SETTINGS",heading:o("classRoom:post_settings"),subHeading:o("classRoom:classes_discussion_shared_with")}],a.assignmentModalData.contentType="ASSESSMENT",a.assignmentModalData.createHeader=_.isEqual(l,ue.B)?o("common:assign_from_learning_experience_library"):o("common:assign_from_learning_experience_&_assessment_library"),e.abrupt("break",67);case 33:return a.setState({isLoading:!0}),e.next=36,c({unitPlanObj:{unitPlanId:-1},academicYears:_.map(_.get(u,"academicYears",[]),(function(e){return e.id})),assessmentType:"qt",groupType:"QUICK_TASK"});case 36:return d=e.sent,a.setState({clonedAssessmentId:d}),a.setState({isLoading:!1}),a.assignmentModalData.steps=[{label:o("common:description"),value:"QT_CREATION",heading:o("classRoom:share_resources"),subHeading:o("classRoom:placeholder_for_subtext")},{label:o("classRoom:post_settings"),value:"SETTINGS",heading:o("classRoom:post_settings"),subHeading:o("classRoom:classes_discussion_shared_with")}],a.assignmentModalData.contentType="ASSESSMENT",a.assignmentModalData.createHeader=o("classRoom:create_a_quick_task"),e.abrupt("break",67);case 43:return a.assignmentModalData.steps=[{label:o("common:details"),value:"DISCUSSION_CREATION",heading:o("classRoom:initiate_a_classroom_discussion"),subHeading:o("classRoom:student_response_to_discussion_prompts")},{label:o("classRoom:post_settings"),value:"SETTINGS",heading:o("classRoom:post_settings"),subHeading:o("classRoom:classes_discussion_shared_with")}],a.assignmentModalData.contentType="ASSIGNMENT_DISCUSSION",a.assignmentModalData.createHeader=o("classRoom:intiate_a_new_discussion"),e.abrupt("break",67);case 47:return a.assignmentModalData.steps=[{value:"SCHEDULE_CALL_SETTINGS",label:o("common:schedule_video_call")}],a.assignmentModalData.contentType="ASSIGNMENT_MEETING",a.assignmentModalData.createHeader=o("common:schedule_video_call"),e.abrupt("break",67);case 51:return a.assignmentModalData.steps=[{label:o("common:select_with_label",{label:o("common:unit")}),value:"SMT_CREATE_UNIT_SELECTION",heading:o("common:select_with_label",{label:o("common:unit")})},{label:o("classRoom:assessment_details",{label:o("common:summative_assessment")}),value:"SMT_CREATION",heading:o("classRoom:assessment_details",{label:o("common:summative_assessment")})},{label:o("classRoom:post_settings"),value:"SETTINGS",heading:o("classRoom:post_settings"),subHeading:o("classRoom:classes_discussion_shared_with")}],a.assignmentModalData.contentType="ASSESSMENT",a.assignmentModalData.createHeader=o("classRoom:create_sa"),e.abrupt("break",67);case 55:return a.assignmentModalData.steps=[{label:o("common:select_with_label",{label:o("common:unit")}),value:"FMT_CREATE_UNIT_SELECTION",heading:o("common:select_with_label",{label:o("common:unit")})},{label:o("classRoom:assessment_details",{label:o("common:formative_assessment")}),value:"FMT_CREATION",heading:o("classRoom:assessment_details",{label:o("common:formative_assessment")})},{label:o("classRoom:post_settings"),value:"SETTINGS",heading:o("classRoom:post_settings"),subHeading:o("classRoom:classes_discussion_shared_with")}],a.assignmentModalData.contentType="ASSESSMENT",a.assignmentModalData.createHeader=o("classRoom:create_fa"),e.abrupt("break",67);case 59:return a.assignmentModalData.steps=[{label:o("common:select_with_label",{label:o("common:unit")}),value:"ASSESSMENT_CREATE_UNIT_SELECTION",heading:o("common:select_with_label",{label:o("common:unit")})},{label:o("common:create_with_label",{label:o("common:lowercase",{text:o("common:assessment")})}),value:"ASSESSMENT_CREATION",heading:{label:o("common:lowercase",{text:o("common:assessment")})}},{label:o("classRoom:post_settings"),value:"SETTINGS",heading:o("classRoom:post_settings"),subHeading:o("classRoom:classes_discussion_shared_with")}],a.assignmentModalData.contentType="ASSESSMENT",a.assignmentModalData.createHeader=o("classRoom:create_assessment_classroom"),e.abrupt("break",67);case 63:return a.assignmentModalData.steps=[{label:o("common:select_with_label",{label:o("common:unit")}),value:"UNIT_SELECTION",heading:o("common:select_with_label",{label:o("common:unit")})},{label:o("common:select_post"),value:"SELECT_POST",heading:"common:select_post"},{label:o("common:edit_post"),value:"ASSESSMENT_DETAILS",heading:"common:edit_post"},{label:o("classRoom:post_settings"),value:"SETTINGS",heading:o("classRoom:post_settings"),subHeading:o("classRoom:classes_discussion_shared_with")}],a.assignmentModalData.contentType="ASSESSMENT",a.assignmentModalData.createHeader=o("classRoom:assign_from_unit"),e.abrupt("break",67);case 67:"SCHEDULE_VIDEO_CALL"===t?a.setState({showScheduleEventModal:!0}):a.setState({showAddAssignmentModal:!0});case 68:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),E()(g()(a),"onClickEdit",function(){var e=F()(B.a.mark((function e(t){var n,s,o,i,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=(n=t||{}).id,o=n.contentType,i=a.props.t,r=Object(Ke.K)({t:i,assignment:t}),a.assignmentModalData=et({},r,{mode:"edit",contentType:o,id:s}),a.setState({showAddAssignmentModal:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E()(g()(a),"onClickArchive",function(){var e=F()(B.a.mark((function e(t){var n,s,o,i,r,l;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,s=t.state,o=a.props,i=o.updateStateForAssignment,r=o.setToastMsg,l="PUBLISHED"==s?"ARCHIVED":"PUBLISHED",a.setState({isLoading:!0}),e.prev=4,e.next=7,i({id:n,state:l});case 7:r("ARCHIVED"!==l?{msg:"toastMsgs:post_moved_ongoing",type:"success"}:{msg:"toastMsgs:action_successfully",locale_params:[{key:"label",value:"common:post",isPlainText:!1},{key:"action",value:"toastMsgs:archived",isPlainText:!1}],type:"success"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),e.t0.networkError?r("toastMsgs:no_internet_connection"):r("toastMsgs:something_went_wrong");case 13:return e.prev=13,a.setState({isLoading:!1}),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[4,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()),E()(g()(a),"onCloseAddAssignmentModal",(function(){a.setState({showAddAssignmentModal:!1}),a.setState({showScheduleEventModal:!1}),a.assignmentModalData.steps=[]})),E()(g()(a),"handleScroll",(function(e){var t=e.target,n=a.props,s=n.hasNextPage,o=n.networkStatus,i=n.loadMoreFeed;t&&s&&3!=o&&Object(Fe.a)(t)&&i()})),E()(g()(a),"onClickDelete",(function(e){a.setState({currentDialogAction:"DELETE"}),a.currentDialogItem=e})),E()(g()(a),"onClickCard",function(){var e=F()(B.a.mark((function e(t){var n,s,o,i,r,l,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.assignmentId,t.state,s=t.contentType,o=t.meeting,i=a.props,i.setToastMsg,r=i.goToRelativeRoute,l=i.userId,"ASSIGNMENT_RESOURCE"==s&&window.location.reload(),"ASSIGNMENT_MEETING"==s?(c=Object(Ue.a)({meeting:o,userId:l}))&&window.open(c,"_blank"):r({route:"./classroom-details/".concat(n),type:"push"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E()(g()(a),"_refetchUpcomingEvents",(function(){var e=a.props.refetchUpcomingEvents;"ASSIGNMENT_MEETING"==a.assignmentModalData.contentType&&e&&e()})),E()(g()(a),"onDialogConfirmClick",F()(B.a.mark((function e(){var t,n,s,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.state.currentDialogAction,n=a.props,s=n.deleteAssignment,o=n.setToastMsg,e.t0=t,e.next="DELETE"===e.t0?5:20;break;case 5:return a.setState({isLoading:!0}),e.prev=6,e.next=9,s(a.currentDialogItem.id);case 9:a._refetchUpcomingEvents(),o({msg:"toastMsgs:action_successfully",locale_params:[{key:"label",value:"common:post",isPlainText:!1},{key:"action",value:"toastMsgs:delete",isPlainText:!1}],type:"success"}),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(6),e.t1.networkError?o("toastMsgs:no_internet_connection"):o("toastMsgs:something_went_wrong");case 16:return e.prev=16,a.setState({isLoading:!1}),e.finish(16);case 19:return e.abrupt("break",20);case 20:case"end":return e.stop()}}),e,null,[[6,13,16,19]])})))),E()(g()(a),"OnToggleDialogueClick",(function(){a.setState({currentDialogAction:""}),a.currentDialogItem={}})),E()(g()(a),"onManageFolderClicked",(function(){(0,a.props.goToRelativeRoute)({route:"manageFolders"})})),E()(g()(a),"onCloseJoinCommunityModal",(function(){a.setState({showJoinCommunityModal:!1}),tt={}})),E()(g()(a),"openTagSnpModalV2",(function(e){var t=e.tagSnpAssignmentData;a.setState({tagSnpAssignmentData:t})})),E()(g()(a),"closeTagSnpModalV2",(function(){a.setState({tagSnpAssignmentData:{}})})),E()(g()(a),"renderTagSnpModalV2Element",(function(){var e,t=a.props,n=t.curriculumProgramId,s=t.filters,o=a.state.tagSnpAssignmentData,i=null!==(e=null===o||void 0===o?void 0:o.taggedPractices)&&void 0!==e?e:[],r=_.get(o,"content.assessmentType.value","")||_.get(o,"contentType","")||"ASSESSMENT",l=_.get(o,"content.title.value","")||_.get(o,"content.assignmentTitle","")||"",c=_.pick(Object(O.getQueryFilters)({filters:s}),"unreadMessageCountFilters");return C.a.createElement(Xe.a,{itemGroupType:ue.Nb,itemType:r,itemTitle:l,taggedPractices:i,curriculumProgramId:n,closeModal:a.closeTagSnpModalV2,thumbnailData:{},itemId:o.id,assignmentFeedFilters:c})})),a.state={showAddAssignmentModal:!1,showScheduleEventModal:!1,currentDialogAction:"",isLoading:!1,showJoinCommunityModal:!1,clonedAssessmentId:"",tagSnpAssignmentData:{}},a.currentDialogItem={},a.assignmentModalData={},a}return b()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.course,n=t.t,s=t.totalCount,o=t.stateWiseCount,i=t.filters,r=t.isFilteredData,l=t.isLoading,c=t.userId,u=t.networkStatus,d=t.classroomFolders,m=t.assignmentsGroups,p=t.genericTags,g=t.userType,v=t.startingSoonAssignments,b=t.totalStartingSoonAssignmentsCount,S=t.goToRelativeRoute,E=t.onUpdateFiltersLocally,h=t.curriculumProgramType,f=t.isArchivedClass,T=t.isRemovedCourseForLoggedInUser,y=t.totalNewSnpCycles,I=i.assignmentStateTab,A=i.folderTopic,w=_.map(_.get(a,"students.edges",[]),(function(e){return e.node})),R=this.state,D=R.showAddAssignmentModal,N=R.showScheduleEventModal,k=R.currentDialogAction,P=R.isLoading,x=R.showJoinCommunityModal,M=R.clonedAssessmentId,L=R.tagSnpAssignmentData,B=function(e){var t=e.t,a=e.userId,n=e.curriculumProgramType,s=Object(Ke.t)({t:t,curriculumProgramType:n});return _.compact([{key:"createdBy",label:t("common:added_by"),options:[{key:"ALL",label:t("common:all")},{key:a,label:t("common:me")}]},!_.isEmpty(s)&&{key:_.get(O.CURRICULUM_WISE_ASSIGNMENT_TYPE_MAPPING,"".concat(n,".key"),""),label:t("common:type"),options:[{label:t("common:all"),value:"ALL"}].concat(H()(s))}])}({t:n,userId:c,curriculumProgramType:h}),j=b>0&&!f&&!T&&C.a.createElement("div",{className:z.a.startingSoonFeedCon},C.a.createElement("div",{className:z.a.ssfLabel},n("common:starting_soon")),_.map(v,(function(e){var t=_.get(e,"eventId",""),a=_.get(e,"content.meeting",{}),n=_.get(e,"content.assignmentTitle",""),s=_.get(e,"state.publishedAt","");return C.a.createElement(Je.a,{key:t,eventId:t,meetingTitle:n,meeting:a,meetingScheduledAt:s})}))),F=_.isEmpty(st({filters:_.omit(i,["assignmentStateTab"])})),U=nt[k];return C.a.createElement("div",{className:z.a.container},C.a.createElement(ge,{userType:g,title:a.title,onAddItemClick:this.onAddItemClick,assignmentStateTab:I,onChangeAssignmnetStateTab:E,goToRelativeRoute:S,isArchivedClass:f}),C.a.createElement("div",{className:z.a.innerContainer},C.a.createElement(Be,{userType:g,onManageFolderClicked:this.onManageFolderClicked,classroomFolders:d,assignmentStateTab:I,stateWiseCount:o,folderTopic:A,onChangeFolderTopic:E,isArchivedClass:f}),0==s&&F?C.a.createElement("div",{className:z.a.scrollContainer},C.a.createElement("div",{className:z.a.feedCardCon},j,C.a.createElement(le.EmptyState,{illustration:Re.NothingAssignedIllustration,title:n("classRoom:nothing_here_yet"),subtitle:n("classRoom:create_first_post_emptyText")}))):C.a.createElement("div",{className:z.a.scrollContainer,ref:function(t){return e.scrollContainer=t},onScroll:this.handleScroll},C.a.createElement("div",{className:z.a.feedCardCon},C.a.createElement(Ce,{filterOptions:B}),j,C.a.createElement(ke,{userType:g,userId:c,onClickCard:this.onClickCard,onClickDelete:this.onClickDelete,onClickEdit:this.onClickEdit,onClickArchive:this.onClickArchive,assignmentsGroups:m,totalCount:s,isData:r,isLoading:l,totalStudents:w,assignmentStateTab:I,isArchivedClass:f,totalNewSnpCycles:y,showTagSnpModal:this.openTagSnpModalV2,genericTags:p}),3==u&&C.a.createElement("div",{className:z.a.loadingContainer},C.a.createElement(Y.a,null))))),D&&C.a.createElement(q.a,{isOpen:!0,isFullScreen:!0},C.a.createElement(fe.a,{course:a,courseId:a.id,courseTitle:a.title,mode:this.assignmentModalData.mode,creationMode:this.assignmentModalData.creationMode,steps:this.assignmentModalData.steps,assignmentId:this.assignmentModalData.id,contentType:this.assignmentModalData.contentType,createHeader:this.assignmentModalData.createHeader,editHeaderText:this.assignmentModalData.editHeaderText,creationSource:"CLASSROOM",onClose:this.onCloseAddAssignmentModal,refetchUpcomingEvents:this._refetchUpcomingEvents,clonedAssessmentId:M,subjects:_.get(a,"subjects",[]),grades:_.get(a,"grades",[]),onChangeAssignmentStateTab:E})),N?C.a.createElement(q.a,{isOpen:!0,isFullScreen:!0},C.a.createElement(je.a,{courseId:a.id,onClickDiscard:this.onCloseAddAssignmentModal,mode:this.assignmentModalData.mode,assignmentId:this.assignmentModalData.id,createHeader:this.assignmentModalData.createHeader,selectedTimeSlot:{},showAddClassButton:!0,refetchUpcomingEvents:this._refetchUpcomingEvents})):null,!!k&&C.a.createElement(J.a,{modalTitle:n(null===U||void 0===U?void 0:U.title),showModal:!0,onClickButton2:this.onDialogConfirmClick,modalBody:null===U||void 0===U?void 0:U.message(n),toggleDialogueBoxDisplay:this.OnToggleDialogueClick,button1:n(null===U||void 0===U?void 0:U.cancelButtonText)||n("common:cancel"),button2:n(null===U||void 0===U?void 0:U.confirmButtonText),headerStyles:at.headerStyles,modalBodyStyle:at.modalBodyStyle,footerContainerStyle:at.footerContainerStyle,size:"sm",closeButtonSize:"medium",button1Props:{variant:"outlined-subtle",size:"large"},button2Props:{size:"large"}}),P&&C.a.createElement(K.a,null),x&&C.a.createElement(Ye.a,{onClose:this.onCloseJoinCommunityModal,eventData:tt}),!_.isEmpty(L)&&this.renderTagSnpModalV2Element())}}]),t}(C.a.PureComponent),it=Object(T.c)(Object(T.d)(A.h,{name:"getCourseAssignmentFeed",options:function(e){var t=e.courseId,a=e.filters;return{fetchPolicy:"cache-and-network",variables:et({courseId:t},st({filters:a}))}},props:function(e){var t=e.getCourseAssignmentFeed,a=e.ownProps,n=a.courseId,s=a.filters,o=a.isData,i=a.isLoading,r=a.orderByDateKey,l=Object(w.h)(et({courseId:n},st({filters:s}))),c=_.get(l,"assignments.edges",[]),u=_.get(l,"assignments.totalCount",0),d=_.get(l,"genericTags",[]),m=_.map(c,(function(e){var t=e.node;return et({},t,E()({},r,_.get(t,"state.".concat(r))))})),p=Object(He.a)({items:m,groupBy:"day",groupByKey:r});return{onPusherEventTriggered:function(e){e.courseId==n&&t.refetch()},isData:!_.isEmpty(Object(w.h)(et({courseId:n},st({filters:O.initialState.filters}))))&&o,genericTags:d,assignmentsGroups:p,totalCount:u,hasNextPage:_.get(l,"assignments.pageInfo.hasNextPage",!1),isFilteredData:!_.isEmpty(l),networkStatus:t.networkStatus,isLoading:1==t.networkStatus||2==t.networkStatus||i,loadMoreFeed:function(){return t.fetchMore({query:A.h,variables:et({courseId:n,after:_.get(t.node,"assignments.pageInfo.endCursor","")},st({filters:s})),updateQuery:function(e,t){var a=t.fetchMoreResult,n=e.node.assignments,s=a.node.assignments,o=n.edges,i=s.edges,r=n.pageInfo,l=s.pageInfo,c=l.endCursor,u=l.hasNextPage;return et({},e,{node:et({},e.node,{assignments:et({},n,{edges:[].concat(H()(o),H()(i)),pageInfo:et({},r,{endCursor:c,hasNextPage:u})})})})}})}}}}),Object(D.a)(["assignmentFeedUpdate","studentAssignmentSubmitted"]),Qe.a,N.a)(ot),rt={deleteAssignment:O.deleteAssignment,goToRelativeRoute:We.Ab,setActiveTab:Ve.setActiveTab,initFilters:O.initFilters,updateStateForAssignment:O.updateStateForAssignment,setToastMsg:Ge.nb,checkCommunityActiveStatusAndGoToOnboarding:ze.checkCommunityActiveStatusAndGoToOnboarding,createAssessment:Ze.createAssessment},lt=function(e){function t(e){return i()(this,t),u()(this,m()(t).call(this,e))}return b()(t,e),l()(t,[{key:"render",value:function(){return C.a.createElement(C.a.Fragment,null,this.props.children&&C.a.createElement(q.a,{isOpen:!0,isFullScreen:!0},C.a.cloneElement(this.props.children,{parentType:"CLASSROOM"})),C.a.createElement(it,this.props))}}]),t}(C.a.PureComponent),ct=Object(T.c)(Object(R.a)({resource:["teacherHomePage","common","classRoom","toastMsgs","community"]}),Object(f.connect)((function(e,t){var a=e.platform.currentCurriculumProgramType,n=_.get(e,"login.userInfo.org_id",""),s=_.get(e,"platform.organizationCurriculumPrograms",[]),o=_.get(_.find(s,(function(e){return e.type===a})),"id","");return{curriculumProgramType:a,organizationId:n,curriculumProgramId:o,isData:!0,isLoading:!1,isArchivedClass:_.get(e,"teacher.selected_class.isArchivedClass"),isRemovedCourseForLoggedInUser:_.get(e,"teacher.selected_class.isRemovedCourseForLoggedInUser"),loginActiveTab:_.get(e,"login.activeTab","")}}),rt))(lt);lt.defaultProps={totalNewSnpCycles:0},lt.propTypes={totalNewSnpCycles:W.a.number};var ut=ct,dt=a(6128),mt=a.n(dt),_t=a(2217);function pt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function gt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(a),!0).forEach((function(t){E()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var vt={marginBottom:"36px"},bt=_.memoize((function(e){return Object(O.getFamilyStudentFeedQueryFilters)(e)}),(function(e){return JSON.stringify(e)})),St=function(e){function t(e){var a;return i()(this,t),a=u()(this,m()(t).call(this,e)),E()(g()(a),"componentDidMount",(function(){a.props.setActiveTab("classroom")})),E()(g()(a),"componentDidUpdate",(function(e){!_.isEqual(e.filters,a.props.filters)&&a.scrollContainer&&(a.scrollContainer.scrollTop=0)})),E()(g()(a),"componentWillUnmount",(function(){a.props.initFilters()})),E()(g()(a),"onClickArchive",function(){var e=F()(B.a.mark((function e(t){var n,s,o,i,r,l;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,s=t.state,o=a.props,i=o.updateStateForAssignment,r=o.setToastMsg,l="ARCHIVED"!=s?"ARCHIVED":"PUBLISHED",a.setState({isLoading:!0}),e.prev=4,e.next=7,i({id:n,state:l});case 7:r({msg:"toastMsgs:action_successfully",locale_params:[{key:"label",value:"common:post",isPlainText:!1},{key:"action",value:"ARCHIVED"==l?"assessmentEvaluation:mark_as_completed":"assessmentEvaluation:mark_as_uncompleted",isPlainText:!1}],type:"success"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),e.t0.networkError?r("toastMsgs:no_internet_connection"):r("toastMsgs:something_went_wrong");case 13:return e.prev=13,a.setState({isLoading:!1}),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[4,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()),E()(g()(a),"handleScroll",(function(e){var t=e.target,n=a.props,s=n.hasNextPage,o=n.networkStatus,i=n.loadMoreStudents;t&&s&&3!=o&&Object(Fe.a)(t)&&i()})),E()(g()(a),"onClickCard",(function(e){var t=e.assignmentId,n=e.contentType,s=e.meeting,o=a.props,i=o.goToRelativeRoute,r=o.userId;if("ASSIGNMENT_MEETING"==n){var l=Object(Ue.a)({meeting:s,userId:r});l&&window.open(l,"_blank")}else i({route:"./classroom-details/".concat(t),type:"push"})})),a.state={isLoading:!1},a}return b()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.course,n=t.t,s=t.totalCount,o=t.stateWiseCount,i=t.filters,r=t.isFilteredData,l=t.isLoading,c=t.networkStatus,u=t.classroomFolders,d=t.assignmentsGroups,m=t.userType,p=t.totalStartingSoonAssignmentsCount,g=t.startingSoonAssignments,v=t.goToRelativeRoute,b=t.userId,S=t.onUpdateFiltersLocally,E=t.currentCurriculumProgramType,h=t.isArchivedClass,f=t.isRemovedCourseForLoggedInUser,T=i.assignmentStateTab,y=i.folderTopic,I=_.map(_.get(a,"students.edges",[]),(function(e){return e.node})),A=this.state.isLoading,w=p>0&&!h&&!f?C.a.createElement("div",{className:mt.a.startingSoonFeedCon},C.a.createElement("div",{className:mt.a.ssfLabel},n("common:starting_soon")),_.map(g,(function(e){var t=_.get(e,"eventId",""),a=_.get(e,"content.meeting",{}),n=_.get(e,"content.assignmentTitle",""),s=_.get(e,"state.publishedAt","");return C.a.createElement(Je.a,{key:t,eventId:t,meetingTitle:n,meeting:a,meetingScheduledAt:s})}))):null,R="SCHEDULED"!=T&&function(e){var t=e.t,a=e.assignmentStateTab,n=e.currentCurriculumProgramType,s=Object(Ke.t)({t:t,currentCurriculumProgramType:n});return _.compact([{key:"status",label:t("common:status"),options:[{key:"ALL",label:t("common:all")}].concat(H()(_.map(_.filter(O.STUDENT_FEED_STATUS,(function(e){return"ARCHIVED"==a||"EVALUATED"!=e.value&&"COMPLETED"!=e.value})),(function(e){var a=e.label;return{key:e.value,label:t(a)}}))))},!_.isEmpty(s)&&{key:_.get(O.CURRICULUM_WISE_ASSIGNMENT_TYPE_MAPPING,"".concat(n,".key"),""),label:t("common:type"),options:[{key:"ALL",label:t("common:all")}].concat(H()(s))}])}({t:n,assignmentStateTab:T,currentCurriculumProgramType:E}),D=oe()(mt.a.feedCardCon,mt.a.noDataCon);return C.a.createElement("div",{className:mt.a.container},C.a.createElement(ge,{userType:m,title:a.title,assignmentStateTab:T,onChangeAssignmnetStateTab:S,goToRelativeRoute:v,userId:b}),C.a.createElement("div",{className:mt.a.innerContainer},C.a.createElement(Be,{userType:m,classroomFolders:u,assignmentStateTab:T,stateWiseCount:o,folderTopic:y,onChangeFolderTopic:S}),0==s&&2!==c&&_.isEmpty(bt({filters:_.omit(i,["assignmentStateTab"])}))?C.a.createElement("div",{className:mt.a.scrollContainer},C.a.createElement("div",{className:D},"parent"!==m&&w,C.a.createElement(_t.a,{isSearch:!1,emptyHeaderText:n("classRoom:nothing_here_yet"),emptyText:n("classRoom:no_classroom_work")}))):C.a.createElement("div",{className:mt.a.scrollContainer,ref:function(t){return e.scrollContainer=t},onScroll:this.handleScroll},C.a.createElement("div",{className:mt.a.feedCardCon},C.a.createElement(Ce,{filterOptions:R,containerStyle:vt}),"parent"!==m&&w,C.a.createElement(ke,{userType:m,onClickCard:this.onClickCard,onClickArchive:this.onClickArchive,assignmentsGroups:d,totalCount:s,isData:r,isLoading:l,totalStudents:I,assignmentStateTab:T}),3==c&&C.a.createElement("div",{className:mt.a.loadingContainer},C.a.createElement(Y.a,null))))),A&&C.a.createElement(K.a,null))}}]),t}(C.a.PureComponent),Et={goToRelativeRoute:We.Ab,setActiveTab:Ve.setActiveTab,initFilters:O.initFilters,updateStateForAssignment:O.updateStateForAssignment,setToastMsg:Ge.nb},ht=Object(T.c)(Object(T.d)(A.l,{name:"getStudentTodoFeed",skip:function(e){return"parent"!==e.userType},options:function(e){return{fetchPolicy:"cache-and-network",variables:gt({},e.variables)}},props:function(e){var t=e.getStudentTodoFeed,a=e.ownProps,n=a.isData,s=a.isLoading,o=a.courseId,i=a.variables,r=a.orderByDateKey,l=a.initVariables,c=Object(w.k)(i),u=_.get(c,"assignments.edges",[]),d=_.get(c,"assignments.totalCount",0),m=_.map(u,(function(e){var t=e.node;return gt({},t,E()({},r,_.get(t,"assignmentState.".concat(r))))}));return{onPusherEventTriggered:function(e){e.courseId==o&&t.refetch()},assignmentsGroups:Object(He.a)({items:m,groupBy:"day",groupByKey:r}),totalCount:d,hasNextPage:_.get(c,"assignments.pageInfo.hasNextPage",!1),isData:!_.isEmpty(Object(w.k)(l))&&n,isFilteredData:!_.isEmpty(c),networkStatus:t.networkStatus,isLoading:1==t.networkStatus||2==t.networkStatus||s,loadMoreStudents:function(){return t.fetchMore({query:A.l,variables:gt({},i,{after:_.get(t,"node.assignments.pageInfo.endCursor")}),updateQuery:function(e,t){var a=t.fetchMoreResult,n=e.node.assignments,s=a.node.assignments,o=n.edges,i=s.edges,r=n.pageInfo,l=s.pageInfo,c=l.endCursor,u=l.hasNextPage;return gt({},e,{node:gt({},e.node,{assignments:gt({},n,{edges:[].concat(H()(o),H()(i)),pageInfo:gt({},r,{endCursor:c,hasNextPage:u})})})})}})}}}}),Object(T.d)(A.t,{name:"getStudentTodoFeed",skip:function(e){return"student"!==e.userType},options:function(e){return{fetchPolicy:"cache-and-network",variables:gt({},e.variables)}},props:function(e){var t=e.getStudentTodoFeed,a=e.ownProps,n=a.isData,s=a.isLoading,o=a.courseId,i=a.variables,r=a.orderByDateKey,l=a.initVariables,c=Object(w.s)(i),u=_.get(c,"assignments.edges",[]),d=_.get(c,"assignments.totalCount",0),m=_.map(u,(function(e){var t=e.node;return gt({},t,E()({},r,_.get(t,"assignmentState.".concat(r))))}));return{onPusherEventTriggered:function(e){e.courseId==o&&t.refetch()},assignmentsGroups:Object(He.a)({items:m,groupBy:"day",groupByKey:r}),totalCount:d,hasNextPage:_.get(c,"assignments.pageInfo.hasNextPage",!1),isData:!_.isEmpty(Object(w.s)(l))&&n,isFilteredData:!_.isEmpty(c),networkStatus:t.networkStatus,isLoading:1==t.networkStatus||2==t.networkStatus||s,loadMoreStudents:function(){return t.fetchMore({query:A.t,variables:gt({},i,{after:_.get(t,"node.assignments.pageInfo.endCursor")}),updateQuery:function(e,t){var a=t.fetchMoreResult,n=e.node.assignments,s=a.node.assignments,o=n.edges,i=s.edges,r=n.pageInfo,l=s.pageInfo,c=l.endCursor,u=l.hasNextPage;return gt({},e,{node:gt({},e.node,{assignments:gt({},n,{edges:[].concat(H()(o),H()(i)),pageInfo:gt({},r,{endCursor:c,hasNextPage:u})})})})}})}}}}),Object(D.a)(["assignmentFeedUpdate"]),N.a)(St),Ct=function(e){function t(e){return i()(this,t),u()(this,m()(t).call(this,e))}return b()(t,e),l()(t,[{key:"render",value:function(){return C.a.createElement(C.a.Fragment,null,this.props.children&&C.a.createElement(q.a,{isOpen:!0,isFullScreen:!0},C.a.cloneElement(this.props.children,{parentType:"CLASSROOM"})),C.a.createElement(ht,this.props))}}]),t}(C.a.PureComponent),ft=Object(T.c)(Object(R.a)({resource:["teacherHomePage","common","classRoom","toastMsgs","assessmentEvaluation"]}),Object(f.connect)((function(e,t){var a=e.login.userInfo.id,n=e.login.userInfo.user_type,s=e.teacher.selected_class.selected_course,o=e.login.userInfo.childID,i=e.platform.currentCurriculumProgramType,r=t.filters,l={userId:a,userType:n,courseId:s,childID:o};return{isData:!0,isLoading:!1,isArchivedClass:_.get(e,"teacher.selected_class.isArchivedClass"),isRemovedCourseForLoggedInUser:_.get(e,"teacher.selected_class.isRemovedCourseForLoggedInUser"),variables:bt(gt({filters:r},l)),initVariables:bt(gt({filters:O.initialState.filters},l)),courseId:s,childID:o,userType:n,currentCurriculumProgramType:i}}),Et))(Ct);function Tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function yt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(a),!0).forEach((function(t){E()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var It=function(e){function t(){var e,a;i()(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=u()(this,(e=m()(t)).call.apply(e,[this].concat(s))),E()(g()(a),"onUpdateFiltersLocally",(function(e){var t=e.filterType,n=e.filterValue,s=a.props,o=s.updateFilters,i=s.refetchUpcomingEvents,r=s.userType;o({key:t,value:n}),"assignmentStateTab"==t&&"parent"!==r&&i()})),a}return b()(t,e),l()(t,[{key:"render",value:function(){var e=this.props.userType;return"student"===e||"parent"===e?C.a.createElement(ft,s()({},this.props,{onUpdateFiltersLocally:this.onUpdateFiltersLocally})):C.a.createElement(ut,s()({},this.props,{onUpdateFiltersLocally:this.onUpdateFiltersLocally}))}}]),t}(C.a.PureComponent),At={updateFilters:O.updateFilters},wt=Object(T.c)(Object(R.a)({resource:["common","configuration"]}),Object(f.connect)((function(e,t){var a=e.teacher.selected_class.selected_course,n=e.login.userInfo.id,s=e.login.userInfo.userEntityType,o=e.login.userInfo.childID,i=e.classRoom.filters,r=e.login.userInfo.user_type,l=_.get(i,"assignmentStateTab",""),c=t.t,u=_.get(O.ASSIGNMENT_STATE_TABS,"".concat(l,".orderByDateKey"),"publishedAt"),d=Object(I.c)({id:a}),m=yt({},O.upcomingFeedFilters,{calendarIds:_.get(d,"calendar.id",[]),curriculumProgramId:_.get(e,"platform.currentCurriculumProgram.id",null)}),p="parent"===r?{studentIds:o}:void 0,g=M.j;return{userType:r,userId:n,childID:o,userEntityType:s,courseId:a,excludedAssessmentTypes:g,course:d,upcomingFeedQueryFilters:m,filters:i,orderByDateKey:u,isData:!0,isLoading:!1,showErrorComp:!0,perm:"Common:Classroom",typeDetailsFilter:p,stateWiseVariables:{userId:n,filters:{courseIds:a,excludedAssessmentTypes:g},type:s,studentIds:"parent"===r?o:void 0},errorText:c("common:sorry_you_dont_have_access_to_with_module_name",{moduleName:c("configuration:classroom")})}}),At),Object(T.d)(y.d,{name:"getCourseGenericFolders",skip:function(e){return!e.courseId},options:function(e){return{fetchPolicy:"cache-and-network",variables:{courseId:e.courseId,folderType:"CLASSROOM",filters:e.typeDetailsFilter},context:{useHttpLink:!0}}},props:function(e){var t=e.getCourseGenericFolders,a=e.ownProps,n=a.courseId,s=a.isData,o=a.isLoading,i=a.typeDetailsFilter,r=Object(I.e)({courseId:n,folderType:"CLASSROOM",filters:i}),l=_.get(r,"genericFolders",[]);return{isData:!_.isEmpty(r)&&s,classroomFolders:l,isLoading:1==t.networkStatus||2==t.networkStatus||o}}}),Object(T.d)(A.i,{name:"getCourseAssignmentStateWiseCount",skip:function(e){var t=e.userType,a=e.courseId;return"staff"!==t||!a},options:function(e){return{fetchPolicy:"cache-and-network",variables:{courseId:e.courseId,excludedAssessmentTypes:e.excludedAssessmentTypes},context:{useHttpLink:!0}}},props:function(e){var t=e.getCourseAssignmentStateWiseCount,a=e.ownProps,n=a.courseId,s=a.isData,o=a.isLoading,i=a.excludedAssessmentTypes,r=Object(w.i)({courseId:n,excludedAssessmentTypes:i}),l=_.get(r,"assignments.stateWiseCount",[]);return{isData:!_.isEmpty(r)&&s,stateWiseCount:l,isLoading:1==t.networkStatus||2==t.networkStatus||o}}}),Object(T.d)(A.o,{name:"getCourseAssignmentStateWiseCount",skip:function(e){var t=e.userType,a=e.courseId;return"staff"===t||!a},options:function(e){return{fetchPolicy:"cache-and-network",variables:yt({},e.stateWiseVariables),context:{useHttpLink:!0}}},props:function(e){var t=e.getCourseAssignmentStateWiseCount,a=e.ownProps,n=a.isData,s=a.isLoading,o=a.stateWiseVariables,i=Object(w.o)(yt({},o)),r=_.get(i,"assignments.stateWiseCount",[]);return{isData:!_.isEmpty(i)&&n,stateWiseCount:r,isLoading:1==t.networkStatus||2==t.networkStatus||s}}}),Object(T.d)(P.b,{name:"getCalendarEvents",skip:function(e){return"parent"===e.userType},options:function(e){return{fetchPolicy:"cache-and-network",variables:{id:e.userId,type:e.userEntityType,filters:e.upcomingFeedQueryFilters},context:{useHttpLink:!0}}},props:function(e){var t=e.getCalendarEvents,a=e.ownProps,n=a.userId,s=a.isData,o=a.isLoading,i=a.userEntityType,r=a.upcomingFeedQueryFilters,l=Object(x.b)({id:n,type:i,filters:r}),c=t.refetch,u=_.get(l,"calendarEvents",[]),d=_.filter(u,(function(e){return"ASSIGNMENT"==e.itemType})),m=_.map(d,(function(e){return yt({},e.item,{eventId:_.get(e,"id","")})})),p=_.filter(u,(function(e){return"CALENDAR_EVENT_ITEM"==e.itemType})),g=_.map(p,(function(e){return{eventId:_.get(e,"id",""),content:{meeting:_.get(e,"item.meeting",{}),assignmentTitle:_.get(e,"item.label",""),description:_.get(e,"item.description","")},state:{publishedAt:_.get(e,"startTime","")}}})),v=_.concat(m,g),b=_.get(v,"length",0);return{onPusherEventTriggered:function(){c()},isData:!_.isEmpty(l)&&s,startingSoonAssignments:v,totalStartingSoonAssignmentsCount:b,refetchUpcomingEvents:c,isLoading:1==t.networkStatus||2==t.networkStatus||o}}}),Object(D.a)(["startingSoonAssignmentFeedUpdate"]),N.a,k.a)(It);t.default=wt},6764:function(e,t,a){"use strict";a.r(t);var n=a(18),s=a.n(n),o=a(30),i=a.n(o),r=a(1),l=a.n(r),c=a(0),u=a.n(c),d=a(84),m=a(27),p=a(4852),g=a.n(p),v=a(105),b=a(112),S=a(2255),E=a(2217),h=a(3656),C=a(848),f=a(1411),T=a(413),y=a(3876),I=a(1193),A=a(3901),w=a(3866),O=a(6538),R=a(3647),D=a(55),N=a(26),k=a(6),P=a.n(k),x=a(13),M=a.n(x),L=a(4853),B=a.n(L),j=a(3693),F=a(3897),U=a(1412),H=a(4094),V=a(1258),W=a(12),G=a.n(W),z=a(45),Y=a(41),q=a(24),J=a(98),K=a(36),Z=a(4672),Q=a(3827),X=a(15),$=a(40),ee=a(69),te=a(600),ae=a(667),ne=a(2237),se=a(3),oe=a.n(se),ie=function(e){return u.a.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 20 20"},u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.72934 4.36633C5.69541 4.37203 5.66055 4.375 5.625 4.375C4.5496 4.375 3.75 5.19675 3.75 6.05204V15.198C3.75 16.105 4.53817 16.875 5.625 16.875H14.375C15.4504 16.875 16.25 16.0533 16.25 15.198V6.05204C16.25 5.64641 16.0449 5.23658 15.6841 4.87733C15.1863 4.38178 14.5403 4.375 14.375 4.375C14.3394 4.375 14.3046 4.37203 14.2707 4.36633C14.0148 5.09785 13.3169 5.625 12.5 5.625H7.5C6.68305 5.625 5.98524 5.09785 5.72934 4.36633ZM14.2707 3.13367C14.3046 3.12797 14.3395 3.125 14.375 3.125L14.3798 3.125C14.6011 3.12495 15.6952 3.1247 16.5659 3.99145C17.0801 4.50325 17.5 5.21333 17.5 6.05204V15.198C17.5 16.8314 16.0496 18.125 14.375 18.125H5.625C3.96183 18.125 2.5 16.9041 2.5 15.198V6.05204C2.5 4.41864 3.9504 3.125 5.625 3.125C5.66055 3.125 5.69541 3.12797 5.72934 3.13367C5.98524 2.40215 6.68305 1.875 7.5 1.875H12.5C13.3169 1.875 14.0148 2.40215 14.2707 3.13367ZM6.875 3.75C6.875 3.40768 7.15768 3.125 7.5 3.125H12.5C12.8423 3.125 13.125 3.40768 13.125 3.75C13.125 4.09232 12.8423 4.375 12.5 4.375H7.5C7.15768 4.375 6.875 4.09232 6.875 3.75Z",fill:e.fill}),u.a.createElement("path",{d:"M12.9419 8.05806C13.186 8.30214 13.186 8.69786 12.9419 8.94194L10.8838 11L12.9419 13.0581C13.186 13.3022 13.186 13.6979 12.9419 13.942C12.6978 14.186 12.3021 14.186 12.058 13.942L9.99996 11.8839L7.9419 13.942C7.69782 14.186 7.30209 14.186 7.05801 13.942C6.81394 13.6979 6.81394 13.3022 7.05801 13.0581L9.11607 11L7.058 8.94194C6.81392 8.69786 6.81392 8.30214 7.058 8.05806C7.30207 7.81398 7.6978 7.81398 7.94188 8.05806L9.99996 10.1161L12.058 8.05806C12.3021 7.81398 12.6978 7.81398 12.9419 8.05806Z",fill:e.fill}))};ie.propTypes={height:oe.a.number,width:oe.a.number,fill:oe.a.string},ie.defaultProps={height:20,width:20,fill:Y.e.gray31};var re=ie,le=a(8),ce=a(11);function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var de={rubricInnerConStyle:{width:"unset"},rubricFirstColumnCellStyle:{minWidth:"160px"},modalBodyStyle:{marginTop:"0",padding:"8px 48px 48px 48px",flex:"0"},cancelButtonStyle:{flexBasis:"0%",marginRight:"0"},cancelButtonProps:{color:"transparent",type:"hollow",disableHover:!0},checkBoxLabelStyle:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({fontSize:"1.6rem",lineHeight:"2.4rem"},z.fontStyles.regular,{color:Y.e.gray13}),checkBoxParentContainer:{marginTop:"40px",alignItems:"center"},checkboxItemStyle:{width:24,height:24,borderRadius:4},toolResponseConStyle:{marginBottom:"0px"},inputStyle:{backgroundColor:Y.e.white,borderColor:Y.e.borderDefault,borderRadius:"6px",padding:"8px 16px",height:"40px",maxWidth:"120px",fontWeight:500},tooltipContainerStyle:{padding:0}},me={FEEDBACK:{title:function(e){return(0,e.t)("classRoom:give_feedback_title",{firstName:e.firstName})},modalBody:function(e){var t=e.t,a=e.isCheckboxSelected,n=e.setCheckboxSelected;return u.a.createElement("div",{className:B.a.BFlexDivCol},u.a.createElement("div",{className:B.a.modalBody},t("classRoom:give_feedback_warning_msg")),u.a.createElement(j.a,{fill:Y.e.blue29,offFill:Y.e.strokeTwo,isChecked:a,onCheckboxClick:function(){return n(!a)},checkboxItemStyle:de.checkboxItemStyle,checkBoxParentContainer:de.checkBoxParentContainer,labelStyles:de.checkBoxLabelStyle,label:t("common:dont_show_msg")}))},confirmButtonText:function(e){return e("common:give_feedback_text")},cancelButtonText:function(e){return e("common:cancel")}}},_e=u.a.memo((function(e){var t=e.showTheatreView,a=e.invokeWorkbookCustomLoader,n=e.isTextFocus,s=e.currentMediaData,o=e.onChangeActiveImage,i=e.setShowGiveFeedbackModal,r=e.onPdfTronSwitchToEditMode,l=e.studentDetails,c=e.shouldShowGiveFeedbackButton,d=e.onDiscardDirectly,m=e.imageOrientation,_=e.updateImageOrientation,p=e.onWorkbookUpdateSuccessfully,g=e.parentRef,v=e.iframeIdSelector,b=e.onPdftronUpdateSuccessfullly,S=t;return K.a.can("FeatureFlag:PdfTronPreLoadWeb")?u.a.createElement(F.a,{showTheatreView:S,preLoadPdfTron:!0,invokeWorkbookCustomLoader:a,isTextFocus:n,currentMediaData:s,onChangeActiveImage:o,setShowGiveFeedbackModal:i,onPdfTronSwitchToEditMode:r,studentDetails:l,shouldShowGiveFeedbackButton:c,onDiscardDirectly:d,imageOrientation:m,updateImageOrientation:_,onWorkbookUpdateSuccessfully:p,parentRef:g,iframeIdSelector:v,onPdftronUpdateSuccessfullly:b}):S&&u.a.createElement(F.a,{invokeWorkbookCustomLoader:a,isTextFocus:n,currentMediaData:s,onChangeActiveImage:o,setShowGiveFeedbackModal:i,onPdfTronSwitchToEditMode:r,studentDetails:l,shouldShowGiveFeedbackButton:c,onDiscardDirectly:d,imageOrientation:m,updateImageOrientation:_,onWorkbookUpdateSuccessfully:p,parentRef:g,iframeIdSelector:v,onPdftronUpdateSuccessfullly:b})}));_e.displayName="TheatreModeWrapper";var pe=u.a.memo((function(e){var t,a,n,s,o,r,d,m=e.showClassRoomMedia,p=e.studentAssignmentId,g=e.currentMedia,v=e.toolResponses,b=e.studentDetails,E=e.assessmentFields,h=e.ibPYPElementRatings,f=e.isEvaluated,T=e.onMediaClick,y=e.isWorkbookEnabled,I=e.changeWorkbookEnable,A=e.changePdftronEnable,w=e.attachmentGroups,O=e.unitPlanFields,R=e.field_list,k=e.studentAssignmentSubmissionStatus,x=e.updateSettings,L=e.userId,j=e.hideFeedbackDialogBox,F=e.isCurrentAcademicYearSelected,W=e.t,z=e.isTeacherEvaluationEnabled,Y=e.isStudentEvaluationEnabled,X=e.isEvaluationApplicable,$=e.onClickEditEvaluation,ee=e.classRoomMediaRef,se=e.showGiveFeedbackButton,oe=e.isArchivedClass,ie=e.isTextFocus,ue=e.curriculumProgramType,pe=e.grade,ge=e.course,ve=e.elementRemarks,be=e.learningGoalsRef,Se=e.scoreRef,Ee=e.otherMediaData,he=e.learningGoalsMediaData,Ce=e.isPypEvaluationEditable,fe=e.isToolResponseEnabled,Te=e.showRateLearningGoals,ye=e.scoreValue,Ie=e.showAssessmentToolCard,Ae=e.isAllSubmissionsRevamp,we=e.assessmentToolRefs,Oe=e.userDesignaton,Re=e.assessmentTools,De=e.entity,Ne=e.category,ke=void 0===Ne?{}:Ne,Pe=e.weightage,xe=Object(c.useState)(null),Me=i()(xe,2),Le=Me[0],Be=Me[1],je=Object(c.useState)(0),Fe=i()(je,2),Ue=Fe[0],He=Fe[1],Ve=Object(c.useState)(!1),We=i()(Ve,2),Ge=We[0],ze=We[1],Ye=_.get(b,"firstName",""),qe=_.get(b,"lastName",""),Je=_.get(b,"isArchived",""),Ke=K.a.can("FeatureFlag:ShowEvaluationInsights"),Ze=Object(D.M)({curriculumProgramType:ue}),Qe="COMPLETED"===k,Xe=_.get(Ee,"attachments.0",{})||Ee,$e=(!("FILE"===_.get(Xe,"type")&&"application/pdf"===_.get(Xe,"mimeType"))||Object(te.b)({curriculumProgramType:ue,grade:pe}))&&!Qe&&!f&&X&&F&&se,et=_.some(null===Re||void 0===Re?void 0:Re.edges,(function(e){var t=e.node.assessmentToolType;return _.get(_.find(N.a,{type:t}),"hasInsight",!1)})),tt=G()(l()({},B.a.evalMediaCon,!0),l()({},B.a.evalMediaConRevamp,Ae)),at=G()((t={},l()(t,B.a.toolResponseTable,(!z||!Y)&&et&&Ke),l()(t,B.a.toolResponseTableRevamp,Ae),t)),nt=function(){Be(null)},st=Object(c.useCallback)((function(){var e="WORKBOOK"===_.get(Ee,"attachments.0.type","")||"WORKBOOK"===_.get(Ee,"type","");j||e?I(!0):Be("FEEDBACK")}),[I,Ee]),ot=Object(c.useCallback)((function(){A(!0)}),[A]),it=Object(c.useCallback)((function(){A(!1)}),[A]),rt=_.get(Ee,"attachments.0.id")||_.get(Ee,"id");Object(c.useEffect)((function(){setTimeout((function(){return He(0)}),300)}),[rt]);var lt=function(){rt&&(Object(N.S)({id:rt}),Object(J.sendStudentAssignementSubmissionFeedback)({studentAssignmentId:p,attachmentGroupId:Object(D.u)(w,g)})())},ct=Object(c.useCallback)((function(){lt()}),[]),ut=function(){var e=M()(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ge&&x({id:L,type:"user",settings:[{name:"TeacherPortal:HideFeedbackDialogBox",value:"true"}],showToastMsg:!1}),I(!0),nt();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dt=function(t){var a,n,s=e.updateField,o=e.assignmentDetailsVariables,i=_.get(b,"id","");i&&(Object(J.updateTeacherRemarkInCache)({assignmentDetailsVariables:o,message:null===(a=t.target)||void 0===a?void 0:a.value}),s({key:i,params:{studentId:i,parentId:p,parentType:"STUDENT_ASSIGNMENT",message:null===(n=t.target)||void 0===n?void 0:n.value,ibPYPElementType:"STUDENT_ASSIGNMENT",createdBy:L},type:"ELEMENT_REMARK"}))},mt=Object(c.useState)(!1),_t=i()(mt,2),pt=_t[0],gt=_t[1],vt=Object(c.useCallback)((function(e){var t=e.isLoading;gt(t)}),[]),bt=function(t){var a=t.node,n=t.isCommentEnabled,s=void 0!==n&&n,o=t.setRef,i=void 0!==o&&o,r=_.get(a,"assessmentToolItem.id",""),l=_.get(a,"assessmentToolType"),c=_.get(a,"assessmentToolItem",{});if("SCORE"!==l||Ze){var d=_.get(a,"isTeacherEvaluationEnable",!1),m=_.get(a,"isStudentEvaluationEnable",!1),g=Ze?d:z,S=Ze?m:Y;if(Object(D.cb)({assessmentTool:c,assessmentToolType:l,allFields:E})&&(g||S)||s){var C=Object(D.p)({t:W,assessmentToolType:l,assessmentTool:c}).assessmentToolText,T=_.get(_.find(v,(function(e){return e.toolId===r})),"toolResponses",{}),y=!_.includes(["DP_ASSESSMENT_RUBRIC","ASSESSMENT_GRADE_BOUNDARY"],l);return u.a.createElement("div",{className:Tt,ref:function(e){(null===we||void 0===we?void 0:we.current)&&i&&(we.current[null===a||void 0===a?void 0:a.id]=e)}},y?u.a.createElement("div",{className:Et},function(e){var t=e.isCommentEnabled,a=e.assessmentToolText;return t?W("common:final_remarks"):a}({isCommentEnabled:s,assessmentToolText:C})):null,u.a.createElement("div",{className:at},u.a.createElement(H.a,{isEvaluationEnable:!f&&g&&F&&fe,isEvaluatedByTeacher:g,showTeacherEvaluation:g,parentId:p,parentType:"STUDENT_ASSIGNMENT",assessmentTool:c,assessmentToolId:r,toolType:l,toolResponses:T,isEvaluatedByStudent:S,rubricInnerConStyle:de.rubricInnerConStyle,rubricFirstColumnCellStyle:de.rubricFirstColumnCellStyle,studentId:_.get(b,"id",""),mypObjectiveRubricOptions:Object(N.gb)({unitPlanFields:O,field_list:R,assessmentFields:E,measureAssessingValue:l}),ibPYPElementRatings:h,isEvaluated:f,containerStyle:de.toolResponseConStyle,isCommentEnabled:!_.isEqual(Oe,"Visitor")&&s,updateComment:dt,elementRemarks:ve,shouldTakeFullWidth:!0,t:W,showCommentHeading:!1,showEvaluateStatus:"DP_ASSESSMENT_RUBRIC"!==l,scoreParams:{scoreValue:ye,studentDetails:b,studentAssignmentId:p,scoreRef:Se,assessmentTools:Re,assignmentDetailsVariables:null===e||void 0===e?void 0:e.assignmentDetailsVariables,isTeacherEvaluationEnabled:z,enableMultiAssessmentTools:Ze,category:ke,weightage:Pe}})))}}},St=Object(ae.i)(),Et=G()((a={},l()(a,B.a.headerText,!0),l()(a,B.a.headerTextRevamp,Ae),a)),ht=G()((n={},l()(n,B.a.evalMediaHeader,!0),l()(n,B.a.evalMediaHeaderRevamp,Ae),n)),Ct=G()((s={},l()(s,B.a.evaluationText,!0),l()(s,B.a.evaluationTextRevamp,Ae),s)),ft=G()((o={},l()(o,B.a.learningGoalsContainer,!0),l()(o,B.a.evalConRevamp,Ae),o)),Tt=G()((r={},l()(r,B.a.assessmentToolContainer,!0),l()(r,B.a.evalConRevamp,Ae),r)),yt=G()((d={},l()(d,B.a.innerContainer,!0),l()(d,B.a.blurMedia,f||!F),d)),It=q.T[De],At=_.get(It,"label",""),wt=_.filter(null===Re||void 0===Re?void 0:Re.edges,(function(e){var t=e.node;return"COMMENT"===_.get(t,"assessmentToolType")}));switch(g){case"score":case"assessmentTool":case"learningGoals":return X?u.a.createElement("div",{className:yt},u.a.createElement("div",{className:ht},u.a.createElement("div",{className:Ct},W("assessmentEvaluation:evaluation"))),u.a.createElement("div",{className:tt},_.map(Object(D.rb)({assessmentTools:Re}),(function(e){var t=e.node;return u.a.createElement("div",{className:B.a.evalMediaInnerCon},Ie&&bt({node:t,setRef:!0}))})),!Ze&&u.a.createElement(Z.a,{isEvaluated:f,scoreValue:ye,studentDetails:b,studentAssignmentId:p,scoreRef:Se,assessmentTools:Re,showTitle:!0,assignmentDetailsVariables:null===e||void 0===e?void 0:e.assignmentDetailsVariables,isTeacherEvaluationEnabled:z,enableMultiAssessmentTools:Ze,category:ke,weightage:Pe}),Ie&&(!Ze||Ze&&_.isEmpty(wt))&&bt({isCommentEnabled:!0}),he&&Te&&u.a.createElement("div",{className:ft,ref:be},Ae&&u.a.createElement("div",{className:Et},W("common:learning_goals")),u.a.createElement(V.a,{isComplete:f||!F||!Ce,parentId:p,parentType:"STUDENT_ASSIGNMENT",showToggleStudentPypEvaluateStatus:!1,evaluateIBPYPElements:!0,studentDetails:b,assessmentFields:E,ibPYPElementRatings:h,isEvaluated:f,curriculumProgramType:ue,course:ge}))),u.a.createElement("div",{className:B.a.editEvaluationBtn},u.a.createElement(S.a,{tooltip:W("assessmentEvaluation:edit_evaluation"),placement:"top",tooltipContainerStyle:de.tooltipContainerStyle,mouseEnterDelay:.5},u.a.createElement(ce.IconButton,{icon:u.a.createElement(le.PencilLineOutlined,{size:"x-small"}),variant:"dark",onClick:$})))):u.a.createElement("div",{className:B.a.evalNotApplicableSection},u.a.createElement("div",{className:B.a.evalNotApplicableContent},u.a.createElement(re,null),u.a.createElement("span",{className:B.a.evalNotApplicableText},W(z?"classRoom:teacher_eval_not_applicable_text_entity":"classRoom:student_eval_not_applicable_text_entity",{studentName:"".concat(Ye," ").concat(qe),entity:At}))));default:return u.a.createElement(u.a.Fragment,null,Le&&u.a.createElement(U.a,{modalTitle:me[Le].title({t:W,firstName:Ye}),modalBody:me[Le].modalBody({t:W,isCheckboxSelected:Ge,setCheckboxSelected:ze}),button1:me[Le].cancelButtonText(W),button2:me[Le].confirmButtonText(W),onClickButton1:nt,toggleDialogueBoxDisplay:nt,onClickButton2:ut,button1Props:de.cancelButtonProps,button1Styles:de.cancelButtonStyle,modalBodyStyle:de.modalBodyStyle,size:"auto"}),y?u.a.createElement(Q.a,{imageOrientation:Ue,workbookMode:"WORKBOOK"===_.get(Ee,"attachments.0.type","")||"WORKBOOK"===_.get(Ee,"type","")?ne.b.WORKBOOK_MULTIPAGE_ADD_OR_EDIT:ne.b.IMAGE_FEEDBACK,attachment:Ee,onUpdateSuccessfully:ct,onDiscardDirectly:function(){I(!1),He(0)},isFullScreen:St,parentRef:null===ee||void 0===ee?void 0:ee.current,iframeIdSelector:ne.a.CLASSROOM,invokeWorkbookCustomLoader:vt}):u.a.createElement(_e,{showTheatreView:m,invokeWorkbookCustomLoader:vt,isTextFocus:ie,currentMediaData:Ee,onChangeActiveImage:T,setShowGiveFeedbackModal:st,onPdfTronSwitchToEditMode:ot,studentDetails:b,shouldShowGiveFeedbackButton:$e&&!oe&&!Je,onDiscardDirectly:it,imageOrientation:Ue,updateImageOrientation:function(e){He((function(t){return t+e}))},onWorkbookUpdateSuccessfully:ct,parentRef:null===ee||void 0===ee?void 0:ee.current,iframeIdSelector:ne.a.CLASSROOM,onPdftronUpdateSuccessfullly:function(){lt()}}),pt&&u.a.createElement("div",{className:B.a.loadingContainer},u.a.createElement(C.a,null)))}}));pe.displayName="MediaTypeComponent";var ge=u.a.memo((function(e){var t=Object(c.useRef)(null);Object(c.useEffect)((function(){return function(){!function(e){var t,a=document.getElementById(ne.a.CLASSROOM);a&&""!==a.src&&e&&(null===e||void 0===e||null===(t=e.current)||void 0===t||t.removeChild(a))}(t)}}),[]);var a=G()(l()({},B.a.container,!0),l()({},B.a.hideContainer,!_.get(e,"showClassRoomMedia",!0)));return u.a.createElement("div",{className:a,ref:t},u.a.createElement(pe,s()({},e,{classRoomMediaRef:t})))}));ge.displayName="ClassRoomMedia",ge.defaultProps={showGiveFeedbackButton:!0};var ve={setToastMsg:X.nb,updateSettings:N.nc,updateField:N.hc},be=Object(d.c)(Object(m.connect)((function(e,t){var a,n=e.login.userInfo,s=n.id,o=Object(ee.e)({name:"TeacherPortal:HideFeedbackDialogBox",userId:s,readFromUserAndOrgLevel:!0}),i=_.get(n,"org_id",""),r=_.get(e,"teacher.selected_class.selected_grades[0]","");if(r){var l=Object($.B)(r);a=_.get(l,"globalGrade.uid",null)}return{userId:s,userDesignaton:n.designation,userType:_.get(n,"user_type",""),hideFeedbackDialogBox:!_.isArray(o)&&o,isArchivedClass:_.get(e,"teacher.selected_class.isArchivedClass"),isTextFocus:_.get(e,"conversation.isTextFocus"),organizationId:i,grade:a}}),ve),Object(T.a)({resource:["classRoom","common","assessmentEvaluation"]}),Object(I.a)({cb:D.z}))(ge),Se=a(9),Ee=a(4003),he=a(6587),Ce=a(2201),fe=a(3848),Te=a(70),ye=a(99),Ie=a(4096),Ae=a(25),we=a.n(Ae),Oe=a(53);function Re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function De(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ne,ke=K.a.can("FeatureFlag:ShowRemarkInChatBox"),Pe={},xe={overlayStyles:{overflowY:"hidden"},attachmentListConStyle:{gridTemplateColumns:"repeat(auto-fill, minmax(224px, 1fr))",gridGap:"unset",paddingBottom:"20px"},attachmentListConStyleRevamp:{gridTemplateColumns:"repeat(auto-fill, minmax(224px, 1fr))",gridGap:"12px",paddingBottom:"20px"},footerContainerStyle:{position:"sticky",bottom:0,zIndex:10,background:z.colors.surfaceWhite},footerBottomConStyle:{padding:"8px 24px"},footerTextBoxStyle:{marginLeft:"16px"},footerSendBtnStyle:{marginLeft:"16px"},unveilConStyle:{marginBottom:"20px",padding:"0 40px"},unveilConRevampStyle:{marginBottom:"20px",padding:"0 24px"},horizontalCardStyle:{backgroundColor:"#f8f8f8",padding:"16px",borderRadius:"8px"},cardStyle:{paddingBottom:"0px"},cardStyleRevamp:{padding:"0px 24px",borderLeft:"none"},chatContainerStyle:{messageItemStyle:{padding:"16px 0"},flatMessageConStyle:{padding:"0 24px",borderBottom:"none"},privateMessageLabelStyle:{color:z.colors.textDefault,padding:"0 24px",fontWeight:600},chatContainerStyle:{fontSize:"1.4rem",color:z.colors.textDefault,lineHeight:"2rem"},messageWrapperStyle:De({fontSize:"1.4rem",color:z.colors.textDefault,lineHeight:"2rem"},z.fontStyles.medium)},tooltipOverlayStyle:{maxWidth:"200px"},toolTipStyle:{maxWidth:200,padding:0},linkStyles:{color:"unset"},messageSubConStyle:{gridGap:"8px"},attachmentListContainerStyle:{marginTop:"0px"},emptyStateStyles:{titleStyle:De({},z.fontStyles.demiBold,{fontSize:"1.4rem",color:z.colors.textPlaceholder,lineHeight:"2rem"}),subtitleStyle:De({},z.fontStyles.medium,{fontSize:"1.2rem",color:z.colors.textPlaceholder,lineHeight:"1.6rem"})}},Me=function(e){var t=e.isAllSubmissionsRevamp,a=e.isEditMode;return t?a?De({},xe.cardStyleRevamp,{borderTopLeftRadius:"8px",borderBottomLeftRadius:"8px"}):xe.cardStyleRevamp:xe.cardStyle},Le=u.a.memo((function(e){var t,a,n,o,r,d,m,p,v,b,T=e.isData,y=e.isLoading,I=e.studentAssignmentId,k=e.studentAssignmentData,P=e.currentMedia,x=e.updateQueryParameters,M=e.assessmentFields,L=e.assignmentTitle,B=e.isStudentSubmissionEnabled,j=e.isTeacherEvaluationEnabled,F=e.isStudentEvaluationEnabled,U=e.contentType,H=e.content,V=e.isWorkbookEnabled,W=e.changeWorkbookEnable,z=e.isPdftronEnabled,Y=e.changePdftronEnable,J=e.studentAssignmentSubmissionStatus,Z=e.template,Q=e.t,X=e.curriculumProgramType,$=e.assignmentId,ee=e.assignedStudents,te=e.showCreatePostButton,ae=e.showSendMessageOption,ne=e.isEvaluationApplicable,se=e.onClickEditEvaluationBtn,oe=e.isCurrentAcademicYearSelected,ie=e.isArchivedClass,re=e.isSimilarityCheckEnabled,ue=e.course,de=e.getCriteriaSetOfPypType,me=e.curriculumProgramId,_e=e.assignmentDetailsVariables,pe=e.isAllSubmissionsRevamp,ge=e.rightPane,ve=e.openLinkInNewTab,Te=e.closeRightPane,Ae=e.downloadAttachmentZip,Re=e.assessmentTools,Le=e.assessmentToolFromQuery,Be=e.isAddResponseByTeacherEnabled,je=e.showAddResponseButton,Fe=e.updateAssignmentSubmissionState,Ue=e.enableMultiAssessmentTools,He=e.value,Ve=e.isLearningGoalsEvaluationEnabled,We=e.isPrivate,Ge=e.showActionButtons,ze=Object(c.useState)(!1),Ye=i()(ze,2),qe=Ye[0],Je=Ye[1],Ke=Object(c.useState)(!1),Ze=i()(Ke,2),Qe=Ze[0],Xe=Ze[1],$e=Object(c.useState)({isScrollBarVisible:!1,isScrollBarAtBottom:!0,isScrolling:!1}),et=i()($e,2),tt=et[0],at=et[1],nt=Object(c.useState)(Le),st=i()(nt,2),ot=st[0],it=st[1],rt=Object(c.useState)(!1),lt=i()(rt,2),ct=lt[0],ut=lt[1],dt=Object(c.useState)(!1),mt=i()(dt,2),_t=mt[0],pt=mt[1],gt=Object(ye.getScoreDetailsMemoize)({assessmentTools:Re}),vt=gt.isScoreEnabled,bt=gt.maxScore,St=j&&vt&&bt;if(St){var Et=_.get(k,"ibPYPElementRatings");b=Object(D.bb)({ibPYPElementRatings:Et})}var ht=Object(c.useRef)(null),Ct=Object(c.useRef)(null),ft=Object(c.useRef)([]),Tt=Object(c.useRef)(null),yt=Object(c.useRef)(null),It=Object(c.useRef)(null),At=k||{},wt=At.student,Ot=void 0===wt?{}:wt,Rt=At.submission,Dt=void 0===Rt?{}:Rt,Nt=At.toolResponses,kt=At.elementRemarks,Pt=At.ibPYPElementRatings,xt=At.conversation,Mt=At.isEvaluated,Lt=At.post,Bt=(At.status,At.isSubmitted),jt=_.get(Ot,"firstName",""),Ft=_.get(Ot,"lastName",""),Ut=_.get(Ot,"isArchived",!1),Ht=_.get(Ot,"id",""),Vt=_.get(Dt,"id",""),Wt=_.get(Dt,"status",""),Gt=_.get(Dt,"response","")||"",zt=_.get(Dt,"attachments",[])||[],Yt=_.get(Dt,"attachmentGroups",[])||[],qt=_.get(Dt,"submittedAt",""),Jt=Object(D.w)({attachmentGroups:Yt,attachments:zt}),Kt=_.get(xt,"id",""),Zt=_.get(xt,"unreadMessageCounts",[]),Qt=_.get(_.find(Zt,(function(e){return"STUDENT_ASSIGNMENT_SUBMISSION"===e.itemType})),"count",0),Xt=_.some(null===Re||void 0===Re?void 0:Re.edges,(function(e){var t=e.node,a=_.get(t,"assessmentToolItem",{}),n=_.get(t,"assessmentToolType",""),s=_.get(t,"isTeacherEvaluationEnable",!1),o=_.get(t,"isStudentEvaluationEnable",!1),i=Ue?s:j,r=Ue?o:F;return Object(D.cb)({assessmentTool:a,assessmentToolType:n,allFields:_.get(H,"allFields",[])})&&(i||r)})),$t=null!==Lt,ea=_.get(Z,"field_list",{}),ta=_.get(H,"unitPlan.allFields",_.get(H,"presetAssessment.unitPlan.allFields",{})),aa=!_.isEmpty(null===Re||void 0===Re?void 0:Re.edges)&&Xt,na=Object(D.c)({assessmentFields:M,curriculumProgramType:X,getCriteriaSetOfPypType:de}),sa=(Ue?Ve:j)&&!_.isEmpty(Object(N.kb)({assessmentDetails:H,curriculumProgramType:X}))&&!na,oa=B&&"SUBMITTED"==Wt&&(!_.isEmpty(Gt)||!_.isEmpty(Jt)),ia=!_.isEmpty(Gt)||!_.isEmpty(Jt),ra=function(e){switch(e){case"DRAFT":return"common:submission_pending";case"RETURNED":return"common:request_resubmission";default:return""}}(Wt);Object(c.useEffect)((function(){var e="";if(_.isEmpty(P)){var t=_.first(Jt),a=_.get(t,"attachments.0.id","")||_.get(t,"id","");if(_.isEmpty(a)){if(j||F)if(St)e=Se.Mc;else if(aa){e=Se.e;var n=_.get(Re,"edges.0.node.id","");it(n)}else sa&&(e=Se.Xb)}else e=a}else if(!_.isInteger(parseInt(P))){if(_.isEqual(P,Se.Mc)&&St||_.isEqual(P,Se.e)&&aa||_.isEqual(P,Se.Xb)&&sa)return;if(!_.isEqual(P,Se.Mc)&&St)e=Se.Mc;else if(!_.isEqual(P,Se.e)&&aa){e=Se.e;var s=_.get(Re,"edges.0.node.id","");it(s)}else!_.isEqual(P,Se.Xb)&&sa&&(e=Se.Xb)}_.isEmpty(e)||_.isEqual(P,e)||x({params:{currentMedia:e},navigateType:"replace"})}),[Jt,P,oa,Re,j,F,aa,sa,x]),Object(c.useEffect)((function(){if((V||z)&&_.get(Ct,"current.getWrappedInstance")){var e=_.get(Ct,"current").getWrappedInstance();if(_.get(e,"attachmentItemRef.current.getWrappedInstance")){var t=_.get(e,"attachmentItemRef.current").getWrappedInstance(),a=_.get(t,"attachmentItemRef.current");a&&!function(e){var t=e.element;if(t&&t.getBoundingClientRect){var a=t.getBoundingClientRect();return a.top>=68&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight)}return!0}({element:a})&&setTimeout((function(){a.scrollIntoView({behavior:"smooth",block:"center"})}),1e3)}}}),[V,z]),Object(c.useEffect)((function(){var e=(null===ht||void 0===ht?void 0:ht.current)||{},t=e.scrollHeight,a=void 0===t?0:t,n=e.clientHeight,s=void 0===n?0:n,o=e.scrollTop,i=void 0===o?0:o,r=tt.isScrollBarAtBottom,l=tt.isScrollBarVisible,c=a-Math.trunc(i)===s,u=a>s;(c!==r||u!==l)&&at({isScrollBarAtBottom:c,isScrollBarVisible:u})}),[null===ht||void 0===ht||null===(t=ht.current)||void 0===t?void 0:t.scrollHeight]),Object(c.useEffect)((function(){ot&&va(Se.e,ot)}),[ot,P]);var la=Object(Ie.a)({attachmentGroups:Yt,submissionId:Vt})||{},ca=la.attachmentGroups,ua=la.submissionId;Object(c.useEffect)((function(){_.size(ca)>_.size(Yt)&&ua==Vt&&ba(),_.size(ca)<_.size(Yt)&&ua==Vt&&Sa()}),[Yt]),Object(c.useEffect)((function(){if(tt.isScrolling){var e=_.get(ht,"current",null);e&&(e.scrollTop=e.clientHeight+e.scrollHeight,at((function(e){return De({},e,{isScrolling:!1,isScrollBarAtBottom:!0})})))}}),[tt]);var da=!(!j&&!F)&&Re,ma=Ue||j,_a=_.find(Jt,(function(e){var t=_.first(_.get(e,"attachments",[]));return _.get(t,"id")===P||e.id===P})),pa=!(!oa&&!ia)&&_a,ga=!_.isEmpty(da)||ma||St||!_.isEmpty(pa),va=function(e,t){_.isEqual(e,Se.e)||_.isEmpty(ot)||it(null),function(e){var t,a;switch(e){case Se.e:var n;return t=null===ft||void 0===ft||null===(n=ft.current)||void 0===n?void 0:n[ot],void(_.isEmpty(t)||Object(fe.a)({element:t}));case Se.Xb:t=Tt;break;case Se.Mc:t=yt}_.isEmpty(t)||Object(fe.a)({element:null===(a=t)||void 0===a?void 0:a.current})}(e),x({params:{currentMedia:e,assessmentTool:t},navigateType:"replace"})},ba=function(){0===_.get(_.filter(Yt,(function(e){return"staff"===_.get(e,"attachments[0].createdBy.type")})),"length",0)&&Fe({changeIsLoading:pt,submission:Dt,status:"DRAFT",statusOnResponseUnsuccessful:"SUBMITTED"})},Sa=function(){var e=_.differenceWith(Yt,ca,(function(e,t){return _.isEqual(e.id,t.id)}));"staff"===_.get(e,"[0].attachments[0].createdBy.type","")&&"SUBMITTED"!==Wt&&Fe({changeIsLoading:pt,submission:Dt,status:"SUBMITTED",statusOnResponseUnsuccessful:"DRAFT"})},Ea=function(e){_.isEmpty(e)||(Pe=De({},Pe=Object(D.y)({attachments:[_.omit(e,["isPost","createdBy","similarityReport","isRead","attachmentId","questionAttachment"])],student:Ot,title:Gt,content:H,curriculumProgramType:X,courseId:_.get(ue,"id","")}),{shouldKeepWorkbookId:!1}),Ne=Q("classRoom:add_student_work_portfolio"),setTimeout((function(){Je(!0)})))},ha=G()(l()({},g.a.evalCard,!0),l()({},g.a.evalCardRevamp,pe),l()({},g.a.activeCon,P===Se.Mc)),Ca=G()(l()({},g.a.evalCard,!0),l()({},g.a.evalCardRevamp,pe),l()({},g.a.activeCon,P===Se.Xb)),fa=Object(D.N)({isTeacherEvaluationEnabled:j,isEvaluationApplicable:ne,t:Q,teacherEvaluationOnly:!0}),Ta={offset:[8,0]},ya=function(e){var t=e.name,a=e.type,n=e.isActivated,s=e.onClickCard,o=e.subtext,i=e.icon,r=void 0===i?null:i;return u.a.createElement("div",{className:g.a.evalCardCon},u.a.createElement(ce.MediaCard,{cardType:"medium",name:t,type:a,isActivated:n,onClick:s,subtext:o,icon:r}))},Ia=function(e){var t=e.isEvaluationApplicable,a=e.scoreValue,n=e.maxScore;return t?a?t&&a?"".concat(a,"\n                 ").concat(Q("common:out_of_with_label",{label:n})):void 0:"-/".concat(n):Q("common:na")},Aa=!_.isEmpty(P)&&ga,wa=oe&&"ASSESSMENT"===U,Oa=Object(D.m)({response:Gt,attachmentGroups:Yt,toolResponses:Nt,ibPYPElementRatings:Pt,elementRemarks:kt}),Ra="";Ra=Q(Mt&&!Oa?"journal:empty_responses_can_not_be_added":Mt?"classRoom:add_response_to_journal":"classRoom:only_completed_evaluated_responses_can_be_added");var Da=Oa&&Mt,Na=Mt&&!ie&&oe,ka=!B||0===_.size(_.filter(Yt,D.sb)),Pa=Be&&je&&!Mt&&B&&!ie,xa=function(){ut((function(e){return!e}))},Ma=G()(l()({},g.a.container,!0),l()({},g.a.hideContainer,!T)),La=G()((a={},l()(a,g.a.submissionHeaderCon,!0),l()(a,g.a.submissionHeaderRevamp,pe),a)),Ba=G()((n={},l()(n,g.a.studentNameLabel,!0),l()(n,g.a.headingText,pe),n)),ja=G()((o={},l()(o,g.a.rightPane,!0),l()(o,g.a.rightPaneRevamp,pe),o)),Fa=G()((r={},l()(r,g.a.warningMsg,!0),l()(r,g.a.warningMsgRevamp,pe),r)),Ua=G()((d={},l()(d,g.a.noSubmissionText,!0),l()(d,g.a.noSubmissionTextRevamp,pe),d)),Ha=G()((m={},l()(m,g.a.evalCon,!0),l()(m,g.a.evalConRevamp,pe),m)),Va=G()((p={},l()(p,g.a.evalHeaderCon,!0),l()(p,g.a.evalHeaderConRevamp,pe),p)),Wa=G()((v={},l()(v,g.a.evalHeaderText,!0),l()(v,g.a.headingText,pe),v)),Ga=G()(l()({},g.a.noResponseLabelText,pe)),za=G()(l()({},g.a.attachmentListContainer,!pe)),Ya=G()(g.a.submittedAtCon,"text-tooltip");return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:Ma,onClick:function(){ge&&Te()}},u.a.createElement("div",{className:g.a.leftCon},u.a.createElement(be,{showClassRoomMedia:Aa,isTeacherEvaluationEnabled:j,isStudentEvaluationEnabled:F,currentMedia:P,studentAssignmentId:I,toolResponses:Nt,studentDetails:Ot,assessmentFields:M,assessmentTitle:_.get(H,"title.value",""),unitPlanFields:ta,field_list:ea,ibPYPElementRatings:Pt,onClickCreatePost:function(){return Ea(_.get(pa,["attachments","0"]))},isEvaluated:Mt,onMediaClick:va,attachmentGroups:Yt,isWorkbookEnabled:V,changeWorkbookEnable:W,isPdftronEnabled:z,changePdftronEnable:Y,studentAssignmentSubmissionStatus:J,assignmentId:$,assignedStudents:ee,isEvaluationApplicable:ne,onClickEditEvaluation:se,isCurrentAcademicYearSelected:oe,curriculumProgramType:X,course:ue,elementRemarks:kt,learningGoalsRef:Tt,scoreRef:yt,otherMediaData:pa,assessmentToolMediaData:da,learningGoalsMediaData:ma,showRateLearningGoals:sa,scoreValue:b,assignmentDetailsVariables:_e,showAssessmentToolCard:aa,isAllSubmissionsRevamp:pe,assessmentTools:Re,assessmentToolRefs:ft,entity:He,category:_.get(H,"category",{}),weightage:_.get(H,"weightage")}),!Aa&&u.a.createElement(E.a,{emptyText:B?Q("classRoom:student_not_submitted",{firstName:jt}):Q("classRoom:submission_not_required"),emptyHeaderText:"",isSearch:!1})),u.a.createElement("div",{className:ja,ref:ht,style:V?xe.overlayStyles:{},onScroll:function(e){if(!(null===tt||void 0===tt?void 0:tt.isScrolling)){var t=e.target,a=t.scrollHeight,n=t.scrollTop,s=t.clientHeight,o=tt.isScrollBarAtBottom,i=a-Math.trunc(n)===s;i!==o&&at((function(e){return De({},e,{isScrollBarAtBottom:i})}))}}},u.a.createElement("div",{className:g.a.rightPaneInnerCon},(V||z)&&u.a.createElement("div",{className:g.a.editOverlay}),u.a.createElement("div",{className:g.a.submissionCon},u.a.createElement("div",{className:La},u.a.createElement("div",{className:Ba},Q(pe?"common:response_with_name":"common:submission_with_name",{name:jt})),pe&&Ge&&u.a.createElement("div",{className:g.a.submissionRightContainer},Pa&&u.a.createElement("div",{className:g.a.addToJournalIcon,onClick:xa},u.a.createElement(ce.Tooltip,{placement:"bottom",tooltip:Q("classRoom:add_response")},u.a.createElement("div",{className:g.a.iconContainer},u.a.createElement(le.AddOutlined,{size:"xx-small",variant:"default"})))),B&&wa&&!$t&&u.a.createElement(ce.Tooltip,{placement:"bottomRight",tooltip:Ra,overlayInnerStyle:xe.tooltipOverlayStyle,align:{offset:Da?[14,0]:[24,0]}},u.a.createElement("div",{className:g.a.iconContainer},u.a.createElement(le.JournalAddOutlined,{size:"xx-small",variant:"subtle",disabled:!Da,onClick:Da?function(){var e=Object(D.y)({student:Ot,content:H,title:Gt,curriculumProgramType:X,courseId:_.get(ue,"id","")});Pe=_.omit(De({},e,{isAddLEToJournal:!0,LETitle:_.get(H,"title.value",""),studentAssignmentId:I,items:[{item:{id:I,assignment:{content:De({},H,{},Z),isStudentEvaluationEnabled:F,isTeacherEvaluationEnabled:j},ibPYPElementRatings:_.get(k,"ibPYPElementRatings",[]),student:Ot,submission:{attachmentGroups:_.filter(Yt,D.sb),response:Gt},toolResponses:_.get(k,"toolResponses",{}),elementRemarks:_.get(k,"elementRemarks",[])},itemType:"STUDENT_ASSIGNMENT"}]}),["title"]),Ne=Q("classRoom:add_response_to_journal_by_name",{firstName:_.get(Ot,"firstName","")}),setTimeout((function(){Je(!0)}))}:void 0}))),B&&wa&&$t&&u.a.createElement(ce.Tooltip,{placement:"bottomRight",tooltip:Q("classRoom:response_added_to_journal"),align:{offset:[14,0]}},u.a.createElement("div",{className:g.a.iconContainer},u.a.createElement(le.JournalTickOutlined,{size:"xx-small",variant:"success",onClick:function(){var e=_.get(Lt,"id","");ve({url:"/platform/links/post/".concat(e,"/?preserve_query_params=true")})}}))),B&&u.a.createElement(ce.Tooltip,{tooltip:Q("assessmentEvaluation:download_submission"),placement:"bottom"},u.a.createElement("div",{className:g.a.iconContainer},u.a.createElement(le.DownloadCloudOutlined,{variant:"subtle",size:"xx-small",onClick:ka?void 0:function(){var e=Object(D.kb)({studentId:Ht,firstName:jt,lastName:Ft,attachmentGroups:Yt,attachments:zt,response:Gt});Ae({attachmentsObjects:e})},disabled:ka}))))),Bt&&u.a.createElement("div",{className:Ya},we()(qt).format("LT"),u.a.createElement("span",{className:g.a.dotContainer}),we()(qt).format("DD MMM")),!oa&&ia&&u.a.createElement("div",{className:Fa},u.a.createElement(ce.Alert,{type:"warning",message:Q(ra)})),oa||ia?u.a.createElement(c.Fragment,null,u.a.createElement(h.a,{maxHeight:80,showCollapse:!0,containerStyle:pe?xe.unveilConRevampStyle:xe.unveilConStyle},u.a.createElement("div",{className:g.a.responseLabel},_.isEmpty(Gt)?u.a.createElement("div",{className:Ga},Q("classRoom:no_remarks_msg")):Gt)),!_.isEmpty(Jt)&&u.a.createElement("div",{className:za},u.a.createElement(R.a,{ref:Ct,cardType:pe?"design-media-card":"horizontalV2",mode:"view",value:Jt,onClickAttachmentCard:function(e,t){var a=_.get(t,"attachments.0.id","")||_.get(t,"id","");va(a)},containerStyle:pe?xe.attachmentListConStyleRevamp:xe.attachmentListConStyle,activeAttachment:P,showCreatePostButton:Mt&&te&&oe,onClickCreatePost:Ea,showOpenLinkInNewTabIcon:!0,attachmentBottomComponent:function(e){var t=e.attachment,a=e.recheckButtonHoverClass,n=_.get(t,"isPost",!1)?_.get(t,["attachments","0"],{}):t,s=n.type,o=n.mimeType;return re&&("FILE"==s||"LINK"==s)&&_.includes(q.Db,o)?u.a.createElement("div",{className:g.a.similarityIndexContainer},u.a.createElement(A.a,{attachment:t,metadata:{entityId:Vt,entityType:"STUDENT_ASSIGNMENT_SUBMISSION",additionalData:{assignmentId:$}},course:ue,recheckButtonHoverClass:a,showInAttachmentItem:!0})):null},horizontalCardStyle:Me({isAllSubmissionsRevamp:pe,isEditMode:V||z}),horizontalCardInnerClass:!pe&&g.a.horizontalCardInnerClass,disableActions:Ut||ie,getViewModeExtraButtons:function(e){var t=e.attachment,a=t.type,n=_.includes(["QUESTION","QUESTION_SUBMISSION"],a),s=oe&&!ie&&!n&&Ge;return u.a.createElement(u.a.Fragment,null,"WORKBOOK"!==a&&!n&&Ge&&u.a.createElement(S.a,{tooltip:Q("common:open_in_new_tab"),placement:"topRight",href:"#",id:"tooltip-OpenLinkSvg",mouseEnterDelay:.5,tooltipContainerStyle:xe.toolTipStyle},u.a.createElement("div",{className:g.a.actionIconCon},u.a.createElement(le.ArrowOutOutlined,{size:"xxx-small",variant:"subtle",onClick:function(e){return function(e){var t=e.e,a=e.attachment;t.stopPropagation();var n=_.get(a,"url","");n&&ve({url:n})}({e:e,attachment:t})}}))),s&&u.a.createElement(S.a,{tooltip:Q("classRoom:add_response_to_journal"),alignConfig:Ta,placement:"topRight",mouseEnterDelay:.5,tooltipContainerStyle:xe.toolTipStyle},u.a.createElement("div",{className:g.a.actionIconCon},u.a.createElement(le.JournalAddOutlined,{size:"xxx-small",variant:"subtle",onClick:function(e){e.stopPropagation(),Ea(t)}}))))},showActionsOnHover:!0,parentType:"STUDENT_ASSIGNMENT_SUBMISSION",parentId:Vt,shouldCallMutation:Pa,showDeleteForSelfInViewMode:Pa,showActionButtons:Ge}))):u.a.createElement("div",{className:Ua},B?"RETURNED"==Wt?Q("classRoom:you_returned_student_submission",{firstName:jt}):Q("classRoom:no_work_msg"):Q("classRoom:submission_not_required"))),(j||F||Ue)&&"ASSESSMENT"==U&&(aa||sa||St)&&u.a.createElement("div",{className:Ha},u.a.createElement("div",{className:Va},u.a.createElement("div",{className:Wa},Q("assessmentEvaluation:evaluation")),oe&&te&&u.a.createElement("div",{className:g.a.BFlexDivRow},u.a.createElement(ce.Tooltip,{tooltip:Q(Na?"journal:add_to_journal":"classRoom:only_completed_evaluated_responses_can_be_added"),overlayInnerStyle:xe.tooltipOverlayStyle,align:{offset:Na?[10,0]:[27,0]},placement:"bottomRight"},u.a.createElement("div",{className:g.a.createPostIcon},u.a.createElement(le.JournalAddOutlined,{size:"xxx-small",variant:"subtle",disabled:!Na,onClick:function(){Na&&Xe(!0)}}))))),aa&&function(){if(!_.isEmpty(null===Re||void 0===Re?void 0:Re.edges))return _.map(Object(D.rb)({assessmentTools:Re}),(function(e){var t=e.node,a=_.get(t,"assessmentToolItem",{}),n=_.get(t,"id",""),s=_.get(t,"assessmentToolType","");if("SCORE"!==s||Ue){var o=_.get(t,"isTeacherEvaluationEnable",!1),i=_.get(t,"isStudentEvaluationEnable",!1),r=Ue?o:j,c=Ue?i:F,d=Object(D.p)({t:Q,assessmentToolType:s,assessmentTool:a}).assessmentToolText;return Object(D.cb)({assessmentTool:a,assessmentToolType:s,allFields:_.get(H,"allFields",[])})&&(r||c)&&function(e){var t,a=e.assessmentToolText,n=e.assessmentToolId,s=void 0===n?"":n,o=e.assessmentToolType,i=e.assessmentTool,r=e.isTeacherEvaluationEnabled,c=e.isStudentEvaluationEnabled,d="DP_ASSESSMENT_RUBRIC"===o,m=G()((t={},l()(t,g.a.evalCard,!0),l()(t,g.a.evalCardRevamp,pe),l()(t,g.a.activeCon,ot===s),t)),p=function(){it(s)},v=Object(D.N)({isTeacherEvaluationEnabled:r,isStudentEvaluationEnabled:c,isEvaluationApplicable:ne,t:Q}),E="";switch(o){case"SCORE":var h=ne?"".concat(b||"-","/").concat(bt):Q("common:na");E=Q("classRoom:score_with_label",{label:h});break;case"DP_ASSESSMENT_RUBRIC":var C=Object(D.G)({assessmentTool:i,ibPYPElementRatings:Pt}),f=C.totalRatedScore,T=C.totalScore,y=C.showDash,I=ne?"".concat(y?"-":f,"/").concat(T):Q("common:na");E=Q("classRoom:dp_criteria_with_label",{label:I})}var A=Object(D.q)({t:Q,assessmentToolType:o,assessmentTool:i,subtext:E}),O=A.type,R=A.subtext,N=A.icon,k=d?_.get(i,"label"):u.a.createElement(S.a,{tooltip:_.join(v," | "),tooltipContainerStyle:xe.toolTipStyle,mouseEnterDelay:.5,linkStyles:xe.linkStyles},u.a.createElement(u.a.Fragment,null,_.join(v," | ")));return pe?ya({name:k,type:O,isActivated:P===Se.e&&s===ot,onClickCard:p,subtext:R,icon:N}):u.a.createElement(w.a,{isCurrentAcademicYear:oe,placement:"left"},u.a.createElement("div",{className:m,onClick:p},u.a.createElement("div",{className:g.a.addButton},u.a.createElement(he.a,null)),u.a.createElement("div",{className:g.a.BFlexDivCol},u.a.createElement("div",{className:g.a.evalCardTypeText},pe?a:Q("common:evaluate_using_with_label",{label:a})),u.a.createElement("div",{className:g.a.BFlexDivRow},u.a.createElement("div",{className:g.a.evalText},_.join(v," | "))))))}({assessmentToolText:d,assessmentToolId:n,assessmentToolType:s,assessmentTool:a,isTeacherEvaluationEnabled:r,isStudentEvaluationEnabled:c})}}))}(),St&&!Ue&&function(e){var t=e.isEvaluationApplicable;return pe?ya({name:Ia({isEvaluationApplicable:t,scoreValue:b,maxScore:bt}),type:"SCORE BASED ASSESSMENT",isActivated:P===Se.Mc,onClickCard:function(){return va(Se.Mc)}}):u.a.createElement("div",{className:ha,onClick:function(){return va(Se.Mc)}},u.a.createElement("div",{className:g.a.addButton},u.a.createElement(le.AssessmentEvaluatedOutlined,{size:"xx-small",variant:"success"})),u.a.createElement("div",{className:g.a.BFlexDivCol},u.a.createElement("div",{className:g.a.evalCardTypeText},"".concat(Q("common:score"),": ").concat(Ia({isEvaluationApplicable:t,scoreValue:b,maxScore:bt}))),u.a.createElement("div",{className:g.a.evalText},Q("classRoom:max_score_label",{label:bt}))))}({isEvaluationApplicable:ne}),sa&&(pe?ya({name:fa,type:"LEARNING GOALS",isActivated:P===Se.Xb,onClickCard:function(){return va(Se.Xb)}}):u.a.createElement(w.a,{isCurrentAcademicYear:oe,placement:"left"},u.a.createElement("div",{className:Ca,onClick:function(){return va(Se.Xb)}},u.a.createElement("div",{className:g.a.addButton},u.a.createElement(le.GoalsOutlined,{size:"xxx-small"})),u.a.createElement("div",{className:g.a.BFlexDivCol},u.a.createElement("div",{className:g.a.evalCardTypeText},Q("common:rate_on_learning_goals")),u.a.createElement("div",{className:g.a.evalText},fa)))))),u.a.createElement("div",{className:g.a.privateChatCon},u.a.createElement(Ee.a,s()({parentType:"STUDENT_ASSIGNMENT",showUserDetails:!1,parentId:I,setScrollToTop:function(){at((function(e){return De({},e,{isScrolling:!0})}))},conversationId:Kt,conversationLabel:L,showFlatMessage:!0,showMessageCount:!0,showInstructionMessage:!1,showAllMessages:!0,inputTextPlaceHolder:Q("common:write_a_private_message"),footerContainerStyle:xe.footerContainerStyle,footerBottomConStyle:xe.footerBottomConStyle,footerTextBoxStyle:ke?{}:xe.footerTextBoxStyle,footerSendBtnStyle:ke?{}:xe.footerSendBtnStyle,studentData:Ot,excludedItemTypesForConversation:"STUDENT_ASSIGNMENT_SUBMISSION_FEEDBACK",excludeItemTypes:"STUDENT_ASSIGNMENT_SUBMISSION_FEEDBACK",includeItemTypes:["STUDENT_ASSIGNMENT_SUBMISSION"],attachmentCardType:"horizontalV2",horizontalCardStyle:xe.horizontalCardStyle,isRightPaneChat:!0,allowSendMessage:ae&&oe&&!ie&&!Ut&&!We,t:Q,showRemarkOption:K.a.can("FeatureFlag:ShowRemarkInChatBox"),shouldMarkConversationAsRead:Qt>0||!tt.isScrollBarVisible,isScrollAtBottom:tt.isScrollBarAtBottom,showNewMessageTag:!tt.isScrollBarAtBottom,scrollEndRef:It,customMessageContainerClass:pe&&g.a.customMessageContainerClass},pe?xe.chatContainerStyle:{},{messageSubConStyle:xe.messageSubConStyle,attachmentListContainerStyle:xe.attachmentListContainerStyle,emptyStateProps:De({},xe.emptyStateStyles,{illustration:null}),hideZeroPrivateMessageCount:!0,disabledChatComponent:u.a.createElement("div",{className:g.a.disabledDiscussion},Q("common:disabled_private_messages_private_post"))})))),u.a.createElement("div",{className:g.a.dummyScrollDiv,ref:It})),qe&&u.a.createElement(Ce.a,{onClose:function(e){setTimeout((function(){Je(!1)})),Pe={},Ne="","CLOSE"!=e&&Qe&&Xe(!1)},postCreateDetail:De({},Pe,{curriculumProgramId:me}),currentStep:Object(Oe.o)(X)?"MANAGE_SUBJECT_JOURNAL_POST_DETAILS":"POST_DETAIL",createPostTitle:Ne}),ct&&u.a.createElement(Ce.a,{onClose:xa,parentType:"STUDENT_ASSIGNMENT_SUBMISSION",parentId:Vt,mediaCreationOptions:D.b}),Qe&&u.a.createElement(O.a,{type:"studentassignment",id:I,onClose:function(){return Xe(!1)},onSubmitClick:function(e){var t={mimeType:"application/pdf",type:"FILE",url:e.fileUrl};Pe=Object(D.y)({attachments:[t],student:Ot,content:H,curriculumProgramType:X,courseId:_.get(ue,"id","")}),Ne=Q("classRoom:add_evaluation_portfolio"),setTimeout((function(){Je(!0)}))},submitButtonText:Q("common:next"),downloadFileName:Q("assessmentEvaluation:person_evaluation",{name:jt})})),!T&&y&&u.a.createElement("div",{className:g.a.loadingContainer},u.a.createElement(C.a,null)),_t&&u.a.createElement(f.a,null))}));Le.displayName="ClassRoomMediaDetails",Le.defaultProps={showSendMessageOption:!0,showCreatePostButton:!0,showActionButtons:!0};var Be={updateQueryParameters:Te.B,getCriteriaSetOfPypType:N.W,openLinkInNewTab:N.Ib,downloadAttachmentZip:N.K,updateAssignmentSubmissionState:J.updateAssignmentSubmissionState},je=Object(d.c)(Object(T.a)({resource:["common","classRoom","assessmentEvaluation","journal"]}),Object(m.connect)((function(e,t){var a=t.studentAssignmentId,n=_.get(t,"params.classRoomId",""),s=_.get(e,"login.userInfo.org_id",""),o=_.get(e,"login.userInfo.user_type",""),i=_.get(e,"platform.currentCurriculumProgramType"),r=Object(ee.e)({name:"EnableAddResponseOfAssignmentByTeacher",organizationId:s}),l=Object(D.M)({curriculumProgramType:i});return{isData:!0,isLoading:!1,currentMedia:_.get(t,"location.query.currentMedia"),assessmentToolFromQuery:_.get(t,"location.query.assessmentTool"),userType:o,curriculumProgramType:i,assignmentId:n,isArchivedClass:_.get(e,"teacher.selected_class.isArchivedClass"),organizationId:s,assignmentDetailsVariables:{id:a,showOnlySubmitted:!1,userFilter:"staff"===o?"ALL":"SELF"},isAddResponseByTeacherEnabled:!_.isArray(r)&&r,enableMultiAssessmentTools:l}}),Be,null,{withRef:!0}),Object(d.d)(v.p,{name:"getStudentAssignmentDetailsQuery",skip:function(e){return!e.studentAssignmentId},options:function(e){return{fetchPolicy:"cache-and-network",variables:e.assignmentDetailsVariables,context:{useHttpLink:!0}}},props:function(e){var t=e.getStudentAssignmentDetailsQuery,a=e.ownProps,n=a.studentAssignmentId,s=a.isData,o=a.isLoading,i=a.assignmentDetailsVariables,r=Object(b.p)(i)||{},l=_.get(r,"assignment.curriculumProgram.type","IB_PYP"),c=_.get(r,"assignment.curriculumProgram.id");return{onPusherEventTriggered:function(e){e.studentAssignmentId==n&&t.refetch()},isData:!_.isEmpty(r)&&s,studentAssignmentData:r,isLoading:1==t.networkStatus||2==t.networkStatus||o,curriculumProgramType:l,curriculumProgramId:c}}}),Object(y.a)(["studentAssignmentSubmitted"]),Object(I.a)({cb:D.z}))(Le);t.default=je},6788:function(e,t,a){"use strict";a.r(t);var n=a(82),s=a.n(n),o=a(6),i=a.n(o),r=a(13),l=a.n(r),c=a(30),u=a.n(c),d=a(1),m=a.n(d),p=a(0),g=a.n(p),v=a(4096),b=a(84),S=a(27),E=a(2255),h=a(2217),C=a(1411),f=a(413),T=a(1193),y=a(3876),I=a(902),A=a(15),w=a(4850),O=a.n(w),R=a(105),D=a(112),N=a(55),k=a(2212),P=a(3901),x=a(3647),M=a(26),L=a(4508),B=a(98),j=a(4274),F=a(45),U=a(36),H=a(69),V=a(1410),W=a(8),G=a(6587),z=a(2),Y=a.n(z),q=a(2201),J=a(41),K=a(12),Z=a.n(K),Q=a(63),X=a(88),$=a(99);function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(a),!0).forEach((function(t){m()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ae={attachmentContainer:{gridTemplateColumns:"minMax(100px, 240px)",gridGap:"16px"},horizontalCardStyle:{border:"none",height:"unset",padding:"0px",borderRadius:"4px",backgroundColor:"unset"},imageContainerStyle:{width:"40px",height:"40px"},studentHeaderCellStyle:{paddingLeft:"24px"},unveilContainerStyle:{padding:"16px 0px 0px 24px",textOverflow:"ellipsis"},actionContainer:{justifyContent:"center"},publishBtnStyle:{color:"blue",containerStyle:{borderRadius:"8px"}},cancelBtnStyle:{type:"hollow",containerStyle:{borderRadius:"8px",borderColor:F.colors.borderSubtle}},modalBodyStyle:{color:F.colors.textDefault,fontSize:"1.6rem",fontWeight:J.f.AvenirNextMedium},overlayStyle:{maxWidth:"200px"}},ne={labelStyle:te({fontSize:"1.8rem"},F.fontStyles.bold,{marginBottom:"8px"})},se=[{id:"student",style:ae.studentHeaderCellStyle},{id:"attachments"},{id:"evaluation"},{id:"similarityIndex"},{id:"status"},{id:"actions",style:ae.actionContainer}],oe=g.a.memo((function(e){var t=e.assignedStudentsCount,a=e.submissionsCount,n=e.downloadAttachmentZip,s=e.studentsSubmissions,o=e.contentType,i=e.notSubmittedCount,r=e.notEvaluatedCount,l=e.notSharedWithStudentsCount,c=e.evaluatedCount,u=e.sharedWithStudentsCount,d=e.onEvaluationAction,m=e.isTeacherEvaluationEnabled,_=e.isStudentSubmissionEnabled,p=e.assessmentToolTypeHasEval,v=e.showEvaluationDropdown,b=e.t,S=e.isArchivedClass,h=e.assignmentId,C=(e.courseId,e.postsAddedToJournalCount),f=e.responsesEvaluatedButNotPublishedToJournal,T=e.classroomPostDetails,y=e.content,I=e.onAddResponseToJournal,A=e.setPostData,w=e.isPrivate,R=e.curriculumProgramId,D=e.isCurrentAcademicYear,k=Y.a.get(Y.a.filter(s,(function(e){return Y.a.get(e,"isSubmitted")&&Y.a.size(Y.a.get(e,"submission.attachmentGroups",[])||[])})),"length",0)>0,P=Y.a.size(f),x=Y.a.map(f,(function(e){return Y.a.get(e,"student")})),M=U.a.can("FeatureFlag:EnableLePostInJournal"),B=Object(N.Y)({postsAddedToJournalCount:C,assignedStudentsCount:t,responsesEvaluatedButNotPublishedToJournalCount:P}),j=B.tooltip,F=B.tooltipContainerStyle,H=B.align,V=B.isDisabled,G=B.isPostAddIcon,z=B.iconVariant,q=B.hasOnClickAction;return g.a.createElement("div",{className:O.a.headerCon},g.a.createElement("div",{className:O.a.headerLabel},b("classRoom:all_submissions")),g.a.createElement("div",{className:O.a.BFlexDivRow},g.a.createElement("div",{className:O.a.countWrapper},g.a.createElement("div",{className:O.a.countCon},g.a.createElement("div",{className:O.a.countNum},t),g.a.createElement("div",{className:O.a.countLabel},b(w?"classRoom:privately_assigned":"classRoom:assigned"))),g.a.createElement("div",{className:O.a.countCon},g.a.createElement("div",{className:O.a.countNum},a),g.a.createElement("div",{className:O.a.countLabel},b("classRoom:turned_in"))),g.a.createElement("div",{className:O.a.countCon},g.a.createElement("div",{className:O.a.countNum},c),g.a.createElement("div",{className:O.a.countLabel},b(m?"classRoom:evaluated_lable":"classRoom:completed"))),"ASSESSMENT"===o&&u>0&&m&&p&&g.a.createElement("div",{className:O.a.countCon},g.a.createElement("div",{className:O.a.countNum},u),g.a.createElement("div",{className:O.a.countLabel},b("classRoom:shared")))),g.a.createElement("div",{className:O.a.innerRightContainer},D&&"ASSESSMENT"===o&&M&&g.a.createElement("div",{className:O.a.bulkPostIcon,onClick:q?function(){if(1===P){var e=f[0];I(Y.a.get(e,"id"),x[0],Y.a.get(e,"submission.response"),Y.a.get(e,"submission.attachmentGroups"))}else{var t=te({},Y.a.omit(T,["title","students"]),{isAddAllResponsesToJournal:!0,studentsWithResponsePendingToPublish:x,assignmentId:h,LETitle:Y.a.get(y,"title.value"),assessmentId:Y.a.get(y,"id"),assessmentType:Y.a.get(y,"assessmentType.value"),curriculumProgramId:R});A({mediaData:t,showMediaCreation:!0,createPostTitle:b("classRoom:add_all_responses_to_journal")})}}:void 0},g.a.createElement(E.a,{tooltip:b(j),placement:"bottomRight",alignConfig:H,tooltipContainerStyle:F},g.a.createElement("div",{className:O.a.addResponsesIcon},G?g.a.createElement(W.JournalAddOutlined,{size:"xx-small",variant:z,disabled:V}):g.a.createElement(W.JournalTickOutlined,{size:"xx-small",variant:z})))),v&&g.a.createElement(L.a,{isBulk:!0,notSubmittedCount:i,submissionsCount:a,notEvaluatedCount:r,notSharedWithStudentsCount:l,showMarkEvaluatedShareButton:"ASSESSMENT"===o&&m&&p,showReturnButton:!1,onMarkEvaluatedShare:function(e){var t=te({},e,{isBulk:!0});d(t)},onDownloadSubmission:function(){var e=Object(N.i)({studentsSubmissions:s});n({attachmentsObjects:e})},isTeacherEvaluationEnabled:m,isStudentSubmissionEnabled:_,totalStudents:t,isArchivedClass:S,canDownloadBulkSubmissions:k}))))}));oe.displayName="Header";var ie=g.a.memo((function(e){var t=e.t,a=e.isEvaluationAvailable,n=e.isSimilarityCheckEnabled,s=e.isTurnitinEnabledForGrade,o=e.isTeacherEvaluationEnabled,i=e.isStudentEvaluationEnabled,r={student:t("classRoom:student_name"),attachments:t("classRoom:student_work"),evaluation:t("common:evaluation"),similarityIndex:t("classRoom:similarity_index"),status:t("common:status"),actions:t("common:action_plural")},l=n&&s,c=a&&(o||i),u=Z()(m()({},O.a.submissionHeader,!0),m()({},O.a.fourColumns,!l&&!c),m()({},O.a.fiveColumns,l||c),m()({},O.a.sixColumns,l&&c));return g.a.createElement("div",{className:u},Y.a.map(se,(function(e){var t=e.id,n=e.style,s=Y.a.get(r,"".concat(t),"");return function(e){var t=e.id,a=e.isEvaluationAvailable,n=e.isTeacherEvaluationEnabled,s=e.isStudentEvaluationEnabled,o=e.showSimilarityIndex;return"evaluation"==t?a&&(n||s):"similarityIndex"!==t||!!o}({id:t,isEvaluationAvailable:a,isStudentEvaluationEnabled:i,isTeacherEvaluationEnabled:o,showSimilarityIndex:l})?g.a.createElement("div",{className:O.a.submissionHeaderCell,style:n||{}},s):null})))}));ie.displayName="StudentSubmissionHeader";var re=g.a.memo((function(e){var t=e.student,a=e.id,n=e.status,s=e.ibPYPElementRatings,o=e.submission,i=e.isSubmitted,r=e.onAddResponseToJournal,l=e.changeIsLoading,c=e.content,u=e.curriculumProgramType,d=e.course,_=e.setPostData,b=e.t,S=e.curriculumProgramId,E=e.conversation,h=e.requestResubmission,C=e.isTeacherEvaluationEnabled,f=e.isStudentEvaluationEnabled,T=e.showSimilarityIndex,y=e.isAddResponseByTeacherEnabled,I=e.isEvaluated,A=e.isStudentSubmissionEnabled,w=e.isArchivedClass,R=e.onClickStep,D=e.showCreatePostButton,M=e.isCurrentAcademicYear,B=e.isScoreEnabled,j=e.maxScore,F=e.showAssessmentTool,U=e.assessmentToolText,H=e.showRateLearningGoals,V=e.assignmentId,z=e.showEvaluationDropdown,q=e.isSharedWithStudent,J=e.isEvaluationApplicable,K=e.contentType,Q=e.assessmentToolTypeHasEval,X=e.onEvaluationAction,$=e.assignedStudentsCount,ee=e.post,ne=e.isPrivate,oe=e.updateAssignmentSubmissionState,ie=e.goToRelativeRoute,re=e.downloadAttachmentZip,le=(e.organizationId,e.isEvaluationAvailable),ce=t.id,ue=t.firstName,de=t.lastName,me=t.profileImage,_e=t.isArchived,pe=function(e,t){var n=Y.a.get(t,"attachmentId")||e;ie({route:"../mediamanager/".concat(a,"/?currentMedia=").concat(n,"&&fromAllSubmission=true")})},ge=Y.a.get(Y.a.find(s,(function(e){return"SCORE"===e.ibPYPElementType})),"value"),ve=Y.a.get(o,"id",""),be=Y.a.get(o,"status",""),Se="SUBMITTED"==be||i,Ee=Y.a.get(o,"response","")||"",he=Y.a.get(o,"attachmentGroups",[])||[],Ce=Object(v.a)({attachmentGroups:he,submissionId:ve})||{},fe=Ce.attachmentGroups,Te=Ce.submissionId;Object(p.useEffect)((function(){Y.a.size(fe)>Y.a.size(he)&&Te==ve&&Oe(),Y.a.size(fe)<Y.a.size(he)&&Te==ve&&Re()}),[he]);var ye=Y.a.get(o,"attachments",[])||[],Ie=Object(N.w)({attachmentGroups:he,attachments:ye}),Ae=function(){var e=Object(N.kb)({studentId:ce,firstName:ue,lastName:de,attachmentGroups:he,attachments:ye,response:Ee});re({attachmentsObjects:e})},we=function(){r(a,t,Ee,he)},Oe=function(){0===Y.a.get(Y.a.filter(he,(function(e){return"staff"===Y.a.get(e,"attachments[0].createdBy.type")})),"length",0)&&oe({changeIsLoading:l,submission:o,status:"DRAFT",statusOnResponseUnsuccessful:"SUBMITTED"})},Re=function(){var e=Y.a.differenceWith(he,fe,(function(e,t){return Y.a.isEqual(e.id,t.id)}));"staff"===Y.a.get(e,"[0].attachments[0].createdBy.type","")&&"SUBMITTED"!==be&&oe({changeIsLoading:l,submission:o,status:"SUBMITTED",statusOnResponseUnsuccessful:"DRAFT"})},De=function(e){var a=Object(N.y)({attachments:[Y.a.omit(e,["isPost","createdBy","similarityReport","isRead","questionAttachment"])],student:t,content:c,title:Ee,curriculumProgramType:u,courseId:Y.a.get(d,"id","")});_({mediaData:te({},a,{curriculumProgramId:S}),showMediaCreation:!0,createPostTitle:b("classRoom:add_student_work_portfolio")})},Ne=function(e){var t=Y.a.get(E,"id","");null===h||void 0===h||h({promptText:e,submission:o,parentId:t})},ke=Object(N.s)({status:n,t:b}),Pe=le&&(C||f),xe=Z()(m()({},O.a.submissionCard,!0),m()({},O.a.fourColumns,!T&&!Pe),m()({},O.a.fiveColumns,T||Pe),m()({},O.a.sixColumns,T&&Pe)),Me=y&&!I&&A&&!w;return g.a.createElement("div",{key:a,className:xe},Y.a.map(se,(function(e){var n=e.id;switch(n){case"student":return g.a.createElement("div",{className:O.a.studentContainer,key:n},g.a.createElement("div",{className:O.a.studentDetails,onClick:function(){return R(a)}},g.a.createElement(k.a,{id:ce,profileImage:me,name:"".concat(ue," ").concat(de),isArchived:_e})));case"attachments":return Y.a.isEmpty(Ie)?g.a.createElement("div",{className:O.a.noAttachment},"-"):g.a.createElement("div",{className:O.a.attachmentContainer,key:n},g.a.createElement(x.a,{cardType:"horizontalV3",mode:"view",value:Ie,attachmentContainerStyle:ae.attachmentContainer,onClickAttachmentCard:pe,imageContainerStyle:ae.imageContainerStyle,showCreatePostButton:D&&Se&&M,onClickCreatePost:De,parentType:"STUDENT_ASSIGNMENT_SUBMISSION",parentId:ve,shouldCallMutation:Me,showDeleteForSelfInViewMode:Me}));case"evaluation":return le&&(C||f)?g.a.createElement("div",{key:n},C&&B?g.a.createElement("div",null,g.a.createElement("div",{className:O.a.evaluationScoreContainer,onClick:function(){return pe("score")}},g.a.createElement("div",{className:O.a.evaluationTypeContainer},g.a.createElement("div",{className:O.a.iconContainer},g.a.createElement(W.AssessmentEvaluatedOutlined,{variant:"link"})),g.a.createElement("div",{className:O.a.titleContainer},"".concat(b("common:score"),":"))),ge?g.a.createElement("div",null,g.a.createElement("span",{className:O.a.studentScore},ge),g.a.createElement("span",null," /".concat(j))):g.a.createElement("div",{className:O.a.emptyScoreMsg},b("classRoom:not_graded_yet")))):null,F?g.a.createElement("div",{className:O.a.evaluationContainer,onClick:function(){return pe("assessmentTool")}},g.a.createElement("div",{className:O.a.iconContainer},g.a.createElement(G.a,null)),g.a.createElement("div",{className:O.a.titleContainer},U)):null,H?g.a.createElement("div",{className:O.a.evaluationContainer,onClick:function(){return pe("learningGoals")}},g.a.createElement("div",{className:O.a.iconContainer},g.a.createElement(W.GoalsOutlined,{size:"xxx-small",variant:"success"})),g.a.createElement("div",{className:O.a.titleContainer},b("common:pyp_elements"))):null):null;case"similarityIndex":return T&&(Y.a.isEmpty(Ie)?g.a.createElement("div",{className:O.a.noAttachment},"-"):g.a.createElement("div",{className:O.a.similarityContainer,key:n},Y.a.map(Ie,(function(e){return g.a.createElement("div",{className:O.a.attachmentSimilarity},g.a.createElement(P.a,{metadata:{entityId:Y.a.get(o,"id"),entityType:"STUDENT_ASSIGNMENT_SUBMISSION",additionalData:{assignmentId:V}},attachment:e,course:d,showSimilarityInAllSubmission:!0}))}))));case"status":return g.a.createElement("div",{className:O.a.statusContainer,key:n},ke);case"actions":return z&&g.a.createElement("div",{className:O.a.actionContainer,key:n},g.a.createElement(L.a,{isSubmitted:Se,isEvaluated:I,isSharedWithStudent:q,isEvaluationApplicable:J,student:t,showMarkEvaluatedShareButton:"ASSESSMENT"===K&&C&&Q,showReturnButton:A,onMarkEvaluatedShare:function(e){X(te({},e,{id:a}))},onMarkEvaluationApplicable:function(e){X(te({},e,{id:a}))},onDownloadSubmission:Ae,submissionStatus:be,isTeacherEvaluationEnabled:C,isStudentSubmissionEnabled:A,totalStudents:$,isArchived:_e,isArchivedClass:w,showAddResponseToJournal:"ASSESSMENT"===K,onAddResponse:we,isAlreadyAddedToJournal:!Y.a.isEqual(ee,null),isPrivate:ne,submissionId:ve,showAddResponseByTeacher:!0,submission:o,onRequestResubmission:Ne,isAttachmentGroupsEmpty:Y.a.isEmpty(he)}))}})))}));re.displayName="StudentSubmissionCard";var le=g.a.memo((function(e){var t=e.assignmentId,a=e.studentsSubmissions,n=e.downloadAttachmentZip,s=e.goToRelativeRoute,o=e.onEvaluationAction,i=e.contentType,r=e.isTeacherEvaluationEnabled,l=e.assessmentToolTypeHasEval,c=e.isStudentSubmissionEnabled,u=e.assignedStudentsCount,d=e.t,m=e.onClickStep,_=e.showEvaluationDropdown,p=e.isArchivedClass,v=e.isSimilarityCheckEnabled,b=e.isTurnitinEnabledForGrade,S=e.course,E=e.content,h=e.curriculumProgramType,C=e.isStudentEvaluationEnabled,f=e.isPrivate,T=e.assessmentToolType,y=e.onAddResponseToJournal,I=e.setPostData,A=e.assessmentToolAvailable,w=e.assessmentFields,R=e.getCriteriaSetOfPypType,D=e.curriculumProgramId,k=e.isCurrentAcademicYear,P=e.showCreatePostButton,x=e.isAddResponseByTeacherEnabled,L=e.requestResubmission,B=e.changeIsLoading,j=e.updateAssignmentSubmissionState,F=e.organizationId,U=e.isEvaluationAvailable,H=e.leHasPypEvaluation,V=v&&b,W=!Y.a.isEmpty(T)&&l&&A,G=Object(N.c)({assessmentFields:w,curriculumProgramType:h,getCriteriaSetOfPypType:R}),z=r&&H&&!G,q=d(Y.a.get(Y.a.find(M.a,(function(e){return e.type==T})),"locale","")),J=Object($.getScoreDetailsMemoize)({assessmentFields:Y.a.get(E,"fields",[])}),K=J.isScoreEnabled,Z=J.maxScore;return g.a.createElement("div",{className:O.a.submissionCardsCon},Y.a.map(a,(function(e){var a=e.id,v=e.student,b=e.submission,T=void 0===b?{}:b,A=e.isEvaluated,w=e.isEvaluationApplicable,O=e.isSubmitted,R=e.isSharedWithStudent,N=e.status,M=e.post,H=e.ibPYPElementRatings,G=e.conversation;return g.a.createElement(re,{student:v,id:a,status:N,ibPYPElementRatings:H,submission:T,isSubmitted:O,onAddResponseToJournal:y,changeIsLoading:B,content:E,curriculumProgramType:h,course:S,setPostData:I,t:d,curriculumProgramId:D,conversation:G,requestResubmission:L,isTeacherEvaluationEnabled:r,isStudentEvaluationEnabled:C,showSimilarityIndex:V,isAddResponseByTeacherEnabled:x,isEvaluated:A,isStudentSubmissionEnabled:c,isArchivedClass:p,onClickStep:m,showCreatePostButton:P,isCurrentAcademicYear:k,isScoreEnabled:K&&Z,maxScore:Z,showAssessmentTool:W,assessmentToolText:q,showRateLearningGoals:z,assignmentId:t,showEvaluationDropdown:_,isSharedWithStudent:R,isEvaluationApplicable:w,contentType:i,assessmentToolTypeHasEval:l,onEvaluationAction:o,assignedStudentsCount:u,post:M,isPrivate:f,updateAssignmentSubmissionState:j,goToRelativeRoute:s,downloadAttachmentZip:n,organizationId:F,isEvaluationAvailable:U})})))}));le.displayName="StudentSubmissionCards";var ce=g.a.memo((function(e){var t=e.state,a=e.studentsSubmissions,n=e.downloadAttachmentZip,o=e.submissionsCount,r=e.assignedStudentsCount,c=e.goToRelativeRoute,d=e.assignedStudents,_=e.assignmentId,v=e.contentType,b=(e.assessmentId,e.editStudentAssignment),S=e.userType,E=e.assignmentBulkAction,f=e.isTeacherEvaluationEnabled,T=e.assessmentToolType,y=e.isStudentSubmissionEnabled,I=e.currentTabView,w=e.content,R=e.template,k=e.isStudentEvaluationEnabled,P=e.t,x=e.onClickStep,L=e.showEvaluationDropdown,B=e.isArchivedClass,F=e.isSimilarityCheckEnabled,U=e.isTurnitinEnabledForGrade,H=e.course,V=e.curriculumProgramType,W=e.isPrivate,G=e.assessmentTool,z=e.assessmentFields,J=e.getCriteriaSetOfPypType,K=e.curriculumProgramId,Q=e.getIsCurrentAcademicYear,X=e.showCreatePostButton,ee=e.isAddResponseByTeacherEnabled,ae=e.unHandStudentAssignmentSubmission,se=e.updateAssignmentSubmissionState,re=e.organizationId,ce=Object(p.useState)(!1),ue=u()(ce,2),de=ue[0],me=ue[1],_e=Object(p.useState)({mediaData:{},showMediaCreation:!1,createPostTitle:""}),pe=u()(_e,2),ge=pe[0],ve=pe[1],be=Y.a.get(Y.a.filter(d,(function(e){return!Y.a.get(e,"isEvaluated",!1)})),"length",0),Se=Y.a.get(Y.a.filter(d,(function(e){return!Y.a.get(e,"isSubmitted",!1)})),"length",0),Ee=Y.a.get(Y.a.filter(d,(function(e){return!Y.a.get(e,"isSharedWithStudent",!1)})),"length",0),he=r-be,Ce=r-Ee,fe=Y.a.get(Y.a.find(M.a,(function(e){return e.type==T})),"hasEvaluation",!1),Te=Y.a.get(w,"allFields"),ye={assessmentTool:G,assessmentToolType:T,allFields:Te},Ie=Object(N.cb)(ye),Ae=Object(N.d)({assessmentDetails:ye,curriculumProgramType:V}),we=Object($.getScoreDetailsMemoize)({allFields:Te}).isScoreEnabled,Oe=Ie||Ae||we,Re=Y.a.reduce(a,(function(e,t){return e+(Y.a.isEmpty(Y.a.get(t,"post",{}))?0:1)}),0),De=Object(N.y)({content:w,curriculumProgramType:V,courseId:Y.a.get(H,"id","")}),Ne=function(){var e=l()(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,me(!0),e.next=4,E(t);case 4:e.sent,me(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=l()(i.a.mark((function e(t){var a,n,s,o,r,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.isEvaluated,n=t.isSharedWithStudent,s=t.id,o=t.isEvaluationApplicable,r=t.evalStatus,l=void 0===r?"EVAL_COMPLETE":r,me(!0),e.next=4,b({id:s,isEvaluated:a,isSharedWithStudent:n,isEvaluationApplicable:o});case 4:if(c=e.sent,me(!1),c.successful){e.next=12;break}throw Object(D.B)({id:s,showOnlySubmitted:!1,userFilter:"staff"==S?"ALL":"SELF",data:"EVAL_COMPLETE"===l?{isEvaluated:!a,isSharedWithStudent:n,isEvaluationApplicable:o}:{isEvaluated:a,isSharedWithStudent:n,isEvaluationApplicable:!o}}),Object(A.nb)(c.errors[0]),Error(c.errors[0]);case 12:Object(D.B)({id:s,showOnlySubmitted:!1,userFilter:"staff"==S?"ALL":"SELF",data:{isEvaluated:a,isSharedWithStudent:n,isEvaluationApplicable:o}});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(e,t,a,n){var s=Object(N.y)({student:t,content:w,curriculumProgramType:V,title:a,courseId:Y.a.get(H,"id","")}),o=Y.a.omit(te({},s,{isAddLEToJournal:!0,LETitle:Y.a.get(w,"title.value",""),studentAssignmentId:e,items:[{item:{id:e,assignment:{content:te({},w,{},R),id:e,isStudentEvaluationEnabled:k,isTeacherEvaluationEnabled:f},ibPYPElementRatings:[],student:t,submission:{attachmentGroups:n,response:a},toolResponses:{}},itemType:"STUDENT_ASSIGNMENT"}],curriculumProgramId:K}),["title"]);setTimeout((function(){ve({createPostTitle:P("classRoom:add_response_to_journal_by_name",{firstName:Y.a.get(t,"firstName","")}),mediaData:Y.a.omit(o,["title"]),showMediaCreation:!0})}))},xe=function(){var e=l()(i.a.mark((function e(t){var a,n,s,o,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.promptText,n=t.submission,s=t.parentId,o=Y.a.get(n,"id",""),r={id:o,status:"RETURNED",statusMessage:{label:a,itemType:"ATTACHMENTS",parentId:s}},me(!0),e.next=6,ae(r);case 6:l=e.sent,me(!1),l.successful?Object(D.A)({id:o,data:te({},n,{status:"RETURNED"})}):(Object(D.A)({id:o,data:te({},n,{status:"SUBMITTED"})}),Object(A.nb)(l.errors[0]));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=Y.a.filter(d,(function(e){var t=Y.a.get(e,"post"),a=Y.a.get(e,"isEvaluated");if(!t&&a)return e})),Le=Q();if("SCHEDULED"==t||"instructions"==I)return g.a.createElement("div",{className:O.a.instructionsCardWrapper},g.a.createElement(j.a,{item:w,itemStyle:ne,contentType:v,isTeacherEvaluationEnabled:f,isStudentEvaluationEnabled:k,template:R}));var Be=Z()(m()({},O.a.container,!0));return g.a.createElement("div",{className:Be},g.a.createElement(oe,{assignedStudentsCount:r,submissionsCount:o,downloadAttachmentZip:n,studentsSubmissions:a,notEvaluatedCount:be,notSharedWithStudentsCount:Ee,notSubmittedCount:Se,evaluatedCount:he,sharedWithStudentsCount:Ce,contentType:v,onEvaluationAction:function(e){var t=e.isBulk,a=s()(e,["isBulk"]);t?Ne(te({id:_},a)):ke(a)},isTeacherEvaluationEnabled:f,assessmentToolTypeHasEval:fe,isStudentSubmissionEnabled:y,showEvaluationDropdown:L,t:P,isArchivedClass:B,assignmentId:_,courseId:H.Id,postsAddedToJournalCount:Re,responsesEvaluatedButNotPublishedToJournal:Me,classroomPostDetails:De,content:w,onAddResponseToJournal:Pe,setPostData:ve,isPrivate:W,curriculumProgramId:K,isCurrentAcademicYear:Le}),r>0?g.a.createElement(g.a.Fragment,null,g.a.createElement(ie,{t:P,isEvaluationAvailable:Oe,isSimilarityCheckEnabled:F,isTurnitinEnabledForGrade:U,isTeacherEvaluationEnabled:f,isStudentEvaluationEnabled:k}),g.a.createElement(le,{assignmentId:_,assignedStudentsCount:r,studentsSubmissions:a,downloadAttachmentZip:n,goToRelativeRoute:c,contentType:v,onEvaluationAction:ke,isTeacherEvaluationEnabled:f,assessmentToolTypeHasEval:fe,isStudentSubmissionEnabled:y,t:P,onClickStep:x,isArchivedClass:B,isSimilarityCheckEnabled:F,isTurnitinEnabledForGrade:U,showEvaluationDropdown:L,course:H,content:w,template:R,curriculumProgramType:V,isStudentEvaluationEnabled:k,assessmentToolType:T,isPrivate:W,onAddResponseToJournal:Pe,setPostData:ve,assessmentToolAvailable:Ie,assessmentFields:z,getCriteriaSetOfPypType:J,curriculumProgramId:K,isCurrentAcademicYear:Le,showCreatePostButton:X,isAddResponseByTeacherEnabled:ee,requestResubmission:xe,changeIsLoading:me,updateAssignmentSubmissionState:se,organizationId:re,isEvaluationAvailable:Oe,leHasPypEvaluation:Ae})):g.a.createElement(h.a,{emptyText:P("common:no_label_yet",{label:P("common:submission_plural")}),isSearch:!0,emptyHeaderText:""}),Y.a.get(ge,"showMediaCreation")&&g.a.createElement(q.a,{onClose:function(){setTimeout((function(){ve({mediaData:{},showMediaCreation:!1,createPostTitle:""})}))},postCreateDetail:Y.a.get(ge,"mediaData"),currentStep:"POST_DETAIL",createPostTitle:Y.a.get(ge,"createPostTitle")}),de&&g.a.createElement(C.a,null))}));ce.displayName="AllSubmissions",ce.defaultProps={showEvaluationDropdown:!0};var ue={downloadAttachmentZip:M.K,goToRelativeRoute:M.Ab,editStudentAssignment:B.editStudentAssignment,assignmentBulkAction:B.assignmentBulkAction,getCriteriaSetOfPypType:M.W,getIsCurrentAcademicYear:X.getIsCurrentAcademicYear,unHandStudentAssignmentSubmission:B.unHandStudentAssignmentSubmission,updateAssignmentSubmissionState:B.updateAssignmentSubmissionState},de=Object(b.c)(Object(f.a)({resource:["common","classRoom"]}),Object(S.connect)((function(e,t){var a=Y.a.get(e,"login.userInfo.org_id",""),n=Object(H.e)({name:"TurnitinEnabledGrades",organizationId:a,readFromUserAndOrgLevel:!0}),s=Y.a.get(t,"course",{}),o=Y.a.map(Y.a.get(s,"grades",[]),"id"),i=!Y.a.isEmpty(Y.a.intersection(n,o)),r=Object(H.e)({name:"EnableAddResponseOfAssignmentByTeacher",organizationId:a});return{isData:!0,isLoading:!1,assignmentId:t.params.classRoomId,userType:e.login.userInfo.user_type,isArchivedClass:Y.a.get(e,"teacher.selected_class.isArchivedClass"),isTurnitinEnabledForGrade:i,course:s,perm:["TeacherPortal",Q.x],showErrorComp:!0,isAddResponseByTeacherEnabled:!Y.a.isArray(r)&&r,organizationId:a}}),ue),Object(b.d)(R.c,{name:"getAssignmentAllSubmission",skip:function(e){var t=e.assignmentId,a=e.userType;return!t||"staff"!=a},options:function(e){return{fetchPolicy:"cache-and-network",variables:{id:e.assignmentId}}},props:function(e){var t=e.getAssignmentAllSubmission,a=e.ownProps,n=a.assignmentId,s=a.isData,o=a.isLoading,i=Object(D.c)({id:n}),r=Y.a.get(i,"assignedStudents",[]),l=Y.a.get(i,"counts.totalAssignedStudents",0),c=Y.a.get(i,"counts.totalSubmissions",0),u=Y.a.get(i,"assignedStudents",[]),d=Y.a.get(i,"curriculumProgram.id"),m=Y.a.get(i,"curriculumProgram.type","IB_PYP");return{onPusherEventTriggered:function(e){e.assignmentId==n&&t.refetch()},isData:!Y.a.isEmpty(i)&&s,studentsSubmissions:r,assignedStudentsCount:l,submissionsCount:c,assignedStudents:u,curriculumProgramId:d,curriculumProgramType:m,isLoading:1==t.networkStatus||2==t.networkStatus||o}}}),Object(T.a)({cb:N.z}),Object(y.a)(["studentAssignmentSubmitted","attachmentSimilarityReportUpdate"]),I.a,V.a)(ce),me=a(19),_e=a.n(me),pe=a(3650),ge=a(11),ve=a(4846),be=a.n(ve),Se=a(24),Ee=a(9),he=a(4848),Ce=a.n(he),fe=function(e){var t=e.showStatusIcon,a=void 0!==t&&t,n=e.statusTooltip,s=void 0===n?"":n,o=e.toolTipStyle,i=void 0===o?{}:o,r=e.statusIcon,l=e.tooltipPlacement,c=void 0===l?"bottom":l,u=e.alignConfig,d=e.statusTagState,m=d.showTag,_=d.tagColor,p=d.tagIcon,v=d.tagLabel;return a?g.a.createElement(g.a.Fragment,null,g.a.createElement(E.a,{placement:c,tooltip:s,mouseEnterDelay:.5,tooltipContainerStyle:i,alignConfig:u},g.a.createElement("div",{className:Ce.a.iconCon},r)),m&&g.a.createElement(ge.Tag,{size:"xx-small",color:_},g.a.createElement("div",{className:Ce.a.BFlexDivRow},p,g.a.createElement("div",{className:Ce.a.submissionStatusLabel},v)))):"-"},Te=a(654),ye=a(53),Ie=a(294),Ae=a(52),we=a(107);function Oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(a),!0).forEach((function(t){m()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var De={attachmentContainer:{gridTemplateColumns:"minMax(100px, 800px)",gridGap:"8px"},horizontalCardStyle:{border:"none",height:"unset",padding:"0px",borderRadius:"4px",backgroundColor:"unset"},imageContainerStyle:{width:"40px",height:"40px"},unveilContainerStyle:{padding:"16px 0px 0px 24px",textOverflow:"ellipsis"},publishBtnStyle:{color:"blue",containerStyle:{borderRadius:"8px"}},cancelBtnStyle:{type:"hollow",containerStyle:{borderRadius:"8px",borderColor:F.colors.borderSubtle}},modalBodyStyle:{color:F.colors.textDefault,fontSize:"1.6rem",fontWeight:J.f.AvenirNextMedium},overlayStyle:{maxWidth:"200px"},avatarStyles:{size:"small",shape:"circle",iconType:"individual",shade:"light",randomizeColor:!0},dropdownStyles:{zIndex:9999}},Ne={labelStyle:Re({fontSize:"1.8rem"},F.fontStyles.bold,{marginBottom:"8px"})},ke=function(e){var t,a,n=e.onClick,s=e.questionAttachments,o=e.submission,i=e.t,r=_.filter(o,(function(e){var t=_.get(e,"attachments",[]);return"QUESTION_SUBMISSION"===_.get(_.first(t),"type","")})),l=function(e){var t=e.studentSubmission;if(!t)return null;var a=_.get(t,"attachments",[]),s=_.get(_.first(a),"id","");n(s)},c=Z()((t={},m()(t,be.a.questionNotTurnIn,!0),m()(t,"text-body-3",!0),t)),u=Z()((a={},m()(a,be.a.questionEvaluatedText,!0),m()(a,"text-body-3",!0),a));return _.map(s,(function(e){var t=_.find(r,(function(t){return _.get(t,"studentTemplate.id","")===(null===e||void 0===e?void 0:e.id)})),a=_.size(function(e){var t=e.studentSubmission;return _.filter(_.get(t,"attachments",[]),(function(e){return _.get(e,"questionAttachment.score.value","")}))}({studentSubmission:t})),n=t?a?g.a.createElement("span",{className:u},"".concat(a,"/").concat(_.size(_.get(e,"attachments",[]))," evaluated")):g.a.createElement("span",{className:c},i("classRoom:not_graded_yet")):g.a.createElement("span",{className:c},i("classRoom:not_turned_in_yet"));return g.a.createElement("div",{className:be.a.questionAttachmentCard,onClick:function(){return l({studentSubmission:t})}},g.a.createElement("div",{className:"text-body-2"},i("common:worksheet")),g.a.createElement("div",{className:"text-body-2"},n))}))},Pe=g.a.memo((function(e){var t=e.assignedStudents,a=e.submissionsCount,n=e.downloadAttachmentZip,s=e.studentsSubmissions,o=e.contentType,i=e.notSubmittedCount,r=e.notEvaluatedCount,l=e.notSharedWithStudentsCount,c=e.evaluatedCount,u=e.sharedWithStudentsCount,d=e.onEvaluationAction,p=e.isTeacherEvaluationEnabled,v=e.isStudentSubmissionEnabled,b=e.showEvaluationDropdown,S=e.t,E=e.isArchivedClass,h=e.assignmentId,C=e.postsAddedToJournalCount,f=e.responsesEvaluatedButNotPublishedToJournal,T=e.classroomPostDetails,y=e.content,I=e.onAddResponseToJournal,A=e.setPostData,w=e.isPrivate,O=e.dropdownProps,R=e.curriculumProgramId,D=e.isCurrentAcademicYear,k=e.isAddLEToJournalEnabled,P=e.selectedSubmissions,x=e.selectedStudentsSubmissions,M=e.setSelectedSubmissions,B=e.notSharedWithStudents,j=e.notEvaluatedStudents,F=e.submissionsCanBeReturned,U=e.submissionsCanBeShared,H=e.submissionsCanBeUnshared,V=e.evaluationNotApplicableStudents,W=e.canEvaluate,G=e.isScoreEnabled,z=e.someToolsHaveEval,Y=e.showStudentCheckbox,q=_.size(t),J=_.size(P),K=_.get(_.filter(J>0?x:s,(function(e){return _.get(e,"isSubmitted")&&_.size(_.filter(_.get(e,"submission.attachmentGroups",[])||[],N.sb))})),"length",0)>0,Q=_.size(f),X=_.map(f,(function(e){return _.get(e,"student")})),$=Object(N.Y)({postsAddedToJournalCount:C,assignedStudentsCount:q,responsesEvaluatedButNotPublishedToJournalCount:Q,isAllSubmissionsRevamp:!0}),ee=J===_.size(s),te=Z()(m()({},be.a.headerLabelCon,!0),m()({},be.a.studentsSelectedLabelCon,J>0)),ae=D&&"ASSESSMENT"===o&&k,ne=O.options,se=void 0===ne?[]:ne,oe=O.onItemClick;return g.a.createElement("div",{className:be.a.headerCon},g.a.createElement("div",{className:be.a.headerLabel},g.a.createElement("div",{className:te},Y?g.a.createElement(ge.Dropdown,{overlay:g.a.createElement(ge.DropdownMenu,{onClick:oe,options:se}),placement:"bottomLeft"},g.a.createElement(ge.ButtonDisclosure,{className:be.a.selectStudentsCheckbox,variant:"outlined-subtle",placement:"bottomRight"},g.a.createElement(ge.Checkbox,{isIndeterminate:J>0&&!ee,isChecked:ee,onClick:function(e){e.stopPropagation(),M(0===J?_.map(s,(function(e){return e.id})):[])}}))):null,0===J?S("common:all_with_lowercase_label",{label:S("common:student_plural")}):S(1===J?"journal:studentSelected":"journal:studentSelected_plural",{count:J}))),g.a.createElement("div",{className:be.a.BFlexDivRow},!J&&g.a.createElement("div",{className:be.a.countWrapper},g.a.createElement("div",{className:be.a.countCon},g.a.createElement("div",{className:be.a.countNum},q),g.a.createElement("div",{className:be.a.countLabel},S(w?"classRoom:privately_assigned":"classRoom:assigned"))),v&&g.a.createElement("div",{className:be.a.countCon},g.a.createElement("div",{className:be.a.countNum},a),g.a.createElement("div",{className:be.a.countLabel},S("classRoom:turned_in"))),g.a.createElement("div",{className:be.a.countCon},g.a.createElement("div",{className:be.a.countNum},c),g.a.createElement("div",{className:be.a.countLabel},S(W&&p?"classRoom:evaluated_lable":"classRoom:completed"))),"ASSESSMENT"===o&&u>0&&p&&!w&&(z||G)&&g.a.createElement("div",{className:be.a.countCon},g.a.createElement("div",{className:be.a.countNum},u),g.a.createElement("div",{className:be.a.countLabel},S("classRoom:shared")))),g.a.createElement("div",{className:be.a.innerRightContainer},b&&g.a.createElement(L.a,{isBulk:!0,notSubmittedCount:i,submissionsCount:a,notEvaluatedCount:r,notSharedWithStudentsCount:l,showMarkEvaluatedShareButton:"ASSESSMENT"===o&&W,showReturnButton:!1,onMarkEvaluatedShare:function(e){var t=Re({},e,{isBulk:!0});d(t)},onMarkEvaluationApplicable:function(e){var t=Re({},e,{isBulk:!0});d(t)},onDownloadSubmission:function(){var e=Object(N.i)({studentsSubmissions:J>0?x:s}),t=_.pickBy(e,(function(e){return _.size(_.get(e,"attachments",[]))})),a=_.get(y,"title.value"),o="".concat(a,".zip");n({attachmentsObjects:t,zipFileName:o})},canDownloadBulkSubmissions:K,isTeacherEvaluationEnabled:p,isStudentSubmissionEnabled:v,assignedStudents:t,totalStudents:q,isArchivedClass:E,selectedSubmissions:P,postIconState:$,showAddToJournal:ae,onBulkAddToJournal:function(){if(1===Q){var e=f[0];I(_.get(e,"id"),X[0],_.get(e,"submission.response"),_.get(e,"submission.attachmentGroups"))}else{var t=Re({},_.omit(T,["title","students"]),{isAddAllResponsesToJournal:!0,studentsWithResponsePendingToPublish:X,assignmentId:h,LETitle:_.get(y,"title.value"),assessmentId:_.get(y,"id"),assessmentType:_.get(y,"assessmentType.value"),curriculumProgramId:R});A({mediaData:t,showMediaCreation:!0,createPostTitle:S("classRoom:add_all_responses_to_journal")})}},notSharedWithStudents:B,notEvaluatedStudents:j,submissionsCanBeReturned:F,submissionsCanBeShared:U,submissionsCanBeUnshared:H,evaluationNotApplicableStudents:V,canEvaluate:W,dropdownStyles:De.dropdownStyles,isPrivate:w}))))}));Pe.displayName="Header";var xe=g.a.memo((function(e){var t=e.t,a=e.columnsStyle,n=e.allSubmissionColumns,s=Z()(m()({},be.a.submissionHeader,!0),m()({},be.a.allSubmissionHeader,!0),m()({},a,!0));return g.a.createElement("div",{className:s},_.map(n,(function(e){var a=e.id,n=e.localeKey,s=e.style;return g.a.createElement("div",{key:a,className:be.a.submissionHeaderCell,style:s||{}},_.isEmpty(n)?"":t(n))})))}));xe.displayName="StudentSubmissionHeader";var Me=g.a.memo((function(e){var t,a=e.student,n=e.id,s=e.status,o=e.ibPYPElementRatings,i=e.submission,r=e.isSubmitted,l=e.onAddResponseToJournal,c=e.changeIsLoading,u=e.content,d=e.curriculumProgramType,b=e.course,S=e.setPostData,E=e.t,h=e.curriculumProgramId,C=e.conversation,f=e.requestResubmission,T=e.notEvaluatedCount,y=e.notSubmittedCount,I=e.isTeacherEvaluationEnabled,A=e.isStudentEvaluationEnabled,w=e.showSimilarityIndex,O=e.isAddResponseByTeacherEnabled,R=e.isEvaluated,D=e.isStudentSubmissionEnabled,k=e.isArchivedClass,B=e.showCreatePostButton,j=e.isCurrentAcademicYear,F=e.isScoreEnabled,U=e.maxScore,H=e.showRateLearningGoals,V=e.assignmentId,W=e.showEvaluationDropdown,G=e.isSharedWithStudent,z=e.isEvaluationApplicable,Y=e.contentType,q=e.onEvaluationAction,J=e.assignedStudentsCount,K=e.post,Q=e.isPrivate,X=e.updateAssignmentSubmissionState,$=e.goToRelativeRoute,ee=e.downloadAttachmentZip,te=e.selectedSubmissions,ae=e.setSelectedSubmissions,ne=e.assessmentTools,se=e.toolResponses,oe=e.canEvaluate,ie=e.enableMultiAssessmentTools,re=e.resetFilterStatus,le=e.someToolsHaveEval,ce=e.elementRemarks,ue=e.tags,de=void 0===ue?[]:ue,me=e.questionAttachments,ve=void 0===me?[]:me,he=e.columnsStyle,Ce=e.allSubmissionColumns,ye=e.showStudentCheckbox,Ae=e.defaultStudentNameSortPreference,we=_.find(te,(function(e){return e==n})),Oe=function(){ae(we?_.filter(te,(function(e){return e!=n})):[].concat(_e()(te),[n]))},Ne="OVERDUE"===s,Pe="REQUEST_RESUBMISSION"===s,xe=a.id,Me=a.firstName,Le=a.lastName,Be=a.profileImage,je=a.isArchived,Fe=function(e,t,a){var s=_.get(t,"attachmentId")||e;re();var o="../mediamanager/".concat(n,"/?currentMedia=").concat(s);$(a?{route:"".concat(o,"&&assessmentTool=").concat(a)}:{route:o})},Ue=_.get(_.find(o,(function(e){return"SCORE"===e.ibPYPElementType})),"value"),He=_.get(i,"id",""),Ve=_.get(i,"status",""),We="SUBMITTED"==Ve||r,Ge=_.get(i,"response","")||"",ze=_.get(i,"attachmentGroups",[])||[],Ye=Object(v.a)({attachmentGroups:ze,submissionId:He})||{},qe=Ye.attachmentGroups,Je=Ye.submissionId;Object(p.useEffect)((function(){_.size(qe)>_.size(ze)&&Je==He&&$e(),_.size(qe)<_.size(ze)&&Je==He&&et()}),[ze]);var Ke=_.get(i,"attachments",[])||[],Ze=Object(N.w)({attachmentGroups:ze,attachments:Ke});Ze=_.filter(Ze,N.sb);var Qe=function(){var e=Object(N.kb)({studentId:xe,firstName:Me,lastName:Le,attachmentGroups:ze,attachments:Ke,response:Ge}),t=Me;Le&&(t="".concat(Me,"_").concat(Le));var a=_.get(u,"title.value"),n="".concat(t,"_").concat(a,".zip");ee({attachmentsObjects:e,zipFileName:n})},Xe=function(){l(n,a,Ge,ze,ce)},$e=function(){0===_.get(_.filter(ze,(function(e){return"staff"===_.get(e,"attachments[0].createdBy.type")})),"length",0)&&X({changeIsLoading:c,submission:i,status:"DRAFT",statusOnResponseUnsuccessful:"SUBMITTED"})},et=function(){var e=_.differenceWith(ze,qe,(function(e,t){return _.isEqual(e.id,t.id)}));"staff"===_.get(e,"[0].attachments[0].createdBy.type","")&&"SUBMITTED"!==Ve&&X({changeIsLoading:c,submission:i,status:"SUBMITTED",statusOnResponseUnsuccessful:"DRAFT"})},tt=function(e){var t=Object(N.y)({attachments:[_.omit(e,["isPost","createdBy","similarityReport","isRead","questionAttachment"])],student:a,content:u,title:Ge,curriculumProgramType:d,courseId:_.get(b,"id","")});S({mediaData:Re({},t,{curriculumProgramId:h}),showMediaCreation:!0,createPostTitle:E("classRoom:add_student_work_portfolio")})},at=function(e){var t=_.get(C,"id","");null===f||void 0===f||f({promptText:e,submission:i,parentId:t})},nt=Z()((t={},m()(t,be.a.gridItem,!0),m()(t,be.a.statusCon,!0),m()(t,be.a.mutliEvaluationGrid,ie),t)),st=O&&!R&&D&&!k,ot=function(e){q(Re({},e,{id:n}))},it=function(){re(),$({route:"../mediamanager/".concat(n)})},rt=Object(N.m)({response:Ge,attachmentGroups:ze,toolResponses:se,ibPYPElementRatings:o,elementRemarks:ce}),lt=Z()(m()({},be.a.submissionCard,!0),m()({},he,!0));return g.a.createElement("div",{key:n,className:lt},_.map(Ce,(function(e){var t=e.id,s="ASSESSMENT"===Y,r=function(e){var t=e.key,a=e.name,n=e.type,s=e.onClickCard,i=e.isTeacherEvaluationEnabled,r=void 0!==i&&i,l=e.isStudentEvaluationEnabled,c=void 0!==l&&l,u=e.criteria,d=void 0===u?{}:u,m=e.icon,p=void 0===m?null:m,v=null;if(ie){var S=Object(N.l)({columnId:"evaluation",t:E,isTeacherEvaluationEnabled:r,isStudentEvaluationEnabled:c,isEvaluated:R,toolResponses:se,isEvaluationApplicable:z,enableMultiAssessmentTools:ie});if(_.isEqual(n,"SCORE BASED ASSESSMENT")?(v=z?Ue?g.a.createElement("div",{className:be.a.flex},g.a.createElement("span",{className:be.a.studentScore},Ue),g.a.createElement("span",{className:be.a.totalScore}," /".concat(U))):g.a.createElement("div",{className:be.a.emptyScoreMsg},E("classRoom:not_graded_yet")):g.a.createElement("span",null,E("common:na")),v=g.a.createElement("div",{className:be.a.scoreMediaCardOption},v,g.a.createElement(fe,S))):v=g.a.createElement(fe,S),_.isEqual(n,"DP ASSESSMENT RUBRIC")){var h=_.map(d,"id"),C=_.filter(o,(function(e){return"DP_CRITERIA"===_.get(e,"ibPYPElementType")&&_.includes(h,_.get(e,"ibPYPElementId"))}));C=_.map(C,(function(e){return{ibPYPElementId:null===e||void 0===e?void 0:e.ibPYPElementId,value:null===e||void 0===e?void 0:e.value}}));var f=Object(Te.b)({criterionIds:[],criteria:d}),T=Object(Te.a)({criterionIds:[],ratedCriteria:C}),y=T.value,I=T.showDash;v=g.a.createElement("div",{className:be.a.evaluationScoreContainer},z?I?g.a.createElement("div",{className:be.a.emptyScoreMsg},E("classRoom:not_graded_yet")):g.a.createElement("div",{className:be.a.dpCriteriaScoreContainer},g.a.createElement("span",{className:be.a.studentScore},y),g.a.createElement("span",{className:be.a.totalScore}," /".concat(f))):g.a.createElement("span",null,E("common:na"))),v=g.a.createElement("div",{className:be.a.scoreMediaCardOption},v,g.a.createElement(fe,S))}if(_.isEqual(n,"ASSESSMENT GRADE BOUNDARY")){var A=_.find(o,(function(e){return"ASSESSMENT_GRADE_BOUNDARY"===_.get(e,"ibPYPElementType")})),w=_.get(A,"value",""),O=_.get(A,"academicCriteriaSet.academicCriteriaValues",[]),D=_.size(O),k="TOK"===_.get(b,"subjects.0.type");v=g.a.createElement("div",{className:be.a.evaluationScoreContainer},z?w?g.a.createElement("div",{className:be.a.dpCriteriaScoreContainer},g.a.createElement("span",{className:be.a.studentScore},w),!k&&g.a.createElement("span",{className:be.a.totalScore}," /".concat(D))):g.a.createElement("div",{className:be.a.emptyScoreMsg},E("classRoom:not_graded_yet")):g.a.createElement("span",null,E("common:na"))),v=g.a.createElement("div",{className:be.a.scoreMediaCardOption},v,g.a.createElement(fe,S))}}return g.a.createElement(ge.MediaCard,{key:t,cardType:"small",name:a,type:n,onClick:s,options:v,icon:p})};switch(t){case"student":var l=Object(Ie.b)({student:a,showStudentUID:!0,orderBy:Ae});return g.a.createElement("div",{className:be.a.gridItem,key:t},g.a.createElement("div",{className:be.a.studentContainer},g.a.createElement("div",{className:be.a.studentDetails},ye?g.a.createElement(ge.Checkbox,{isChecked:we,onChange:Oe}):null,g.a.createElement("div",{className:be.a.studentDetails,onClick:it},g.a.createElement("div",{className:be.a.studentAvatar},g.a.createElement(pe.a,{items:[{id:n,value:l,imageUrl:Be}],showAvatar:!0,avatarStyles:De.avatarStyles})),g.a.createElement("div",{className:be.a.studentNameWithTagContainer},g.a.createElement("div",{className:be.a.studentName},l),!_.isEmpty(de)&&g.a.createElement("div",{className:be.a.tagsContainer},_.map(de,(function(e){return g.a.createElement(ge.Tag,{key:null===e||void 0===e?void 0:e.label,size:"xx-small",color:_.get(M.d,"".concat(null===e||void 0===e?void 0:e.label,".color"),"teal")},null===e||void 0===e?void 0:e.label)}))))))));case"attachments":return g.a.createElement("div",{className:be.a.gridItem,key:t},_.size(ve)?g.a.createElement(ke,{onClick:Fe,questionAttachments:ve,submission:ze,t:E}):null,_.isEmpty(Ze)?_.isEmpty(ve)?g.a.createElement("div",{className:be.a.noAttachment},"-"):null:g.a.createElement("div",{className:be.a.attachmentContainer},g.a.createElement(x.a,{cardType:"design-media-card",mediaCardSize:"small",showActionsOnHover:!0,mode:"view",value:Ze,attachmentContainerStyle:De.attachmentContainer,onClickAttachmentCard:Fe,imageContainerStyle:De.imageContainerStyle,showCreatePostButton:B&&We&&j,onClickCreatePost:tt,parentType:"STUDENT_ASSIGNMENT_SUBMISSION",parentId:He,shouldCallMutation:st,showDeleteForSelfInViewMode:st,checkSimilarityFeature:w,attachmentBottomComponent:function(e){var a=e.attachment,n=e.recheckButtonHoverClass,s=_.get(a,"isPost",!1)?_.get(a,["attachments","0"],{}):a,o=s.type,r=s.mimeType;return w&&("FILE"==o||"LINK"==o)&&_.includes(Se.Db,r)?g.a.createElement("div",{key:t,className:be.a.similarityIndexContainer},g.a.createElement(P.a,{metadata:{entityId:_.get(i,"id"),entityType:"STUDENT_ASSIGNMENT_SUBMISSION",additionalData:{assignmentId:V}},attachment:a,course:b,recheckButtonHoverClass:n,showInAttachmentItem:!0})):null}})));case"assessmentTool":return g.a.createElement("div",{className:be.a.gridItem,key:t},z?g.a.createElement(g.a.Fragment,null,_.map(Object(N.rb)({assessmentTools:ne}),(function(e){var t=e.node,a=_.get(t,"assessmentToolItem",{}),n=_.get(t,"id",""),s=_.get(t,"assessmentToolType","");if("SCORE"!==s||ie){var o=_.get(t,"isTeacherEvaluationEnable",!1),i=_.get(t,"isStudentEvaluationEnable",!1),l=ie?o:I,c=ie?i:A,d=Object(N.p)({t:E,assessmentToolType:s,assessmentTool:a}).assessmentToolText,m=Object(N.cb)({assessmentTool:a,assessmentToolType:s,allFields:_.get(u,"allFields",[])})&&(l||c),p=_.get(a,"criteria",{}),g=Object(N.q)({assessmentToolType:s,t:E}),v=g.type,b=g.icon;return m&&r({key:n,name:d,type:v,onClickCard:function(){return Fe(Ee.e,[],n)},isTeacherEvaluationEnabled:l,isStudentEvaluationEnabled:c,criteria:p,icon:b})}})),I&&F&&!ie&&r({key:"SCORE_BASED_ASSESSMENT",name:ie?E("common:score"):g.a.createElement("div",{className:be.a.evaluationScoreContainer},"".concat(E("common:score"),":"),z?Ue?g.a.createElement("div",null,g.a.createElement("span",{className:be.a.studentScore},Ue),g.a.createElement("span",null," /".concat(U))):g.a.createElement("div",{className:be.a.emptyScoreMsg},E("classRoom:not_graded_yet")):g.a.createElement("span",null,E("common:na"))),type:"SCORE BASED ASSESSMENT",onClickCard:function(){return Fe(Ee.Mc)},isTeacherEvaluationEnabled:I,isStudentEvaluationEnabled:A}),H&&r({key:"LEARNING_GOALS",name:E("common:pyp_elements"),type:"LEARNING GOALS",onClickCard:function(){return Fe(Ee.Xb)},isTeacherEvaluationEnabled:I})):E("classRoom:evaluation_not_applicable"));case"submission":case"evaluation":case"complete":case"shared":return g.a.createElement("div",{className:nt,key:t},function(e){var t=e.columnId,a=Z()(m()({},be.a.teacherEvaluationTick,A&&I)),n=Object(N.l)({columnId:t,t:E,isSubmittedVal:We,isTeacherEvaluationEnabled:I,isStudentEvaluationEnabled:A,isEvaluated:R,isSharedWithStudent:G,toolResponses:se,isEvaluationApplicable:z,isOverdue:Ne,isResubmissionRequested:Pe,teacherEvaluationTickClass:a,enableMultiAssessmentTools:ie,isPrivate:Q});return g.a.createElement(fe,n)}({columnId:t}));case"actions":return g.a.createElement("div",{className:ie?be.a.mutliEvaluationLastGridItem:be.a.lastGridItem,key:t},W&&g.a.createElement(L.a,{isSubmitted:We,isEvaluated:R,isSharedWithStudent:G,isEvaluationApplicable:z,student:a,post:K,showMarkEvaluatedShareButton:s&&I&&(le||F||H),showReturnButton:D,onMarkEvaluatedShare:ot,onMarkEvaluationApplicable:function(e){q(Re({},e,{id:n}))},onDownloadSubmission:Qe,submissionStatus:Ve,notEvaluatedCount:T,notSubmittedCount:y,isTeacherEvaluationEnabled:I,isStudentSubmissionEnabled:D,totalStudents:J,isArchived:je,isArchivedClass:k,showAddResponseToJournal:s,onAddResponse:Xe,isAlreadyAddedToJournal:!_.isEqual(K,null),isPrivate:Q,submissionId:He,showAddResponseByTeacher:!0,submission:i,onRequestResubmission:at,selectedSubmissions:te,isAttachmentGroupsEmpty:_.isEmpty(_.filter(ze,N.sb)),allowAddLEToJournal:rt,attachmentsCount:_.size(Ze),canEvaluate:oe,dropdownStyles:De.dropdownStyles}))}})))}));Me.displayName="StudentSubmissionCard";var Le=g.a.memo((function(e){var t=e.assignmentId,a=e.studentsSubmissions,n=e.downloadAttachmentZip,s=e.goToRelativeRoute,o=e.onEvaluationAction,i=e.contentType,r=e.notEvaluatedCount,l=e.notSubmittedCount,c=e.isTeacherEvaluationEnabled,u=e.isStudentSubmissionEnabled,d=e.assignedStudentsCount,m=e.t,p=e.showEvaluationDropdown,v=e.isArchivedClass,b=e.isSimilarityCheckEnabled,S=e.isTurnitinEnabledForGrade,E=e.course,h=e.content,C=e.curriculumProgramType,f=e.isStudentEvaluationEnabled,T=e.isPrivate,y=e.onAddResponseToJournal,I=e.setPostData,A=e.assessmentFields,w=e.getCriteriaSetOfPypType,O=e.curriculumProgramId,R=e.isCurrentAcademicYear,D=e.showCreatePostButton,k=e.isAddResponseByTeacherEnabled,P=e.requestResubmission,x=e.changeIsLoading,M=e.updateAssignmentSubmissionState,L=e.organizationId,B=e.leHasPypEvaluation,j=e.selectedSubmissions,F=e.setSelectedSubmissions,U=e.isScoreEnabled,H=e.maxScore,V=e.assessmentTools,W=e.canEvaluate,G=e.enableMultiAssessmentTools,z=e.resetFilterStatus,Y=e.isOnlyLearningGoalsAvailable,q=e.someToolsHaveEval,J=e.isLearningGoalsEvaluationEnabled,K=e.columnsStyle,Z=e.allSubmissionColumns,Q=e.showStudentCheckbox,X=e.studentCourseTags,$=e.defaultStudentNameSortPreference,ee=b&&S,te=Object(N.c)({assessmentFields:A,curriculumProgramType:C,getCriteriaSetOfPypType:w}),ae=Object(Ae.i)({assessmentFields:A}),ne=(G?J:c)&&B&&!te;return g.a.createElement("div",{className:be.a.submissionCardsCon},_.map(a,(function(e){var a=e.id,b=e.student,S=e.submission,A=void 0===S?{}:S,w=e.isEvaluated,B=e.isEvaluationApplicable,J=e.isSubmitted,te=e.isSharedWithStudent,se=e.status,oe=e.post,ie=e.ibPYPElementRatings,re=e.conversation,le=e.toolResponses,ce=e.elementRemarks,ue=Object(N.lb)({studentCourseTags:X,studentId:_.get(b,"id")});return g.a.createElement(Me,{columnsStyle:K,allSubmissionColumns:Z,key:a,student:b,id:a,status:se,ibPYPElementRatings:ie,submission:A,isSubmitted:J,onAddResponseToJournal:y,changeIsLoading:x,content:h,curriculumProgramType:C,course:E,setPostData:I,t:m,curriculumProgramId:O,conversation:re,requestResubmission:P,notEvaluatedCount:r,notSubmittedCount:l,isTeacherEvaluationEnabled:c,isStudentEvaluationEnabled:f,showSimilarityIndex:ee,isAddResponseByTeacherEnabled:k,isEvaluated:w,isStudentSubmissionEnabled:u,isArchivedClass:v,showCreatePostButton:D,isCurrentAcademicYear:R,isScoreEnabled:U&&H&&c,maxScore:H,showRateLearningGoals:ne,assignmentId:t,showEvaluationDropdown:p,isSharedWithStudent:te,isEvaluationApplicable:B,contentType:i,onEvaluationAction:o,assignedStudentsCount:d,post:oe,isPrivate:T,updateAssignmentSubmissionState:M,goToRelativeRoute:s,downloadAttachmentZip:n,organizationId:L,selectedSubmissions:j,setSelectedSubmissions:F,assessmentTools:V,toolResponses:le,canEvaluate:W,enableMultiAssessmentTools:G,resetFilterStatus:z,isOnlyLearningGoalsAvailable:Y,someToolsHaveEval:q,elementRemarks:ce,tags:ue,questionAttachments:ae,showStudentCheckbox:Q,defaultStudentNameSortPreference:$})})))}));Le.displayName="StudentSubmissionCards";var Be=g.a.memo((function(e){var t=e.state,a=e.studentsSubmissions,n=e.downloadAttachmentZip,o=e.submissionsCount,r=e.assignedStudentsCount,c=e.goToRelativeRoute,d=e.assignedStudents,v=e.assignmentId,b=e.contentType,S=e.editStudentAssignment,E=e.userType,f=e.assignmentBulkAction,T=e.isTeacherEvaluationEnabled,y=e.isStudentSubmissionEnabled,I=e.currentTabView,w=e.content,O=e.template,R=e.isStudentEvaluationEnabled,k=e.t,P=e.showEvaluationDropdown,x=e.isArchivedClass,M=e.isSimilarityCheckEnabled,L=e.isTurnitinEnabledForGrade,B=e.course,F=e.curriculumProgramType,U=e.isPrivate,H=e.assessmentFields,V=e.getCriteriaSetOfPypType,W=e.curriculumProgramId,G=e.getIsCurrentAcademicYear,z=e.showCreatePostButton,Y=e.isAddResponseByTeacherEnabled,J=e.unHandStudentAssignmentSubmission,K=e.updateAssignmentSubmissionState,Q=e.organizationId,X=e.studentTypeOptions,ee=e.isAddLEToJournalEnabled,te=e.assessmentTools,ae=e.closeRightPane,ne=e.rightPane,se=e.enableMultiAssessmentTools,oe=e.activeStudentType,ie=e.setActiveStudentType,re=e.leHasPypEvaluation,le=e.isLearningGoalsEvaluationEnabled,ce=e.showStudentCheckbox,ue=e.showActionsColumn,de=e.studentCourseTags,me=e.defaultStudentNameSortPreference,_e=Object(p.useState)(!1),pe=u()(_e,2),ge=pe[0],ve=pe[1],Se=Object(p.useState)({mediaData:{},showMediaCreation:!1,createPostTitle:""}),Ee=u()(Se,2),he=Ee[0],Ce=Ee[1],fe=Object(p.useState)([]),Te=u()(fe,2),Ie=Te[0],Ae=Te[1],we=_.size(Ie),Oe=_.filter(d,(function(e){return Ie.includes(e.id)})),De=Object(N.k)({selectedSubmissionsCount:we,selectedStudentsSubmissions:Oe,assignedStudents:d}),ke=De.submissionsCanBeReturned,Me=De.submissionsCanBeShared,Be=De.submissionsCanBeUnshared,je=De.notSharedWithStudents,Fe=De.notSubmittedCount,Ue=De.notEvaluatedStudents,He=De.evaluationNotApplicableStudents,Ve=_.size(Ue),We=_.size(je),Ge=r-Ve,ze=r-We,Ye=Object($.getScoreDetailsMemoize)({assessmentTools:te}),qe=Ye.isScoreEnabled,Je=Ye.maxScore,Ke=Object(N.db)({assessmentTools:te}),Ze=(Ke||re||qe)&&(T||R),Qe=Object(N.T)({someToolsHaveEval:Ke,leHasPypEvaluation:re,isUsingScoreAssessment:qe}),Xe=_.reduce(we>0?Oe:a,(function(e,t){return e+(_.isEmpty(_.get(t,"post",{}))?0:1)}),0),$e=Object(N.y)({content:w,curriculumProgramType:F,courseId:_.get(B,"id","")}),et=function(){var e=l()(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ve(!0),e.next=4,f(t);case 4:ve(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=l()(i.a.mark((function e(t){var a,n,s,o,r,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.isEvaluated,n=t.isSharedWithStudent,s=t.id,o=t.isEvaluationApplicable,r=t.evalStatus,l=void 0===r?"EVAL_COMPLETE":r,ve(!0),e.next=4,S({id:s,isEvaluated:a,isSharedWithStudent:n,isEvaluationApplicable:o});case 4:c=e.sent,ve(!1),c.successful?Object(D.B)({id:s,showOnlySubmitted:!1,userFilter:"staff"==E?"ALL":"SELF",data:{isEvaluated:a,isSharedWithStudent:n,isEvaluationApplicable:o}}):(Object(D.B)({id:s,showOnlySubmitted:!1,userFilter:"staff"==E?"ALL":"SELF",data:"EVAL_COMPLETE"===l?{isEvaluated:!a,isSharedWithStudent:n,isEvaluationApplicable:o}:{isEvaluated:a,isSharedWithStudent:n,isEvaluationApplicable:!o}}),Object(A.nb)(c.errors[0]));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(e,t,a,n,s){var o=Object(N.y)({student:t,content:w,curriculumProgramType:F,title:a,courseId:_.get(B,"id","")}),i=_.omit(Re({},o,{isAddLEToJournal:!0,LETitle:_.get(w,"title.value",""),studentAssignmentId:e,items:[{item:{id:e,assignment:{content:Re({},w,{},O),id:e,isStudentEvaluationEnabled:R,isTeacherEvaluationEnabled:T},ibPYPElementRatings:[],student:t,submission:{attachmentGroups:_.filter(n,N.sb),response:a},toolResponses:{},elementRemarks:s},itemType:"STUDENT_ASSIGNMENT"}],curriculumProgramId:W}),["title"]);setTimeout((function(){Ce({createPostTitle:k("classRoom:add_response_to_journal_by_name",{firstName:_.get(t,"firstName","")}),mediaData:_.omit(i,["title"]),showMediaCreation:!0})}))},nt={options:X,onItemClick:function(e){var t=e.key;Ae("ALL_STUDENTS"===t?_.map(a,(function(e){return null===e||void 0===e?void 0:e.id})):_.map(_.filter(d,(function(e){return _.get(e,"status","")===t})),(function(e){return null===e||void 0===e?void 0:e.id})))}},st=function(){var e=l()(i.a.mark((function e(t){var a,n,s,o,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.promptText,n=t.submission,s=t.parentId,o=_.get(n,"id",""),r={id:o,status:"RETURNED",statusMessage:{label:a,itemType:"ATTACHMENTS",parentId:s}},ve(!0),e.next=6,J(r);case 6:l=e.sent,ve(!1),l.successful?Object(D.A)({id:o,data:Re({},n,{status:"RETURNED"})}):(Object(D.A)({id:o,data:Re({},n,{status:"SUBMITTED"})}),Object(A.nb)(l.errors[0]));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=_.filter(we>0?Oe:d,(function(e){var t=_.get(e,"post"),a=_.get(e,"submission.response","")||"",n=_.get(e,"submission.attachmentGroups",[])||[],s=_.get(e,"toolResponses",[])||[],o=_.get(e,"isEvaluationApplicable"),i=_.get(e,"ibPYPElementRatings",[]),r=_.get(e,"elementRemarks",[]),l=_.get(e,"isEvaluated"),c=Object(N.m)({response:a,attachmentGroups:n,toolResponses:s,ibPYPElementRatings:i,elementRemarks:r});if(!t&&o&&l&&c)return e})),it=_.map(ot,(function(e){return _.get(e,"id","")})),rt=G();if("SCHEDULED"==t||"instructions"==I)return g.a.createElement("div",{className:be.a.instructionsCardWrapper},g.a.createElement(j.a,{item:w,itemStyle:Ne,contentType:b,isTeacherEvaluationEnabled:T,isStudentEvaluationEnabled:R,template:O}));var lt=Z()(m()({},be.a.container,!0)),ct=Object(N.j)({isPrivate:U,canEvaluate:Ze,isOnlyLearningGoalsAvailable:Qe,enableMultiAssessmentTools:se,isStudentSubmissionEnabled:y,showActionsColumn:ue}),ut=function(e){switch(e){case 7:return be.a.sevenColumns;case 6:return be.a.sixColumns;case 5:return be.a.fiveColumns;case 4:return be.a.fourColumns;case 3:return be.a.threeColumns;case 2:return be.a.twoColumns;default:return be.a.threeColumns}}(_.size(ct));return g.a.createElement("div",{className:lt,onClick:function(){ne&&ae()}},g.a.createElement("div",{className:be.a.stickyHeader},g.a.createElement(Pe,{assignedStudents:d,submissionsCount:o,downloadAttachmentZip:n,studentsSubmissions:a,notEvaluatedCount:Ve,notSharedWithStudentsCount:We,notSubmittedCount:Fe,evaluatedCount:Ge,sharedWithStudentsCount:ze,contentType:b,onEvaluationAction:function(e){var t=e.isBulk,a=s()(e,["isBulk"]);t?et(Re({id:v},a)):tt(a)},isTeacherEvaluationEnabled:T,isStudentSubmissionEnabled:y,showEvaluationDropdown:P,t:k,isArchivedClass:x,assignmentId:v,postsAddedToJournalCount:Xe,responsesEvaluatedButNotPublishedToJournal:ot,classroomPostDetails:$e,content:w,onAddResponseToJournal:at,setPostData:Ce,isPrivate:U,curriculumProgramId:W,isCurrentAcademicYear:rt,isAddLEToJournalEnabled:ee,dropdownProps:nt,selectedSubmissions:Ie,selectedStudentsSubmissions:Oe,setSelectedSubmissions:Ae,notSharedWithStudents:je,notEvaluatedStudents:Ue,submissionsCanBeReturned:ke,submissionsCanBeShared:Me,submissionsCanBeUnshared:Be,evaluationNotApplicableStudents:He,canEvaluate:Ze,isScoreEnabled:qe&&Je,someToolsHaveEval:Ke,showStudentCheckbox:ce}),r>0&&g.a.createElement(xe,{t:k,isPrivate:U,canEvaluate:Ze,enableMultiAssessmentTools:se,isOnlyLearningGoalsAvailable:Qe,curriculumProgramType:F,isStudentSubmissionEnabled:y,columnsStyle:ut,allSubmissionColumns:ct})),r>0?g.a.createElement(Le,{columnsStyle:ut,allSubmissionColumns:ct,assignmentId:v,assignedStudentsCount:r,studentsSubmissions:a,downloadAttachmentZip:n,goToRelativeRoute:c,contentType:b,onEvaluationAction:tt,notEvaluatedCount:Ve,notSubmittedCount:Fe,isTeacherEvaluationEnabled:T,isStudentSubmissionEnabled:y,t:k,isArchivedClass:x,isSimilarityCheckEnabled:M,isTurnitinEnabledForGrade:L,showEvaluationDropdown:P,course:B,content:w,curriculumProgramType:F,isStudentEvaluationEnabled:R,isPrivate:U,onAddResponseToJournal:at,setPostData:Ce,assessmentFields:H,getCriteriaSetOfPypType:V,curriculumProgramId:W,isCurrentAcademicYear:rt,showCreatePostButton:z,isAddResponseByTeacherEnabled:Y,requestResubmission:st,changeIsLoading:ve,updateAssignmentSubmissionState:K,organizationId:Q,leHasPypEvaluation:re,selectedSubmissions:Ie,setSelectedSubmissions:Ae,isScoreEnabled:qe,maxScore:Je,assessmentTools:te,canEvaluate:Ze,enableMultiAssessmentTools:se,resetFilterStatus:function(){"ALL_STUDENTS"!==oe&&ie("ALL_STUDENTS")},isOnlyLearningGoalsAvailable:Qe,someToolsHaveEval:Ke,isLearningGoalsEvaluationEnabled:le,showStudentCheckbox:ce,studentCourseTags:de,defaultStudentNameSortPreference:me}):g.a.createElement(h.a,{emptyText:k("common:no_label_yet",{label:k("common:submission_plural")}),isSearch:!0,emptyHeaderText:""}),ge&&g.a.createElement(C.a,null),_.get(he,"showMediaCreation")&&g.a.createElement(q.a,{onClose:function(){setTimeout((function(){Ce({mediaData:{},showMediaCreation:!1,createPostTitle:""})}))},postCreateDetail:_.get(he,"mediaData"),currentStep:Object(ye.o)(F)?"MANAGE_SUBJECT_JOURNAL_POST_DETAILS":"POST_DETAIL",createPostTitle:_.get(he,"createPostTitle"),studentAssignmentIds:it}))}));Be.displayName="AllSubmissionsV2",Be.defaultProps={showEvaluationDropdown:!0,showStudentCheckbox:!0,showActionsColumn:!0};var je={downloadAttachmentZip:M.K,goToRelativeRoute:M.Ab,editStudentAssignment:B.editStudentAssignment,assignmentBulkAction:B.assignmentBulkAction,getCriteriaSetOfPypType:M.W,getIsCurrentAcademicYear:X.getIsCurrentAcademicYear,unHandStudentAssignmentSubmission:B.unHandStudentAssignmentSubmission,updateAssignmentSubmissionState:B.updateAssignmentSubmissionState},Fe=Object(b.c)(Object(f.a)({resource:["common","classRoom","assessmentEvaluation","journal"]}),Object(S.connect)((function(e,t){var a=_.get(e,"login.userInfo.org_id",""),n=Object(H.e)({name:"TurnitinEnabledGrades",organizationId:a,readFromUserAndOrgLevel:!0}),s=_.get(t,"course",{}),o=_.get(s,"grade.id",""),i=_.includes(n,o),r=Object(H.e)({name:"EnableAddResponseOfAssignmentByTeacher",organizationId:a}),l=U.a.can("FeatureFlag:EnableLePostInJournal"),c=_.get(e,"platform.currentCurriculumProgram",{}).type,u=Object(N.M)({curriculumProgramType:c}),d=_.get(t,"assignmentCourseId"),m=Object(we.d)(e);return{isData:!0,isLoading:!1,assignmentId:t.params.classRoomId,userType:e.login.userInfo.user_type,isArchivedClass:_.get(e,"teacher.selected_class.isArchivedClass"),isTurnitinEnabledForGrade:i,course:s,perm:["TeacherPortal",Q.x],showErrorComp:!0,isAddResponseByTeacherEnabled:!_.isArray(r)&&r,organizationId:a,isAddLEToJournalEnabled:l,enableMultiAssessmentTools:u,assignmentCourseId:d,defaultStudentNameSortPreference:m}}),je),V.a)(Be),Ue=U.a.can(["FeatureFlag:AllSubmissionsRevamp",Q.x]);t.default=Ue?Fe:de},6846:function(e,t,a){"use strict";a.r(t);var n=a(19),s=a.n(n),o=a(82),i=a.n(o),r=a(18),l=a.n(r),c=a(20),u=a.n(c),d=a(31),m=a.n(d),p=a(21),g=a.n(p),v=a(22),b=a.n(v),S=a(4),E=a.n(S),h=a(23),C=a.n(h),f=a(1),T=a.n(f),y=a(0),I=a.n(y),A=a(6137),w=a.n(A),O=a(27),R=a(84),D=a(902),N=a(3655),k=a(848),P=a(1659),x=a(1405),M=a(3859),L=a(413),B=a(45),j=a(41),F=a(87),U=a(577),H=a(40),V=a(197),W=a(86),G=a(98),z=a(105),Y=a(25),q=a.n(Y),J=a(6138),K=a.n(J),Z=a(2238),Q=a(3632),X=a(3721),$=a(3653),ee=a(4550),te={buttonDropDownContainerStyle:{top:40,right:-64,pading:0,boxShadow:"none",borderWidth:0}},ae=function(e){var t=e.studentName;return I.a.createElement("div",{className:K.a.dropdownBox},I.a.createElement("div",{className:K.a.dropdownText},t),I.a.createElement("div",{className:K.a.bottomArrow},I.a.createElement(X.a,{width:10,height:5})))},ne=I.a.memo((function(e){var t=e.studentName,a=e.students,n=e.currentStudent,s=e.changeCurrentStudent,o=e.t,i=e.courseTitle,r=e.goToRelativeRoute,l=e.isStaff,c=e.clearFilters,u=I.a.createElement("span",{className:K.a.wrapper,onClick:function(){r(l?{route:"insights",type:"replace",replacePath:"insights"}:{route:"classroom",type:"replace",replacePath:"classroom"}),c()}},I.a.createElement(Z.a,{width:8}),I.a.createElement(Q.a,null));return I.a.createElement("div",{className:K.a.container},l?I.a.createElement(y.Fragment,null,u,I.a.createElement("div",{className:K.a.headerContainer},I.a.createElement($.a,{dropdownComponent:I.a.createElement(ee.a,{students:a,currentStudent:n,changeCurrentStudent:s}),shouldCloseOnSelfClick:!1,containerStyle:te.buttonDropDownContainerStyle,buttonComponent:I.a.createElement(ae,{studentName:t})}),I.a.createElement("div",{className:K.a.headerSubtitle},o("classRoom:class_stream_insights_with_name",{className:i})))):u)}));ne.displayName="Header";var se=Object(L.a)({resource:["classRoom"]})(ne),oe=a(112),ie=a(26),re=a(439),le=a(55),ce=a(80),ue=a(36);function de(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?de(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):de(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _e={gridTemplateColumns:"1fr repeat(1,200px) 30px",gridColumnGap:"20px"},pe=function(e){return[{label:e("classRoom:le_tasks_and_assessments"),id:"name",style:{justifySelf:"start"},type:"CUSTOM"},{label:e("classRoom:submission_status"),id:"submissionStatus",type:"CUSTOM"},{label:"",style:{justifyItems:"right"},id:"studentAssignmentId",type:"CUSTOM"}]},ge={filterBoxStyle:{padding:0,borderWidth:0,minWidth:"unset"},buttonDropDownContainerStyle:{top:"32px"},filterTextStyle:me({},B.fontStyles.demiBold,{color:j.e.gray31,fontSize:"1.6rem",alignItems:"center"})},ve={customStyle:{borderBottomWidth:1,borderTopWidth:1,borderRightWidth:1,borderLeftWidth:1,borderRadius:0,borderColor:"#ebebeb",paddingLeft:16,paddingRight:16,paddingTop:12,paddingBottom:12},activeCustomStyle:{borderBottomWidth:2,paddingBottom:12}},be=Object(D.a)((function(e){var t=e.studentData,a=e.t,n=e.getStudentInsightDetails,s=e.goToRelativeRoute,o=e.isAllSubmissionsRevamp,i=function(e){return _.map(_.map(_.get(e,"assignments.edges",[]),"node"),(function(e){var t=e.submission,a=e.evaluatedAt,n=e.status,s=e.assignment,o=e.id,i=t||{},r=i.submittedAt,l=i.returnedAt,c=s||{},u=c.content,d=c.deadline,m=c.contentType,p=c.id,g=c.curriculumProgram,v=_.get(u,"assessmentType.value",""),b=_.get(g,"type","IB_PYP"),S="";switch(n){case"REQUEST_RESUBMISSION":S=l;break;case"EVALUATED":case"COMPLETED":case"EVALUATED_SHARED":S=a;break;case"TURNED_IN":S=r}return{id:p,studentAssignmentId:o,assessmentValue:v,curriculumType:b,name:{name:Object(le.e)({content:u}),contentType:m,deadline:d,assessmentValue:v,curriculumType:b},submissionStatus:{status:n,date:S}}}))}(t);return I.a.createElement("div",{className:w.a.body},I.a.createElement("div",{className:w.a.countText},a("classRoom:assignment_count_plural",{count:_.get(t,"assignments.totalCount",0)})),I.a.createElement(U.a,{parentStyle:_e,columnList:pe(a),feedData:i,onItemClick:function(e){var t=_.find(i,(function(t){return t.id===e})).studentAssignmentId;s({route:o?"../../../classroom-details/".concat(e,"/mediamanager/").concat(t,"?target=insights"):"../../../classroom-details/".concat(e,"/").concat(t,"?target=insights"),type:"push"})},isItemClickEnable:!0,getCustomComponent:function(e){var t=e.column,n=e.columnData;switch(t.id){case"name":var s=n.contentType,o=n.deadline,i=n.curriculumType,r=n.assessmentValue,l=Object(le.o)({curriculumType:i,assessmentValue:r,contentType:s}),c=l.color,u=l.svg;return I.a.createElement("div",{className:w.a.entityContainer},I.a.createElement("div",{style:{background:c},className:w.a.entityIcon},u),I.a.createElement("div",{className:w.a.infoWrapper},I.a.createElement("div",{className:w.a.entityName},I.a.createElement(N.a,{value:_.get(n,"name",""),minHeight:22})),I.a.createElement("div",{className:w.a.dueDate},Object(le.g)({deadline:o,t:a}))));case"submissionStatus":var d=n.status,m=n.date,p="SUBMISSION_PENDING"===d?j.e.salmon60:"REQUEST_RESUBMISSION"===d?j.e.yellow50:j.e.black,g=m?q()(m).format("DD MMM YYYY"):"";return I.a.createElement("div",{className:w.a.submissionStatusWrapper},I.a.createElement("div",{style:{color:p},className:w.a.statusText},Object(le.s)({status:d,t:a})),m&&I.a.createElement("div",{className:w.a.dateText},g));case"studentAssignmentId":return I.a.createElement("span",{className:w.a.rightIcon},I.a.createElement(X.a,{fill:j.e.strokeTwo}));default:return null}}}),I.a.createElement("div",{className:w.a.loadingContainer},3==n.networkStatus?I.a.createElement(k.a,null):null))})),Se=function(e){function t(e){var a;return u()(this,t),a=g()(this,b()(t).call(this,e)),T()(E()(a),"componentDidMount",(function(){window.addEventListener("scroll",a.handleScroll,!0)})),T()(E()(a),"componentWillUnmount",(function(){window.removeEventListener("scroll",a.handleScroll,!0)})),T()(E()(a),"handleScroll",(function(e){var t=e.target;a.props.studentData&&e.target&&(_.get(a.props,"studentData.assignments.pageInfo",!1).hasNextPage&&3!=a.props.getStudentInsightDetails.networkStatus&&Object(re.a)(t)&&a.props.loadMoreStudents())})),T()(E()(a),"clearFilters",(function(){(0,a.props.initStudentDetailFilters)(),a.searchBarRef&&a.searchBarRef.current&&a.searchBarRef.current.cancelText()})),a.searchBarRef=I.a.createRef(),a}return C()(t,e),m()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.t,n=t.studentDetails,s=t.students,o=t.currentStudent,i=t.changeCurrentStudent,r=t.course,c=t.filterOptions,u=t.studentDetailFilters,d=t.setStudentDetailFilters,m=t.userType,p=t.goToRelativeRoute,g=t.currentCurriculumProgramType,v=r.title,b="".concat(_.get(n,"firstName","")," ").concat(_.get(n,"lastName","")),S="staff"===m;return I.a.createElement(P.a,{isOpen:!0,isFullScreen:!0},I.a.createElement("div",{className:w.a.container},I.a.createElement(se,{goToRelativeRoute:p,courseTitle:v,studentName:b,students:s,changeCurrentStudent:function(t){e.clearFilters(),i({id:t,currentSection:"details"})},currentStudent:o,isStaff:S,clearFilters:this.clearFilters}),I.a.createElement("div",{className:w.a.innerContainerWrapper},I.a.createElement("div",{className:w.a.innerContainer},I.a.createElement("div",{className:w.a.pageHeader},I.a.createElement("div",{className:w.a.searchContainer},I.a.createElement(x.a,{customStyle:ve.customStyle,name:"searchText",placeholder:a("common:search",{label:a("common:student")}),ref:this.searchBarRef,shouldAnimate:!0,changeSearchTerm:function(e){return d({searchText:e})},searchTerm:u.searchText})),I.a.createElement("div",{className:w.a.actionButtons},_.map(function(e){var t=e.t,a=e.currentCurriculumProgramType,n=Object(le.t)({t:t,currentCurriculumProgramType:a});return _.compact([{optionsKey:"classroomFolders",label:"common:folders",key:"folderIds",isCheckList:!0},!_.isEmpty(n)&&{options:n,label:"common:type",key:_.get(G.CURRICULUM_WISE_ASSIGNMENT_TYPE_MAPPING,"".concat(a,".key"),""),isCheckList:!1},{options:_.map(G.STUDENT_ASSIGNMENT_STATUS,(function(e){var a=e.label,n=e.value;return{label:t(a),value:n}})),label:"common:status",key:"status",isCheckList:!0}])}({t:a,currentCurriculumProgramType:g}),(function(e){var t=e.options,a=e.optionsKey,n=e.key,s=e.label,o=a?c[a]:t;return I.a.createElement(M.a,l()({key:n,options:o,label:s,name:n,value:_.get(u,[n,"length"])?u[n]:["ALL"],updateInputField:d,isCheckList:!1},ge))})))),I.a.createElement(be,this.props)))))}}]),t}(I.a.PureComponent),Ee=_.memoize((function(e){return he(e)}),(function(e){return JSON.stringify(e)})),he=function(e){var t=e.contentTypes,a=e.assessmentTypes,n=e.currentStudent,s=e.courseId,o=e.folderIds,r=e.status,l=e.currentCurriculumProgramType;return me({},i()(e,["contentTypes","assessmentTypes","currentStudent","courseId","folderIds","status","currentCurriculumProgramType"]),{contentTypes:Object(le.C)({contentTypes:t,currentCurriculumProgramType:l}),assessmentTypes:"ALL"===_.first(a)?[]:a,excludedAssessmentTypes:ce.j,folderIds:"ALL"===o[0]?void 0:o,status:"ALL"===r[0]?void 0:r,studentId:n,courseIds:s,states:["PUBLISHED","ARCHIVED"]})},Ce={setStudentDetailFilters:G.setStudentDetailFilters,changeCurrentStudent:G.changeCurrentStudent,goToRelativeRoute:ie.Ab,initStudentDetailFilters:G.initStudentDetailFilters},fe=Object(R.c)(Object(L.a)({resource:["common","classRoom"]}),F.f,Object(O.connect)((function(e,t){var a=e.teacher.selected_class.selected_course,n=t.params.id,s=Object(W.d)(a),o=_.get(e,"classRoom.studentDetailFilters",{}),i=e.platform.currentCurriculumProgramType,r=ue.a.can("FeatureFlag:AllSubmissionsRevamp");return{course:s,courseId:a,currentCurriculumProgramType:i,currentStudent:n,studentDetails:Object(H.Eb)(n),isData:!0,isLoading:!1,studentDetailFilters:o,userType:e.login.userInfo.user_type,isAllSubmissionsRevamp:r}}),Ce),Object(R.d)(V.d,{name:"getCourseGenericFolders",skip:function(e){return!e.courseId},options:function(e){return{fetchPolicy:"cache-and-network",variables:{courseId:e.courseId,folderType:"CLASSROOM"}}},props:function(e){var t=e.getCourseGenericFolders,a=e.ownProps,n=a.courseId,s=a.isData,o=a.isLoading,i=Object(W.e)({courseId:n,folderType:"CLASSROOM"}),r=_.map(_.get(i,"genericFolders",[]),(function(e){return{label:e.name,value:e.id}}));return{isData:!_.isEmpty(i)&&s,filterOptions:{classroomFolders:r},isLoading:1==t.networkStatus||2==t.networkStatus||o}}}),Object(R.d)(z.r,{name:"getStudentInsightDetails",options:function(e){var t=e.courseId,a=e.currentStudent,n=e.studentDetailFilters,s=e.currentCurriculumProgramType;return{fetchPolicy:"cache-and-network",variables:Ee(me({courseId:t,currentStudent:a,currentCurriculumProgramType:s},n))}},skip:function(e){var t=e.courseId,a=e.currentStudent;return!t||!a},props:function(e){var t=e.getStudentInsightDetails,a=e.ownProps,n=a.courseId,o=a.isData,i=a.isLoading,r=a.currentStudent,l=a.studentDetailFilters,c=a.currentCurriculumProgramType,u=Object(oe.r)(Ee(me({courseId:n,currentStudent:r,currentCurriculumProgramType:c},l)));return{onPusherEventTriggered:function(e){e.courseId==n&&t.refetch()},studentData:u,isData:!_.isEmpty(u)&&o,networkStatus:t.networkStatus,isLoading:1==t.networkStatus||2==t.networkStatus||i,getStudentInsightDetails:t,loadMoreStudents:function(){return t.fetchMore({query:z.r,variables:me({},Ee(me({courseId:n,currentStudent:r,currentCurriculumProgramType:c},l)),{after:t.node.assignments.pageInfo.endCursor}),updateQuery:function(e,t){var a=t.fetchMoreResult,n=e.node.assignments,o=a.node.assignments,i=n.edges,r=o.edges,l=n.pageInfo,c=o.pageInfo,u=c.endCursor,d=c.hasNextPage;return me({},e,{node:me({},e.node,{assignments:me({},n,{edges:[].concat(s()(i),s()(r)),pageInfo:me({},l,{endCursor:u,hasNextPage:d})})})})}})}}}}))(Se);t.default=fe},6883:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),o=a(0),i=a.n(o),r=a(84),l=a(27),c=a(4851),u=a.n(c),d=a(1411),m=a(413),p=a(1410),g=a(26),v=a(98),b=a(12),S=a.n(b),E=a(1053),h=a(63),C=i.a.memo((function(e){var t,a=e.assessmentFields,n=e.assignedStudents,r=e.studentsSubmissions,l=e.studentAssignmentId,c=e.goToRelativeRoute,m=e.children,p=e.assignmentTitle,g=e.isStudentSubmissionEnabled,v=e.isTeacherEvaluationEnabled,b=e.isStudentEvaluationEnabled,h=e.contentType,C=e.content,f=e.template,T=e.isCurrentAcademicYearSelected,y=e.isSimilarityCheckEnabled,I=e.course,A=e.isPrivate,w=e.isAllSubmissionsRevamp,O=e.rightPane,R=e.renderRightPane,D=e.closeRightPane,N=e.assessmentTools,k=e.activeStudentType,P=e.setActiveStudentType,x=e.setIsPageNotFound,M=e.isLearningGoalsEvaluationEnabled,L=e.newtorkStatusLoading,B=e.isLoading,j=e.isWorkbookEnabled,F=e.changeWorkbookEnable,U=e.isPdftronEnabled,H=e.changePdftronEnable,V=e.currentStudentData,W=e.onClickEvalUpdate,G=e.goToStudentAssignment,z=e.changeIsLoading;Object(o.useEffect)((function(){if(!m){var e=_.get(_.first(n),"id","");c({route:"./".concat(e),type:"replace"})}}),[n,m]),Object(o.useEffect)((function(){return Object(E.a)(),function(){Object(E.c)()}}),[]);var Y=_.filter(n,(function(e){var t=e.status;return _.includes(["ALL_STUDENTS",t],k)})),q=Object(o.useMemo)((function(){return _.map(Y,(function(e){var t=e.id,a=e.student,n=e.conversation,s=e.isSubmitted,o=e.isEvaluated,i=e.status,r=_.get(a,"firstName",""),l=_.get(a,"lastName",""),c=_.get(a,"profileImage",""),u=_.get(a,"isArchived",""),d=_.get(n,"unreadMessageCount",0);return{label:"".concat(r," ").concat(l),value:t,profileImage:c,unreadMessageCount:d,isSubmitted:s,isEvaluated:o,status:i,isArchived:u}}))}),[Y]),J=_.get(V,"status"),K=_.get(V,"isEvaluationApplicable",!0),Z=_.isEqual(_.findIndex(q,(function(e){return _.isEqual(e.value,l)})),-1);if(!L&&_.isEmpty(V))return x(!0),null;if(Z){var Q=_.get(_.first(q),"value"),X=_.get(_.find(r,(function(e){return _.isEqual(_.get(e,"id",""),Q)})),"value",{});Q?G({studentAssignmentId:Q,studentSubmissionObj:X}):P("ALL_STUDENTS")}var $=S()((t={},s()(t,u.a.container,!0),s()(t,u.a.adjustedHeight,!T),s()(t,u.a.fullHeight,T),t)),ee=(C||{}).assessmentType.value;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:$},i.a.createElement("div",{className:u.a.body},m&&i.a.cloneElement(m,{studentAssignmentId:l,assessmentFields:a,assignmentTitle:p,isStudentSubmissionEnabled:g,isTeacherEvaluationEnabled:v,isStudentEvaluationEnabled:b,contentType:h,content:C,isWorkbookEnabled:j,changeWorkbookEnable:F,isPdftronEnabled:U,changePdftronEnable:H,studentAssignmentSubmissionStatus:J,template:f,assignedStudents:n,isEvaluationApplicable:K,onClickEditEvaluationBtn:function(){W&&W({isEvaluationApplicable:K,isSharedWithStudent:!1,isEvaluated:!1,studentAssignmentId:l,changeIsLoading:z})},isCurrentAcademicYearSelected:T,isSimilarityCheckEnabled:y,course:I,isAllSubmissionsRevamp:w,rightPane:O,renderRightPane:R,assessmentTools:N,closeRightPane:D,value:ee,isLearningGoalsEvaluationEnabled:M,isPrivate:A}))),B&&i.a.createElement(d.a,null))}));C.displayName="ClassRoomMediaManager",C.defaultProps={assignedStudents:[],studentAssignmentId:""};var f={goToRelativeRoute:g.Ab,setIsPageNotFound:g.Vb,onClickEvalUpdate:v.onClickEvalUpdate},T=Object(r.c)(Object(m.a)({resource:["classRoom","assessmentEvaluation"]}),Object(l.connect)((function(e,t){var a=_.get(t,"assignmentCourseId"),n=_.get(e,"platform.academicYearSelected.isCurrentAcademicYear",!0);return{studentAssignmentId:t.params.studentAssignmentId,isArchivedClass:_.get(e,"teacher.selected_class.isArchivedClass"),assignmentCourseId:a,perm:["TeacherPortal",h.x],showErrorComp:!0,isCurrentAcademicYearSelected:n}}),f),p.a)(C);t.default=T}}]);
//# sourceMappingURL=course-classRoom.adc1dcf4.js.map